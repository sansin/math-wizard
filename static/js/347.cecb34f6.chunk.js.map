{"version":3,"file":"static/js/347.cecb34f6.chunk.js","mappings":"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","sources":["components/ProfileSettings.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { auth, db } from '../firebaseConfig';\nimport { updateDoc, doc } from 'firebase/firestore';\nimport { updatePassword } from 'firebase/auth';\n\nexport default function ProfileSettings({ userId, userProfile, onBack, onProfileUpdated }) {\n  const [editMode, setEditMode] = useState(false);\n  const [form, setForm] = useState({\n    name: userProfile?.name || '',\n    age: userProfile?.age || '',\n    grade: userProfile?.grade || '',\n  });\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [message, setMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n  const navTimerRef = useRef(null);\n\n  // Cleanup timer on unmount\n  useEffect(() => {\n    return () => {\n      if (navTimerRef.current) clearTimeout(navTimerRef.current);\n    };\n  }, []);\n\n  const handleSaveProfile = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage('');\n\n    try {\n      // Update Firestore user document\n      await updateDoc(doc(db, 'users', userId), {\n        name: form.name,\n        age: parseInt(form.age),\n        grade: parseInt(form.grade),\n        updatedAt: new Date(),\n      });\n\n      // Update password if provided\n      if (newPassword || confirmPassword) {\n        if (newPassword !== confirmPassword) {\n          setMessage('‚ùå Passwords do not match');\n          setLoading(false);\n          return;\n        }\n        if (newPassword.length < 6) {\n          setMessage('‚ùå Password must be at least 6 characters');\n          setLoading(false);\n          return;\n        }\n        try {\n          await updatePassword(auth.currentUser, newPassword);\n          setNewPassword('');\n          setConfirmPassword('');\n        } catch (pwError) {\n          if (pwError.code === 'auth/requires-recent-login') {\n            setMessage('‚ùå For security, please log out and log back in before changing your password.');\n          } else {\n            setMessage(`‚ùå Password error: ${pwError.message}`);\n          }\n          setLoading(false);\n          return;\n        }\n      }\n\n      setMessage('‚úÖ Profile updated successfully!');\n      setEditMode(false);\n      if (onProfileUpdated) await onProfileUpdated();\n      // Navigate back after a short delay so user sees the success message\n      navTimerRef.current = setTimeout(() => {\n        onBack();\n      }, 1500);\n    } catch (error) {\n      setMessage(`‚ùå Error: ${error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-violet-50 p-4 sm:p-6\">\n      <div className=\"max-w-2xl mx-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-8\">\n          <h1 className=\"text-3xl sm:text-4xl font-bold text-gray-800\">‚öôÔ∏è Settings</h1>\n          <button\n            onClick={onBack}\n            className=\"px-6 py-2 min-h-[44px] bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition\"\n          >\n            ‚Üê Back\n          </button>\n        </div>\n\n        {/* Profile Card */}\n        <div className=\"bg-white rounded-2xl shadow-xl p-8 mb-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h2 className=\"text-2xl font-bold text-gray-800\">üë§ My Profile</h2>\n            <button\n              onClick={() => setEditMode(!editMode)}\n              className={`px-4 py-2 min-h-[44px] rounded-lg font-semibold transition ${\n                editMode\n                  ? 'bg-red-500 text-white hover:bg-red-600'\n                  : 'bg-violet-500 text-white hover:bg-violet-600'\n              }`}\n            >\n              {editMode ? 'Cancel' : '‚úèÔ∏è Edit'}\n            </button>\n          </div>\n\n          {!editMode ? (\n            // Display Mode\n            <div className=\"space-y-4\">\n              <div className=\"flex justify-between items-center p-4 bg-gray-50 rounded-lg\">\n                <span className=\"font-semibold text-gray-700\">Name:</span>\n                <span className=\"text-xl text-violet-600\">{form.name}</span>\n              </div>\n              <div className=\"flex justify-between items-center p-4 bg-gray-50 rounded-lg\">\n                <span className=\"font-semibold text-gray-700\">Age:</span>\n                <span className=\"text-xl text-violet-600\">{form.age} years</span>\n              </div>\n              <div className=\"flex justify-between items-center p-4 bg-gray-50 rounded-lg\">\n                <span className=\"font-semibold text-gray-700\">Grade:</span>\n                <span className=\"text-xl text-violet-600\">Grade {form.grade}</span>\n              </div>\n              <div className=\"flex justify-between items-center p-4 bg-gray-50 rounded-lg\">\n                <span className=\"font-semibold text-gray-700\">Email:</span>\n                <span className=\"text-sm text-gray-600\">{userProfile?.email}</span>\n              </div>\n              <div className=\"flex justify-between items-center p-4 bg-gray-50 rounded-lg\">\n                <span className=\"font-semibold text-gray-700\">Account Type:</span>\n                <span className=\"text-sm font-bold px-3 py-1 rounded-full bg-violet-200 text-violet-800\">\n                  {userProfile?.isGuest ? 'Guest' : 'Premium'}\n                </span>\n              </div>\n            </div>\n          ) : (\n            // Edit Mode\n            <form onSubmit={handleSaveProfile} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-1\">\n                  Name\n                </label>\n                <input\n                  type=\"text\"\n                  value={form.name}\n                  onChange={(e) => setForm({ ...form, name: e.target.value })}\n                  maxLength={25}\n                  className=\"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600\"\n                  required\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-1\">\n                    Age\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={form.age}\n                    onChange={(e) => setForm({ ...form, age: e.target.value })}\n                    className=\"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600\"\n                    min=\"4\"\n                    max=\"18\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-1\">\n                    Grade\n                  </label>\n                  <select\n                    value={form.grade}\n                    onChange={(e) => setForm({ ...form, grade: e.target.value })}\n                    className=\"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600\"\n                    required\n                  >\n                    {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map(g => (\n                      <option key={g} value={g}>Grade {g}</option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n\n              {/* Password Section */}\n              {!userProfile?.isGuest && (\n                <>\n                  <div className=\"pt-4 border-t-2 border-gray-200\">\n                    <h3 className=\"font-semibold text-gray-800 mb-3\">üîê Change Password (Optional)</h3>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-1\">\n                      New Password\n                    </label>\n                    <input\n                      type=\"password\"\n                      value={newPassword}\n                      onChange={(e) => setNewPassword(e.target.value)}\n                      placeholder=\"Leave blank to keep current password\"\n                      className=\"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-1\">\n                      Confirm Password\n                    </label>\n                    <input\n                      type=\"password\"\n                      value={confirmPassword}\n                      onChange={(e) => setConfirmPassword(e.target.value)}\n                      placeholder=\"Confirm new password\"\n                      className=\"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600\"\n                    />\n                  </div>\n                </>\n              )}\n\n              {message && (\n                <div className={`p-3 rounded-lg text-sm font-semibold ${\n                  message.includes('‚úÖ')\n                    ? 'bg-green-100 text-green-700'\n                    : 'bg-red-100 text-red-700'\n                }`}>\n                  {message}\n                </div>\n              )}\n\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"w-full bg-gradient-to-r from-violet-500 to-purple-600 text-white font-bold py-3 min-h-[44px] rounded-lg hover:shadow-lg transform hover:scale-105 transition disabled:opacity-50\"\n              >\n                {loading ? 'Saving...' : 'üíæ Save Changes'}\n              </button>\n            </form>\n          )}\n        </div>\n\n        {/* Settings Info */}\n        <div className=\"bg-violet-50 border-l-4 border-violet-500 rounded-lg p-6\">\n          <h3 className=\"font-bold text-violet-800 mb-3\">üí° Settings Tips</h3>\n          <ul className=\"text-sm text-violet-700 space-y-2\">\n            <li>‚úÖ Update your age/grade to get better recommendations</li>\n            <li>‚úÖ Change your name anytime</li>\n            <li>‚úÖ Password changes are secure and encrypted</li>\n            <li>‚úÖ Your progress is always saved to the cloud</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["ProfileSettings","_ref","userId","userProfile","onBack","onProfileUpdated","editMode","setEditMode","useState","form","setForm","name","age","grade","newPassword","setNewPassword","confirmPassword","setConfirmPassword","message","setMessage","loading","setLoading","navTimerRef","useRef","useEffect","current","clearTimeout","_jsx","className","children","_jsxs","onClick","concat","onSubmit","async","e","preventDefault","updateDoc","doc","db","parseInt","updatedAt","Date","length","updatePassword","auth","currentUser","pwError","code","setTimeout","error","type","value","onChange","_objectSpread","target","maxLength","required","min","max","map","g","isGuest","_Fragment","placeholder","includes","disabled","email"],"ignoreList":[],"sourceRoot":""}