{"version":3,"file":"static/js/11.8a4f2321.chunk.js","mappings":"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","sources":["components/AnalyticsDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { Line, Bar } from 'react-chartjs-2';\nimport 'chart.js/auto';\nimport { getUserStats, getUserAnswerHistory } from '../services/databaseService';\nimport { getUserXP, getLevelForXP, levelProgress, getLevelTitle, xpToNextLevel } from '../services/xpService';\n\nfunction AnalyticsDashboard({ userId }) {\n  const [stats, setStats] = useState({\n    totalQuestions: 0,\n    accuracy: 0,\n    streak: 0,\n    weakAreas: [],\n    sessionData: [],\n  });\n  const [dailyAccuracy, setDailyAccuracy] = useState({ labels: [], data: [] });\n  const [xpData, setXpData] = useState({ totalXP: 0, level: 1, dailyQuestions: 0, dailyGoal: 10 });\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadAnalytics();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userId]);\n\n  const loadAnalytics = async () => {\n    setLoading(true);\n    try {\n      const [statsData, history, xp] = await Promise.all([\n        getUserStats(userId),\n        getUserAnswerHistory(userId),\n        getUserXP(userId),\n      ]);\n      setStats(statsData);\n      setXpData(xp);\n\n      // Compute daily accuracy from real answer history\n      if (history && history.length > 0) {\n        const byDay = {};\n        history.forEach(a => {\n          // Handle Firestore Timestamp or Date\n          let date;\n          if (a.timestamp?.toDate) {\n            date = a.timestamp.toDate();\n          } else if (a.timestamp) {\n            date = new Date(a.timestamp);\n          } else {\n            date = new Date();\n          }\n          const key = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n          if (!byDay[key]) byDay[key] = { correct: 0, total: 0, ts: date };\n          byDay[key].total++;\n          if (a.correct) byDay[key].correct++;\n        });\n\n        // Sort by date and take last 7 days\n        const sorted = Object.entries(byDay)\n          .sort(([, a], [, b]) => a.ts - b.ts)\n          .slice(-7);\n\n        setDailyAccuracy({\n          labels: sorted.map(([label]) => label),\n          data: sorted.map(([, d]) => Math.round((d.correct / d.total) * 100)),\n        });\n      }\n    } catch (error) {\n      console.error('Error loading analytics:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Chart data ‚Äî memoized (must be before early returns to respect hooks rules)\n  const hasChartData = dailyAccuracy.labels.length > 0;\n  const accuracyChartData = useMemo(() => ({\n    labels: hasChartData ? dailyAccuracy.labels : ['No data yet'],\n    datasets: [{\n      label: 'Accuracy (%)',\n      data: hasChartData ? dailyAccuracy.data : [0],\n      borderColor: '#7C3AED',\n      backgroundColor: 'rgba(124, 58, 237, 0.1)',\n      tension: 0.4,\n      fill: true,\n      pointRadius: 6,\n      pointBackgroundColor: '#7C3AED',\n      pointBorderColor: '#fff',\n      pointBorderWidth: 2,\n    }],\n  }), [hasChartData, dailyAccuracy]);\n\n  const weakAreaChartData = useMemo(() => ({\n    labels: stats.weakAreas.map(a => a.name.charAt(0).toUpperCase() + a.name.slice(1)),\n    datasets: [{\n      label: 'Accuracy by Topic (%)',\n      data: stats.weakAreas.map(a => a.accuracy),\n      backgroundColor: [\n        'rgba(255, 99, 132, 0.7)',\n        'rgba(54, 162, 235, 0.7)',\n        'rgba(255, 206, 86, 0.7)',\n        'rgba(75, 192, 192, 0.7)',\n        'rgba(153, 102, 255, 0.7)',\n      ],\n      borderColor: [\n        '#FF6384',\n        '#36A2EB',\n        '#FFCE56',\n        '#4BC0C0',\n        '#9966FF',\n      ],\n      borderWidth: 2,\n    }],\n  }), [stats.weakAreas]);\n\n  const chartOptions = useMemo(() => ({\n    responsive: true,\n    maintainAspectRatio: true,\n    plugins: {\n      legend: {\n        display: true,\n        labels: {\n          font: { size: 12, weight: 'bold' },\n          padding: 15,\n        },\n      },\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n        max: 100,\n        ticks: {\n          font: { size: 11 },\n        },\n      },\n      x: {\n        ticks: {\n          font: { size: 11 },\n        },\n      },\n    },\n  }), []);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-violet-50 p-4 sm:p-6\">\n        <div className=\"max-w-6xl mx-auto\">\n          {/* Skeleton: Header */}\n          <div className=\"text-center mb-8\">\n            <div className=\"skeleton h-9 w-56 mx-auto mb-3 rounded\" />\n            <div className=\"skeleton h-5 w-40 mx-auto rounded\" />\n          </div>\n          {/* Skeleton: Level & Daily Goal */}\n          <div className=\"grid sm:grid-cols-2 gap-4 mb-8\">\n            <div className=\"bg-white rounded-xl p-5 shadow-lg\">\n              <div className=\"skeleton h-5 w-20 mb-2 rounded\" />\n              <div className=\"skeleton h-7 w-32 mb-3 rounded\" />\n              <div className=\"skeleton h-3 w-full rounded-full\" />\n            </div>\n            <div className=\"bg-white rounded-xl p-5 shadow-lg\">\n              <div className=\"skeleton h-5 w-24 mb-2 rounded\" />\n              <div className=\"skeleton h-7 w-36 mb-3 rounded\" />\n              <div className=\"skeleton h-3 w-full rounded-full\" />\n            </div>\n          </div>\n          {/* Skeleton: KPI Cards */}\n          <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\n            {[1, 2, 3, 4].map(i => (\n              <div key={i} className=\"bg-white rounded-lg p-6 shadow-lg\">\n                <div className=\"skeleton h-4 w-24 mb-3 rounded\" />\n                <div className=\"skeleton h-10 w-16 mb-2 rounded\" />\n                <div className=\"skeleton h-3 w-20 rounded\" />\n              </div>\n            ))}\n          </div>\n          {/* Skeleton: Charts */}\n          <div className=\"grid md:grid-cols-2 gap-6 mb-8\">\n            <div className=\"bg-white rounded-lg p-6 shadow-lg\">\n              <div className=\"skeleton h-6 w-36 mb-4 rounded\" />\n              <div className=\"skeleton h-80 w-full rounded\" />\n            </div>\n            <div className=\"bg-white rounded-lg p-6 shadow-lg\">\n              <div className=\"skeleton h-6 w-36 mb-4 rounded\" />\n              <div className=\"skeleton h-80 w-full rounded\" />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-violet-50 p-4 sm:p-6\">\n      <div className=\"max-w-6xl mx-auto\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl sm:text-4xl font-bold text-gray-800 mb-2\">üìä Your Progress</h1>\n          <p className=\"text-gray-600\">Keep learning and improving! üöÄ</p>\n        </div>\n\n        {/* Level & Daily Goal Banner */}\n        <div className=\"grid sm:grid-cols-2 gap-4 mb-8\">\n          {/* Level Card */}\n          <div className=\"bg-white rounded-xl p-5 shadow-lg border-2 border-violet-200\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <div>\n                <p className=\"text-sm font-semibold text-gray-500\">Level {getLevelForXP(xpData.totalXP)}</p>\n                <p className=\"text-xl font-bold text-violet-600\">{getLevelTitle(getLevelForXP(xpData.totalXP))}</p>\n              </div>\n              <div className=\"text-3xl\">\n                {getLevelForXP(xpData.totalXP) >= 8 ? 'üèÜ' : getLevelForXP(xpData.totalXP) >= 5 ? '‚≠ê' : 'üå±'}\n              </div>\n            </div>\n            <div className=\"w-full h-3 bg-gray-200 rounded-full overflow-hidden\">\n              <div\n                className=\"h-full bg-gradient-to-r from-violet-400 to-purple-600 rounded-full transition-all duration-700 relative\"\n                style={{ width: `${Math.round(levelProgress(xpData.totalXP) * 100)}%` }}\n              >\n                <div className=\"absolute inset-0 xp-bar-shimmer rounded-full\" />\n              </div>\n            </div>\n            <div className=\"flex justify-between mt-1 text-xs text-gray-500\">\n              <span>‚ö° {xpData.totalXP} XP</span>\n              <span>{xpToNextLevel(xpData.totalXP) > 0 ? `${xpToNextLevel(xpData.totalXP)} XP to next level` : 'Max level!'}</span>\n            </div>\n          </div>\n\n          {/* Daily Goal Card */}\n          <div className=\"bg-white rounded-xl p-5 shadow-lg border-2 border-amber-200\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <div>\n                <p className=\"text-sm font-semibold text-gray-500\">Daily Goal</p>\n                <p className=\"text-xl font-bold text-amber-600\">\n                  {Math.min(xpData.dailyQuestions, xpData.dailyGoal)}/{xpData.dailyGoal} questions\n                </p>\n              </div>\n              <div className=\"text-3xl\">\n                {xpData.dailyQuestions >= xpData.dailyGoal ? 'üéØ' : 'üìã'}\n              </div>\n            </div>\n            <div className=\"w-full h-3 bg-gray-200 rounded-full overflow-hidden\">\n              <div\n                className=\"h-full bg-gradient-to-r from-amber-400 to-orange-500 rounded-full transition-all duration-700\"\n                style={{ width: `${Math.min(100, Math.round((xpData.dailyQuestions / xpData.dailyGoal) * 100))}%` }}\n              />\n            </div>\n            <div className=\"flex justify-between mt-1 text-xs text-gray-500\">\n              <span>{xpData.dailyQuestions >= xpData.dailyGoal ? '‚úÖ Goal complete!' : `${xpData.dailyGoal - xpData.dailyQuestions} more to go`}</span>\n              <span>{new Date().toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' })}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* KPI Cards */}\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\n          {/* Total Questions */}\n          <div className=\"bg-white rounded-lg p-6 shadow-lg border-l-4 border-amber-400\">\n            <p className=\"text-gray-600 text-sm font-semibold mb-2\">Total Questions</p>\n            <p className=\"text-3xl sm:text-4xl font-bold text-amber-500\">{stats.totalQuestions}</p>\n            <p className=\"text-xs text-gray-500 mt-2\">questions answered</p>\n          </div>\n\n          {/* Accuracy */}\n          <div className=\"bg-white rounded-lg p-6 shadow-lg border-l-4 border-emerald-400\">\n            <p className=\"text-gray-600 text-sm font-semibold mb-2\">Accuracy</p>\n            <p className=\"text-3xl sm:text-4xl font-bold text-emerald-500\">{stats.accuracy}%</p>\n            <p className=\"text-xs text-gray-500 mt-2\">overall score</p>\n          </div>\n\n          {/* Current Streak */}\n          <div className=\"bg-white rounded-lg p-6 shadow-lg border-l-4 border-violet-400\">\n            <p className=\"text-gray-600 text-sm font-semibold mb-2\">Current Streak üî•</p>\n            <p className=\"text-3xl sm:text-4xl font-bold text-violet-500\">{stats.streak}</p>\n            <p className=\"text-xs text-gray-500 mt-2\">correct in a row</p>\n          </div>\n\n          {/* Topics */}\n          <div className=\"bg-white rounded-lg p-6 shadow-lg border-l-4 border-purple-400\">\n            <p className=\"text-gray-600 text-sm font-semibold mb-2\">Topics</p>\n            <p className=\"text-3xl sm:text-4xl font-bold text-purple-500\">{stats.weakAreas.length}</p>\n            <p className=\"text-xs text-gray-500 mt-2\">types practiced</p>\n          </div>\n        </div>\n\n        {/* Charts */}\n        <div className=\"grid md:grid-cols-2 gap-6 mb-8\">\n          {/* Accuracy Trend */}\n          <div className=\"bg-white rounded-lg p-6 shadow-lg\">\n            <h3 className=\"text-xl font-bold text-gray-800 mb-4\">üìà Accuracy Trend</h3>\n            <div className=\"relative h-80\">\n              <Line data={accuracyChartData} options={chartOptions} />\n            </div>\n          </div>\n\n          {/* Weak Areas */}\n          {stats.weakAreas.length > 0 ? (\n            <div className=\"bg-white rounded-lg p-6 shadow-lg\">\n              <h3 className=\"text-xl font-bold text-gray-800 mb-4\">üìä Accuracy by Topic</h3>\n              <div className=\"relative h-80\">\n                <Bar data={weakAreaChartData} options={chartOptions} />\n              </div>\n            </div>\n          ) : (\n            <div className=\"bg-white rounded-lg p-8 shadow-lg flex flex-col items-center justify-center text-center\">\n              <div className=\"text-5xl mb-3\">üìä</div>\n              <p className=\"text-lg font-bold text-gray-700 mb-1\">No topic data yet!</p>\n              <p className=\"text-sm text-gray-500\">Answer some questions and your charts will appear here.</p>\n            </div>\n          )}\n        </div>\n\n        {/* Focus Areas */}\n        <div className=\"bg-white rounded-lg p-6 shadow-lg\">\n          <h3 className=\"text-2xl font-bold text-gray-800 mb-6\">üí™ Focus Areas</h3>\n          {stats.weakAreas.length > 0 ? (\n            <ul className=\"space-y-3\">\n              {stats.weakAreas.map((area, i) => {\n                let color = 'bg-red-100';\n                let textColor = 'text-red-700';\n                let badgeColor = 'bg-red-500';\n\n                if (area.accuracy >= 70) {\n                  color = 'bg-green-100';\n                  textColor = 'text-green-700';\n                  badgeColor = 'bg-green-500';\n                } else if (area.accuracy >= 50) {\n                  color = 'bg-yellow-100';\n                  textColor = 'text-yellow-700';\n                  badgeColor = 'bg-yellow-500';\n                }\n\n                return (\n                  <div\n                    key={i}\n                    className={`flex justify-between items-center p-4 ${color} rounded-lg border-l-4 ${\n                      area.accuracy >= 70 ? 'border-green-500' : area.accuracy >= 50 ? 'border-yellow-500' : 'border-red-500'\n                    }`}\n                  >\n                    <div>\n                      <span className={`font-semibold ${textColor} block capitalize text-lg`}>\n                        {area.name}\n                      </span>\n                      <span className=\"text-sm text-gray-600\">\n                        {area.total} questions\n                      </span>\n                    </div>\n                    <span className={`px-4 py-2 rounded-full text-white text-lg font-bold ${badgeColor}`}>\n                      {area.accuracy}%\n                    </span>\n                  </div>\n                );\n              })}\n            </ul>\n          ) : (\n            <div className=\"text-center py-8\">\n              <div className=\"text-5xl mb-3\">üßô</div>\n              <p className=\"text-lg font-bold text-gray-700 mb-1\">No progress data yet!</p>\n              <p className=\"text-sm text-gray-500\">Start practicing and your focus areas will show up here.</p>\n            </div>\n          )}\n        </div>\n\n        {/* Tips Section */}\n        <div className=\"bg-gradient-to-r from-violet-50 to-purple-50 rounded-lg p-6 mt-8\">\n          <h3 className=\"text-xl font-bold text-gray-800 mb-4\">üí° Tips for Success</h3>\n          <ul className=\"grid md:grid-cols-2 gap-4 text-gray-700\">\n            <li className=\"flex items-start\">\n              <span className=\"text-2xl mr-3\">üéØ</span>\n              <span>Focus on weak areas to improve faster</span>\n            </li>\n            <li className=\"flex items-start\">\n              <span className=\"text-2xl mr-3\">üî•</span>\n              <span>Build streaks by answering correctly in a row</span>\n            </li>\n            <li className=\"flex items-start\">\n              <span className=\"text-2xl mr-3\">üìö</span>\n              <span>Practice different operation types regularly</span>\n            </li>\n            <li className=\"flex items-start\">\n              <span className=\"text-2xl mr-3\">‚è∞</span>\n              <span>Challenge yourself with timed tests</span>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default React.memo(AnalyticsDashboard);\n"],"names":["AnalyticsDashboard","_ref","userId","stats","setStats","useState","totalQuestions","accuracy","streak","weakAreas","sessionData","dailyAccuracy","setDailyAccuracy","labels","data","xpData","setXpData","totalXP","level","dailyQuestions","dailyGoal","loading","setLoading","useEffect","loadAnalytics","async","statsData","history","xp","Promise","all","getUserStats","getUserAnswerHistory","getUserXP","length","byDay","forEach","a","_a$timestamp","date","timestamp","toDate","Date","key","toLocaleDateString","month","day","correct","total","ts","sorted","Object","entries","sort","_ref2","_ref3","b","slice","map","_ref4","label","_ref5","d","Math","round","error","console","hasChartData","accuracyChartData","useMemo","datasets","borderColor","backgroundColor","tension","fill","pointRadius","pointBackgroundColor","pointBorderColor","pointBorderWidth","weakAreaChartData","name","charAt","toUpperCase","borderWidth","chartOptions","responsive","maintainAspectRatio","plugins","legend","display","font","size","weight","padding","scales","y","beginAtZero","max","ticks","x","_jsx","className","children","_jsxs","i","getLevelForXP","getLevelTitle","style","width","concat","levelProgress","xpToNextLevel","min","weekday","Line","options","Bar","area","color","textColor","badgeColor","React"],"ignoreList":[],"sourceRoot":""}