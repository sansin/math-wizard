/*! For license information please see main.3d23bbfd.js.LICENSE.txt */
(()=>{"use strict";var t={43(t,e,n){t.exports=n(202)},153(t,e,n){var i=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)o.call(e,i)&&!l.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===s[i]&&(s[i]=e[i]);return{$$typeof:r,type:t,key:c,ref:u,props:s,_owner:a.current}}e.Fragment=s,e.jsx=c,e.jsxs=c},202(t,e){var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}function v(){}function b(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,g(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(t,e,i){var r,s={},o=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)_.call(e,r)&&!S.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:t,key:o,ref:a,props:s,_owner:E.current}}function T(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var I=/\/+/g;function C(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(t){return e[t]})}(""+t.key):e.toString(36)}function A(t,e,r,s,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=t),t=""===s?"."+C(l,0):s,x(o)?(r="",null!=t&&(r=t.replace(I,"$&/")+"/"),A(o,e,r,"",function(t){return t})):null!=o&&(T(o)&&(o=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+t)),e.push(o)),1;if(l=0,s=""===s?".":s+":",x(t))for(var c=0;c<t.length;c++){var u=s+C(a=t[c],c);l+=A(a,e,r,u,o)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(a=t.next()).done;)l+=A(a=a.value,e,r,u=s+C(a,c++),o);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function N(t,e,n){if(null==t)return t;var i=[],r=0;return A(t,i,"","",function(t){return e.call(n,t,r++)}),i}function P(t){if(-1===t._status){var e=t._result;(e=e()).then(function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)},function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)}),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var M={current:null},R={transition:null},O={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:R,ReactCurrentOwner:E};function D(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:N,forEach:function(t,e,n){N(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return N(t,function(){e++}),e},toArray:function(t){return N(t,function(t){return t})||[]},only:function(t){if(!T(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=r,e.Profiler=o,e.PureComponent=b,e.StrictMode=s,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,e.act=D,e.cloneElement=function(t,e,i){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=g({},t.props),s=t.key,o=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,a=E.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)_.call(e,c)&&!S.hasOwnProperty(c)&&(r[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:t.type,key:s,ref:o,props:r,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=k,e.createFactory=function(t){var e=k.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=T,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:P}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=R.transition;R.transition={};try{t()}finally{R.transition=e}},e.unstable_act=D,e.useCallback=function(t,e){return M.current.useCallback(t,e)},e.useContext=function(t){return M.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return M.current.useDeferredValue(t)},e.useEffect=function(t,e){return M.current.useEffect(t,e)},e.useId=function(){return M.current.useId()},e.useImperativeHandle=function(t,e,n){return M.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return M.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return M.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return M.current.useMemo(t,e)},e.useReducer=function(t,e,n){return M.current.useReducer(t,e,n)},e.useRef=function(t){return M.current.useRef(t)},e.useState=function(t){return M.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return M.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return M.current.useTransition()},e.version="18.3.1"},234(t,e){function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<s(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,o=r>>>1;i<o;){var a=2*(i+1)-1,l=t[a],c=a+1,u=t[c];if(0>s(l,n))c<r&&0>s(u,l)?(t[i]=u,t[c]=n,i=c):(t[i]=l,t[a]=n,i=a);else{if(!(c<r&&0>s(u,n)))break t;t[i]=u,t[c]=n,i=c}}}return e}function s(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(t){for(var e=i(u);null!==e;){if(null===e.callback)r(u);else{if(!(e.startTime<=t))break;r(u),e.sortIndex=e.expirationTime,n(c,e)}e=i(u)}}function x(t){if(m=!1,w(t),!g)if(null!==i(c))g=!0,R(_);else{var e=i(u);null!==e&&O(x,e.startTime-t)}}function _(t,n){g=!1,m&&(m=!1,v(T),T=-1),p=!0;var s=f;try{for(w(n),d=i(c);null!==d&&(!(d.expirationTime>n)||t&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?d.callback=a:d===i(c)&&r(c),w(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&O(x,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,k=null,T=-1,I=5,C=-1;function A(){return!(e.unstable_now()-C<I)}function N(){if(null!==k){var t=e.unstable_now();C=t;var n=!0;try{n=k(!0,t)}finally{n?E():(S=!1,k=null)}}else S=!1}if("function"===typeof b)E=function(){b(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,M=P.port2;P.port1.onmessage=N,E=function(){M.postMessage(null)}}else E=function(){y(N,0)};function R(t){k=t,S||(S=!0,E())}function O(t,n){T=y(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,R(_))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return i(c)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,r,s){var o=e.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:h++,callback:r,priorityLevel:t,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(t.sortIndex=s,n(u,t),null===i(c)&&t===i(u)&&(m?(v(T),T=-1):m=!0,O(x,s-o))):(t.sortIndex=a,n(c,t),g||p||(g=!0,R(_))),t},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},391(t,e,n){var i=n(950);e.createRoot=i.createRoot,e.hydrateRoot=i.hydrateRoot},579(t,e,n){t.exports=n(153)},730(t,e,n){var i=n(43),r=n(853);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(a[t]=e,t=0;t<e.length;t++)o.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(t,e,n,i,r,s,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){m[t]=new g(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];m[e]=new g(e,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){m[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){m[t]=new g(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){m[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){m[t]=new g(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){m[t]=new g(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){m[t]=new g(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){m[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function b(t,e,n,i){var r=m.hasOwnProperty(e)?m[e]:null;(null!==r?0!==r.type:i||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,i){if(null===e||"undefined"===typeof e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!h.call(p,t)||!h.call(f,t)&&(d.test(t)?p[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(y,v);m[e]=new g(e,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(y,v);m[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(y,v);m[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)});var w=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function D(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=O&&t[O]||t["@@iterator"])?t:null}var L,F=Object.assign;function j(t){if(void 0===L)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);L=e&&e[1]||""}return"\n"+L+t}var U=!1;function V(t,e){if(!t||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||r[o]!==s[a]){var l="\n"+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?j(t):""}function z(t){switch(t.tag){case 5:return j(t.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return t=V(t.type,!1);case 11:return t=V(t.type.render,!1);case 1:return t=V(t.type,!0);default:return""}}function B(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case E:return"Fragment";case _:return"Portal";case k:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case I:return(t.displayName||"Context")+".Consumer";case T:return(t._context.displayName||"Context")+".Provider";case C:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case P:return null!==(e=t.displayName||null)?e:B(t.type)||"Memo";case M:e=t._payload,t=t._init;try{return B(t(e))}catch(n){}}return null}function W(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(e);case 8:return e===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function H(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function q(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function G(t){t._valueTracker||(t._valueTracker=function(t){var e=q(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,s.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function K(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=q(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function Q(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(qr){return t.body}}function Y(t,e){var n=e.checked;return F({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function X(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=H(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function J(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function $(t,e){J(t,e);var n=H(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,H(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Z(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&Q(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+H(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function it(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return F({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(et(n)){if(1<n.length)throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:H(n)}}function st(t,e){var n=H(e.value),i=H(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function ot(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,ht=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction(function(){return ut(t,e)})}:ut);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function gt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=gt(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(ft).forEach(function(t){pt.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]})});var yt=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(s(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wt=null;function xt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var _t=null,Et=null,St=null;function kt(t){if(t=br(t)){if("function"!==typeof _t)throw Error(s(280));var e=t.stateNode;e&&(e=xr(e),_t(t.stateNode,t.type,e))}}function Tt(t){Et?St?St.push(t):St=[t]:Et=t}function It(){if(Et){var t=Et,e=St;if(St=Et=null,kt(t),e)for(t=0;t<e.length;t++)kt(e[t])}}function Ct(t,e){return t(e)}function At(){}var Nt=!1;function Pt(t,e,n){if(Nt)return t(e,n);Nt=!0;try{return Ct(t,e,n)}finally{Nt=!1,(null!==Et||null!==St)&&(At(),It())}}function Mt(t,e){var n=t.stateNode;if(null===n)return null;var i=xr(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(s(231,e,typeof n));return n}var Rt=!1;if(u)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){Rt=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch(ut){Rt=!1}function Dt(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Lt=!1,Ft=null,jt=!1,Ut=null,Vt={onError:function(t){Lt=!0,Ft=t}};function zt(t,e,n,i,r,s,o,a,l){Lt=!1,Ft=null,Dt.apply(Vt,arguments)}function Bt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Wt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Ht(t){if(Bt(t)!==t)throw Error(s(188))}function qt(t){return t=function(t){var e=t.alternate;if(!e){if(null===(e=Bt(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Ht(r),t;if(o===i)return Ht(r),e;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t),null!==t?Gt(t):null}function Gt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Gt(t);if(null!==e)return e;t=t.sibling}return null}var Kt=r.unstable_scheduleCallback,Qt=r.unstable_cancelCallback,Yt=r.unstable_shouldYield,Xt=r.unstable_requestPaint,Jt=r.unstable_now,$t=r.unstable_getCurrentPriorityLevel,Zt=r.unstable_ImmediatePriority,te=r.unstable_UserBlockingPriority,ee=r.unstable_NormalPriority,ne=r.unstable_LowPriority,ie=r.unstable_IdlePriority,re=null,se=null;var oe=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(ae(t)/le|0)|0},ae=Math.log,le=Math.LN2;var ce=64,ue=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=268435455&n;if(0!==o){var a=o&~r;0!==a?i=he(a):0!==(s&=o)&&(i=he(s))}else 0!==(o=n&~r)?i=he(o):0!==s&&(i=he(s));if(0===i)return 0;if(0!==e&&e!==i&&0===(e&r)&&((r=i&-i)>=(s=e&-e)||16===r&&0!==(4194240&s)))return e;if(0!==(4&i)&&(i|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-oe(e)),i|=t[n],e&=~r;return i}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ge(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ye(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-oe(e)]=n}function ve(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-oe(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var be=0;function we(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var xe,_e,Ee,Se,ke,Te=!1,Ie=[],Ce=null,Ae=null,Ne=null,Pe=new Map,Me=new Map,Re=[],Oe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function De(t,e){switch(t){case"focusin":case"focusout":Ce=null;break;case"dragenter":case"dragleave":Ae=null;break;case"mouseover":case"mouseout":Ne=null;break;case"pointerover":case"pointerout":Pe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Me.delete(e.pointerId)}}function Le(t,e,n,i,r,s){return null===t||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==e&&(null!==(e=br(e))&&_e(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function Fe(t){var e=vr(t.target);if(null!==e){var n=Bt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Wt(n)))return t.blockedOn=e,void ke(t.priority,function(){Ee(n)})}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function je(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ye(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=br(n))&&_e(e),t.blockedOn=n,!1;var i=new(n=t.nativeEvent).constructor(n.type,n);wt=i,n.target.dispatchEvent(i),wt=null,e.shift()}return!0}function Ue(t,e,n){je(t)&&n.delete(e)}function Ve(){Te=!1,null!==Ce&&je(Ce)&&(Ce=null),null!==Ae&&je(Ae)&&(Ae=null),null!==Ne&&je(Ne)&&(Ne=null),Pe.forEach(Ue),Me.forEach(Ue)}function ze(t,e){t.blockedOn===e&&(t.blockedOn=null,Te||(Te=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ve)))}function Be(t){function e(e){return ze(e,t)}if(0<Ie.length){ze(Ie[0],t);for(var n=1;n<Ie.length;n++){var i=Ie[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==Ce&&ze(Ce,t),null!==Ae&&ze(Ae,t),null!==Ne&&ze(Ne,t),Pe.forEach(e),Me.forEach(e),n=0;n<Re.length;n++)(i=Re[n]).blockedOn===t&&(i.blockedOn=null);for(;0<Re.length&&null===(n=Re[0]).blockedOn;)Fe(n),null===n.blockedOn&&Re.shift()}var We=w.ReactCurrentBatchConfig,He=!0;function qe(t,e,n,i){var r=be,s=We.transition;We.transition=null;try{be=1,Ke(t,e,n,i)}finally{be=r,We.transition=s}}function Ge(t,e,n,i){var r=be,s=We.transition;We.transition=null;try{be=4,Ke(t,e,n,i)}finally{be=r,We.transition=s}}function Ke(t,e,n,i){if(He){var r=Ye(t,e,n,i);if(null===r)Hi(t,e,i,Qe,n),De(t,i);else if(function(t,e,n,i,r){switch(e){case"focusin":return Ce=Le(Ce,t,e,n,i,r),!0;case"dragenter":return Ae=Le(Ae,t,e,n,i,r),!0;case"mouseover":return Ne=Le(Ne,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Pe.set(s,Le(Pe.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Me.set(s,Le(Me.get(s)||null,t,e,n,i,r)),!0}return!1}(r,t,e,n,i))i.stopPropagation();else if(De(t,i),4&e&&-1<Oe.indexOf(t)){for(;null!==r;){var s=br(r);if(null!==s&&xe(s),null===(s=Ye(t,e,n,i))&&Hi(t,e,i,Qe,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Hi(t,e,i,null,n)}}var Qe=null;function Ye(t,e,n,i){if(Qe=null,null!==(t=vr(t=xt(i))))if(null===(e=Bt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Wt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qe=t,null}function Xe(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($t()){case Zt:return 1;case te:return 4;case ee:case ne:return 16;case ie:return 536870912;default:return 16}default:return 16}}var Je=null,$e=null,Ze=null;function tn(){if(Ze)return Ze;var t,e,n=$e,i=n.length,r="value"in Je?Je.value:Je.textContent,s=r.length;for(t=0;t<i&&n[t]===r[t];t++);var o=i-t;for(e=1;e<=o&&n[i-e]===r[s-e];e++);return Ze=r.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function sn(t){function e(e,n,i,r,s){for(var o in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(on=t.screenX-ln.screenX,an=t.screenY-ln.screenY):an=on=0,ln=t),on)},movementY:function(t){return"movementY"in t?t.movementY:an}}),pn=sn(fn),gn=sn(F({},fn,{dataTransfer:0})),mn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bn=sn(vn),wn=sn(F({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=En[t])&&!!e[t]}function kn(){return Sn}var Tn=F({},hn,{key:function(t){if(t.key){var e=xn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?_n[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),In=sn(Tn),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Nn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=sn(Pn),Rn=[9,13,27,32],On=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Dn,Fn=u&&(!On||Dn&&8<Dn&&11>=Dn),jn=String.fromCharCode(32),Un=!1;function Vn(t,e){switch(t){case"keyup":return-1!==Rn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Bn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Wn[t.type]:"textarea"===e}function qn(t,e,n,i){Tt(i),0<(e=Gi(e,"onChange")).length&&(n=new un("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Gn=null,Kn=null;function Qn(t){ji(t,0)}function Yn(t){if(K(wr(t)))return t}function Xn(t,e){if("change"===t)return e}var Jn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),Zn="function"===typeof ti.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function ei(){Gn&&(Gn.detachEvent("onpropertychange",ni),Kn=Gn=null)}function ni(t){if("value"===t.propertyName&&Yn(Kn)){var e=[];qn(e,Kn,t,xt(t)),Pt(Qn,e)}}function ii(t,e,n){"focusin"===t?(ei(),Kn=n,(Gn=e).attachEvent("onpropertychange",ni)):"focusout"===t&&ei()}function ri(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Yn(Kn)}function si(t,e){if("click"===t)return Yn(e)}function oi(t,e){if("input"===t||"change"===t)return Yn(e)}var ai="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function li(t,e){if(ai(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(e,r)||!ai(t[r],e[r]))return!1}return!0}function ci(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ui(t,e){var n,i=ci(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=ci(i)}}function hi(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hi(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function di(){for(var t=window,e=Q();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=Q((t=e.contentWindow).document)}return e}function fi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pi(t){var e=di(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(e=i.start,void 0===(t=i.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=ui(n,s);var o=ui(n,i);r&&o&&(1!==t.rangeCount||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&((e=e.createRange()).setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,yi=null,vi=null,bi=!1;function wi(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==mi||mi!==Q(i)||("selectionStart"in(i=mi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vi&&li(vi,i)||(vi=i,0<(i=Gi(yi,"onSelect")).length&&(e=new un("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=mi)))}function xi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _i={animationend:xi("Animation","AnimationEnd"),animationiteration:xi("Animation","AnimationIteration"),animationstart:xi("Animation","AnimationStart"),transitionend:xi("Transition","TransitionEnd")},Ei={},Si={};function ki(t){if(Ei[t])return Ei[t];if(!_i[t])return t;var e,n=_i[t];for(e in n)if(n.hasOwnProperty(e)&&e in Si)return Ei[t]=n[e];return t}u&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete _i.animationend.animation,delete _i.animationiteration.animation,delete _i.animationstart.animation),"TransitionEvent"in window||delete _i.transitionend.transition);var Ti=ki("animationend"),Ii=ki("animationiteration"),Ci=ki("animationstart"),Ai=ki("transitionend"),Ni=new Map,Pi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(t,e){Ni.set(t,e),l(e,[t])}for(var Ri=0;Ri<Pi.length;Ri++){var Oi=Pi[Ri];Mi(Oi.toLowerCase(),"on"+(Oi[0].toUpperCase()+Oi.slice(1)))}Mi(Ti,"onAnimationEnd"),Mi(Ii,"onAnimationIteration"),Mi(Ci,"onAnimationStart"),Mi("dblclick","onDoubleClick"),Mi("focusin","onFocus"),Mi("focusout","onBlur"),Mi(Ai,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Li=new Set("cancel close invalid load scroll toggle".split(" ").concat(Di));function Fi(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,r,o,a,l,c){if(zt.apply(this,arguments),Lt){if(!Lt)throw Error(s(198));var u=Ft;Lt=!1,Ft=null,jt||(jt=!0,Ut=u)}}(i,e,void 0,t),t.currentTarget=null}function ji(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break t;Fi(r,a,c),s=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break t;Fi(r,a,c),s=l}}}if(jt)throw t=Ut,jt=!1,Ut=null,t}function Ui(t,e){var n=e[gr];void 0===n&&(n=e[gr]=new Set);var i=t+"__bubble";n.has(i)||(Wi(e,t,2,!1),n.add(i))}function Vi(t,e,n){var i=0;e&&(i|=4),Wi(n,t,i,e)}var zi="_reactListening"+Math.random().toString(36).slice(2);function Bi(t){if(!t[zi]){t[zi]=!0,o.forEach(function(e){"selectionchange"!==e&&(Li.has(e)||Vi(e,!1,t),Vi(e,!0,t))});var e=9===t.nodeType?t:t.ownerDocument;null===e||e[zi]||(e[zi]=!0,Vi("selectionchange",!1,e))}}function Wi(t,e,n,i){switch(Xe(e)){case 1:var r=qe;break;case 4:r=Ge;break;default:r=Ke}n=r.bind(null,e,n,t),r=void 0,!Rt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Hi(t,e,n,i,r){var s=i;if(0===(1&e)&&0===(2&e)&&null!==i)t:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==a;){if(null===(o=vr(a)))return;if(5===(l=o.tag)||6===l){i=s=o;continue t}a=a.parentNode}}i=i.return}Pt(function(){var i=s,r=xt(n),o=[];t:{var a=Ni.get(t);if(void 0!==a){var l=un,c=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Ti:case Ii:case Ci:l=yn;break;case Ai:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&e),h=!u&&"scroll"===t,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Mt(p,d))&&u.push(qi(p,g,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,r),o.push({event:a,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||n===wt||!(c=n.relatedTarget||n.fromElement)||!vr(c)&&!c[pr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?vr(c):null)&&(c!==(h=Bt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(u=Cn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:wr(l),f=null==c?a:wr(c),(a=new u(g,p+"leave",l,n,r)).target=h,a.relatedTarget=f,g=null,vr(r)===i&&((u=new u(d,p+"enter",c,n,r)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)t:{for(d=c,p=0,f=u=l;f;f=Ki(f))p++;for(f=0,g=d;g;g=Ki(g))f++;for(;0<p-f;)u=Ki(u),p--;for(;0<f-p;)d=Ki(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break t;u=Ki(u),d=Ki(d)}u=null}else u=null;null!==l&&Qi(o,a,l,u,!1),null!==c&&null!==h&&Qi(o,h,c,u,!0)}if("select"===(l=(a=i?wr(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Xn;else if(Hn(a))if(Jn)m=oi;else{m=ri;var y=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=si);switch(m&&(m=m(t,i))?qn(o,m,n,r):(y&&y(t,a,i),"focusout"===t&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&tt(a,"number",a.value)),y=i?wr(i):window,t){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mi=y,yi=i,vi=null);break;case"focusout":vi=yi=mi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,wi(o,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":wi(o,n,r)}var v;if(On)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Bn?Vn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=tn()):($e="value"in(Je=r)?Je.value:Je.textContent,Bn=!0)),0<(y=Gi(i,b)).length&&(b=new wn(b,t,null,n,r),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=Ln?function(t,e){switch(t){case"compositionend":return zn(e);case"keypress":return 32!==e.which?null:(Un=!0,jn);case"textInput":return(t=e.data)===jn&&Un?null:t;default:return null}}(t,n):function(t,e){if(Bn)return"compositionend"===t||!On&&Vn(t,e)?(t=tn(),Ze=$e=Je=null,Bn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(i=Gi(i,"onBeforeInput")).length&&(r=new wn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=v))}ji(o,e)})}function qi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gi(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Mt(t,n))&&i.unshift(qi(t,s,r)),null!=(s=Mt(t,e))&&i.push(qi(t,s,r))),t=t.return}return i}function Ki(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Qi(t,e,n,i,r){for(var s=e._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Mt(n,s))&&o.unshift(qi(n,l,a)):r||null!=(l=Mt(n,s))&&o.push(qi(n,l,a))),n=n.return}0!==o.length&&t.push({event:e,listeners:o})}var Yi=/\r\n?/g,Xi=/\u0000|\uFFFD/g;function Ji(t){return("string"===typeof t?t:""+t).replace(Yi,"\n").replace(Xi,"")}function $i(t,e,n){if(e=Ji(e),Ji(t)!==e&&n)throw Error(s(425))}function Zi(){}var tr=null,er=null;function nr(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(t){return sr.resolve(null).then(t).catch(ar)}:ir;function ar(t){setTimeout(function(){throw t})}function lr(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return t.removeChild(r),void Be(e);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Be(e)}function cr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ur(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,fr="__reactProps$"+hr,pr="__reactContainer$"+hr,gr="__reactEvents$"+hr,mr="__reactListeners$"+hr,yr="__reactHandles$"+hr;function vr(t){var e=t[dr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pr]||n[dr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ur(t);null!==t;){if(n=t[dr])return n;t=ur(t)}return e}n=(t=n).parentNode}return null}function br(t){return!(t=t[dr]||t[pr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function wr(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function xr(t){return t[fr]||null}var _r=[],Er=-1;function Sr(t){return{current:t}}function kr(t){0>Er||(t.current=_r[Er],_r[Er]=null,Er--)}function Tr(t,e){Er++,_r[Er]=t.current,t.current=e}var Ir={},Cr=Sr(Ir),Ar=Sr(!1),Nr=Ir;function Pr(t,e){var n=t.type.contextTypes;if(!n)return Ir;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Mr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Rr(){kr(Ar),kr(Cr)}function Or(t,e,n){if(Cr.current!==Ir)throw Error(s(168));Tr(Cr,e),Tr(Ar,n)}function Dr(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in e))throw Error(s(108,W(t)||"Unknown",r));return F({},n,i)}function Lr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ir,Nr=Cr.current,Tr(Cr,t),Tr(Ar,Ar.current),!0}function Fr(t,e,n){var i=t.stateNode;if(!i)throw Error(s(169));n?(t=Dr(t,e,Nr),i.__reactInternalMemoizedMergedChildContext=t,kr(Ar),kr(Cr),Tr(Cr,t)):kr(Ar),Tr(Ar,n)}var jr=null,Ur=!1,Vr=!1;function zr(t){null===jr?jr=[t]:jr.push(t)}function Br(){if(!Vr&&null!==jr){Vr=!0;var t=0,e=be;try{var n=jr;for(be=1;t<n.length;t++){var i=n[t];do{i=i(!0)}while(null!==i)}jr=null,Ur=!1}catch(r){throw null!==jr&&(jr=jr.slice(t+1)),Kt(Zt,Br),r}finally{be=e,Vr=!1}}return null}var Wr=[],Hr=0,Gr=null,Kr=0,Qr=[],Yr=0,Xr=null,Jr=1,$r="";function Zr(t,e){Wr[Hr++]=Kr,Wr[Hr++]=Gr,Gr=t,Kr=e}function ts(t,e,n){Qr[Yr++]=Jr,Qr[Yr++]=$r,Qr[Yr++]=Xr,Xr=t;var i=Jr;t=$r;var r=32-oe(i)-1;i&=~(1<<r),n+=1;var s=32-oe(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Jr=1<<32-oe(e)+r|n<<r|i,$r=s+t}else Jr=1<<s|n<<r|i,$r=t}function es(t){null!==t.return&&(Zr(t,1),ts(t,1,0))}function ns(t){for(;t===Gr;)Gr=Wr[--Hr],Wr[Hr]=null,Kr=Wr[--Hr],Wr[Hr]=null;for(;t===Xr;)Xr=Qr[--Yr],Qr[Yr]=null,$r=Qr[--Yr],Qr[Yr]=null,Jr=Qr[--Yr],Qr[Yr]=null}var is=null,rs=null,ss=!1,os=null;function as(t,e){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function ls(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,is=t,rs=cr(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,is=t,rs=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Xr?{id:Jr,overflow:$r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=e,n.return=t,t.child=n,is=t,rs=null,!0);default:return!1}}function cs(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function us(t){if(ss){var e=rs;if(e){var n=e;if(!ls(t,e)){if(cs(t))throw Error(s(418));e=cr(n.nextSibling);var i=is;e&&ls(t,e)?as(i,n):(t.flags=-4097&t.flags|2,ss=!1,is=t)}}else{if(cs(t))throw Error(s(418));t.flags=-4097&t.flags|2,ss=!1,is=t}}}function hs(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;is=t}function ds(t){if(t!==is)return!1;if(!ss)return hs(t),ss=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!nr(t.type,t.memoizedProps)),e&&(e=rs)){if(cs(t))throw fs(),Error(s(418));for(;e;)as(t,e),e=cr(e.nextSibling)}if(hs(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){rs=cr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}rs=null}}else rs=is?cr(t.stateNode.nextSibling):null;return!0}function fs(){for(var t=rs;t;)t=cr(t.nextSibling)}function ps(){rs=is=null,ss=!1}function gs(t){null===os?os=[t]:os.push(t)}var ms=w.ReactCurrentBatchConfig;function ys(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,t));var r=i,o=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=r.refs;null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}if("string"!==typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function vs(t,e){throw t=Object.prototype.toString.call(e),Error(s(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bs(t){return(0,t._init)(t._payload)}function ws(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=Rc(t,e)).index=0,t.sibling=null,t}function o(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=2,n):i:(e.flags|=2,n):(e.flags|=1048576,n)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=Fc(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function c(t,e,n,i){var s=n.type;return s===E?h(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===M&&bs(s)===e.type)?((i=r(e,n.props)).ref=ys(t,e,n),i.return=t,i):((i=Oc(n.type,n.key,n.props,null,t.mode,i)).ref=ys(t,e,n),i.return=t,i)}function u(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=jc(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function h(t,e,n,i,s){return null===e||7!==e.tag?((e=Dc(n,t.mode,i,s)).return=t,e):((e=r(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Fc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case x:return(n=Oc(e.type,e.key,e.props,null,t.mode,n)).ref=ys(t,null,e),n.return=t,n;case _:return(e=jc(e,t.mode,n)).return=t,e;case M:return d(t,(0,e._init)(e._payload),n)}if(et(e)||D(e))return(e=Dc(e,t.mode,n,null)).return=t,e;vs(t,e)}return null}function f(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===r?c(t,e,n,i):null;case _:return n.key===r?u(t,e,n,i):null;case M:return f(t,e,(r=n._init)(n._payload),i)}if(et(n)||D(n))return null!==r?null:h(t,e,n,i,null);vs(t,n)}return null}function p(t,e,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case x:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r);case _:return u(e,t=t.get(null===i.key?n:i.key)||null,i,r);case M:return p(t,e,n,(0,i._init)(i._payload),r)}if(et(i)||D(i))return h(e,t=t.get(n)||null,i,r,null);vs(e,i)}return null}function g(r,s,a,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(r,h,a[g],l);if(null===y){null===h&&(h=m);break}t&&h&&null===y.alternate&&e(r,h),s=o(y,s,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===a.length)return n(r,h),ss&&Zr(r,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(r,a[g],l))&&(s=o(h,s,g),null===u?c=h:u.sibling=h,u=h);return ss&&Zr(r,g),c}for(h=i(r,h);g<a.length;g++)null!==(m=p(h,r,g,a[g],l))&&(t&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===u?c=m:u.sibling=m,u=m);return t&&h.forEach(function(t){return e(r,t)}),ss&&Zr(r,g),c}function m(r,a,l,c){var u=D(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(r,g,v.value,c);if(null===b){null===g&&(g=y);break}t&&g&&null===b.alternate&&e(r,g),a=o(b,a,m),null===h?u=b:h.sibling=b,h=b,g=y}if(v.done)return n(r,g),ss&&Zr(r,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(r,v.value,c))&&(a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return ss&&Zr(r,m),u}for(g=i(r,g);!v.done;m++,v=l.next())null!==(v=p(g,r,m,v.value,c))&&(t&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return t&&g.forEach(function(t){return e(r,t)}),ss&&Zr(r,m),u}return function t(i,s,o,l){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:t:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===E){if(7===u.tag){n(i,u.sibling),(s=r(u,o.props.children)).return=i,i=s;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&bs(c)===u.type){n(i,u.sibling),(s=r(u,o.props)).ref=ys(i,u,o),s.return=i,i=s;break t}n(i,u);break}e(i,u),u=u.sibling}o.type===E?((s=Dc(o.props.children,i.mode,l,o.key)).return=i,i=s):((l=Oc(o.type,o.key,o.props,null,i.mode,l)).ref=ys(i,s,o),l.return=i,i=l)}return a(i);case _:t:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(i,s.sibling),(s=r(s,o.children||[])).return=i,i=s;break t}n(i,s);break}e(i,s),s=s.sibling}(s=jc(o,i.mode,l)).return=i,i=s}return a(i);case M:return t(i,s,(u=o._init)(o._payload),l)}if(et(o))return g(i,s,o,l);if(D(o))return m(i,s,o,l);vs(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,o)).return=i,i=s):(n(i,s),(s=Fc(o,i.mode,l)).return=i,i=s),a(i)):n(i,s)}}var xs=ws(!0),_s=ws(!1),Es=Sr(null),Ss=null,ks=null,Ts=null;function Is(){Ts=ks=Ss=null}function Cs(t){var e=Es.current;kr(Es),t._currentValue=e}function As(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ns(t,e){Ss=t,Ts=ks=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(wa=!0),t.firstContext=null)}function Ps(t){var e=t._currentValue;if(Ts!==t)if(t={context:t,memoizedValue:e,next:null},null===ks){if(null===Ss)throw Error(s(308));ks=t,Ss.dependencies={lanes:0,firstContext:t}}else ks=ks.next=t;return e}var Ms=null;function Rs(t){null===Ms?Ms=[t]:Ms.push(t)}function Os(t,e,n,i){var r=e.interleaved;return null===r?(n.next=n,Rs(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ds(t,i)}function Ds(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Fs(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function js(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Us(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vs(t,e,n){var i=t.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Cl)){var r=i.pending;return null===r?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ds(t,n)}return null===(r=i.interleaved)?(e.next=e,Rs(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ds(t,n)}function zs(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ve(t,n)}}function Bs(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?r=s=e:s=s.next=e}else r=s=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ws(t,e,n,i){var r=t.updateQueue;Ls=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=t.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=r.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=t,g=a;switch(d=e,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break t}h=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break t;h=F({},h,d);break t;case 2:Ls=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(d=r.effects)?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(d=a).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(e=r.shared.interleaved)){r=e;do{o|=r.lane,r=r.next}while(r!==e)}else null===s&&(r.shared.lanes=0);Ll|=o,t.lanes=o,t.memoizedState=h}}function Hs(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var qs={},Gs=Sr(qs),Ks=Sr(qs),Qs=Sr(qs);function Ys(t){if(t===qs)throw Error(s(174));return t}function Xs(t,e){switch(Tr(Qs,e),Tr(Ks,t),Tr(Gs,qs),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}kr(Gs),Tr(Gs,e)}function Js(){kr(Gs),kr(Ks),kr(Qs)}function $s(t){Ys(Qs.current);var e=Ys(Gs.current),n=lt(e,t.type);e!==n&&(Tr(Ks,t),Tr(Gs,n))}function Zs(t){Ks.current===t&&(kr(Gs),kr(Ks))}var to=Sr(0);function eo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var no=[];function io(){for(var t=0;t<no.length;t++)no[t]._workInProgressVersionPrimary=null;no.length=0}var ro=w.ReactCurrentDispatcher,so=w.ReactCurrentBatchConfig,oo=0,ao=null,lo=null,co=null,uo=!1,ho=!1,fo=0,po=0;function go(){throw Error(s(321))}function mo(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ai(t[n],e[n]))return!1;return!0}function yo(t,e,n,i,r,o){if(oo=o,ao=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ro.current=null===t||null===t.memoizedState?ta:ea,t=n(i,r),ho){o=0;do{if(ho=!1,fo=0,25<=o)throw Error(s(301));o+=1,co=lo=null,e.updateQueue=null,ro.current=na,t=n(i,r)}while(ho)}if(ro.current=Zo,e=null!==lo&&null!==lo.next,oo=0,co=lo=ao=null,uo=!1,e)throw Error(s(300));return t}function vo(){var t=0!==fo;return fo=0,t}function bo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?ao.memoizedState=co=t:co=co.next=t,co}function wo(){if(null===lo){var t=ao.alternate;t=null!==t?t.memoizedState:null}else t=lo.next;var e=null===co?ao.memoizedState:co.next;if(null!==e)co=e,lo=t;else{if(null===t)throw Error(s(310));t={memoizedState:(lo=t).memoizedState,baseState:lo.baseState,baseQueue:lo.baseQueue,queue:lo.queue,next:null},null===co?ao.memoizedState=co=t:co=co.next=t}return co}function xo(t,e){return"function"===typeof e?e(t):e}function _o(t){var e=wo(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=lo,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((oo&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=i):c=c.next=d,ao.lanes|=h,Ll|=h}u=u.next}while(null!==u&&u!==o);null===c?a=i:c.next=l,ai(i,e.memoizedState)||(wa=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,n.lastRenderedState=i}if(null!==(t=n.interleaved)){r=t;do{o=r.lane,ao.lanes|=o,Ll|=o,r=r.next}while(r!==t)}else null===r&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Eo(t){var e=wo(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=t(o,a.action),a=a.next}while(a!==r);ai(o,e.memoizedState)||(wa=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function So(){}function ko(t,e){var n=ao,i=wo(),r=e(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,wa=!0),i=i.queue,Fo(Co.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Mo(9,Io.bind(null,n,i,r,e),void 0,null),null===Al)throw Error(s(349));0!==(30&oo)||To(n,e,r)}return r}function To(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=ao.updateQueue)?(e={lastEffect:null,stores:null},ao.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Io(t,e,n,i){e.value=n,e.getSnapshot=i,Ao(e)&&No(t)}function Co(t,e,n){return n(function(){Ao(e)&&No(t)})}function Ao(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ai(t,n)}catch(i){return!0}}function No(t){var e=Ds(t,1);null!==e&&nc(e,t,1,-1)}function Po(t){var e=bo();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:t},e.queue=t,t=t.dispatch=Yo.bind(null,ao,t),[e.memoizedState,t]}function Mo(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=ao.updateQueue)?(e={lastEffect:null,stores:null},ao.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Ro(){return wo().memoizedState}function Oo(t,e,n,i){var r=bo();ao.flags|=t,r.memoizedState=Mo(1|e,n,void 0,void 0===i?null:i)}function Do(t,e,n,i){var r=wo();i=void 0===i?null:i;var s=void 0;if(null!==lo){var o=lo.memoizedState;if(s=o.destroy,null!==i&&mo(i,o.deps))return void(r.memoizedState=Mo(e,n,s,i))}ao.flags|=t,r.memoizedState=Mo(1|e,n,s,i)}function Lo(t,e){return Oo(8390656,8,t,e)}function Fo(t,e){return Do(2048,8,t,e)}function jo(t,e){return Do(4,2,t,e)}function Uo(t,e){return Do(4,4,t,e)}function Vo(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function zo(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Do(4,4,Vo.bind(null,e,t),n)}function Bo(){}function Wo(t,e){var n=wo();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&mo(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Ho(t,e){var n=wo();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&mo(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function qo(t,e,n){return 0===(21&oo)?(t.baseState&&(t.baseState=!1,wa=!0),t.memoizedState=n):(ai(n,e)||(n=ge(),ao.lanes|=n,Ll|=n,t.baseState=!0),e)}function Go(t,e){var n=be;be=0!==n&&4>n?n:4,t(!0);var i=so.transition;so.transition={};try{t(!1),e()}finally{be=n,so.transition=i}}function Ko(){return wo().memoizedState}function Qo(t,e,n){var i=ec(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Xo(t))Jo(e,n);else if(null!==(n=Os(t,e,n,i))){nc(n,t,i,tc()),$o(n,e,i)}}function Yo(t,e,n){var i=ec(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xo(t))Jo(e,r);else{var s=t.alternate;if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,o)){var l=e.interleaved;return null===l?(r.next=r,Rs(e)):(r.next=l.next,l.next=r),void(e.interleaved=r)}}catch(c){}null!==(n=Os(t,e,r,i))&&(nc(n,t,i,r=tc()),$o(n,e,i))}}function Xo(t){var e=t.alternate;return t===ao||null!==e&&e===ao}function Jo(t,e){ho=uo=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $o(t,e,n){if(0!==(4194240&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ve(t,n)}}var Zo={readContext:Ps,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},ta={readContext:Ps,useCallback:function(t,e){return bo().memoizedState=[t,void 0===e?null:e],t},useContext:Ps,useEffect:Lo,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Oo(4194308,4,Vo.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Oo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Oo(4,2,t,e)},useMemo:function(t,e){var n=bo();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=bo();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Qo.bind(null,ao,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},bo().memoizedState=t},useState:Po,useDebugValue:Bo,useDeferredValue:function(t){return bo().memoizedState=t},useTransition:function(){var t=Po(!1),e=t[0];return t=Go.bind(null,t[1]),bo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ao,r=bo();if(ss){if(void 0===n)throw Error(s(407));n=n()}else{if(n=e(),null===Al)throw Error(s(349));0!==(30&oo)||To(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,Lo(Co.bind(null,i,o,t),[t]),i.flags|=2048,Mo(9,Io.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=bo(),e=Al.identifierPrefix;if(ss){var n=$r;e=":"+e+"R"+(n=(Jr&~(1<<32-oe(Jr)-1)).toString(32)+n),0<(n=fo++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=po++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ea={readContext:Ps,useCallback:Wo,useContext:Ps,useEffect:Fo,useImperativeHandle:zo,useInsertionEffect:jo,useLayoutEffect:Uo,useMemo:Ho,useReducer:_o,useRef:Ro,useState:function(){return _o(xo)},useDebugValue:Bo,useDeferredValue:function(t){return qo(wo(),lo.memoizedState,t)},useTransition:function(){return[_o(xo)[0],wo().memoizedState]},useMutableSource:So,useSyncExternalStore:ko,useId:Ko,unstable_isNewReconciler:!1},na={readContext:Ps,useCallback:Wo,useContext:Ps,useEffect:Fo,useImperativeHandle:zo,useInsertionEffect:jo,useLayoutEffect:Uo,useMemo:Ho,useReducer:Eo,useRef:Ro,useState:function(){return Eo(xo)},useDebugValue:Bo,useDeferredValue:function(t){var e=wo();return null===lo?e.memoizedState=t:qo(e,lo.memoizedState,t)},useTransition:function(){return[Eo(xo)[0],wo().memoizedState]},useMutableSource:So,useSyncExternalStore:ko,useId:Ko,unstable_isNewReconciler:!1};function ia(t,e){if(t&&t.defaultProps){for(var n in e=F({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}function ra(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:F({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var sa={isMounted:function(t){return!!(t=t._reactInternals)&&Bt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=tc(),r=ec(t),s=Us(i,r);s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=Vs(t,s,r))&&(nc(e,t,r,i),zs(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=tc(),r=ec(t),s=Us(i,r);s.tag=1,s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=Vs(t,s,r))&&(nc(e,t,r,i),zs(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tc(),i=ec(t),r=Us(n,i);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),null!==(e=Vs(t,r,i))&&(nc(e,t,i,n),zs(e,t,i))}};function oa(t,e,n,i,r,s,o){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,s,o):!e.prototype||!e.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function aa(t,e,n){var i=!1,r=Ir,s=e.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(r=Mr(e)?Nr:Cr.current,s=(i=null!==(i=e.contextTypes)&&void 0!==i)?Pr(t,r):Ir),e=new e(n,s),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=sa,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function la(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&sa.enqueueReplaceState(e,e.state,null)}function ca(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Fs(t);var s=e.contextType;"object"===typeof s&&null!==s?r.context=Ps(s):(s=Mr(e)?Nr:Cr.current,r.context=Pr(t,s)),r.state=t.memoizedState,"function"===typeof(s=e.getDerivedStateFromProps)&&(ra(t,e,s,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&sa.enqueueReplaceState(r,r.state,null),Ws(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308)}function ua(t,e){try{var n="",i=e;do{n+=z(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:t,source:e,stack:r,digest:null}}function ha(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function da(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(t,e,n){(n=Us(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Hl||(Hl=!0,ql=i),da(0,e)},n}function ga(t,e,n){(n=Us(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){da(0,e)}}var s=t.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,e),"function"!==typeof i&&(null===Gl?Gl=new Set([this]):Gl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ma(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new fa;var r=new Set;i.set(e,r)}else void 0===(r=i.get(e))&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=kc.bind(null,t,e,n),e.then(t,t))}function ya(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function va(t,e,n,i,r){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Us(-1,1)).tag=2,Vs(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var ba=w.ReactCurrentOwner,wa=!1;function xa(t,e,n,i){e.child=null===t?_s(e,null,n,i):xs(e,t.child,n,i)}function _a(t,e,n,i,r){n=n.render;var s=e.ref;return Ns(e,r),i=yo(t,e,n,i,s,r),n=vo(),null===t||wa?(ss&&n&&es(e),e.flags|=1,xa(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ha(t,e,r))}function Ea(t,e,n,i,r){if(null===t){var s=n.type;return"function"!==typeof s||Mc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Oc(n.type,null,i,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,Sa(t,e,s,i,r))}if(s=t.child,0===(t.lanes&r)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&t.ref===e.ref)return Ha(t,e,r)}return e.flags|=1,(t=Rc(s,i)).ref=e.ref,t.return=e,e.child=t}function Sa(t,e,n,i,r){if(null!==t){var s=t.memoizedProps;if(li(s,i)&&t.ref===e.ref){if(wa=!1,e.pendingProps=i=s,0===(t.lanes&r))return e.lanes=t.lanes,Ha(t,e,r);0!==(131072&t.flags)&&(wa=!0)}}return Ia(t,e,n,i,r)}function ka(t,e,n){var i=e.pendingProps,r=i.children,s=null!==t?t.memoizedState:null;if("hidden"===i.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(Rl,Ml),Ml|=n;else{if(0===(1073741824&n))return t=null!==s?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tr(Rl,Ml),Ml|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Tr(Rl,Ml),Ml|=i}else null!==s?(i=s.baseLanes|n,e.memoizedState=null):i=n,Tr(Rl,Ml),Ml|=i;return xa(t,e,r,n),e.child}function Ta(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ia(t,e,n,i,r){var s=Mr(n)?Nr:Cr.current;return s=Pr(e,s),Ns(e,r),n=yo(t,e,n,i,s,r),i=vo(),null===t||wa?(ss&&i&&es(e),e.flags|=1,xa(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ha(t,e,r))}function Ca(t,e,n,i,r){if(Mr(n)){var s=!0;Lr(e)}else s=!1;if(Ns(e,r),null===e.stateNode)Wa(t,e),aa(e,n,i),ca(e,n,i,r),i=!0;else if(null===t){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=Pr(e,c=Mr(n)?Nr:Cr.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==i||l!==c)&&la(e,o,i,c),Ls=!1;var d=e.memoizedState;o.state=d,Ws(e,i,o,r),l=e.memoizedState,a!==i||d!==l||Ar.current||Ls?("function"===typeof u&&(ra(e,n,u,i),l=e.memoizedState),(a=Ls||oa(e,n,a,i,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(e.flags|=4194308)):("function"===typeof o.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):("function"===typeof o.componentDidMount&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,js(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ia(e.type,a),o.props=c,h=e.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ps(l):l=Pr(e,l=Mr(n)?Nr:Cr.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&la(e,o,i,l),Ls=!1,d=e.memoizedState,o.state=d,Ws(e,i,o,r);var p=e.memoizedState;a!==h||d!==p||Ar.current||Ls?("function"===typeof f&&(ra(e,n,f,i),p=e.memoizedState),(c=Ls||oa(e,n,c,i,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof o.componentDidUpdate&&(e.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Aa(t,e,n,i,s,r)}function Aa(t,e,n,i,r,s){Ta(t,e);var o=0!==(128&e.flags);if(!i&&!o)return r&&Fr(e,n,!1),Ha(t,e,s);i=e.stateNode,ba.current=e;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&o?(e.child=xs(e,t.child,null,s),e.child=xs(e,null,a,s)):xa(t,e,a,s),e.memoizedState=i.state,r&&Fr(e,n,!0),e.child}function Na(t){var e=t.stateNode;e.pendingContext?Or(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Or(0,e.context,!1),Xs(t,e.containerInfo)}function Pa(t,e,n,i,r){return ps(),gs(r),e.flags|=256,xa(t,e,n,i),e.child}var Ma,Ra,Oa,Da={dehydrated:null,treeContext:null,retryLane:0};function La(t){return{baseLanes:t,cachePool:null,transitions:null}}function Fa(t,e,n){var i,r=e.pendingProps,o=to.current,a=!1,l=0!==(128&e.flags);if((i=l)||(i=(null===t||null!==t.memoizedState)&&0!==(2&o)),i?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(o|=1),Tr(to,1&o),null===t)return us(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=r.children,t=r.fallback,a?(r=e.mode,a=e.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Lc(l,r,0,null),t=Dc(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=La(n),e.memoizedState=Da,t):ja(e,l));if(null!==(o=t.memoizedState)&&null!==(i=o.dehydrated))return function(t,e,n,i,r,o,a){if(n)return 256&e.flags?(e.flags&=-257,Ua(t,e,a,i=ha(Error(s(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Lc({mode:"visible",children:i.children},r,0,null),(o=Dc(o,r,a,null)).flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,0!==(1&e.mode)&&xs(e,t.child,null,a),e.child.memoizedState=La(a),e.memoizedState=Da,o);if(0===(1&e.mode))return Ua(t,e,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Ua(t,e,a,i=ha(o=Error(s(419)),i,void 0))}if(l=0!==(a&t.childLanes),wa||l){if(null!==(i=Al)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Ds(t,r),nc(i,t,r,-1))}return gc(),Ua(t,e,a,i=ha(Error(s(421))))}return"$?"===r.data?(e.flags|=128,e.child=t.child,e=Ic.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,rs=cr(r.nextSibling),is=e,ss=!0,os=null,null!==t&&(Qr[Yr++]=Jr,Qr[Yr++]=$r,Qr[Yr++]=Xr,Jr=t.id,$r=t.overflow,Xr=e),e=ja(e,i.children),e.flags|=4096,e)}(t,e,l,r,i,o,n);if(a){a=r.fallback,l=e.mode,i=(o=t.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&e.child!==o?((r=e.child).childLanes=0,r.pendingProps=c,e.deletions=null):(r=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==i?a=Rc(i,a):(a=Dc(a,l,n,null)).flags|=2,a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,l=null===(l=t.child.memoizedState)?La(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=Da,r}return t=(a=t.child).sibling,r=Rc(a,{mode:"visible",children:r.children}),0===(1&e.mode)&&(r.lanes=n),r.return=e,r.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ja(t,e){return(e=Lc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Ua(t,e,n,i){return null!==i&&gs(i),xs(e,t.child,null,n),(t=ja(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Va(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),As(t.return,e,n)}function za(t,e,n,i,r){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ba(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(xa(t,e,i.children,n),0!==(2&(i=to.current)))i=1&i|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Va(t,n,e);else if(19===t.tag)Va(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Tr(to,i),0===(1&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===eo(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),za(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===eo(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}za(e,!0,n,null,s);break;case"together":za(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wa(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ha(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Ll|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=Rc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Rc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function qa(t,e){if(!ss)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ga(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Ka(t,e,n){var i=e.pendingProps;switch(ns(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(e),null;case 1:case 17:return Mr(e.type)&&Rr(),Ga(e),null;case 3:return i=e.stateNode,Js(),kr(Ar),kr(Cr),io(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(ds(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==os&&(oc(os),os=null))),Ga(e),null;case 5:Zs(e);var r=Ys(Qs.current);if(n=e.type,null!==t&&null!=e.stateNode)Ra(t,e,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(s(166));return Ga(e),null}if(t=Ys(Gs.current),ds(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[dr]=e,i[fr]=o,t=0!==(1&e.mode),n){case"dialog":Ui("cancel",i),Ui("close",i);break;case"iframe":case"object":case"embed":Ui("load",i);break;case"video":case"audio":for(r=0;r<Di.length;r++)Ui(Di[r],i);break;case"source":Ui("error",i);break;case"img":case"image":case"link":Ui("error",i),Ui("load",i);break;case"details":Ui("toggle",i);break;case"input":X(i,o),Ui("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ui("invalid",i);break;case"textarea":rt(i,o),Ui("invalid",i)}for(var l in vt(n,o),r=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==o.suppressHydrationWarning&&$i(i.textContent,c,t),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$i(i.textContent,c,t),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ui("scroll",i)}switch(n){case"input":G(i),Z(i,o,!0);break;case"textarea":G(i),ot(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Zi)}i=r,e.updateQueue=i,null!==i&&(e.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof i.is?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),"select"===n&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[dr]=e,t[fr]=i,Ma(t,e),e.stateNode=t;t:{switch(l=bt(n,i),n){case"dialog":Ui("cancel",t),Ui("close",t),r=i;break;case"iframe":case"object":case"embed":Ui("load",t),r=i;break;case"video":case"audio":for(r=0;r<Di.length;r++)Ui(Di[r],t);r=i;break;case"source":Ui("error",t),r=i;break;case"img":case"image":case"link":Ui("error",t),Ui("load",t),r=i;break;case"details":Ui("toggle",t),r=i;break;case"input":X(t,i),r=Y(t,i),Ui("invalid",t);break;case"option":default:r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=F({},i,{value:void 0}),Ui("invalid",t);break;case"textarea":rt(t,i),r=it(t,i),Ui("invalid",t)}for(o in vt(n,r),c=r)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?mt(t,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&ht(t,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&dt(t,u):"number"===typeof u&&dt(t,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ui("scroll",t):null!=u&&b(t,o,u,l))}switch(n){case"input":G(t),Z(t,i,!1);break;case"textarea":G(t),ot(t);break;case"option":null!=i.value&&t.setAttribute("value",""+H(i.value));break;case"select":t.multiple=!!i.multiple,null!=(o=i.value)?nt(t,!!i.multiple,o,!1):null!=i.defaultValue&&nt(t,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(t.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Ga(e),null;case 6:if(t&&null!=e.stateNode)Oa(0,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(s(166));if(n=Ys(Qs.current),Ys(Gs.current),ds(e)){if(i=e.stateNode,n=e.memoizedProps,i[dr]=e,(o=i.nodeValue!==n)&&null!==(t=is))switch(t.tag){case 3:$i(i.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&$i(i.nodeValue,n,0!==(1&t.mode))}o&&(e.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=e,e.stateNode=i}return Ga(e),null;case 13:if(kr(to),i=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(ss&&null!==rs&&0!==(1&e.mode)&&0===(128&e.flags))fs(),ps(),e.flags|=98560,o=!1;else if(o=ds(e),null!==i&&null!==i.dehydrated){if(null===t){if(!o)throw Error(s(318));if(!(o=null!==(o=e.memoizedState)?o.dehydrated:null))throw Error(s(317));o[dr]=e}else ps(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Ga(e),o=!1}else null!==os&&(oc(os),os=null),o=!0;if(!o)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((i=null!==i)!==(null!==t&&null!==t.memoizedState)&&i&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&to.current)?0===Ol&&(Ol=3):gc())),null!==e.updateQueue&&(e.flags|=4),Ga(e),null);case 4:return Js(),null===t&&Bi(e.stateNode.containerInfo),Ga(e),null;case 10:return Cs(e.type._context),Ga(e),null;case 19:if(kr(to),null===(o=e.memoizedState))return Ga(e),null;if(i=0!==(128&e.flags),null===(l=o.rendering))if(i)qa(o,!1);else{if(0!==Ol||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=eo(t))){for(e.flags|=128,qa(o,!1),null!==(i=l.updateQueue)&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;null!==n;)t=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tr(to,1&to.current|2),e.child}t=t.sibling}null!==o.tail&&Jt()>Bl&&(e.flags|=128,i=!0,qa(o,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=eo(l))){if(e.flags|=128,i=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),qa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ss)return Ga(e),null}else 2*Jt()-o.renderingStartTime>Bl&&1073741824!==n&&(e.flags|=128,i=!0,qa(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=o.last)?n.sibling=l:e.child=l,o.last=l)}return null!==o.tail?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Jt(),e.sibling=null,n=to.current,Tr(to,i?1&n|2:1&n),e):(Ga(e),null);case 22:case 23:return hc(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&0!==(1&e.mode)?0!==(1073741824&Ml)&&(Ga(e),6&e.subtreeFlags&&(e.flags|=8192)):Ga(e),null;case 24:case 25:return null}throw Error(s(156,e.tag))}function Qa(t,e){switch(ns(e),e.tag){case 1:return Mr(e.type)&&Rr(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return Js(),kr(Ar),kr(Cr),io(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return Zs(e),null;case 13:if(kr(to),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(s(340));ps()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return kr(to),null;case 4:return Js(),null;case 10:return Cs(e.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ma=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Ys(Gs.current);var s,o=null;switch(n){case"input":r=Y(t,r),i=Y(t,i),o=[];break;case"select":r=F({},r,{value:void 0}),i=F({},i,{value:void 0}),o=[];break;case"textarea":r=it(t,r),i=it(t,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(t.onclick=Zi)}for(u in vt(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ui("scroll",t),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}},Oa=function(t,e,n,i){n!==i&&(e.flags|=4)};var Ya=!1,Xa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,$a=null;function Za(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Sc(t,e,i)}else n.current=null}function tl(t,e,n){try{n()}catch(i){Sc(t,e,i)}}var el=!1;function nl(t,e,n){var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,void 0!==s&&tl(e,n,s)}r=r.next}while(r!==i)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function rl(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function sl(t){var e=t.alternate;null!==e&&(t.alternate=null,sl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[dr],delete e[fr],delete e[gr],delete e[mr],delete e[yr])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ol(t){return 5===t.tag||3===t.tag||4===t.tag}function al(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||ol(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ll(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Zi));else if(4!==i&&null!==(t=t.child))for(ll(t,e,n),t=t.sibling;null!==t;)ll(t,e,n),t=t.sibling}function cl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}var ul=null,hl=!1;function dl(t,e,n){for(n=n.child;null!==n;)fl(t,e,n),n=n.sibling}function fl(t,e,n){if(se&&"function"===typeof se.onCommitFiberUnmount)try{se.onCommitFiberUnmount(re,n)}catch(a){}switch(n.tag){case 5:Xa||Za(n,e);case 6:var i=ul,r=hl;ul=null,dl(t,e,n),hl=r,null!==(ul=i)&&(hl?(t=ul,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(t=ul,n=n.stateNode,8===t.nodeType?lr(t.parentNode,n):1===t.nodeType&&lr(t,n),Be(t)):lr(ul,n.stateNode));break;case 4:i=ul,r=hl,ul=n.stateNode.containerInfo,hl=!0,dl(t,e,n),ul=i,hl=r;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,e,o),r=r.next}while(r!==i)}dl(t,e,n);break;case 1:if(!Xa&&(Za(n,e),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Sc(n,e,a)}dl(t,e,n);break;case 21:dl(t,e,n);break;case 22:1&n.mode?(Xa=(i=Xa)||null!==n.memoizedState,dl(t,e,n),Xa=i):dl(t,e,n);break;default:dl(t,e,n)}}function pl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Ja),e.forEach(function(e){var i=Cc.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))})}}function gl(t,e){var n=e.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break t;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break t}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,r),ul=null,hl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Sc(r,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)ml(e,t),e=e.sibling}function ml(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gl(e,t),yl(t),4&i){try{nl(3,t,t.return),il(3,t)}catch(m){Sc(t,t.return,m)}try{nl(5,t,t.return)}catch(m){Sc(t,t.return,m)}}break;case 1:gl(e,t),yl(t),512&i&&null!==n&&Za(n,n.return);break;case 5:if(gl(e,t),yl(t),512&i&&null!==n&&Za(n,n.return),32&t.flags){var r=t.stateNode;try{dt(r,"")}catch(m){Sc(t,t.return,m)}}if(4&i&&null!=(r=t.stateNode)){var o=t.memoizedProps,a=null!==n?n.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(r,o),bt(l,a);var u=bt(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?mt(r,d):"dangerouslySetInnerHTML"===h?ht(r,d):"children"===h?dt(r,d):b(r,h,d,u)}switch(l){case"input":$(r,o);break;case"textarea":st(r,o);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?nt(r,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?nt(r,!!o.multiple,o.defaultValue,!0):nt(r,!!o.multiple,o.multiple?[]:"",!1))}r[fr]=o}catch(m){Sc(t,t.return,m)}}break;case 6:if(gl(e,t),yl(t),4&i){if(null===t.stateNode)throw Error(s(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(m){Sc(t,t.return,m)}}break;case 3:if(gl(e,t),yl(t),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Be(e.containerInfo)}catch(m){Sc(t,t.return,m)}break;case 4:default:gl(e,t),yl(t);break;case 13:gl(e,t),yl(t),8192&(r=t.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(zl=Jt())),4&i&&pl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Xa=(u=Xa)||h,gl(e,t),Xa=u):gl(e,t),yl(t),8192&i){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!h&&0!==(1&t.mode))for($a=t,h=t.child;null!==h;){for(d=$a=h;null!==$a;){switch(p=(f=$a).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){i=f,n=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Sc(i,n,m)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){xl(d);continue}}null!==p?(p.return=f,$a=p):xl(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=gt("display",a))}catch(m){Sc(t,t.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Sc(t,t.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(e,t),yl(t),4&i&&pl(t);case 21:}}function yl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(ol(n)){var i=n;break t}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(dt(r,""),i.flags&=-33),cl(t,al(t),r);break;case 3:case 4:var o=i.stateNode.containerInfo;ll(t,al(t),o);break;default:throw Error(s(161))}}catch(a){Sc(t,t.return,a)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function vl(t,e,n){$a=t,bl(t,e,n)}function bl(t,e,n){for(var i=0!==(1&t.mode);null!==$a;){var r=$a,s=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Ya;if(!o){var a=r.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Ya;var c=Xa;if(Ya=o,(Xa=l)&&!c)for($a=r;null!==$a;)l=(o=$a).child,22===o.tag&&null!==o.memoizedState?_l(r):null!==l?(l.return=o,$a=l):_l(r);for(;null!==s;)$a=s,bl(s,e,n),s=s.sibling;$a=r,Ya=a,Xa=c}wl(t)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,$a=s):wl(t)}}function wl(t){for(;null!==$a;){var e=$a;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Xa||il(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!Xa)if(null===n)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ia(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;null!==o&&Hs(e,o,i);break;case 3:var a=e.updateQueue;if(null!==a){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Hs(e,a,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Be(d)}}}break;default:throw Error(s(163))}Xa||512&e.flags&&rl(e)}catch(f){Sc(e,e.return,f)}}if(e===t){$a=null;break}if(null!==(n=e.sibling)){n.return=e.return,$a=n;break}$a=e.return}}function xl(t){for(;null!==$a;){var e=$a;if(e===t){$a=null;break}var n=e.sibling;if(null!==n){n.return=e.return,$a=n;break}$a=e.return}}function _l(t){for(;null!==$a;){var e=$a;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(l){Sc(e,n,l)}break;case 1:var i=e.stateNode;if("function"===typeof i.componentDidMount){var r=e.return;try{i.componentDidMount()}catch(l){Sc(e,r,l)}}var s=e.return;try{rl(e)}catch(l){Sc(e,s,l)}break;case 5:var o=e.return;try{rl(e)}catch(l){Sc(e,o,l)}}}catch(l){Sc(e,e.return,l)}if(e===t){$a=null;break}var a=e.sibling;if(null!==a){a.return=e.return,$a=a;break}$a=e.return}}var El,Sl=Math.ceil,kl=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,Il=w.ReactCurrentBatchConfig,Cl=0,Al=null,Nl=null,Pl=0,Ml=0,Rl=Sr(0),Ol=0,Dl=null,Ll=0,Fl=0,jl=0,Ul=null,Vl=null,zl=0,Bl=1/0,Wl=null,Hl=!1,ql=null,Gl=null,Kl=!1,Ql=null,Yl=0,Xl=0,Jl=null,$l=-1,Zl=0;function tc(){return 0!==(6&Cl)?Jt():-1!==$l?$l:$l=Jt()}function ec(t){return 0===(1&t.mode)?1:0!==(2&Cl)&&0!==Pl?Pl&-Pl:null!==ms.transition?(0===Zl&&(Zl=ge()),Zl):0!==(t=be)?t:t=void 0===(t=window.event)?16:Xe(t.type)}function nc(t,e,n,i){if(50<Xl)throw Xl=0,Jl=null,Error(s(185));ye(t,n,i),0!==(2&Cl)&&t===Al||(t===Al&&(0===(2&Cl)&&(Fl|=n),4===Ol&&ac(t,Pl)),ic(t,i),1===n&&0===Cl&&0===(1&e.mode)&&(Bl=Jt()+500,Ur&&Br()))}function ic(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-oe(s),a=1<<o,l=r[o];-1===l?0!==(a&n)&&0===(a&i)||(r[o]=fe(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}(t,e);var i=de(t,t===Al?Pl:0);if(0===i)null!==n&&Qt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&Qt(n),1===e)0===t.tag?function(t){Ur=!0,zr(t)}(lc.bind(null,t)):zr(lc.bind(null,t)),or(function(){0===(6&Cl)&&Br()}),n=null;else{switch(we(i)){case 1:n=Zt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=ie}n=Ac(n,rc.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rc(t,e){if($l=-1,Zl=0,0!==(6&Cl))throw Error(s(327));var n=t.callbackNode;if(_c()&&t.callbackNode!==n)return null;var i=de(t,t===Al?Pl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&t.expiredLanes)||e)e=mc(t,i);else{e=i;var r=Cl;Cl|=2;var o=pc();for(Al===t&&Pl===e||(Wl=null,Bl=Jt()+500,dc(t,e));;)try{vc();break}catch(l){fc(t,l)}Is(),kl.current=o,Cl=r,null!==Nl?e=0:(Al=null,Pl=0,e=Ol)}if(0!==e){if(2===e&&(0!==(r=pe(t))&&(i=r,e=sc(t,r))),1===e)throw n=Dl,dc(t,0),ac(t,i),ic(t,Jt()),n;if(6===e)ac(t,i);else{if(r=t.current.alternate,0===(30&i)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ai(s(),r))return!1}catch(a){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(r)&&(2===(e=mc(t,i))&&(0!==(o=pe(t))&&(i=o,e=sc(t,o))),1===e))throw n=Dl,dc(t,0),ac(t,i),ic(t,Jt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(s(345));case 2:case 5:xc(t,Vl,Wl);break;case 3:if(ac(t,i),(130023424&i)===i&&10<(e=zl+500-Jt())){if(0!==de(t,0))break;if(((r=t.suspendedLanes)&i)!==i){tc(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ir(xc.bind(null,t,Vl,Wl),e);break}xc(t,Vl,Wl);break;case 4:if(ac(t,i),(4194240&i)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-oe(i);o=1<<a,(a=e[a])>r&&(r=a),i&=~o}if(i=r,10<(i=(120>(i=Jt()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Sl(i/1960))-i)){t.timeoutHandle=ir(xc.bind(null,t,Vl,Wl),i);break}xc(t,Vl,Wl);break;default:throw Error(s(329))}}}return ic(t,Jt()),t.callbackNode===n?rc.bind(null,t):null}function sc(t,e){var n=Ul;return t.current.memoizedState.isDehydrated&&(dc(t,e).flags|=256),2!==(t=mc(t,e))&&(e=Vl,Vl=n,null!==e&&oc(e)),t}function oc(t){null===Vl?Vl=t:Vl.push.apply(Vl,t)}function ac(t,e){for(e&=~jl,e&=~Fl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-oe(e),i=1<<n;t[n]=-1,e&=~i}}function lc(t){if(0!==(6&Cl))throw Error(s(327));_c();var e=de(t,0);if(0===(1&e))return ic(t,Jt()),null;var n=mc(t,e);if(0!==t.tag&&2===n){var i=pe(t);0!==i&&(e=i,n=sc(t,i))}if(1===n)throw n=Dl,dc(t,0),ac(t,e),ic(t,Jt()),n;if(6===n)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xc(t,Vl,Wl),ic(t,Jt()),null}function cc(t,e){var n=Cl;Cl|=1;try{return t(e)}finally{0===(Cl=n)&&(Bl=Jt()+500,Ur&&Br())}}function uc(t){null!==Ql&&0===Ql.tag&&0===(6&Cl)&&_c();var e=Cl;Cl|=1;var n=Il.transition,i=be;try{if(Il.transition=null,be=1,t)return t()}finally{be=i,Il.transition=n,0===(6&(Cl=e))&&Br()}}function hc(){Ml=Rl.current,kr(Rl)}function dc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,rr(n)),null!==Nl)for(n=Nl.return;null!==n;){var i=n;switch(ns(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Rr();break;case 3:Js(),kr(Ar),kr(Cr),io();break;case 5:Zs(i);break;case 4:Js();break;case 13:case 19:kr(to);break;case 10:Cs(i.type._context);break;case 22:case 23:hc()}n=n.return}if(Al=t,Nl=t=Rc(t.current,null),Pl=Ml=e,Ol=0,Dl=null,jl=Fl=Ll=0,Vl=Ul=null,null!==Ms){for(e=0;e<Ms.length;e++)if(null!==(i=(n=Ms[e]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var o=s.next;s.next=r,i.next=o}n.pending=i}Ms=null}return t}function fc(t,e){for(;;){var n=Nl;try{if(Is(),ro.current=Zo,uo){for(var i=ao.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}uo=!1}if(oo=0,co=lo=ao=null,ho=!1,fo=0,Tl.current=null,null===n||null===n.return){Ol=1,Dl=e,Nl=null;break}t:{var o=t,a=n.return,l=n,c=e;if(e=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,e),1&p.mode&&ma(o,u,e),c=u;var g=(e=p).updateQueue;if(null===g){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break t}if(0===(1&e)){ma(o,u,e),gc();break t}c=Error(s(426))}else if(ss&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,e),gs(ua(c,l));break t}}o=c=ua(c,l),4!==Ol&&(Ol=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e,Bs(o,pa(0,c,e));break t;case 1:l=c;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e,Bs(o,ga(o,l,e));break t}}o=o.return}while(null!==o)}wc(n)}catch(w){e=w,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function pc(){var t=kl.current;return kl.current=Zo,null===t?Zo:t}function gc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Al||0===(268435455&Ll)&&0===(268435455&Fl)||ac(Al,Pl)}function mc(t,e){var n=Cl;Cl|=2;var i=pc();for(Al===t&&Pl===e||(Wl=null,dc(t,e));;)try{yc();break}catch(r){fc(t,r)}if(Is(),Cl=n,kl.current=i,null!==Nl)throw Error(s(261));return Al=null,Pl=0,Ol}function yc(){for(;null!==Nl;)bc(Nl)}function vc(){for(;null!==Nl&&!Yt();)bc(Nl)}function bc(t){var e=El(t.alternate,t,Ml);t.memoizedProps=t.pendingProps,null===e?wc(t):Nl=e,Tl.current=null}function wc(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Ka(n,e,Ml)))return void(Nl=n)}else{if(null!==(n=Qa(n,e)))return n.flags&=32767,void(Nl=n);if(null===t)return Ol=6,void(Nl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Nl=e);Nl=e=t}while(null!==e);0===Ol&&(Ol=5)}function xc(t,e,n){var i=be,r=Il.transition;try{Il.transition=null,be=1,function(t,e,n,i){do{_c()}while(null!==Ql);if(0!==(6&Cl))throw Error(s(327));n=t.finishedWork;var r=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-oe(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}(t,o),t===Al&&(Nl=Al=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Ac(ee,function(){return _c(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Il.transition,Il.transition=null;var a=be;be=1;var l=Cl;Cl|=4,Tl.current=null,function(t,e){if(tr=He,fi(t=di())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var i=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break t}var a=0,l=-1,c=-1,u=0,h=0,d=t,f=null;e:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=a+r),d!==o||0!==i&&3!==d.nodeType||(c=a+i),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===t)break e;if(f===n&&++u===r&&(l=a),f===o&&++h===i&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(er={focusedElem:t,selectionRange:n},He=!1,$a=e;null!==$a;)if(t=(e=$a).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,$a=t;else for(;null!==$a;){e=$a;try{var g=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:ia(e.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(x){Sc(e,e.return,x)}if(null!==(t=e.sibling)){t.return=e.return,$a=t;break}$a=e.return}g=el,el=!1}(t,n),ml(n,t),pi(er),He=!!tr,er=tr=null,t.current=n,vl(n,t,r),Xt(),Cl=l,be=a,Il.transition=o}else t.current=n;if(Kl&&(Kl=!1,Ql=t,Yl=r),o=t.pendingLanes,0===o&&(Gl=null),function(t){if(se&&"function"===typeof se.onCommitFiberRoot)try{se.onCommitFiberRoot(re,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),ic(t,Jt()),null!==e)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Hl)throw Hl=!1,t=ql,ql=null,t;0!==(1&Yl)&&0!==t.tag&&_c(),o=t.pendingLanes,0!==(1&o)?t===Jl?Xl++:(Xl=0,Jl=t):Xl=0,Br()}(t,e,n,i)}finally{Il.transition=r,be=i}return null}function _c(){if(null!==Ql){var t=we(Yl),e=Il.transition,n=be;try{if(Il.transition=null,be=16>t?16:t,null===Ql)var i=!1;else{if(t=Ql,Ql=null,Yl=0,0!==(6&Cl))throw Error(s(331));var r=Cl;for(Cl|=4,$a=t.current;null!==$a;){var o=$a,a=o.child;if(0!==(16&$a.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($a=u;null!==$a;){var h=$a;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,$a=d;else for(;null!==$a;){var f=(h=$a).sibling,p=h.return;if(sl(h),h===u){$a=null;break}if(null!==f){f.return=p,$a=f;break}$a=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}$a=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,$a=a;else t:for(;null!==$a;){if(0!==(2048&(o=$a).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,$a=v;break t}$a=o.return}}var b=t.current;for($a=b;null!==$a;){var w=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,$a=w;else t:for(a=b;null!==$a;){if(0!==(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(_){Sc(l,l.return,_)}if(l===a){$a=null;break t}var x=l.sibling;if(null!==x){x.return=l.return,$a=x;break t}$a=l.return}}if(Cl=r,Br(),se&&"function"===typeof se.onPostCommitFiberRoot)try{se.onPostCommitFiberRoot(re,t)}catch(_){}i=!0}return i}finally{be=n,Il.transition=e}}return!1}function Ec(t,e,n){t=Vs(t,e=pa(0,e=ua(n,e),1),1),e=tc(),null!==t&&(ye(t,1,e),ic(t,e))}function Sc(t,e,n){if(3===t.tag)Ec(t,t,n);else for(;null!==e;){if(3===e.tag){Ec(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Gl||!Gl.has(i))){e=Vs(e,t=ga(e,t=ua(n,t),1),1),t=tc(),null!==e&&(ye(e,1,t),ic(e,t));break}}e=e.return}}function kc(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=tc(),t.pingedLanes|=t.suspendedLanes&n,Al===t&&(Pl&n)===n&&(4===Ol||3===Ol&&(130023424&Pl)===Pl&&500>Jt()-zl?dc(t,0):jl|=n),ic(t,e)}function Tc(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=tc();null!==(t=Ds(t,e))&&(ye(t,e,n),ic(t,n))}function Ic(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Tc(t,n)}function Cc(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(e),Tc(t,n)}function Ac(t,e){return Kt(t,e)}function Nc(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(t,e,n,i){return new Nc(t,e,n,i)}function Mc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Rc(t,e){var n=t.alternate;return null===n?((n=Pc(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Oc(t,e,n,i,r,o){var a=2;if(i=t,"function"===typeof t)Mc(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case E:return Dc(n.children,r,o,e);case S:a=8,r|=8;break;case k:return(t=Pc(12,n,e,2|r)).elementType=k,t.lanes=o,t;case A:return(t=Pc(13,n,e,r)).elementType=A,t.lanes=o,t;case N:return(t=Pc(19,n,e,r)).elementType=N,t.lanes=o,t;case R:return Lc(n,r,o,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case T:a=10;break t;case I:a=9;break t;case C:a=11;break t;case P:a=14;break t;case M:a=16,i=null;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Pc(a,n,e,r)).elementType=t,e.type=i,e.lanes=o,e}function Dc(t,e,n,i){return(t=Pc(7,t,i,e)).lanes=n,t}function Lc(t,e,n,i){return(t=Pc(22,t,i,e)).elementType=R,t.lanes=n,t.stateNode={isHidden:!1},t}function Fc(t,e,n){return(t=Pc(6,t,null,e)).lanes=n,t}function jc(t,e,n){return(e=Pc(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Uc(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Vc(t,e,n,i,r,s,o,a,l){return t=new Uc(t,e,n,a,l),1===e?(e=1,!0===s&&(e|=8)):e=0,s=Pc(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fs(s),t}function zc(t){if(!t)return Ir;t:{if(Bt(t=t._reactInternals)!==t||1!==t.tag)throw Error(s(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Mr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(s(171))}if(1===t.tag){var n=t.type;if(Mr(n))return Dr(t,n,e)}return e}function Bc(t,e,n,i,r,s,o,a,l){return(t=Vc(n,i,!0,t,0,s,0,a,l)).context=zc(null),n=t.current,(s=Us(i=tc(),r=ec(n))).callback=void 0!==e&&null!==e?e:null,Vs(n,s,r),t.current.lanes=r,ye(t,r,i),ic(t,i),t}function Wc(t,e,n,i){var r=e.current,s=tc(),o=ec(r);return n=zc(n),null===e.context?e.context=n:e.pendingContext=n,(e=Us(s,o)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),null!==(t=Vs(r,e,o))&&(nc(t,r,o,s),zs(t,r,o)),o}function Hc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function qc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Gc(t,e){qc(t,e),(t=t.alternate)&&qc(t,e)}El=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ar.current)wa=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return wa=!1,function(t,e,n){switch(e.tag){case 3:Na(e),ps();break;case 5:$s(e);break;case 1:Mr(e.type)&&Lr(e);break;case 4:Xs(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Tr(Es,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=e.memoizedState))return null!==i.dehydrated?(Tr(to,1&to.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Fa(t,e,n):(Tr(to,1&to.current),null!==(t=Ha(t,e,n))?t.sibling:null);Tr(to,1&to.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(128&t.flags)){if(i)return Ba(t,e,n);e.flags|=128}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Tr(to,to.current),i)break;return null;case 22:case 23:return e.lanes=0,ka(t,e,n)}return Ha(t,e,n)}(t,e,n);wa=0!==(131072&t.flags)}else wa=!1,ss&&0!==(1048576&e.flags)&&ts(e,Kr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Wa(t,e),t=e.pendingProps;var r=Pr(e,Cr.current);Ns(e,n),r=yo(null,e,i,t,r,n);var o=vo();return e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mr(i)?(o=!0,Lr(e)):o=!1,e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Fs(e),r.updater=sa,e.stateNode=r,r._reactInternals=e,ca(e,i,t,n),e=Aa(null,e,i,!0,o,n)):(e.tag=0,ss&&o&&es(e),xa(null,e,r,n),e=e.child),e;case 16:i=e.elementType;t:{switch(Wa(t,e),t=e.pendingProps,i=(r=i._init)(i._payload),e.type=i,r=e.tag=function(t){if("function"===typeof t)return Mc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===C)return 11;if(t===P)return 14}return 2}(i),t=ia(i,t),r){case 0:e=Ia(null,e,i,t,n);break t;case 1:e=Ca(null,e,i,t,n);break t;case 11:e=_a(null,e,i,t,n);break t;case 14:e=Ea(null,e,i,ia(i.type,t),n);break t}throw Error(s(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,Ia(t,e,i,r=e.elementType===i?r:ia(i,r),n);case 1:return i=e.type,r=e.pendingProps,Ca(t,e,i,r=e.elementType===i?r:ia(i,r),n);case 3:t:{if(Na(e),null===t)throw Error(s(387));i=e.pendingProps,r=(o=e.memoizedState).element,js(t,e),Ws(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,256&e.flags){e=Pa(t,e,i,n,r=ua(Error(s(423)),e));break t}if(i!==r){e=Pa(t,e,i,n,r=ua(Error(s(424)),e));break t}for(rs=cr(e.stateNode.containerInfo.firstChild),is=e,ss=!0,os=null,n=_s(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),i===r){e=Ha(t,e,n);break t}xa(t,e,i,n)}e=e.child}return e;case 5:return $s(e),null===t&&us(e),i=e.type,r=e.pendingProps,o=null!==t?t.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==o&&nr(i,o)&&(e.flags|=32),Ta(t,e),xa(t,e,a,n),e.child;case 6:return null===t&&us(e),null;case 13:return Fa(t,e,n);case 4:return Xs(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=xs(e,null,i,n):xa(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,_a(t,e,i,r=e.elementType===i?r:ia(i,r),n);case 7:return xa(t,e,e.pendingProps,n),e.child;case 8:case 12:return xa(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,Tr(Es,i._currentValue),i._currentValue=a,null!==o)if(ai(o.value,a)){if(o.children===r.children&&!Ar.current){e=Ha(t,e,n);break t}}else for(null!==(o=e.child)&&(o.return=e);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===o.tag){(c=Us(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),As(o.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===e.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),As(a,n,e),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}xa(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ns(e,n),i=i(r=Ps(r)),e.flags|=1,xa(t,e,i,n),e.child;case 14:return r=ia(i=e.type,e.pendingProps),Ea(t,e,i,r=ia(i.type,r),n);case 15:return Sa(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ia(i,r),Wa(t,e),e.tag=1,Mr(i)?(t=!0,Lr(e)):t=!1,Ns(e,n),aa(e,i,r),ca(e,i,r,n),Aa(null,e,i,!0,t,n);case 19:return Ba(t,e,n);case 22:return ka(t,e,n)}throw Error(s(156,e.tag))};var Kc="function"===typeof reportError?reportError:function(t){console.error(t)};function Qc(t){this._internalRoot=t}function Yc(t){this._internalRoot=t}function Xc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Jc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function $c(){}function Zc(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof r){var a=r;r=function(){var t=Hc(o);a.call(t)}}Wc(e,o,t,r)}else o=function(t,e,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var t=Hc(o);s.call(t)}}var o=Bc(e,i,t,0,null,!1,0,"",$c);return t._reactRootContainer=o,t[pr]=o.current,Bi(8===t.nodeType?t.parentNode:t),uc(),o}for(;r=t.lastChild;)t.removeChild(r);if("function"===typeof i){var a=i;i=function(){var t=Hc(l);a.call(t)}}var l=Vc(t,0,!1,null,0,!1,0,"",$c);return t._reactRootContainer=l,t[pr]=l.current,Bi(8===t.nodeType?t.parentNode:t),uc(function(){Wc(e,l,n,i)}),l}(n,e,t,r,i);return Hc(o)}Yc.prototype.render=Qc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(s(409));Wc(t,e,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;uc(function(){Wc(null,t,null,null)}),e[pr]=null}},Yc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Se();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Re.length&&0!==e&&e<Re[n].priority;n++);Re.splice(n,0,t),0===n&&Fe(t)}},xe=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ve(e,1|n),ic(e,Jt()),0===(6&Cl)&&(Bl=Jt()+500,Br()))}break;case 13:uc(function(){var e=Ds(t,1);if(null!==e){var n=tc();nc(e,t,1,n)}}),Gc(t,1)}},_e=function(t){if(13===t.tag){var e=Ds(t,134217728);if(null!==e)nc(e,t,134217728,tc());Gc(t,134217728)}},Ee=function(t){if(13===t.tag){var e=ec(t),n=Ds(t,e);if(null!==n)nc(n,t,e,tc());Gc(t,e)}},Se=function(){return be},ke=function(t,e){var n=be;try{return be=t,e()}finally{be=n}},_t=function(t,e,n){switch(e){case"input":if($(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=xr(i);if(!r)throw Error(s(90));K(i),$(i,r)}}}break;case"textarea":st(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Ct=cc,At=uc;var tu={usingClientEntryPoint:!1,Events:[br,wr,xr,Tt,It,cc]},eu={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=qt(t))?null:t.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{re=iu.inject(nu),se=iu}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(e))throw Error(s(200));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Xc(t))throw Error(s(299));var n=!1,i="",r=Kc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(i=e.identifierPrefix),void 0!==e.onRecoverableError&&(r=e.onRecoverableError)),e=Vc(t,1,!1,null,0,n,0,i,r),t[pr]=e.current,Bi(8===t.nodeType?t.parentNode:t),new Qc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw t=Object.keys(t).join(","),Error(s(268,t))}return t=null===(t=qt(e))?null:t.stateNode},e.flushSync=function(t){return uc(t)},e.hydrate=function(t,e,n){if(!Jc(e))throw Error(s(200));return Zc(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Xc(t))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",a=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),e=Bc(e,null,t,1,null!=n?n:null,r,0,o,a),t[pr]=e.current,Bi(t),i)for(t=0;t<i.length;t++)r=(r=(n=i[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Yc(e)},e.render=function(t,e,n){if(!Jc(e))throw Error(s(200));return Zc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Jc(t))throw Error(s(40));return!!t._reactRootContainer&&(uc(function(){Zc(null,null,t,!1,function(){t._reactRootContainer=null,t[pr]=null})}),!0)},e.unstable_batchedUpdates=cc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Jc(n))throw Error(s(200));if(null==t||void 0===t._reactInternals)throw Error(s(38));return Zc(t,e,n,!1,i)},e.version="18.3.1-next-f1338f8080-20240426"},853(t,e,n){t.exports=n(234)},950(t,e,n){!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(730)}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};n.r(i),n.d(i,{hasBrowserEnv:()=>Sp,hasStandardBrowserEnv:()=>Tp,hasStandardBrowserWebWorkerEnv:()=>Ip,navigator:()=>kp,origin:()=>Cp});var r=n(43),s=n(391);const o=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&i+1<t.length&&56320===(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],s=r+1<t.length,o=s?t[r+1]:0,a=r+2<t.length,l=a?t[r+2]:0,c=e>>2,u=(3&e)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],s=r<t.length?n[t.charAt(r)]:0;++r;const o=r<t.length?n[t.charAt(r)]:64;++r;const a=r<t.length?n[t.charAt(r)]:64;if(++r,null==e||null==s||null==o||null==a)throw new l;const c=e<<2|s>>4;if(i.push(c),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class l extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c=function(t){return function(t){const e=o(t);return a.encodeByteArray(e,!0)}(t).replace(/\./g,"")},u=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const h=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,d=()=>{try{return h()||(()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",PUBLIC_URL:"/math-wizard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDjPiJ9hUQpr6LR3DwknDRSdJgQ2ihi7w8",REACT_APP_FIREBASE_AUTH_DOMAIN:"math-wizard-e9ac3.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"math-wizard-e9ac3",REACT_APP_FIREBASE_STORAGE_BUCKET:"math-wizard-e9ac3.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1052246851665",REACT_APP_FIREBASE_APP_ID:"1:1052246851665:web:82c81f16e791aede4c7870"}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&u(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(t))}},f=t=>{var e,n;return null===(n=null===(e=d())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},p=()=>{var t;return null===(t=d())||void 0===t?void 0:t.config},g=t=>{var e;return null===(e=d())||void 0===e?void 0:e["_".concat(t)]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch(()=>{}),1===t.length?t(e):t(e,n))}}}function y(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function v(){return!function(){var t;const e=null===(t=d())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(i){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b(){try{return"object"===typeof indexedDB}catch(t){return!1}}class w extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,w.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,x.prototype.create)}}class x{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t){const e=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(t),i=this.errors[t],r=i?function(t,e){return t.replace(_,(t,n)=>{const i=e[n];return null!=i?String(i):"<".concat(n,"?>")})}(i,e):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new w(n,s,e)}}const _=/\{\$([^}]+)}/g;function E(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(S(n)&&S(s)){if(!E(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function S(t){return null!==t&&"object"===typeof t}function k(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function T(t){const e={};return t.replace(/^\?/,"").split("&").forEach(t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}}),e}function I(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class C{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(t=>{this.error(t)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!==typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"===typeof t[n])return!0;return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=A),void 0===i.error&&(i.error=A),void 0===i.complete&&(i.complete=A);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}}),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function A(){}function N(t){return t&&t._delegate?t._delegate:t}class P{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const M="[DEFAULT]";class R{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new m;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),i=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:M})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});n.resolve(t)}catch(e){}}}}clearInstance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...t.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.instances.has(t)}getOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.instancesOptions.get(t)||{}}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(i){}}getOrInitializeService(t){let{instanceIdentifier:e,options:n={}}=t,i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===M?void 0:r),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(s){}var r;return i||null}normalizeInstanceIdentifier(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.component?this.component.multipleInstances?t:M:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class O{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component ".concat(t.name," has already been registered with ").concat(this.name));e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new R(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const D=[];var L;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(L||(L={}));const F={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},j=L.INFO,U={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},V=function(t,e){if(e<t.logLevel)return;const n=(new Date).toISOString(),i=U[e];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];console[i]("[".concat(n,"]  ").concat(t.name,":"),...s)};class z{constructor(t){this.name=t,this._logLevel=j,this._logHandler=V,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in L))throw new TypeError('Invalid value "'.concat(t,'" assigned to `logLevel`'));this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?F[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...e),this._logHandler(this,L.DEBUG,...e)}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...e),this._logHandler(this,L.VERBOSE,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.INFO,...e),this._logHandler(this,L.INFO,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.WARN,...e),this._logHandler(this,L.WARN,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.ERROR,...e),this._logHandler(this,L.ERROR,...e)}}function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function W(t){var e=function(t,e){if("object"!=B(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=B(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==B(e)?e:e+""}function H(t,e,n){return(e=W(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach(function(e){H(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}let K,Q;const Y=new WeakMap,X=new WeakMap,J=new WeakMap,$=new WeakMap,Z=new WeakMap;let tt={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return X.get(t);if("objectStoreNames"===e)return t.objectStoreNames||J.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return it(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function et(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Q||(Q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(rt(this),n),it(Y.get(this))}:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return it(t.apply(rt(this),n))}:function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=t.call(rt(this),e,...i);return J.set(s,e.sort?e.sort():[e]),it(s)}}function nt(t){return"function"===typeof t?et(t):(t instanceof IDBTransaction&&function(t){if(X.has(t))return;const e=new Promise((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)});X.set(t,e)}(t),e=t,(K||(K=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(t,tt):t);var e}function it(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(it(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)});return e.then(e=>{e instanceof IDBCursor&&Y.set(e,t)}).catch(()=>{}),Z.set(e,t),e}(t);if($.has(t))return $.get(t);const e=nt(t);return e!==t&&($.set(t,e),Z.set(e,t)),e}const rt=t=>Z.get(t);const st=["get","getKey","getAll","getAllKeys","count"],ot=["put","add","delete","clear"],at=new Map;function lt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(at.get(e))return at.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=ot.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!st.includes(n))return;const s=async function(t){const e=this.transaction(t,r?"readwrite":"readonly");let s=e.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return i&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),r&&e.done]))[0]};return at.set(e,s),s}!function(t){tt=t(tt)}(t=>G(G({},t),{},{get:(e,n,i)=>lt(e,n)||t.get(e,n,i),has:(e,n)=>!!lt(e,n)||t.has(e,n)}));class ct{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){const e=t.getImmediate();return"".concat(e.library,"/").concat(e.version)}return null}).filter(t=>t).join(" ")}}const ut="@firebase/app",ht="0.10.13",dt=new z("@firebase/app"),ft="@firebase/app-compat",pt="@firebase/analytics-compat",gt="@firebase/analytics",mt="@firebase/app-check-compat",yt="@firebase/app-check",vt="@firebase/auth",bt="@firebase/auth-compat",wt="@firebase/database",xt="@firebase/data-connect",_t="@firebase/database-compat",Et="@firebase/functions",St="@firebase/functions-compat",kt="@firebase/installations",Tt="@firebase/installations-compat",It="@firebase/messaging",Ct="@firebase/messaging-compat",At="@firebase/performance",Nt="@firebase/performance-compat",Pt="@firebase/remote-config",Mt="@firebase/remote-config-compat",Rt="@firebase/storage",Ot="@firebase/storage-compat",Dt="@firebase/firestore",Lt="@firebase/vertexai-preview",Ft="@firebase/firestore-compat",jt="firebase",Ut="[DEFAULT]",Vt={[ut]:"fire-core",[ft]:"fire-core-compat",[gt]:"fire-analytics",[pt]:"fire-analytics-compat",[yt]:"fire-app-check",[mt]:"fire-app-check-compat",[vt]:"fire-auth",[bt]:"fire-auth-compat",[wt]:"fire-rtdb",[xt]:"fire-data-connect",[_t]:"fire-rtdb-compat",[Et]:"fire-fn",[St]:"fire-fn-compat",[kt]:"fire-iid",[Tt]:"fire-iid-compat",[It]:"fire-fcm",[Ct]:"fire-fcm-compat",[At]:"fire-perf",[Nt]:"fire-perf-compat",[Pt]:"fire-rc",[Mt]:"fire-rc-compat",[Rt]:"fire-gcs",[Ot]:"fire-gcs-compat",[Dt]:"fire-fst",[Ft]:"fire-fst-compat",[Lt]:"fire-vertex","fire-js":"fire-js",[jt]:"fire-js-all"},zt=new Map,Bt=new Map,Wt=new Map;function Ht(t,e){try{t.container.addComponent(e)}catch(n){dt.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),n)}}function qt(t){const e=t.name;if(Wt.has(e))return dt.debug("There were multiple attempts to register component ".concat(e,".")),!1;Wt.set(e,t);for(const n of zt.values())Ht(n,t);for(const n of Bt.values())Ht(n,t);return!0}function Gt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Kt(t){return void 0!==t.settings}const Qt=new x("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Yt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new P("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Qt.create("app-deleted",{appName:this._name})}}const Xt="10.14.1";function Jt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;if("object"!==typeof e){e={name:e}}const i=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!==typeof r||!r)throw Qt.create("bad-app-name",{appName:String(r)});if(n||(n=p()),!n)throw Qt.create("no-options");const s=zt.get(r);if(s){if(E(n,s.options)&&E(i,s.config))return s;throw Qt.create("duplicate-app",{appName:r})}const o=new O(r);for(const l of Wt.values())o.addComponent(l);const a=new Yt(n,i,o);return zt.set(r,a),a}function $t(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut;const e=zt.get(t);if(!e&&t===Ut&&p())return Jt();if(!e)throw Qt.create("no-app",{appName:t});return e}function Zt(t,e,n){var i;let r=null!==(i=Vt[t])&&void 0!==i?i:t;n&&(r+="-".concat(n));const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=['Unable to register library "'.concat(r,'" with version "').concat(e,'":')];return s&&t.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&o&&t.push("and"),o&&t.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),void dt.warn(t.join(" "))}qt(new P("".concat(r,"-version"),()=>({library:r,version:e}),"VERSION"))}const te="firebase-heartbeat-store";let ee=null;function ne(){return ee||(ee=function(t,e){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(t,e),a=it(o);return i&&o.addEventListener("upgradeneeded",t=>{i(it(o.result),t.oldVersion,t.newVersion,it(o.transaction),t)}),n&&o.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),a.then(t=>{s&&t.addEventListener("close",()=>s()),r&&t.addEventListener("versionchange",t=>r(t.oldVersion,t.newVersion,t))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(te)}catch(n){console.warn(n)}}}).catch(t=>{throw Qt.create("idb-open",{originalErrorMessage:t.message})})),ee}async function ie(t,e){try{const n=(await ne()).transaction(te,"readwrite"),i=n.objectStore(te);await i.put(e,re(t)),await n.done}catch(n){if(n instanceof w)dt.warn(n.message);else{const t=Qt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});dt.warn(t.message)}}}function re(t){return"".concat(t.name,"!").concat(t.options.appId)}class se{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new ae(e),this._heartbeatsCachePromise=this._storage.read().then(t=>(this._heartbeatsCache=t,t))}async triggerHeartbeat(){var t,e;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=oe();if(null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(t=>t.date===i))return;return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(n){dt.warn(n)}}async getHeartbeatsHeader(){var t;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=oe(),{heartbeatsToSend:n,unsentEntries:i}=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=t.slice();for(const r of t){const t=n.find(t=>t.agent===r.agent);if(t){if(t.dates.push(r.date),le(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),le(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=c(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return dt.warn(e),""}}}function oe(){return(new Date).toISOString().substring(0,10)}class ae{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!b()&&new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await ne()).transaction(te),n=await e.objectStore(te).get(re(t));return await e.done,n}catch(e){if(e instanceof w)dt.warn(e.message);else{const t=Qt.create("idb-get",{originalErrorMessage:null===e||void 0===e?void 0:e.message});dt.warn(t.message)}}}(this.app);return(null===t||void 0===t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return ie(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return ie(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function le(t){return c(JSON.stringify({version:2,heartbeats:t})).length}var ce;ce="",qt(new P("platform-logger",t=>new ct(t),"PRIVATE")),qt(new P("heartbeat",t=>new se(t),"PRIVATE")),Zt(ut,ht,ce),Zt(ut,ht,"esm2017"),Zt("fire-js","");Zt("firebase","10.14.1","app");function ue(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function he(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const de=he,fe=new x("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),pe=new z("@firebase/auth");function ge(t){if(pe.logLevel<=L.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];pe.error("Auth (".concat(Xt,"): ").concat(t),...n)}}function me(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw we(t,...n)}function ye(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return we(t,...n)}function ve(t,e,n){const i=Object.assign(Object.assign({},de()),{[e]:n});return new x("auth","Firebase",i).create(e,{appName:t.name})}function be(t){return ve(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function we(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if("string"!==typeof t){const e=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(e,...i)}return fe.create(t,...n)}function xe(t,e){if(!t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw we(e,...i)}}function _e(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ge(e),new Error(e)}function Ee(t,e){t||_e(e)}function Se(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function ke(){return"http:"===Te()||"https:"===Te()}function Te(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function Ie(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ke()||function(){const t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class Ce{constructor(t,e){this.shortDelay=t,this.longDelay=e,Ee(e>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Ie()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ae(t,e){Ee(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?"".concat(n).concat(e.startsWith("/")?e.slice(1):e):n}class Ne{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void _e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void _e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void _e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Pe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Me=new Ce(3e4,6e4);function Re(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Oe(t,e,n,i){return De(t,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let r={},s={};i&&("GET"===e?s=i:r={body:JSON.stringify(i)});const o=k(Object.assign({key:t.config.apiKey},s)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const l=Object.assign({method:e,headers:a},r);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Ne.fetch()(Fe(t,t.config.apiHost,n,o),l)})}async function De(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Pe),e);try{const e=new Ue(t),r=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw Ve(t,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const e=r.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ve(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Ve(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw Ve(t,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw ve(t,a,o);me(t,a)}}catch(r){if(r instanceof w)throw r;me(t,"network-request-failed",{message:String(r)})}}async function Le(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Oe(t,e,n,i,r);return"mfaPendingCredential"in s&&me(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Fe(t,e,n,i){const r="".concat(e).concat(n,"?").concat(i);return t.config.emulator?Ae(t.config,r):"".concat(t.config.apiScheme,"://").concat(r)}function je(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ue{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((t,e)=>{this.timer=setTimeout(()=>e(ye(this.auth,"network-request-failed")),Me.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ve(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=ye(t,e,i);return r.customData._tokenResponse=n,r}function ze(t){return void 0!==t&&void 0!==t.enterprise}class Be{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return je(e.enforcementState);return null}isProviderEnabled(t){return"ENFORCE"===this.getProviderEnforcementState(t)||"AUDIT"===this.getProviderEnforcementState(t)}}async function We(t,e){return Oe(t,"GET","/v2/recaptchaConfig",Re(t,e))}async function He(t,e){return Oe(t,"POST","/v1/accounts:lookup",e)}function qe(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function Ge(t){return 1e3*Number(t)}function Ke(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return ge("JWT malformed, contained fewer than 3 sections"),null;try{const t=u(n);return t?JSON.parse(t):(ge("Failed to decode base64 JWT payload"),null)}catch(r){return ge("Caught error parsing JWT payload as JSON",null===r||void 0===r?void 0:r.toString()),null}}function Qe(t){const e=Ke(t);return xe(e,"internal-error"),xe("undefined"!==typeof e.exp,"internal-error"),xe("undefined"!==typeof e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}async function Ye(t,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return e;try{return await e}catch(n){throw n instanceof w&&function(t){let{code:e}=t;return e==="auth/".concat("user-disabled")||e==="auth/".concat("user-token-expired")}(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}class Xe{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void((null===t||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Je{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=qe(this.lastLoginAt),this.creationTime=qe(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function $e(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Ye(t,He(n,{idToken:i}));xe(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?Ze(s.providerUserInfo):[],a=(l=t.providerData,c=o,[...l.filter(t=>!c.some(e=>e.providerId===t.providerId)),...c]);var l,c;const u=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Je(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}function Ze(t){return t.map(t=>{var{providerId:e}=t,n=ue(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class tn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){xe(t.idToken,"internal-error"),xe("undefined"!==typeof t.idToken,"internal-error"),xe("undefined"!==typeof t.refreshToken,"internal-error");const e="expiresIn"in t&&"undefined"!==typeof t.expiresIn?Number(t.expiresIn):Qe(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){xe(0!==t.length,"internal-error");const e=Qe(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(xe(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(t,e){const n=await De(t,{},async()=>{const n=k({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,s=Fe(t,i,"/v1/token","key=".concat(r)),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Ne.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new tn;return n&&(xe("string"===typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(xe("string"===typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(xe("number"===typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new tn,this.toJSON())}_performRefresh(){return _e("not implemented")}}function en(t,e){xe("string"===typeof t||"undefined"===typeof t,"internal-error",{appName:e})}class nn{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=ue(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Je(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await Ye(this,this.stsTokenManager.getToken(this.auth,t));return xe(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=N(t),i=await n.getIdToken(e),r=Ke(i);xe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"===typeof r.firebase?r.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:qe(Ge(r.auth_time)),issuedAtTime:qe(Ge(r.iat)),expirationTime:qe(Ge(r.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=N(t);await $e(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(xe(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(t=>Object.assign({},t)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new nn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await $e(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kt(this.auth.app))return Promise.reject(be(this.auth));const t=await this.getIdToken();return await Ye(this,async function(t,e){return Oe(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,l,c;const u=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=e.photoURL)&&void 0!==s?s:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=e.createdAt)&&void 0!==l?l:void 0,y=null!==(c=e.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:_}=e;xe(v&&_,t,"internal-error");const E=tn.fromJSON(this.name,_);xe("string"===typeof v,t,"internal-error"),en(u,t.name),en(h,t.name),xe("boolean"===typeof b,t,"internal-error"),xe("boolean"===typeof w,t,"internal-error"),en(d,t.name),en(f,t.name),en(p,t.name),en(g,t.name),en(m,t.name),en(y,t.name);const S=new nn({uid:v,auth:t,email:h,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:m,lastLoginAt:y});return x&&Array.isArray(x)&&(S.providerData=x.map(t=>Object.assign({},t))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new tn;i.updateFromServerResponse(e);const r=new nn({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await $e(r),r}static async _fromGetAccountInfoResponse(t,e,n){const i=e.users[0];xe(void 0!==i.localId,"internal-error");const r=void 0!==i.providerUserInfo?Ze(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length),o=new tn;o.updateFromIdToken(n);const a=new nn({uid:i.localId,auth:t,stsTokenManager:o,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new Je(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length)};return Object.assign(a,l),a}}const rn=new Map;function sn(t){Ee(t instanceof Function,"Expected a class definition");let e=rn.get(t);return e?(Ee(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rn.set(t,e),e)}class on{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}on.type="NONE";const an=on;function ln(t,e,n){return"firebase".concat(":",t,":").concat(e,":").concat(n)}class cn{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=ln(this.userKey,i.apiKey,r),this.fullPersistenceKey=ln("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?nn._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!e.length)return new cn(sn(an),t,n);const i=(await Promise.all(e.map(async t=>{if(await t._isAvailable())return t}))).filter(t=>t);let r=i[0]||sn(an);const s=ln(n,t.config.apiKey,t.name);let o=null;for(const c of e)try{const e=await c._get(s);if(e){const n=nn._fromJSON(t,e);c!==r&&(o=n),r=c;break}}catch(l){}const a=i.filter(t=>t._shouldAllowMigration);return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map(async t=>{if(t!==r)try{await t._remove(s)}catch(l){}})),new cn(r,t,n)):new cn(r,t,n)}}function un(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pn(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hn(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mn(e))return"Blackberry";if(yn(e))return"Webos";if(dn(e))return"Safari";if((e.includes("chrome/")||fn(e))&&!e.includes("edge/"))return"Chrome";if(gn(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function hn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/firefox\//i.test(t)}function dn(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:y()).toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function fn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/crios\//i.test(t)}function pn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/iemobile/i.test(t)}function gn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/android/i.test(t)}function mn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/blackberry/i.test(t)}function yn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/webos/i.test(t)}function vn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bn(){return function(){const t=y();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}function wn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return vn(t)||gn(t)||yn(t)||mn(t)||/windows phone/i.test(t)||pn(t)}function xn(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(t){case"Browser":e=un(y());break;case"Worker":e="".concat(un(y()),"-").concat(t);break;default:e=t}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(e,"/","JsCore","/").concat(Xt,"/").concat(i)}class _n{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise((n,i)=>{try{n(t(e))}catch(r){i(r)}});n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(n){e.reverse();for(const t of e)try{t()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class En{constructor(t){var e,n,i,r;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(e=s.minPasswordLength)&&void 0!==e?e:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=t.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=t.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,a),this.validatePasswordCharacterOptions(t,a),a.isValid&&(a.isValid=null===(e=a.meetsMinPasswordLength)||void 0===e||e),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(t,e){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){let n;this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);for(let i=0;i<t.length;i++)n=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}class Sn{constructor(t,e,n,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tn(this),this.idTokenSubscription=new Tn(this),this.beforeStateQueue=new _n(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=sn(e)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await cn.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(r){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUserFromIdToken(t){try{const e=await He(this,{idToken:t}),n=await nn._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(Kt(this.app)){const t=this.app.settings.authIdToken;return t?new Promise(e=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(t).then(e,e))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(n){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await $e(t)}catch(e){if((null===e||void 0===e?void 0:e.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Kt(this.app))return Promise.reject(be(this));const e=t?N(t):null;return e&&xe(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return t&&xe(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Kt(this.app)?Promise.reject(be(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Kt(this.app)?Promise.reject(be(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sn(t))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await async function(t){return Oe(t,"GET","/v2/passwordPolicy",Re(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),e=new En(t);null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new x("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(e.tenantId=this.tenantId),await async function(t,e){return Oe(t,"POST","/v2/accounts:revokeToken",Re(t,e))}(this,e)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&sn(t)||this._popupRedirectResolver;xe(e,this,"argument-error"),this.redirectPersistenceManager=await cn.create(this,[sn(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"===typeof e?e:e.next.bind(e);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(o,this,"internal-error"),o.then(()=>{s||r(this.currentUser)}),"function"===typeof e){const r=t.addObserver(e,n,i);return()=>{s=!0,r()}}{const n=t.addObserver(e);return()=>{s=!0,n()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=xn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;const e=await(null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken());return(null===e||void 0===e?void 0:e.error)&&function(t){if(pe.logLevel<=L.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];pe.warn("Auth (".concat(Xt,"): ").concat(t),...n)}}("Error while retrieving App Check token: ".concat(e.error)),null===e||void 0===e?void 0:e.token}}function kn(t){return N(t)}class Tn{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new C(t,e);return n.subscribe.bind(n)}(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let In={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Cn(t){return In.loadJS(t)}function An(t){return"__".concat(t).concat(Math.floor(1e6*Math.random()))}class Nn{constructor(t){this.type="recaptcha-enterprise",this.auth=kn(t)}async verify(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(e,n,i){const r=window.grecaptcha;ze(r)?r.enterprise.ready(()=>{r.enterprise.execute(e,{action:t}).then(t=>{n(t)}).catch(()=>{n("NO_RECAPTCHA")})}):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((t,i)=>{(async function(t){if(!e){if(null==t.tenantId&&null!=t._agentRecaptchaConfig)return t._agentRecaptchaConfig.siteKey;if(null!=t.tenantId&&void 0!==t._tenantRecaptchaConfigs[t.tenantId])return t._tenantRecaptchaConfigs[t.tenantId].siteKey}return new Promise(async(e,n)=>{We(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(i=>{if(void 0!==i.recaptchaKey){const n=new Be(i);return null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,e(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(t=>{n(t)})})})(this.auth).then(r=>{if(!e&&ze(window.grecaptcha))n(r,t,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let e=In.recaptchaEnterpriseScript;0!==e.length&&(e+=r),Cn(e).then(()=>{n(r,t,i)}).catch(t=>{i(t)})}}).catch(t=>{i(t)})})}}async function Pn(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=new Nn(t);let s;try{s=await r.verify(n)}catch(a){s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Mn(t,e,n,i){var r;if(null===(r=t._getRecaptchaConfig())||void 0===r?void 0:r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Pn(t,e,n,"getOobCode"===n);return i(t,r)}return i(t,e).catch(async r=>{if(r.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const r=await Pn(t,e,n,"getOobCode"===n);return i(t,r)}return Promise.reject(r)})}function Rn(t,e,n){const i=kn(t);xe(i._canInitEmulator,i,"emulator-config-failed"),xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=On(e),{host:o,port:a}=function(t){const e=On(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const t=r[1];return{host:t,port:Dn(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:Dn(e)}}}(e),l=null===a?"":":".concat(a);i.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}function On(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Dn(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class Ln{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return _e("not implemented")}_getIdTokenResponse(t){return _e("not implemented")}_linkToIdToken(t,e){return _e("not implemented")}_getReauthenticationResolver(t){return _e("not implemented")}}async function Fn(t,e){return Oe(t,"POST","/v1/accounts:signUp",e)}async function jn(t,e){return Le(t,"POST","/v1/accounts:signInWithPassword",Re(t,e))}async function Un(t,e){return Oe(t,"POST","/v1/accounts:sendOobCode",Re(t,e))}async function Vn(t,e){return Un(t,e)}class zn extends Ln{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new zn(t,e,"password")}static _fromEmailAndCode(t,e){return new zn(t,e,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t;if((null===e||void 0===e?void 0:e.email)&&(null===e||void 0===e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return Mn(t,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",jn);case"emailLink":return async function(t,e){return Le(t,"POST","/v1/accounts:signInWithEmailLink",Re(t,e))}(t,{email:this._email,oobCode:this._password});default:me(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return Mn(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fn);case"emailLink":return async function(t,e){return Le(t,"POST","/v1/accounts:signInWithEmailLink",Re(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:me(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Bn(t,e){return Le(t,"POST","/v1/accounts:signInWithIdp",Re(t,e))}class Wn extends Ln{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Wn(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):me("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=ue(e,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Wn(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(t){return Bn(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Bn(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Bn(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=k(e)}return t}}const Hn={USER_NOT_FOUND:"user-not-found"};class qn extends Ln{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new qn({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new qn({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return Le(t,"POST","/v1/accounts:signInWithPhoneNumber",Re(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await Le(t,"POST","/v1/accounts:signInWithPhoneNumber",Re(t,e));if(n.temporaryProof)throw Ve(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return Le(t,"POST","/v1/accounts:signInWithPhoneNumber",Re(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),Hn)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"===typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new qn({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Gn{constructor(t){var e,n,i,r,s,o;const a=T(I(t)),l=null!==(e=a.apiKey)&&void 0!==e?e:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);xe(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=T(I(t)).link,n=e?T(I(e)).deep_link_id:null,i=T(I(t)).deep_link_id;return(i?T(I(i)).link:null)||i||n||e||t}(t);try{return new Gn(e)}catch(n){return null}}}class Kn{constructor(){this.providerId=Kn.PROVIDER_ID}static credential(t,e){return zn._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=Gn.parseLink(e);return xe(n,"argument-error"),zn._fromEmailAndCode(t,n.code,n.tenantId)}}Kn.PROVIDER_ID="password",Kn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Kn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Qn{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Yn extends Qn{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Xn extends Yn{constructor(){super("facebook.com")}static credential(t){return Wn._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Xn.credentialFromTaggedObject(t)}static credentialFromError(t){return Xn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Xn.credential(e.oauthAccessToken)}catch(n){return null}}}Xn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Xn.PROVIDER_ID="facebook.com";class Jn extends Yn{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Wn._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Jn.credentialFromTaggedObject(t)}static credentialFromError(t){return Jn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Jn.credential(n,i)}catch(r){return null}}}Jn.GOOGLE_SIGN_IN_METHOD="google.com",Jn.PROVIDER_ID="google.com";class $n extends Yn{constructor(){super("github.com")}static credential(t){return Wn._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return $n.credentialFromTaggedObject(t)}static credentialFromError(t){return $n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return $n.credential(e.oauthAccessToken)}catch(n){return null}}}$n.GITHUB_SIGN_IN_METHOD="github.com",$n.PROVIDER_ID="github.com";class Zn extends Yn{constructor(){super("twitter.com")}static credential(t,e){return Wn._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Zn.credentialFromTaggedObject(t)}static credentialFromError(t){return Zn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Zn.credential(n,i)}catch(r){return null}}}async function ti(t,e){return Le(t,"POST","/v1/accounts:signUp",Re(t,e))}Zn.TWITTER_SIGN_IN_METHOD="twitter.com",Zn.PROVIDER_ID="twitter.com";class ei{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await nn._fromIdTokenResponse(t,n,i),s=ni(n);return new ei({user:r,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=ni(n);return new ei({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function ni(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class ii extends w{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,ii.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new ii(t,e,n,i)}}function ri(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw ii._fromErrorAndOperation(t,n,e,i);throw n})}async function si(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await Ye(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ei._forOperation(t,"link",i)}async function oi(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=t;if(Kt(i.app))return Promise.reject(be(i));const r="reauthenticate";try{const s=await Ye(t,ri(i,r,e,t),n);xe(s.idToken,i,"internal-error");const o=Ke(s.idToken);xe(o,i,"internal-error");const{sub:a}=o;return xe(t.uid===a,i,"user-mismatch"),ei._forOperation(t,r,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&me(i,"user-mismatch"),s}}async function ai(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Kt(t.app))return Promise.reject(be(t));const i="signIn",r=await ri(t,i,e),s=await ei._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function li(t,e){return ai(kn(t),e)}function ci(t,e,n){var i;xe((null===(i=n.url)||void 0===i?void 0:i.length)>0,t,"invalid-continue-uri"),xe("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(xe(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(xe(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function ui(t){const e=kn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hi(t,e,n){const{auth:i}=t,r={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(r.email=e),n&&(r.password=n);const s=await Ye(t,async function(t,e){return Oe(t,"POST","/v1/accounts:update",e)}(i,r));await t._updateTokensIfNecessary(s,!0)}new WeakMap;const di="__sak";class fi{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(di,"1"),this.storage.removeItem(di),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class pi extends fi{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wn(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t.key)return void this.forAllChangedKeys((t,e,n)=>{this.notifyListeners(t,n)});const n=t.key;e?this.detachListener():this.stopPolling();const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);bn()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,10):i()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}pi.type="LOCAL";const gi=pi;class mi extends fi{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}mi.type="SESSION";const yi=mi;class vi{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(e=>e.isListeningto(t));if(e)return e;const n=new vi(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map(async t=>t(e.origin,r)),a=await function(t){return Promise.all(t.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function bi(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<e;i++)n+=Math.floor(10*Math.random());return t+n}vi.receivers=[];class wi{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise((o,a)=>{const l=bi("",20);i.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(c),r=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),o(e.data.response);break;default:clearTimeout(c),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:l,data:e},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function xi(){return window}function _i(){return"undefined"!==typeof xi().WorkerGlobalScope&&"function"===typeof xi().importScripts}const Ei="firebaseLocalStorageDb",Si="firebaseLocalStorage",ki="fbase_key";class Ti{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Ii(t,e){return t.transaction([Si],e?"readwrite":"readonly").objectStore(Si)}function Ci(){const t=indexedDB.open(Ei,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const e=t.result;try{e.createObjectStore(Si,{keyPath:ki})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Si)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(Ei);return new Ti(t).toPromise()}(),e(await Ci()))})})}async function Ai(t,e,n){const i=Ii(t,!0).put({[ki]:e,value:n});return new Ti(i).toPromise()}function Ni(t,e){const n=Ii(t,!0).delete(e);return new Ti(n).toPromise()}class Pi{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Ci()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(n){if(e++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _i()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vi._getInstance(_i()?self:null),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new wi(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&function(){var t;return(null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Ci();return await Ai(t,di,"1"),await Ni(t,di),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ai(n,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(e=>async function(t,e){const n=Ii(t,!1).get(e),i=await new Ti(n).toPromise();return void 0===i?null:i.value}(e,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Ni(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(t=>{const e=Ii(t,!1).getAll();return new Ti(e).toPromise()});if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;if(0!==t.length)for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Pi.type="LOCAL";const Mi=Pi;An("rcb"),new Ce(3e4,6e4);const Ri="recaptcha";async function Oi(t,e,n){var i;const r=await n.verify();try{let s;if(xe("string"===typeof r,t,"argument-error"),xe(n.type===Ri,t,"argument-error"),s="string"===typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){xe("enroll"===e.type,t,"internal-error");const n=await function(t,e){return Oe(t,"POST","/v2/accounts/mfaEnrollment:start",Re(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{xe("signin"===e.type,t,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;xe(n,t,"missing-multi-factor-info");const o=await function(t,e){return Oe(t,"POST","/v2/accounts/mfaSignIn:start",Re(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return Oe(t,"POST","/v1/accounts:sendVerificationCode",Re(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}}class Di{constructor(t){this.providerId=Di.PROVIDER_ID,this.auth=kn(t)}verifyPhoneNumber(t,e){return Oi(this.auth,t,N(e))}static credential(t,e){return qn._fromVerification(t,e)}static credentialFromResult(t){const e=t;return Di.credentialFromTaggedObject(e)}static credentialFromError(t){return Di.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?qn._fromTokenResponse(n,i):null}}function Li(t,e){return e?sn(e):(xe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}Di.PROVIDER_ID="phone",Di.PHONE_SIGN_IN_METHOD="phone";class Fi extends Ln{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Bn(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Bn(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Bn(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function ji(t){return ai(t.auth,new Fi(t),t.bypassAuthState)}function Ui(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),oi(n,new Fi(t),t.bypassAuthState)}async function Vi(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),si(n,new Fi(t),t.bypassAuthState)}class zi{constructor(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return ji;case"linkViaPopup":case"linkViaRedirect":return Vi;case"reauthViaPopup":case"reauthViaRedirect":return Ui;default:me(this.auth,"internal-error")}}resolve(t){Ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Bi=new Ce(2e3,1e4);class Wi extends zi{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Wi.currentPopupAction&&Wi.currentPopupAction.cancel(),Wi.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return xe(t,this.auth,"internal-error"),t}async onExecution(){Ee(1===this.filter.length,"Popup operations only handle one event");const t=bi();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ye(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wi.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(t,Bi.get())};t()}}Wi.currentPopupAction=null;const Hi=new Map;class qi extends zi{constructor(t,e){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let t=Hi.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=Qi(e),i=Ki(t);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}Hi.set(this.auth._key(),t)}return this.bypassAuthState||Hi.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Gi(t,e){Hi.set(t._key(),e)}function Ki(t){return sn(t._redirectPersistence)}function Qi(t){return ln("pendingRedirect",t.config.apiKey,t.name)}async function Yi(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Kt(t.app))return Promise.reject(be(t));const i=kn(t),r=Li(i,e),s=new qi(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}class Xi{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $i(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!$i(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(ye(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ji(t))}saveEventToCache(t){this.cachedEventUids.add(Ji(t)),this.lastProcessedEventTime=Date.now()}}function Ji(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(t=>t).join("-")}function $i(t){let{type:e,error:n}=t;return"unknown"===e&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Zi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tr=/^https?/;async function er(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t){return Oe(t,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(t);for(const i of e)try{if(nr(i))return}catch(n){}me(t,"unauthorized-domain")}function nr(t){const e=Se(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!tr.test(n))return!1;if(Zi.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const ir=new Ce(3e4,6e4);function rr(){const t=xi().___jsl;if(null===t||void 0===t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function sr(t){return new Promise((e,n)=>{var i,r,s;function o(){rr(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rr(),n(ye(t,"network-request-failed"))},timeout:ir.get()})}if(null===(r=null===(i=xi().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=xi().gapi)||void 0===s?void 0:s.load)){const e=An("iframefcb");return xi()[e]=()=>{gapi.load?o():n(ye(t,"network-request-failed"))},Cn("".concat(In.gapiScript,"?onload=").concat(e)).catch(t=>n(t))}o()}}).catch(t=>{throw or=null,t})}let or=null;const ar=new Ce(5e3,15e3),lr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ur(t){const e=t.config;xe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ae(e,"emulator/auth/iframe"):"https://".concat(t.config.authDomain,"/").concat("__/auth/iframe"),i={apiKey:e.apiKey,appName:t.name,v:Xt},r=cr.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),"".concat(n,"?").concat(k(i).slice(1))}async function hr(t){const e=await function(t){return or=or||sr(t),or}(t),n=xi().gapi;return xe(n,t,"internal-error"),e.open({where:document.body,url:ur(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lr,dontclear:!0},e=>new Promise(async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=ye(t,"network-request-failed"),s=xi().setTimeout(()=>{i(r)},ar.get());function o(){xi().clearTimeout(s),n(e)}e.ping(o).then(o,()=>{i(r)})}))}const dr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class fr{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function pr(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},dr),{width:i.toString(),height:r.toString(),top:s,left:o}),c=y().toLowerCase();n&&(a=fn(c)?"_blank":n),hn(c)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((t,e)=>{let[n,i]=e;return"".concat(t).concat(n,"=").concat(i,",")},"");if(function(){var t;return vn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:y())&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==a)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",a),new fr(null);const h=window.open(e||"",a,u);xe(h,t,"popup-blocked");try{h.focus()}catch(d){}return new fr(h)}const gr="__/auth/handler",mr="emulator/auth/handler",yr=encodeURIComponent("fac");async function vr(t,e,n,i,r,s){xe(t.config.authDomain,t,"auth-domain-config-required"),xe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Xt,eventId:r};if(e instanceof Qn){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(s||{}))o[t]=e}if(e instanceof Yn){const t=e.getScopes().filter(t=>""!==t);t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await t._getAppCheckToken(),c=l?"#".concat(yr,"=").concat(encodeURIComponent(l)):"";return"".concat(function(t){let{config:e}=t;if(!e.emulator)return"https://".concat(e.authDomain,"/").concat(gr);return Ae(e,mr)}(t),"?").concat(k(a).slice(1)).concat(c)}const br="webStorageSupport";const wr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yi,this._completeRedirectFn=Yi,this._overrideRedirectResult=Gi}async _openPopup(t,e,n,i){var r;Ee(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return pr(t,await vr(t,e,n,Se(),i),bi())}async _openRedirect(t,e,n,i){await this._originValidation(t);return function(t){xi().location.href=t}(await vr(t,e,n,Se(),i)),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(Ee(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch(()=>{delete this.eventManagers[e]}),n}async initAndGetManager(t){const e=await hr(t),n=new Xi(t);return e.register("authEvent",e=>{xe(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event");return{status:n.onEvent(e.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(br,{type:br},n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[br];void 0!==r&&e(!!r),me(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=er(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return wn()||dn()||vn()}};var xr="@firebase/auth",_r="1.7.9";class Er{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(t)}}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(e=>{t((null===e||void 0===e?void 0:e.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Sr=g("authIdTokenMaxAge")||300;let kr=null;var Tr,Ir;Tr={loadJS:t=>new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=ye("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",function(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(i)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},In=Tr,Ir="Browser",qt(new P("auth",(t,e)=>{let{options:n}=e;const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;xe(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:Ir,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xn(Ir)},c=new Sn(i,r,s,l);return function(t,e){const n=(null===e||void 0===e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(sn);(null===e||void 0===e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null===e||void 0===e?void 0:e.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider("auth-internal").initialize()})),qt(new P("auth-internal",t=>(t=>new Er(t))(kn(t.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Zt(xr,_r,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ir)),Zt(xr,_r,"esm2017");var Cr,Ar,Nr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Pr={};(function(){var t;function e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(t,e,n){n||(n=0);var i=Array(16);if("string"===typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function i(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}!function(t,e){function n(){}n.prototype=e.prototype,t.D=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.C=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}(e,function(){this.blockSize=-1}),e.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.u=function(t,e){void 0===e&&(e=t.length);for(var i=e-this.blockSize,r=this.B,s=this.h,o=0;o<e;){if(0==s)for(;o<=i;)n(this,t,o),o+=this.blockSize;if("string"===typeof t){for(;o<e;)if(r[s++]=t.charCodeAt(o++),s==this.blockSize){n(this,r),s=0;break}}else for(;o<e;)if(r[s++]=t[o++],s==this.blockSize){n(this,r),s=0;break}}this.h=s,this.o+=e},e.prototype.v=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.o;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.u(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var r={};function s(t){return-128<=t&&128>t?function(t,e){var n=r;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(t){return new i([0|t],0>t?-1:0)}):new i([0|t],0>t?-1:0)}function o(t){if(isNaN(t)||!isFinite(t))return a;if(0>t)return d(o(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=4294967296;return new i(e,0)}var a=s(0),l=s(1),c=s(16777216);function u(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function h(t){return-1==t.h}function d(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new i(n,~t.h).add(l)}function f(t,e){return t.add(d(e))}function p(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function g(t,e){this.g=t,this.h=e}function m(t,e){if(u(e))throw Error("division by zero");if(u(t))return new g(a,a);if(h(t))return e=m(d(t),e),new g(d(e.g),d(e.h));if(h(e))return e=m(t,d(e)),new g(d(e.g),e.h);if(30<t.g.length){if(h(t)||h(e))throw Error("slowDivide_ only works with positive integers.");for(var n=l,i=e;0>=i.l(t);)n=y(n),i=y(i);var r=v(n,1),s=v(i,1);for(i=v(i,2),n=v(n,2);!u(i);){var c=s.add(i);0>=c.l(t)&&(r=r.add(n),s=c),i=v(i,1),n=v(n,1)}return e=f(t,r.j(e)),new g(r,e)}for(r=a;0<=t.l(e);){for(n=Math.max(1,Math.floor(t.m()/e.m())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),c=(s=o(n)).j(e);h(c)||0<c.l(t);)c=(s=o(n-=i)).j(e);u(s)&&(s=l),r=r.add(s),t=f(t,c)}return new g(r,t)}function y(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.i(r)<<1|t.i(r-1)>>>31;return new i(n,t.h)}function v(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],o=0;o<r;o++)s[o]=0<e?t.i(o+n)>>>e|t.i(o+n+1)<<32-e:t.i(o+n);return new i(s,t.h)}(t=i.prototype).m=function(){if(h(this))return-d(this).m();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.i(n);t+=(0<=i?i:4294967296+i)*e,e*=4294967296}return t},t.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(u(this))return"0";if(h(this))return"-"+d(this).toString(t);for(var e=o(Math.pow(t,6)),n=this,i="";;){var r=m(n,e).g,s=((0<(n=f(n,r.j(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(u(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},t.i=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},t.l=function(t){return h(t=f(this,t))?-1:u(t)?0:1},t.abs=function(){return h(this)?d(this):this},t.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var o=r+(65535&this.i(s))+(65535&t.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(t.i(s)>>>16);r=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new i(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(t){if(u(this)||u(t))return a;if(h(this))return h(t)?d(this).j(d(t)):d(d(this).j(t));if(h(t))return d(this.j(d(t)));if(0>this.l(c)&&0>t.l(c))return o(this.m()*t.m());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var l=this.i(r)>>>16,f=65535&this.i(r),g=t.i(s)>>>16,m=65535&t.i(s);n[2*r+2*s]+=f*m,p(n,2*r+2*s),n[2*r+2*s+1]+=l*m,p(n,2*r+2*s+1),n[2*r+2*s+1]+=f*g,p(n,2*r+2*s+1),n[2*r+2*s+2]+=l*g,p(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new i(n,0)},t.A=function(t){return m(this,t).h},t.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)&t.i(r);return new i(n,this.h&t.h)},t.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)|t.i(r);return new i(n,this.h|t.h)},t.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)^t.i(r);return new i(n,this.h^t.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,Ar=Pr.Md5=e,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=o,i.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return d(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=o(Math.pow(n,8)),r=a,s=0;s<e.length;s+=8){var l=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),r=r.j(l).add(o(c))):r=(r=r.j(i)).add(o(c))}return r},Cr=Pr.Integer=i}).apply("undefined"!==typeof Nr?Nr:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Mr,Rr,Or,Dr,Lr,Fr,jr,Ur,Vr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},zr={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};var n=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Vr&&Vr];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(t,i){if(i)t:{var r=n;t=t.split(".");for(var s=0;s<t.length-1;s++){var o=t[s];if(!(o in r))break t;r=r[o]}(i=i(s=r[t=t[t.length-1]]))!=s&&null!=i&&e(r,t,{configurable:!0,writable:!0,value:i})}}("Array.prototype.values",function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,i=!1,r={next:function(){if(!i&&n<t.length){var r=n++;return{value:e(r,t[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,function(t,e){return e})}});var i=i||{},r=this||self;function s(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function o(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function a(t,e,n){return t.call.apply(t.bind,arguments)}function l(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function c(t,e,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function h(t,e){function n(){}n.prototype=e.prototype,t.aa=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Qb=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function d(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function f(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(s(e)){const n=t.length||0,i=e.length||0;t.length=n+i;for(let r=0;r<i;r++)t[n+r]=e[r]}else t.push(e)}}function p(t){return/^[\s\xa0]*$/.test(t)}function g(){var t=r.navigator;return t&&(t=t.userAgent)?t:""}function m(t){return m[" "](t),t}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function v(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function b(t){const e={};for(const n in t)e[n]=t[n];return e}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(t,e){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)t[n]=i[n];for(let e=0;e<w.length;e++)n=w[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function _(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function E(t){r.setTimeout(()=>{throw t},0)}function S(){var t=A;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var k=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new T,t=>t.reset());class T{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let I,C=!1,A=new class{constructor(){this.h=this.g=null}add(t,e){const n=k.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},N=()=>{const t=r.Promise.resolve(void 0);I=()=>{t.then(P)}};var P=()=>{for(var t;t=S();){try{t.h.call(t.g)}catch(n){E(n)}var e=k;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}C=!1};function M(){this.s=this.s,this.C=this.C}function R(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};r.addEventListener("test",t,e),r.removeEventListener("test",t,e)}catch(n){}return t}();function D(t,e){if(R.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(y){t:{try{m(e.nodeName);var r=!0;break t}catch(s){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:L[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&D.aa.h.call(this)}}h(D,R);var L={2:"touch",3:"pen",4:"mouse"};D.prototype.h=function(){D.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),j=0;function U(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=r,this.key=++j,this.da=this.fa=!1}function V(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function z(t){this.src=t,this.g={},this.h=0}function B(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=Array.prototype.indexOf.call(r,e,void 0);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(V(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function W(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.da&&s.listener==e&&s.capture==!!n&&s.ha==i)return r}return-1}z.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=W(t,e,i,r);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new U(e,this.src,s,!!i,r)).fa=n,t.push(e)),e};var H="closure_lm_"+(1e6*Math.random()|0),q={};function G(t,e,n,i,r){if(i&&i.once)return Q(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)G(t,e[s],n,i,r);return null}return n=et(n),t&&t[F]?t.K(e,n,o(i)?!!i.capture:!!i,r):K(t,e,n,!1,i,r)}function K(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var a=o(r)?!!r.capture:!!r,l=Z(t);if(l||(t[H]=l=new z(t)),(n=l.add(e,n,i,a,s)).proxy)return n;if(i=function(){function t(n){return e.call(t.src,t.listener,n)}const e=$;return t}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)O||(r=a),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(J(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function Q(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Q(t,e[s],n,i,r);return null}return n=et(n),t&&t[F]?t.L(e,n,o(i)?!!i.capture:!!i,r):K(t,e,n,!0,i,r)}function Y(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)Y(t,e[s],n,i,r);else i=o(i)?!!i.capture:!!i,n=et(n),t&&t[F]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=W(s=t.g[e],n,i,r))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--)))):t&&(t=Z(t))&&(e=t.g[e.toString()],t=-1,e&&(t=W(e,n,i,r)),(n=-1<t?e[t]:null)&&X(n))}function X(t){if("number"!==typeof t&&t&&!t.da){var e=t.src;if(e&&e[F])B(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(J(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Z(e))?(B(n,t),0==n.h&&(n.src=null,e[H]=null)):V(t)}}}function J(t){return t in q?q[t]:q[t]="on"+t}function $(t,e){if(t.da)t=!0;else{e=new D(e,this);var n=t.listener,i=t.ha||t.src;t.fa&&X(t),t=n.call(i,e)}return t}function Z(t){return(t=t[H])instanceof z?t:null}var tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function et(t){return"function"===typeof t?t:(t[tt]||(t[tt]=function(e){return t.handleEvent(e)}),t[tt])}function nt(){M.call(this),this.i=new z(this),this.M=this,this.F=null}function it(t,e){var n,i=t.F;if(i)for(n=[];i;i=i.F)n.push(i);if(t=t.M,i=e.type||e,"string"===typeof e)e=new R(e,t);else if(e instanceof R)e.target=e.target||t;else{var r=e;x(e=new R(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=rt(o,i,!0,e)&&r}if(r=rt(o=e.g=t,i,!0,e)&&r,r=rt(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=rt(o=e.g=n[s],i,!1,e)&&r}function rt(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&B(t.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}function st(t,e,n){if("function"===typeof t)n&&(t=c(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=c(t.handleEvent,t)}return 2147483647<Number(e)?-1:r.setTimeout(t,e||0)}function ot(t){t.g=st(()=>{t.g=null,t.i&&(t.i=!1,ot(t))},t.l);const e=t.h;t.h=null,t.m.apply(null,e)}h(nt,M),nt.prototype[F]=!0,nt.prototype.removeEventListener=function(t,e,n,i){Y(this,t,e,n,i)},nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)V(n[i]);delete e.g[t],e.h--}}this.F=null},nt.prototype.K=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},nt.prototype.L=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};class at extends M{constructor(t,e){super(),this.m=t,this.l=e,this.h=null,this.i=!1,this.g=null}j(t){this.h=arguments,this.g?this.i=!0:ot(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lt(t){M.call(this),this.h=t,this.g={}}h(lt,M);var ct=[];function ut(t){v(t.g,function(t,e){this.g.hasOwnProperty(e)&&X(t)},t),t.g={}}lt.prototype.N=function(){lt.aa.N.call(this),ut(this)},lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ht=r.JSON.stringify,dt=r.JSON.parse,ft=class{stringify(t){return r.JSON.stringify(t,void 0)}parse(t){return r.JSON.parse(t,void 0)}};function pt(){}function gt(t){return t.h||(t.h=t.i())}function mt(){}pt.prototype.h=null;var yt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vt(){R.call(this,"d")}function bt(){R.call(this,"c")}h(vt,R),h(bt,R);var wt={},xt=null;function _t(){return xt=xt||new nt}function Et(t){R.call(this,wt.La,t)}function St(t){const e=_t();it(e,new Et(e))}function kt(t,e){R.call(this,wt.STAT_EVENT,t),this.stat=e}function Tt(t){const e=_t();it(e,new kt(e,t))}function It(t,e){R.call(this,wt.Ma,t),this.size=e}function Ct(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return r.setTimeout(function(){t()},e)}function At(){this.g=!0}function Nt(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return ht(n)}catch(a){return e}}(t,n)+(i?" "+i:"")})}wt.La="serverreachability",h(Et,R),wt.STAT_EVENT="statevent",h(kt,R),wt.Ma="timingevent",h(It,R),At.prototype.xa=function(){this.g=!1},At.prototype.info=function(){};var Pt,Mt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ot(){}function Dt(t,e,n,i){this.j=t,this.i=e,this.l=n,this.R=i||1,this.U=new lt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lt}function Lt(){this.i=null,this.g="",this.h=!1}h(Ot,pt),Ot.prototype.g=function(){return new XMLHttpRequest},Ot.prototype.i=function(){return{}},Pt=new Ot;var Ft={},jt={};function Ut(t,e,n){t.L=1,t.v=he(oe(e)),t.m=n,t.P=!0,Vt(t,null)}function Vt(t,e){t.F=Date.now(),Wt(t),t.A=oe(t.v);var n=t.A,i=t.R;Array.isArray(i)||(i=[String(i)]),ke(n.i,"t",i),t.C=0,n=t.j.J,t.h=new Lt,t.g=fn(t.j,n?e:null,!t.m),0<t.O&&(t.M=new at(c(t.Y,t,t.g),t.O)),e=t.U,n=t.g,i=t.ca;var r="readystatechange";Array.isArray(r)||(r&&(ct[0]=r.toString()),r=ct);for(var s=0;s<r.length;s++){var o=G(n,r[s],i||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}e=t.H?b(t.H):{},t.m?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),St(),function(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o})}(t.i,t.u,t.A,t.l,t.R,t.m)}function zt(t){return!!t.g&&("GET"==t.u&&2!=t.L&&t.j.Ca)}function Bt(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?jt:(n=Number(e.substring(n,i)),isNaN(n)?Ft:(i+=1)+n>e.length?jt:(e=e.slice(i,i+n),t.C=i+n,e))}function Wt(t){t.S=Date.now()+t.I,Ht(t,t.I)}function Ht(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Ct(c(t.ba,t),e)}function qt(t){t.B&&(r.clearTimeout(t.B),t.B=null)}function Gt(t){0==t.j.G||t.J||ln(t.j,t)}function Kt(t){qt(t);var e=t.M;e&&"function"==typeof e.ma&&e.ma(),t.M=null,ut(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ma())}function Qt(t,e){try{var n=t.j;if(0!=n.G&&(n.g==t||Zt(n.h,t)))if(!t.K&&Zt(n.h,t)&&3==n.G){try{var i=n.Da.g.parse(e)}catch(u){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;an(n),Xe(n)}rn(n),Tt(18)}}else n.za=r[1],0<n.za-n.T&&37500>r[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ct(c(n.Za,n),6e3));if(1>=$t(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((t.K||n.g==t)&&an(n),!p(e))for(r=n.Da.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const e=c[3];null!=e&&(n.la=e,n.j.info("VER="+n.la));const r=c[4];null!=r&&(n.Aa=r,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.L=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.h;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(te(s,s.h),s.h=null))}if(i.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.ya=t,ue(i.I,i.D,t))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-t.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=t;if((i=n).qa=dn(i,i.J?i.ia:null,i.W),o.K){ee(i.h,o);var a=o,l=i.L;l&&(a.I=l),a.B&&(qt(a),Wt(a)),i.g=o}else nn(i);0<n.i.length&&$e(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Ye(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}St()}catch(u){}}Dt.prototype.ca=function(t){t=t.target;const e=this.M;e&&3==qe(t)?e.j():this.Y(t)},Dt.prototype.Y=function(t){try{if(t==this.g)t:{const d=qe(this.g);var e=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Ge(this.g)))){this.J||4!=d||7==e||St(),qt(this);var n=this.g.Z();this.X=n;e:if(zt(this)){var i=Ge(this.g);t="";var s=i.length,o=4==qe(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Kt(this),Gt(this);var a="";break e}this.h.i=new r.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:!(o&&e==s-1)});i.length=0,this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(t,e,n,i,r,s,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){e:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break e}}u=null}if(!(n=u)){this.o=!1,this.s=3,Tt(12),Kt(this),Gt(this);break t}Nt(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qt(this,n)}if(this.P){let t;for(n=!0;!this.J&&this.C<a.length;){if(t=Bt(this,a),t==jt){4==d&&(this.s=4,Tt(14),n=!1),Nt(this.i,this.l,null,"[Incomplete Response]");break}if(t==Ft){this.s=4,Tt(15),Nt(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Nt(this.i,this.l,t,null),Qt(this,t)}if(zt(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Tt(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Tt(11))}}else Nt(this.i,this.l,a,"[Invalid Chunked Response]"),Kt(this),Gt(this)}else Nt(this.i,this.l,a,null),Qt(this,a);4==d&&Kt(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,Wt(this)))}else(function(t){const e={};t=(t.g&&2<=qe(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(p(t[i]))continue;var n=_(t[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(t){return t.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),Kt(this),Gt(this)}}}catch(Br){}},Dt.prototype.cancel=function(){this.J=!0,Kt(this)},Dt.prototype.ba=function(){this.B=null;const t=Date.now();0<=t-this.S?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.i,this.A),2!=this.L&&(St(),Tt(17)),Kt(this),this.s=2,Gt(this)):Ht(this,this.S-t)};var Yt=class{constructor(t,e){this.g=t,this.map=e}};function Xt(t){this.l=t||10,r.PerformanceNavigationTiming?t=0<(t=r.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jt(t){return!!t.h||!!t.g&&t.g.size>=t.j}function $t(t){return t.h?1:t.g?t.g.size:0}function Zt(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function te(t,e){t.g?t.g.add(e):t.h=e}function ee(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function ne(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return d(t.i)}function ie(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(s(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.na&&"function"==typeof t.na)return t.na();if(!t.V||"function"!=typeof t.V){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(s(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.V&&"function"==typeof t.V)return t.V();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(s(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}Xt.prototype.cancel=function(){if(this.i=ne(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var re=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function se(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof se){this.h=t.h,ae(this,t.j),this.o=t.o,this.g=t.g,le(this,t.s),this.l=t.l;var e=t.i,n=new xe;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ce(this,n),this.m=t.m}else t&&(e=String(t).match(re))?(this.h=!1,ae(this,e[1]||"",!0),this.o=de(e[2]||""),this.g=de(e[3]||"",!0),le(this,e[4]),this.l=de(e[5]||"",!0),ce(this,e[6]||"",!0),this.m=de(e[7]||"")):(this.h=!1,this.i=new xe(null,this.h))}function oe(t){return new se(t)}function ae(t,e,n){t.j=n?de(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function le(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.s=e}else t.s=null}function ce(t,e,n){e instanceof xe?(t.i=e,function(t,e){e&&!t.j&&(_e(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Ee(this,e),ke(this,n,t))},t)),t.j=e}(t.i,t.h)):(n||(e=fe(e,be)),t.i=new xe(e,t.h))}function ue(t,e,n){t.i.set(e,n)}function he(t){return ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function de(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function fe(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,pe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function pe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}se.prototype.toString=function(){var t=[],e=this.j;e&&t.push(fe(e,me,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(fe(e,me,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(fe(n,"/"==n.charAt(0)?ve:ye,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",fe(n,we)),t.join("")};var ge,me=/[#\/\?@]/g,ye=/[#\?:]/g,ve=/[#\?]/g,be=/[#\?@]/g,we=/#/g;function xe(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function _e(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ee(t,e){_e(t),e=Te(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Se(t,e){return _e(t),e=Te(t,e),t.g.has(e)}function ke(t,e,n){Ee(t,e),0<n.length&&(t.i=null,t.g.set(Te(t,e),d(n)),t.h+=n.length)}function Te(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Ie(t,e,n,i,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),i(n)}catch(s){}}function Ce(){this.g=new ft}function Ae(t,e,n){const i=n||"";try{ie(t,function(t,n){let r=t;o(t)&&(r=ht(t)),e.push(i+n+"="+encodeURIComponent(r))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function Ne(t){this.l=t.Ub||null,this.j=t.eb||!1}function Pe(t,e){nt.call(this),this.D=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Me(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}function Re(t){t.readyState=4,t.l=null,t.j=null,t.v=null,Oe(t)}function Oe(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function De(t){let e="";return v(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}function Le(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=De(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):ue(t,e,n))}function Fe(t){nt.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=xe.prototype).add=function(t,e){_e(this),this.i=null,t=Te(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},t.forEach=function(t,e){_e(this),this.g.forEach(function(n,i){n.forEach(function(n){t.call(e,n,i,this)},this)},this)},t.na=function(){_e(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},t.V=function(t){_e(this);let e=[];if("string"===typeof t)Se(this,t)&&(e=e.concat(this.g.get(Te(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},t.set=function(t,e){return _e(this),this.i=null,Se(this,t=Te(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.V(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")},h(Ne,pt),Ne.prototype.g=function(){return new Pe(this.l,this.j)},Ne.prototype.i=(ge={},function(){return ge}),h(Pe,nt),(t=Pe.prototype).open=function(t,e){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=e,this.readyState=1,Oe(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||r).fetch(new Request(this.A,e)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Re(this)),this.readyState=0},t.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Oe(this)),this.g&&(this.readyState=3,Oe(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof r.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Me(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.v.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Re(this):Oe(this),3==this.readyState&&Me(this)}},t.Ra=function(t){this.g&&(this.response=this.responseText=t,Re(this))},t.Qa=function(t){this.g&&(this.response=t,Re(this))},t.ga=function(){this.g&&Re(this)},t.setRequestHeader=function(t,e){this.u.append(t,e)},t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Pe.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}}),h(Fe,nt);var je=/^https?$/i,Ue=["POST","PUT"];function Ve(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.m=5,ze(t),We(t)}function ze(t){t.A||(t.A=!0,it(t,"complete"),it(t,"error"))}function Be(t){if(t.h&&"undefined"!=typeof i&&(!t.v[1]||4!=qe(t)||2!=t.Z()))if(t.u&&4==qe(t))st(t.Ea,0,t);else if(it(t,"readystatechange"),4==qe(t)){t.h=!1;try{const i=t.Z();t:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var s;if(s=0===i){var o=String(t.D).match(re)[1]||null;!o&&r.self&&r.self.location&&(o=r.self.location.protocol.slice(0,-1)),s=!je.test(o?o.toLowerCase():"")}n=s}if(n)it(t,"complete"),it(t,"success");else{t.m=6;try{var a=2<qe(t)?t.g.statusText:""}catch(l){a=""}t.l=a+" ["+t.Z()+"]",ze(t)}}finally{We(t)}}}function We(t,e){if(t.g){He(t);const i=t.g,r=t.v[0]?()=>{}:null;t.g=null,t.v=null,e||it(t,"ready");try{i.onreadystatechange=r}catch(n){}}}function He(t){t.I&&(r.clearTimeout(t.I),t.I=null)}function qe(t){return t.g?t.g.readyState:0}function Ge(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(qr){return null}}function Ke(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Qe(t){this.Aa=0,this.i=[],this.j=new At,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ke("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ke("baseRetryDelayMs",5e3,t),this.cb=Ke("retryDelaySeedMs",1e4,t),this.Wa=Ke("forwardChannelMaxRetries",2,t),this.wa=Ke("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new Xt(t&&t.concurrentRequestLimit),this.Da=new Ce,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Ye(t){if(Je(t),3==t.G){var e=t.U++,n=oe(t.I);if(ue(n,"SID",t.K),ue(n,"RID",e),ue(n,"TYPE","terminate"),tn(t,n),(e=new Dt(t,t.j,e)).L=2,e.v=he(oe(n)),n=!1,r.navigator&&r.navigator.sendBeacon)try{n=r.navigator.sendBeacon(e.v.toString(),"")}catch(i){}!n&&r.Image&&((new Image).src=e.v,n=!0),n||(e.g=fn(e.j,null),e.g.ea(e.v)),e.F=Date.now(),Wt(e)}hn(t)}function Xe(t){t.g&&(sn(t),t.g.cancel(),t.g=null)}function Je(t){Xe(t),t.u&&(r.clearTimeout(t.u),t.u=null),an(t),t.h.cancel(),t.s&&("number"===typeof t.s&&r.clearTimeout(t.s),t.s=null)}function $e(t){if(!Jt(t.h)&&!t.s){t.s=!0;var e=t.Ga;I||N(),C||(I(),C=!0),A.add(e,t),t.B=0}}function Ze(t,e){var n;n=e?e.l:t.U++;const i=oe(t.I);ue(i,"SID",t.K),ue(i,"RID",n),ue(i,"AID",t.T),tn(t,i),t.m&&t.o&&Le(i,t.m,t.o),n=new Dt(t,t.j,n,t.B+1),null===t.m&&(n.H=t.o),e&&(t.i=e.D.concat(t.i)),e=en(t,n,1e3),n.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),te(t.h,n),Ut(n,i,e)}function tn(t,e){t.H&&v(t.H,function(t,n){ue(e,n,t)}),t.l&&ie({},function(t,n){ue(e,n,t)})}function en(t,e,n){n=Math.min(t.i.length,n);var i=t.l?c(t.l.Na,t.l,t):null;t:{var r=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=e,0>n)e=Math.max(0,r[o].g-100),s=!1;else try{Ae(a,t,"req"+n+"_")}catch(Br){i&&i(a)}}if(s){i=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,i}function nn(t){if(!t.g&&!t.u){t.Y=1;var e=t.Fa;I||N(),C||(I(),C=!0),A.add(e,t),t.v=0}}function rn(t){return!(t.g||t.u||3<=t.v)&&(t.Y++,t.u=Ct(c(t.Fa,t),cn(t,t.v)),t.v++,!0)}function sn(t){null!=t.A&&(r.clearTimeout(t.A),t.A=null)}function on(t){t.g=new Dt(t,t.j,"rpc",t.Y),null===t.m&&(t.g.H=t.o),t.g.O=0;var e=oe(t.qa);ue(e,"RID","rpc"),ue(e,"SID",t.K),ue(e,"AID",t.T),ue(e,"CI",t.F?"0":"1"),!t.F&&t.ja&&ue(e,"TO",t.ja),ue(e,"TYPE","xmlhttp"),tn(t,e),t.m&&t.o&&Le(e,t.m,t.o),t.L&&(t.g.I=t.L);var n=t.g;t=t.ia,n.L=1,n.v=he(oe(e)),n.m=null,n.P=!0,Vt(n,t)}function an(t){null!=t.C&&(r.clearTimeout(t.C),t.C=null)}function ln(t,e){var n=null;if(t.g==e){an(t),sn(t),t.g=null;var i=2}else{if(!Zt(t.h,e))return;n=e.D,ee(t.h,e),i=1}if(0!=t.G)if(e.o)if(1==i){n=e.m?e.m.length:0,e=Date.now()-e.F;var r=t.B;it(i=_t(),new It(i,n)),$e(t)}else nn(t);else if(3==(r=e.s)||0==r&&0<e.X||!(1==i&&function(t,e){return!($t(t.h)>=t.h.j-(t.s?1:0))&&(t.s?(t.i=e.D.concat(t.i),!0):!(1==t.G||2==t.G||t.B>=(t.Va?0:t.Wa))&&(t.s=Ct(c(t.Ga,t,e),cn(t,t.B)),t.B++,!0))}(t,e)||2==i&&rn(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:un(t,5);break;case 4:un(t,10);break;case 3:un(t,6);break;default:un(t,2)}}function cn(t,e){let n=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(n*=2),n*e}function un(t,e){if(t.j.info("Error code "+e),2==e){var n=c(t.fb,t),i=t.Xa;const e=!i;i=new se(i||"//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||ae(i,"https"),he(i),e?function(t,e){const n=new At;if(r.Image){const i=new Image;i.onload=u(Ie,n,"TestLoadImage: loaded",!0,e,i),i.onerror=u(Ie,n,"TestLoadImage: error",!1,e,i),i.onabort=u(Ie,n,"TestLoadImage: abort",!1,e,i),i.ontimeout=u(Ie,n,"TestLoadImage: timeout",!1,e,i),r.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}(i.toString(),n):function(t,e){new At;const n=new AbortController,i=setTimeout(()=>{n.abort(),Ie(0,0,!1,e)},1e4);fetch(t,{signal:n.signal}).then(t=>{clearTimeout(i),t.ok?Ie(0,0,!0,e):Ie(0,0,!1,e)}).catch(()=>{clearTimeout(i),Ie(0,0,!1,e)})}(i.toString(),n)}else Tt(2);t.G=0,t.l&&t.l.sa(e),hn(t),Je(t)}function hn(t){if(t.G=0,t.ka=[],t.l){const e=ne(t.h);0==e.length&&0==t.i.length||(f(t.ka,e),f(t.ka,t.i),t.h.i.length=0,d(t.i),t.i.length=0),t.l.ra()}}function dn(t,e,n){var i=n instanceof se?oe(n):new se(n);if(""!=i.g)e&&(i.g=e+"."+i.g),le(i,i.s);else{var s=r.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var o=new se(null);i&&ae(o,i),e&&(o.g=e),s&&le(o,s),n&&(o.l=n),i=o}return n=t.D,e=t.ya,n&&e&&ue(i,n,e),ue(i,"VER",t.la),tn(t,i),i}function fn(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ca&&!t.pa?new Fe(new Ne({eb:n})):new Fe(t.pa)).Ha(t.J),e}function pn(){}function gn(){}function mn(t,e){nt.call(this),this.g=new Qe(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.va&&(t?t["X-WebChannel-Client-Profile"]=e.va:t={"X-WebChannel-Client-Profile":e.va}),this.g.S=t,(t=e&&e.Sb)&&!p(t)&&(this.g.m=t),this.v=e&&e.supportsCrossDomainXhr||!1,this.u=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!p(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new bn(this)}function yn(t){vt.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function vn(){bt.call(this),this.status=1}function bn(t){this.g=t}(t=Fe.prototype).Ha=function(t){this.J=t},t.ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pt.g(),this.v=this.o?gt(this.o):gt(Pt),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(e,String(t),!0),this.B=!1}catch(o){return void Ve(this,o)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find(t=>"content-type"==t.toLowerCase()),s=r.FormData&&t instanceof r.FormData,!(0<=Array.prototype.indexOf.call(Ue,e,void 0))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,a]of n)this.g.setRequestHeader(r,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{He(this),this.u=!0,this.g.send(t),this.u=!1}catch(o){Ve(this,o)}},t.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,it(this,"complete"),it(this,"abort"),We(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),We(this,!0)),Fe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Be(this):this.bb())},t.bb=function(){Be(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<qe(this)?this.g.status:-1}catch(ge){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(ge){return""}},t.Oa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),dt(e)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(t=Qe.prototype).la=8,t.G=1,t.connect=function(t,e,n,i){Tt(0),this.W=t,this.H=e||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.I=dn(this,null,this.W),$e(this)},t.Ga=function(t){if(this.s)if(this.s=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const r=new Dt(this,this.j,t);let s=this.o;if(this.S&&(s?(s=b(s),x(s,this.S)):s=this.S),null!==this.m||this.O||(r.H=s,s=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=en(this,r,e),ue(n=oe(this.I),"RID",t),ue(n,"CVER",22),this.D&&ue(n,"X-HTTP-Session-Id",this.D),tn(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(De(s)))+"&"+e:this.m&&Le(n,this.m,s)),te(this.h,r),this.Ua&&ue(n,"TYPE","init"),this.P?(ue(n,"$req",e),ue(n,"SID","null"),r.T=!0,Ut(r,n,null)):Ut(r,n,e),this.G=2}}else 3==this.G&&(t?Ze(this,t):0==this.i.length||Jt(this.h)||Ze(this))},t.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=Ct(c(this.ab,this),t)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),Xe(this),on(this))},t.Za=function(){null!=this.C&&(this.C=null,Xe(this),rn(this),Tt(19))},t.fb=function(t){t?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=pn.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},gn.prototype.g=function(t,e){return new mn(t,e)},h(mn,nt),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Ye(this.g)},mn.prototype.o=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.u&&((n={}).__data__=ht(t),t=n);e.i.push(new Yt(e.Ya++,t)),3==e.G&&$e(e)},mn.prototype.N=function(){this.g.l=null,delete this.j,Ye(this.g),delete this.g,mn.aa.N.call(this)},h(yn,vt),h(vn,bt),h(bn,pn),bn.prototype.ua=function(){it(this.g,"a")},bn.prototype.ta=function(t){it(this.g,new yn(t))},bn.prototype.sa=function(t){it(this.g,new vn)},bn.prototype.ra=function(){it(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Ur=zr.createWebChannelTransport=function(){return new gn},jr=zr.getStatEventTarget=function(){return _t()},Fr=zr.Event=wt,Lr=zr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mt.NO_ERROR=0,Mt.TIMEOUT=8,Mt.HTTP_ERROR=6,Dr=zr.ErrorCode=Mt,Rt.COMPLETE="complete",Or=zr.EventType=Rt,mt.EventType=yt,yt.OPEN="a",yt.CLOSE="b",yt.ERROR="c",yt.MESSAGE="d",nt.prototype.listen=nt.prototype.K,Rr=zr.WebChannel=mt,zr.FetchXmlHttpFactory=Ne,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,Mr=zr.XhrIo=Fe}).apply("undefined"!==typeof Vr?Vr:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Br="@firebase/firestore";class Wr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");let Hr="10.14.0";const qr=new z("@firebase/firestore");function Gr(){return qr.logLevel}function Kr(t){if(qr.logLevel<=L.DEBUG){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(Xr);qr.debug("Firestore (".concat(Hr,"): ").concat(t),...r)}}function Qr(t){if(qr.logLevel<=L.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(Xr);qr.error("Firestore (".concat(Hr,"): ").concat(t),...r)}}function Yr(t){if(qr.logLevel<=L.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(Xr);qr.warn("Firestore (".concat(Hr,"): ").concat(t),...r)}}function Xr(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function Jr(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const e="FIRESTORE (".concat(Hr,") INTERNAL ASSERTION FAILED: ")+t;throw Qr(e),new Error(e)}function $r(t,e){t||Jr()}function Zr(t,e){return t}const ts={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class es extends w{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class ns{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class is{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))}}class rs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Wr.UNAUTHENTICATED))}shutdown(){}}class ss{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class os{constructor(t){this.t=t,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){$r(void 0===this.o);let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new ns;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ns,t.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const e=r;t.enqueueRetryable(async()=>{await e.promise,await i(this.currentUser)})},o=t=>{Kr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(t=>o(t)),setTimeout(()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Kr("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ns)}},0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(e=>this.i!==t?(Kr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?($r("string"==typeof e.accessToken),new is(e.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return $r(null===t||"string"==typeof t),new Wr(t)}}class as{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ls{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new as(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cs{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class us{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){$r(void 0===this.o);const n=t=>{null!=t.error&&Kr("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(t.error.message));const n=t.token!==this.R;return this.R=t.token,Kr("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable(()=>n(e))};const i=t=>{Kr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(t=>i(t)),setTimeout(()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):Kr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(t=>t?($r("string"==typeof t.token),this.R=t.token,new cs(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function hs(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}class ds{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(256/62);let n="";for(;n.length<20;){const i=hs(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%62))}return n}}function fs(t,e){return t<e?-1:t>e?1:0}function ps(t,e,n){return t.length===e.length&&t.every((t,i)=>n(t,e[i]))}class gs{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new es(ts.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new es(ts.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new es(ts.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new es(ts.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return gs.fromMillis(Date.now())}static fromDate(t){return gs.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new gs(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?fs(this.nanoseconds,t.nanoseconds):fs(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ms{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ms(t)}static min(){return new ms(new gs(0,0))}static max(){return new ms(new gs(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ys{constructor(t,e,n){void 0===e?e=0:e>t.length&&Jr(),void 0===n?n=t.length-e:n>t.length-e&&Jr(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===ys.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof ys?t.forEach(t=>{e.push(t)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class vs extends ys{construct(t,e,n){return new vs(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const t=[];for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new es(ts.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));t.push(...r.split("/").filter(t=>t.length>0))}return new vs(t)}static emptyPath(){return new vs([])}}const bs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ws extends ys{construct(t,e,n){return new ws(t,e,n)}static isValidIdentifier(t){return bs.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ws.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ws(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new es(ts.INVALID_ARGUMENT,"Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new es(ts.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new es(ts.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new es(ts.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ws(e)}static emptyPath(){return new ws([])}}class xs{constructor(t){this.path=t}static fromPath(t){return new xs(vs.fromString(t))}static fromName(t){return new xs(vs.fromString(t).popFirst(5))}static empty(){return new xs(vs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===vs.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return vs.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new xs(new vs(t.slice()))}}class _s{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}}_s.UNKNOWN_ID=-1;function Es(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ms.fromTimestamp(1e9===i?new gs(n+1,0):new gs(n,i));return new ks(r,xs.empty(),e)}function Ss(t){return new ks(t.readTime,t.key,-1)}class ks{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new ks(ms.min(),xs.empty(),-1)}static max(){return new ks(ms.max(),xs.empty(),-1)}}function Ts(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=xs.comparator(t.documentKey,e.documentKey),0!==n?n:fs(t.largestBatchId,e.largestBatchId))}const Is="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Cs{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}async function As(t){if(t.code!==ts.FAILED_PRECONDITION||t.message!==Is)throw t;Kr("LocalStore","Unexpectedly lost primary lease")}class Ns{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Jr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Ns((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof Ns?e:Ns.resolve(e)}catch(t){return Ns.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):Ns.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):Ns.reject(e)}static resolve(t){return new Ns((e,n)=>{e(t)})}static reject(t){return new Ns((e,n)=>{n(t)})}static waitFor(t){return new Ns((e,n)=>{let i=0,r=0,s=!1;t.forEach(t=>{++i,t.next(()=>{++r,s&&r===i&&e()},t=>n(t))}),s=!0,r===i&&e()})}static or(t){let e=Ns.resolve(!1);for(const n of t)e=e.next(t=>t?Ns.resolve(t):n());return e}static forEach(t,e){const n=[];return t.forEach((t,i)=>{n.push(e.call(this,t,i))}),this.waitFor(n)}static mapArray(t,e){return new Ns((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const l=a;e(t[l]).next(t=>{s[l]=t,++o,o===r&&n(s)},t=>i(t))}})}static doWhile(t,e){return new Ns((n,i)=>{const r=()=>{!0===t()?e().next(()=>{r()},i):n()};r()})}}function Ps(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ms(t){return"IndexedDbTransactionError"===t.name}class Rs{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ie(t),this.se=t=>e.writeSequenceNumber(t))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}function Os(t){return null==t}function Ds(t){return 0===t&&1/t==-1/0}function Ls(t){return"number"==typeof t&&Number.isInteger(t)&&!Ds(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}Rs.oe=-1;const Fs=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],js=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Us=js,Vs=[...Us,"indexConfiguration","indexState","indexEntries"];function zs(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Bs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ws(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Hs{constructor(t,e){this.comparator=t,this.root=e||Gs.EMPTY}insert(t,e){return new Hs(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Gs.BLACK,null,null))}remove(t){return new Hs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Gs.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){const t=[];return this.inorderTraversal((e,n)=>(t.push("".concat(e,":").concat(n)),!1)),"{".concat(t.join(", "),"}")}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new qs(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new qs(this.root,t,this.comparator,!1)}getReverseIterator(){return new qs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new qs(this.root,t,this.comparator,!0)}}class qs{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Gs{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:Gs.RED,this.left=null!=i?i:Gs.EMPTY,this.right=null!=r?r:Gs.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new Gs(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Gs.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return Gs.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Gs.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Gs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Jr();if(this.right.isRed())throw Jr();const t=this.left.check();if(t!==this.right.check())throw Jr();return t+(this.isRed()?0:1)}}Gs.EMPTY=null,Gs.RED=!0,Gs.BLACK=!1,Gs.EMPTY=new class{constructor(){this.size=0}get key(){throw Jr()}get value(){throw Jr()}get color(){throw Jr()}get left(){throw Jr()}get right(){throw Jr()}copy(t,e,n,i,r){return this}insert(t,e,n){return new Gs(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ks{constructor(t){this.comparator=t,this.data=new Hs(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Qs(this.data.getIterator())}getIteratorFrom(t){return new Qs(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(t=>{e=e.add(t)}),e}isEqual(t){if(!(t instanceof Ks))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Ks(this.comparator);return e.data=t,e}}class Qs{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ys{constructor(t){this.fields=t,t.sort(ws.comparator)}static empty(){return new Ys([])}unionWith(t){let e=new Ks(ws.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Ys(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ps(this.fields,t.fields,(t,e)=>t.isEqual(e))}}class Xs extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Js{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Xs("Invalid base64 string: "+t):t}}(t);return new Js(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Js(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return fs(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Js.EMPTY_BYTE_STRING=new Js("");const $s=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zs(t){if($r(!!t),"string"==typeof t){let e=0;const n=$s.exec(t);if($r(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:to(t.seconds),nanos:to(t.nanos)}}function to(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function eo(t){return"string"==typeof t?Js.fromBase64String(t):Js.fromUint8Array(t)}function no(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function io(t){const e=t.mapValue.fields.__previous_value__;return no(e)?io(e):e}function ro(t){const e=Zs(t.mapValue.fields.__local_write_time__.timestampValue);return new gs(e.seconds,e.nanos)}class so{constructor(t,e,n,i,r,s,o,a,l){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class oo{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new oo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof oo&&t.projectId===this.projectId&&t.database===this.database}}const ao={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function lo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?no(t)?4:ko(t)?9007199254740991:Eo(t)?10:11:Jr()}function co(t,e){if(t===e)return!0;const n=lo(t);if(n!==lo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ro(t).isEqual(ro(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Zs(t.timestampValue),i=Zs(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return eo(t.bytesValue).isEqual(eo(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return to(t.geoPointValue.latitude)===to(e.geoPointValue.latitude)&&to(t.geoPointValue.longitude)===to(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return to(t.integerValue)===to(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=to(t.doubleValue),i=to(e.doubleValue);return n===i?Ds(n)===Ds(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return ps(t.arrayValue.values||[],e.arrayValue.values||[],co);case 10:case 11:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(zs(n)!==zs(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!co(n[r],i[r])))return!1;return!0}(t,e);default:return Jr()}}function uo(t,e){return void 0!==(t.values||[]).find(t=>co(t,e))}function ho(t,e){if(t===e)return 0;const n=lo(t),i=lo(e);if(n!==i)return fs(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return fs(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=to(t.integerValue||t.doubleValue),i=to(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return fo(t.timestampValue,e.timestampValue);case 4:return fo(ro(t),ro(e));case 5:return fs(t.stringValue,e.stringValue);case 6:return function(t,e){const n=eo(t),i=eo(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let r=0;r<n.length&&r<i.length;r++){const t=fs(n[r],i[r]);if(0!==t)return t}return fs(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=fs(to(t.latitude),to(e.latitude));return 0!==n?n:fs(to(t.longitude),to(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return po(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n,i,r,s;const o=t.fields||{},a=e.fields||{},l=null===(n=o.value)||void 0===n?void 0:n.arrayValue,c=null===(i=a.value)||void 0===i?void 0:i.arrayValue,u=fs((null===(r=null==l?void 0:l.values)||void 0===r?void 0:r.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:po(l,c)}(t.mapValue,e.mapValue);case 11:return function(t,e){if(t===ao.mapValue&&e===ao.mapValue)return 0;if(t===ao.mapValue)return 1;if(e===ao.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const t=fs(i[o],s[o]);if(0!==t)return t;const e=ho(n[i[o]],r[s[o]]);if(0!==e)return e}return fs(i.length,s.length)}(t.mapValue,e.mapValue);default:throw Jr()}}function fo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return fs(t,e);const n=Zs(t),i=Zs(e),r=fs(n.seconds,i.seconds);return 0!==r?r:fs(n.nanos,i.nanos)}function po(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const t=ho(n[r],i[r]);if(t)return t}return fs(n.length,i.length)}function go(t){return mo(t)}function mo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Zs(t);return"time(".concat(e.seconds,",").concat(e.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return eo(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return xs.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return"geo(".concat(t.latitude,",").concat(t.longitude,")")}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=mo(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+="".concat(r,":").concat(mo(t.fields[r]));return n+"}"}(t.mapValue):Jr()}function yo(t,e){return{referenceValue:"projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e.path.canonicalString())}}function vo(t){return!!t&&"integerValue"in t}function bo(t){return!!t&&"arrayValue"in t}function wo(t){return!!t&&"nullValue"in t}function xo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _o(t){return!!t&&"mapValue"in t}function Eo(t){var e,n;return"__vector__"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function So(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Bs(t.mapValue.fields,(t,n)=>e.mapValue.fields[t]=So(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=So(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ko(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class To{constructor(t){this.value=t}static empty(){return new To({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!_o(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=So(e)}setAll(t){let e=ws.emptyPath(),n={},i=[];t.forEach((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=So(t):i.push(r.lastSegment())});const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());_o(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return co(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];_o(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Bs(e,(e,n)=>t[e]=n);for(const i of n)delete t[i]}clone(){return new To(So(this.value))}}function Io(t){const e=[];return Bs(t.fields,(t,n)=>{const i=new ws([t]);if(_o(n)){const t=Io(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)}),new Ys(e)}class Co{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new Co(t,0,ms.min(),ms.min(),ms.min(),To.empty(),0)}static newFoundDocument(t,e,n,i){return new Co(t,1,e,ms.min(),n,i,0)}static newNoDocument(t,e){return new Co(t,2,e,ms.min(),ms.min(),To.empty(),0)}static newUnknownDocument(t,e){return new Co(t,3,e,ms.min(),ms.min(),To.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ms.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=To.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=To.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ms.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Co&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Co(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Ao{constructor(t,e){this.position=t,this.inclusive=e}}function No(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?xs.comparator(xs.fromName(o.referenceValue),n.key):ho(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Po(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!co(t.position[n],e.position[n]))return!1;return!0}class Mo{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=t,this.dir=e}}function Ro(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Oo{}class Do extends Oo{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Wo(t,e,n):"array-contains"===e?new Ko(t,n):"in"===e?new Qo(t,n):"not-in"===e?new Yo(t,n):"array-contains-any"===e?new Xo(t,n):new Do(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Ho(t,n):new qo(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(ho(e,this.value)):null!==e&&lo(this.value)===lo(e)&&this.matchesComparison(ho(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Jr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Lo extends Oo{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new Lo(t,e)}matches(t){return Fo(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Fo(t){return"and"===t.op}function jo(t){return Uo(t)&&Fo(t)}function Uo(t){for(const e of t.filters)if(e instanceof Lo)return!1;return!0}function Vo(t){if(t instanceof Do)return t.field.canonicalString()+t.op.toString()+go(t.value);if(jo(t))return t.filters.map(t=>Vo(t)).join(",");{const e=t.filters.map(t=>Vo(t)).join(",");return"".concat(t.op,"(").concat(e,")")}}function zo(t,e){return t instanceof Do?function(t,e){return e instanceof Do&&t.op===e.op&&t.field.isEqual(e.field)&&co(t.value,e.value)}(t,e):t instanceof Lo?function(t,e){return e instanceof Lo&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce((t,n,i)=>t&&zo(n,e.filters[i]),!0)}(t,e):void Jr()}function Bo(t){return t instanceof Do?function(t){return"".concat(t.field.canonicalString()," ").concat(t.op," ").concat(go(t.value))}(t):t instanceof Lo?function(t){return t.op.toString()+" {"+t.getFilters().map(Bo).join(" ,")+"}"}(t):"Filter"}class Wo extends Do{constructor(t,e,n){super(t,e,n),this.key=xs.fromName(n.referenceValue)}matches(t){const e=xs.comparator(t.key,this.key);return this.matchesComparison(e)}}class Ho extends Do{constructor(t,e){super(t,"in",e),this.keys=Go("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class qo extends Do{constructor(t,e){super(t,"not-in",e),this.keys=Go("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Go(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(t=>xs.fromName(t.referenceValue))}class Ko extends Do{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return bo(e)&&uo(e.arrayValue,this.value)}}class Qo extends Do{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&uo(this.value.arrayValue,e)}}class Yo extends Do{constructor(t,e){super(t,"not-in",e)}matches(t){if(uo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!uo(this.value.arrayValue,e)}}class Xo extends Do{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!bo(e)||!e.arrayValue.values)&&e.arrayValue.values.some(t=>uo(this.value.arrayValue,t))}}class Jo{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ue=null}}function $o(t){return new Jo(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Zo(t){const e=Zr(t);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(t=>Vo(t)).join(","),t+="|ob:",t+=e.orderBy.map(t=>function(t){return t.field.canonicalString()+t.dir}(t)).join(","),Os(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(t=>go(t)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(t=>go(t)).join(",")),e.ue=t}return e.ue}function ta(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ro(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zo(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Po(t.startAt,e.startAt)&&Po(t.endAt,e.endAt)}function ea(t){return xs.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class na{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ia(t,e,n,i,r,s,o,a){return new na(t,e,n,i,r,s,o,a)}function ra(t){return new na(t)}function sa(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function oa(t){return null!==t.collectionGroup}function aa(t){const e=Zr(t);if(null===e.ce){e.ce=[];const t=new Set;for(const r of e.explicitOrderBy)e.ce.push(r),t.add(r.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new Ks(ws.comparator);return t.filters.forEach(t=>{t.getFlattenedFilters().forEach(t=>{t.isInequality()&&(e=e.add(t.field))})}),e}(e);i.forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Mo(i,n))}),t.has(ws.keyField().canonicalString())||e.ce.push(new Mo(ws.keyField(),n))}return e.ce}function la(t){const e=Zr(t);return e.le||(e.le=ca(e,aa(t))),e.le}function ca(t,e){if("F"===t.limitType)return $o(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(t=>{const e="desc"===t.dir?"asc":"desc";return new Mo(t.field,e)});const n=t.endAt?new Ao(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ao(t.startAt.position,t.startAt.inclusive):null;return $o(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function ua(t,e){const n=t.filters.concat([e]);return new na(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ha(t,e,n){return new na(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function da(t,e){return ta(la(t),la(e))&&t.limitType===e.limitType}function fa(t){return"".concat(Zo(la(t)),"|lt:").concat(t.limitType)}function pa(t){return"Query(target=".concat(function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: [".concat(t.filters.map(t=>Bo(t)).join(", "),"]")),Os(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: [".concat(t.orderBy.map(t=>function(t){return"".concat(t.field.canonicalString()," (").concat(t.dir,")")}(t)).join(", "),"]")),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(t=>go(t)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(t=>go(t)).join(",")),"Target(".concat(e,")")}(la(t)),"; limitType=").concat(t.limitType,")")}function ga(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):xs.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of aa(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=No(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,aa(t),e))&&!(t.endAt&&!function(t,e,n){const i=No(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,aa(t),e))}(t,e)}function ma(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ya(t){return(e,n)=>{let i=!1;for(const r of aa(t)){const t=va(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function va(t,e,n){const i=t.field.isKeyField()?xs.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?ho(i,r):Jr()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Jr()}}class ba{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Bs(this.inner,(e,n)=>{for(const[i,r]of n)t(i,r)})}isEmpty(){return Ws(this.inner)}size(){return this.innerSize}}const wa=new Hs(xs.comparator);function xa(){return wa}const _a=new Hs(xs.comparator);function Ea(){let t=_a;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)t=t.insert(r.key,r);return t}function Sa(t){let e=_a;return t.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function ka(){return Ia()}function Ta(){return Ia()}function Ia(){return new ba(t=>t.toString(),(t,e)=>t.isEqual(e))}const Ca=new Hs(xs.comparator),Aa=new Ks(xs.comparator);function Na(){let t=Aa;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)t=t.add(r);return t}const Pa=new Ks(fs);function Ma(){return Pa}function Ra(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ds(e)?"-0":e}}function Oa(t){return{integerValue:""+t}}function Da(t,e){return Ls(e)?Oa(e):Ra(t,e)}class La{constructor(){this._=void 0}}function Fa(t,e,n){return t instanceof Va?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&no(e)&&(e=io(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof za?Ba(t,e):t instanceof Wa?Ha(t,e):function(t,e){const n=Ua(t,e),i=Ga(n)+Ga(t.Pe);return vo(n)&&vo(t.Pe)?Oa(i):Ra(t.serializer,i)}(t,e)}function ja(t,e,n){return t instanceof za?Ba(t,e):t instanceof Wa?Ha(t,e):n}function Ua(t,e){return t instanceof qa?function(t){return vo(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class Va extends La{}class za extends La{constructor(t){super(),this.elements=t}}function Ba(t,e){const n=Ka(e);for(const i of t.elements)n.some(t=>co(t,i))||n.push(i);return{arrayValue:{values:n}}}class Wa extends La{constructor(t){super(),this.elements=t}}function Ha(t,e){let n=Ka(e);for(const i of t.elements)n=n.filter(t=>!co(t,i));return{arrayValue:{values:n}}}class qa extends La{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function Ga(t){return to(t.integerValue||t.doubleValue)}function Ka(t){return bo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Qa{constructor(t,e){this.version=t,this.transformResults=e}}class Ya{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ya}static exists(t){return new Ya(void 0,t)}static updateTime(t){return new Ya(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Xa(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Ja{}function $a(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new ll(t.key,Ya.none()):new il(t.key,t.data,Ya.none());{const n=t.data,i=To.empty();let r=new Ks(ws.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new rl(t.key,i,new Ys(r.toArray()),Ya.none())}}function Za(t,e,n){t instanceof il?function(t,e,n){const i=t.value.clone(),r=ol(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof rl?function(t,e,n){if(!Xa(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=ol(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(sl(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function tl(t,e,n,i){return t instanceof il?function(t,e,n,i){if(!Xa(t.precondition,e))return n;const r=t.value.clone(),s=al(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof rl?function(t,e,n,i){if(!Xa(t.precondition,e))return n;const r=al(t.fieldTransforms,i,e),s=e.data;return s.setAll(sl(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map(t=>t.field))}(t,e,n,i):function(t,e,n){return Xa(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function el(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=Ua(i.transform,t||null);null!=r&&(null===n&&(n=To.empty()),n.set(i.field,r))}return n||null}function nl(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ps(t,e,(t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof za&&e instanceof za||t instanceof Wa&&e instanceof Wa?ps(t.elements,e.elements,co):t instanceof qa&&e instanceof qa?co(t.Pe,e.Pe):t instanceof Va&&e instanceof Va}(t.transform,e.transform)}(t,e))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class il extends Ja{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class rl extends Ja{constructor(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function sl(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function ol(t,e,n){const i=new Map;$r(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,ja(o,a,n[r]))}return i}function al(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,Fa(t,s,e))}return i}class ll extends Ja{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cl extends Ja{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ul{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&Za(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=tl(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=tl(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Ta();return this.mutations.forEach(i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=$a(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(ms.min())}),n}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Na())}isEqual(t){return this.batchId===t.batchId&&ps(this.mutations,t.mutations,(t,e)=>nl(t,e))&&ps(this.baseMutations,t.baseMutations,(t,e)=>nl(t,e))}}class hl{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){$r(t.mutations.length===n.length);let i=Ca;const r=t.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new hl(t,e,n,i)}}class dl{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class fl{constructor(t,e){this.count=t,this.unchangedNames=e}}var pl,gl;function ml(t){switch(t){default:return Jr();case ts.CANCELLED:case ts.UNKNOWN:case ts.DEADLINE_EXCEEDED:case ts.RESOURCE_EXHAUSTED:case ts.INTERNAL:case ts.UNAVAILABLE:case ts.UNAUTHENTICATED:return!1;case ts.INVALID_ARGUMENT:case ts.NOT_FOUND:case ts.ALREADY_EXISTS:case ts.PERMISSION_DENIED:case ts.FAILED_PRECONDITION:case ts.ABORTED:case ts.OUT_OF_RANGE:case ts.UNIMPLEMENTED:case ts.DATA_LOSS:return!0}}function yl(t){if(void 0===t)return Qr("GRPC error has no .code"),ts.UNKNOWN;switch(t){case pl.OK:return ts.OK;case pl.CANCELLED:return ts.CANCELLED;case pl.UNKNOWN:return ts.UNKNOWN;case pl.DEADLINE_EXCEEDED:return ts.DEADLINE_EXCEEDED;case pl.RESOURCE_EXHAUSTED:return ts.RESOURCE_EXHAUSTED;case pl.INTERNAL:return ts.INTERNAL;case pl.UNAVAILABLE:return ts.UNAVAILABLE;case pl.UNAUTHENTICATED:return ts.UNAUTHENTICATED;case pl.INVALID_ARGUMENT:return ts.INVALID_ARGUMENT;case pl.NOT_FOUND:return ts.NOT_FOUND;case pl.ALREADY_EXISTS:return ts.ALREADY_EXISTS;case pl.PERMISSION_DENIED:return ts.PERMISSION_DENIED;case pl.FAILED_PRECONDITION:return ts.FAILED_PRECONDITION;case pl.ABORTED:return ts.ABORTED;case pl.OUT_OF_RANGE:return ts.OUT_OF_RANGE;case pl.UNIMPLEMENTED:return ts.UNIMPLEMENTED;case pl.DATA_LOSS:return ts.DATA_LOSS;default:return Jr()}}(gl=pl||(pl={}))[gl.OK=0]="OK",gl[gl.CANCELLED=1]="CANCELLED",gl[gl.UNKNOWN=2]="UNKNOWN",gl[gl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gl[gl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gl[gl.NOT_FOUND=5]="NOT_FOUND",gl[gl.ALREADY_EXISTS=6]="ALREADY_EXISTS",gl[gl.PERMISSION_DENIED=7]="PERMISSION_DENIED",gl[gl.UNAUTHENTICATED=16]="UNAUTHENTICATED",gl[gl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gl[gl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gl[gl.ABORTED=10]="ABORTED",gl[gl.OUT_OF_RANGE=11]="OUT_OF_RANGE",gl[gl.UNIMPLEMENTED=12]="UNIMPLEMENTED",gl[gl.INTERNAL=13]="INTERNAL",gl[gl.UNAVAILABLE=14]="UNAVAILABLE",gl[gl.DATA_LOSS=15]="DATA_LOSS";let vl=null;function bl(){return new TextEncoder}const wl=new Cr([4294967295,4294967295],0);function xl(t){const e=bl().encode(t),n=new Ar;return n.update(e),new Uint8Array(n.digest())}function _l(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Cr([n,i],0),new Cr([r,s],0)]}class El{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Sl("Invalid padding: ".concat(e));if(n<0)throw new Sl("Invalid hash count: ".concat(n));if(t.length>0&&0===this.hashCount)throw new Sl("Invalid hash count: ".concat(n));if(0===t.length&&0!==e)throw new Sl("Invalid padding when bitmap length is 0: ".concat(e));this.Ie=8*t.length-e,this.Te=Cr.fromNumber(this.Ie)}Ee(t,e,n){let i=t.add(e.multiply(Cr.fromNumber(n)));return 1===i.compare(wl)&&(i=new Cr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ie)return!1;const e=xl(t),[n,i]=_l(e);for(let r=0;r<this.hashCount;r++){const t=this.Ee(n,i,r);if(!this.de(t))return!1}return!0}static create(t,e,n){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),s=new El(r,i,e);return n.forEach(t=>s.insert(t)),s}insert(t){if(0===this.Ie)return;const e=xl(t),[n,i]=_l(e);for(let r=0;r<this.hashCount;r++){const t=this.Ee(n,i,r);this.Ae(t)}}Ae(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Sl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class kl{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,Tl.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new kl(ms.min(),i,new Hs(fs),xa(),Na())}}class Tl{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Tl(n,e,Na(),Na(),Na())}}class Il{constructor(t,e,n,i){this.Re=t,this.removedTargetIds=e,this.key=n,this.Ve=i}}class Cl{constructor(t,e){this.targetId=t,this.me=e}}class Al{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Js.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class Nl{constructor(){this.fe=0,this.ge=Rl(),this.pe=Js.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Na(),e=Na(),n=Na();return this.ge.forEach((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:Jr()}}),new Tl(this.pe,this.ye,t,e,n)}Ce(){this.we=!1,this.ge=Rl()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,$r(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Pl{constructor(t){this.Le=t,this.Be=new Map,this.ke=xa(),this.qe=Ml(),this.Qe=new Hs(fs)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const n=this.Ge(e);switch(t.state){case 0:this.ze(e)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),n.De(t.resumeToken));break;default:Jr()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((t,n)=>{this.ze(n)&&e(n)})}He(t){const e=t.targetId,n=t.me.count,i=this.Je(e);if(i){const r=i.target;if(ea(r))if(0===n){const t=new xs(r.path);this.Ue(e,t,Co.newNoDocument(t,ms.min()))}else $r(1===n);else{const i=this.Ye(e);if(i!==n){const n=this.Ze(t),r=n?this.Xe(n,t,i):1;if(0!==r){this.je(e);const t=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,t)}null==vl||vl.et(function(t,e,n,i,r){var s,o,a,l,c,u;const h={localCacheCount:t,existenceFilterCount:e.count,databaseId:n.database,projectId:n.projectId},d=e.unchangedNames;return d&&(h.bloomFilter={applied:0===r,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:t=>{var e;return null!==(e=null==i?void 0:i.mightContain(t))&&void 0!==e&&e}}),h}(i,t.me,this.Le.tt(),n,r))}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=e;let s,o;try{s=eo(n).toUint8Array()}catch(t){if(t instanceof Xs)return Yr("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{o=new El(s,i,r)}catch(t){return Yr(t instanceof Sl?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===o.Ie?null:o}Xe(t,e,n){return e.me.count===n-this.nt(t,e.targetId)?0:2}nt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let i=0;return n.forEach(n=>{const r=this.Le.tt(),s="projects/".concat(r.projectId,"/databases/").concat(r.database,"/documents/").concat(n.path.canonicalString());t.mightContain(s)||(this.Ue(e,n,null),i++)}),i}rt(t){const e=new Map;this.Be.forEach((n,i)=>{const r=this.Je(i);if(r){if(n.current&&ea(r.target)){const e=new xs(r.target.path);null!==this.ke.get(e)||this.it(i,e)||this.Ue(i,e,Co.newNoDocument(e,t))}n.be&&(e.set(i,n.ve()),n.Ce())}});let n=Na();this.qe.forEach((t,e)=>{let i=!0;e.forEachWhile(t=>{const e=this.Je(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(i=!1,!1)}),i&&(n=n.add(t))}),this.ke.forEach((e,n)=>n.setReadTime(t));const i=new kl(t,e,this.Qe,this.ke,n);return this.ke=xa(),this.qe=Ml(),this.Qe=new Hs(fs),i}$e(t,e){if(!this.ze(t))return;const n=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,n),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,n){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,e)?i.Fe(e,1):i.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),n&&(this.ke=this.ke.insert(e,n))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new Nl,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Ks(fs),this.qe=this.qe.insert(t,e)),e}ze(t){const e=null!==this.Je(t);return e||Kr("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Nl),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function Ml(){return new Hs(xs.comparator)}function Rl(){return new Hs(xs.comparator)}const Ol={asc:"ASCENDING",desc:"DESCENDING"},Dl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ll={and:"AND",or:"OR"};class Fl{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function jl(t,e){return t.useProto3Json||Os(e)?e:{value:e}}function Ul(t,e){return t.useProto3Json?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vl(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zl(t,e){return Ul(t,e.toTimestamp())}function Bl(t){return $r(!!t),ms.fromTimestamp(function(t){const e=Zs(t);return new gs(e.seconds,e.nanos)}(t))}function Wl(t,e){return Hl(t,e).canonicalString()}function Hl(t,e){const n=function(t){return new vs(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function ql(t){const e=vs.fromString(t);return $r(hc(e)),e}function Gl(t,e){return Wl(t.databaseId,e.path)}function Kl(t,e){const n=ql(e);if(n.get(1)!==t.databaseId.projectId)throw new es(ts.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new es(ts.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xs(Jl(n))}function Ql(t,e){return Wl(t.databaseId,e)}function Yl(t){const e=ql(t);return 4===e.length?vs.emptyPath():Jl(e)}function Xl(t){return new vs(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Jl(t){return $r(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function $l(t,e,n){return{name:Gl(t,e),fields:n.value.mapValue.fields}}function Zl(t,e){let n;if(e instanceof il)n={update:$l(t,e.key,e.value)};else if(e instanceof ll)n={delete:Gl(t,e.key)};else if(e instanceof rl)n={update:$l(t,e.key,e.data),updateMask:uc(e.fieldMask)};else{if(!(e instanceof cl))return Jr();n={verify:Gl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(t=>function(t,e){const n=e.transform;if(n instanceof Va)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof za)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Wa)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof qa)return{fieldPath:e.field.canonicalString(),increment:n.Pe};throw Jr()}(0,t))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:zl(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Jr()}(t,e.precondition)),n}function tc(t,e){return{documents:[Ql(t,e.path)]}}function ec(t,e){const n={structuredQuery:{}},i=e.path;let r;null!==e.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Ql(t,r);const s=function(t){if(0!==t.length)return cc(Lo.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(t){if(0!==t.length)return t.map(t=>function(t){return{field:ac(t.field),direction:rc(t.dir)}}(t))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=jl(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{_t:n,parent:r}}function nc(t){let e=Yl(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){$r(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=ic(t);return e instanceof Lo&&jo(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map(t=>function(t){return new Mo(lc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Os(e)?null:e}(n.limit));let l=null;n.startAt&&(l=function(t){const e=!!t.before,n=t.values||[];return new Ao(n,e)}(n.startAt));let c=null;return n.endAt&&(c=function(t){const e=!t.before,n=t.values||[];return new Ao(n,e)}(n.endAt)),ia(e,r,o,s,a,"F",l,c)}function ic(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=lc(t.unaryFilter.field);return Do.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=lc(t.unaryFilter.field);return Do.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=lc(t.unaryFilter.field);return Do.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=lc(t.unaryFilter.field);return Do.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Jr()}}(t):void 0!==t.fieldFilter?function(t){return Do.create(lc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Jr()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Lo.create(t.compositeFilter.filters.map(t=>ic(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Jr()}}(t.compositeFilter.op))}(t):Jr()}function rc(t){return Ol[t]}function sc(t){return Dl[t]}function oc(t){return Ll[t]}function ac(t){return{fieldPath:t.canonicalString()}}function lc(t){return ws.fromServerFormat(t.fieldPath)}function cc(t){return t instanceof Do?function(t){if("=="===t.op){if(xo(t.value))return{unaryFilter:{field:ac(t.field),op:"IS_NAN"}};if(wo(t.value))return{unaryFilter:{field:ac(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(xo(t.value))return{unaryFilter:{field:ac(t.field),op:"IS_NOT_NAN"}};if(wo(t.value))return{unaryFilter:{field:ac(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ac(t.field),op:sc(t.op),value:t.value}}}(t):t instanceof Lo?function(t){const e=t.getFilters().map(t=>cc(t));return 1===e.length?e[0]:{compositeFilter:{op:oc(t.op),filters:e}}}(t):Jr()}function uc(t){const e=[];return t.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class dc{constructor(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ms.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ms.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Js.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new dc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new dc(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new dc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new dc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class fc{constructor(t){this.ct=t}}function pc(t){const e=nc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ha(e,e.limit,"L"):e}class gc{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(to(t.integerValue));else if("doubleValue"in t){const n=to(t.doubleValue);isNaN(n)?this.dt(e,13):(this.dt(e,15),Ds(n)?e.At(0):e.At(n))}else if("timestampValue"in t){let n=t.timestampValue;this.dt(e,20),"string"==typeof n&&(n=Zs(n)),e.Rt("".concat(n.seconds||"")),e.At(n.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(eo(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.dt(e,45),e.At(n.latitude||0),e.At(n.longitude||0)}else"mapValue"in t?ko(t)?this.dt(e,Number.MAX_SAFE_INTEGER):Eo(t)?this.wt(t.mapValue,e):(this.St(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.ft(e)):Jr()}Vt(t,e){this.dt(e,25),this.Dt(t,e)}Dt(t,e){e.Rt(t)}St(t,e){const n=t.fields||{};this.dt(e,55);for(const i of Object.keys(n))this.Vt(i,e),this.Tt(n[i],e)}wt(t,e){var n,i;const r=t.fields||{};this.dt(e,53);const s="value",o=(null===(i=null===(n=r[s].arrayValue)||void 0===n?void 0:n.values)||void 0===i?void 0:i.length)||0;this.dt(e,15),e.At(to(o)),this.Vt(s,e),this.Tt(r[s],e)}bt(t,e){const n=t.values||[];this.dt(e,50);for(const i of n)this.Tt(i,e)}yt(t,e){this.dt(e,37),xs.fromName(t).path.forEach(t=>{this.dt(e,60),this.Dt(t,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}}gc.vt=new gc;class mc{constructor(){this.un=new yc}addToCollectionParentIndex(t,e){return this.un.add(e),Ns.resolve()}getCollectionParents(t,e){return Ns.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return Ns.resolve()}deleteFieldIndex(t,e){return Ns.resolve()}deleteAllFieldIndexes(t){return Ns.resolve()}createTargetIndexes(t,e){return Ns.resolve()}getDocumentsMatchingTarget(t,e){return Ns.resolve(null)}getIndexType(t,e){return Ns.resolve(0)}getFieldIndexes(t,e){return Ns.resolve([])}getNextCollectionGroupToUpdate(t){return Ns.resolve(null)}getMinOffset(t,e){return Ns.resolve(ks.min())}getMinOffsetFromCollectionGroup(t,e){return Ns.resolve(ks.min())}updateCollectionGroup(t,e,n){return Ns.resolve()}updateIndexEntries(t,e){return Ns.resolve()}}class yc{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Ks(vs.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new Ks(vs.comparator)).toArray()}}new Uint8Array(0);class vc{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new vc(t,vc.DEFAULT_COLLECTION_PERCENTILE,vc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}vc.DEFAULT_COLLECTION_PERCENTILE=10,vc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vc.DEFAULT=new vc(41943040,vc.DEFAULT_COLLECTION_PERCENTILE,vc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vc.DISABLED=new vc(-1,0,0);class bc{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new bc(0)}static kn(){return new bc(-1)}}class wc{constructor(){this.changes=new ba(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Co.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Ns.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class xc{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class _c{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(n=i,this.remoteDocumentCache.getEntry(t,e))).next(t=>(null!==n&&tl(n.mutation,t,Ys.empty(),gs.now()),t))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(e=>this.getLocalViewOfDocuments(t,e,Na()).next(()=>e))}getLocalViewOfDocuments(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Na();const i=ka();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,n).next(t=>{let e=Ea();return t.forEach((t,n)=>{e=e.insert(t,n.overlayedDocument)}),e}))}getOverlayedDocuments(t,e){const n=ka();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,Na()))}populateOverlays(t,e,n){const i=[];return n.forEach(t=>{e.has(t)||i.push(t)}),this.documentOverlayCache.getOverlays(t,i).next(t=>{t.forEach((t,n)=>{e.set(t,n)})})}computeViews(t,e,n,i){let r=xa();const s=Ia(),o=Ia();return e.forEach((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof rl)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),tl(o.mutation,e,o.mutation.getFieldMask(),gs.now())):s.set(e.key,Ys.empty())}),this.recalculateAndSaveOverlays(t,r).next(t=>(t.forEach((t,e)=>s.set(t,e)),e.forEach((t,e)=>{var n;return o.set(t,new xc(e,null!==(n=s.get(t))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(t,e){const n=Ia();let i=new Hs((t,e)=>t-e),r=Na();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(t=>{for(const r of t)r.keys().forEach(t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||Ys.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||Na()).add(t);i=i.insert(r.batchId,a)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,l=i.value,c=Ta();l.forEach(t=>{if(!r.has(t)){const i=$a(e.get(t),n.get(t));null!==i&&c.set(t,i),r=r.add(t)}}),s.push(this.documentOverlayCache.saveOverlays(t,a,c))}return Ns.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(e=>this.recalculateAndSaveOverlays(t,e))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return xs.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):oa(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next(r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):Ns.resolve(ka());let o=-1,a=r;return s.next(e=>Ns.forEach(e,(e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?Ns.resolve():this.remoteDocumentCache.getEntry(t,e).next(t=>{a=a.insert(e,t)}))).next(()=>this.populateOverlays(t,e,r)).next(()=>this.computeViews(t,a,e,Na())).next(t=>({batchId:o,changes:Sa(t)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new xs(e)).next(t=>{let e=Ea();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=Ea();return this.indexManager.getCollectionParents(t,r).next(o=>Ns.forEach(o,o=>{const a=function(t,e){return new na(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(r));return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next(t=>{t.forEach((t,e)=>{s=s.insert(t,e)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i))).next(t=>{r.forEach((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,Co.newInvalidDocument(i)))});let n=Ea();return t.forEach((t,i)=>{const s=r.get(t);void 0!==s&&tl(s.mutation,i,Ys.empty(),gs.now()),ga(e,i)&&(n=n.insert(t,i))}),n})}}class Ec{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return Ns.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:Bl(t.createTime)}}(e)),Ns.resolve()}getNamedQuery(t,e){return Ns.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,function(t){return{name:t.name,query:pc(t.bundledQuery),readTime:Bl(t.readTime)}}(e)),Ns.resolve()}}class Sc{constructor(){this.overlays=new Hs(xs.comparator),this.Ir=new Map}getOverlay(t,e){return Ns.resolve(this.overlays.get(e))}getOverlays(t,e){const n=ka();return Ns.forEach(e,e=>this.getOverlay(t,e).next(t=>{null!==t&&n.set(e,t)})).next(()=>n)}saveOverlays(t,e,n){return n.forEach((n,i)=>{this.ht(t,e,i)}),Ns.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.Ir.get(n);return void 0!==i&&(i.forEach(t=>this.overlays=this.overlays.remove(t)),this.Ir.delete(n)),Ns.resolve()}getOverlaysForCollection(t,e,n){const i=ka(),r=e.length+1,s=new xs(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return Ns.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new Hs((t,e)=>t-e);const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=ka(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=ka(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((t,e)=>o.set(t,e)),!(o.size()>=i)););return Ns.resolve(o)}ht(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new dl(e,n));let r=this.Ir.get(e);void 0===r&&(r=Na(),this.Ir.set(e,r)),this.Ir.set(e,r.add(n.key))}}class kc{constructor(){this.sessionToken=Js.EMPTY_BYTE_STRING}getSessionToken(t){return Ns.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,Ns.resolve()}}class Tc{constructor(){this.Tr=new Ks(Ic.Er),this.dr=new Ks(Ic.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){const n=new Ic(t,e);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(t,e){t.forEach(t=>this.addReference(t,e))}removeReference(t,e){this.Vr(new Ic(t,e))}mr(t,e){t.forEach(t=>this.removeReference(t,e))}gr(t){const e=new xs(new vs([])),n=new Ic(e,t),i=new Ic(e,t+1),r=[];return this.dr.forEachInRange([n,i],t=>{this.Vr(t),r.push(t.key)}),r}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const e=new xs(new vs([])),n=new Ic(e,t),i=new Ic(e,t+1);let r=Na();return this.dr.forEachInRange([n,i],t=>{r=r.add(t.key)}),r}containsKey(t){const e=new Ic(t,0),n=this.Tr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Ic{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return xs.comparator(t.key,e.key)||fs(t.wr,e.wr)}static Ar(t,e){return fs(t.wr,e.wr)||xs.comparator(t.key,e.key)}}class Cc{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new Ks(Ic.Er)}checkEmpty(t){return Ns.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ul(r,e,n,i);this.mutationQueue.push(s);for(const o of i)this.br=this.br.add(new Ic(o.key,r)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Ns.resolve(s)}lookupMutationBatch(t,e){return Ns.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.vr(n),r=i<0?0:i;return Ns.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Ns.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(t){return Ns.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Ic(e,0),i=new Ic(e,Number.POSITIVE_INFINITY),r=[];return this.br.forEachInRange([n,i],t=>{const e=this.Dr(t.wr);r.push(e)}),Ns.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Ks(fs);return e.forEach(t=>{const e=new Ic(t,0),i=new Ic(t,Number.POSITIVE_INFINITY);this.br.forEachInRange([e,i],t=>{n=n.add(t.wr)})}),Ns.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;xs.isDocumentKey(r)||(r=r.child(""));const s=new Ic(new xs(r),0);let o=new Ks(fs);return this.br.forEachWhile(t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.wr)),!0)},s),Ns.resolve(this.Cr(o))}Cr(t){const e=[];return t.forEach(t=>{const n=this.Dr(t);null!==n&&e.push(n)}),e}removeMutationBatch(t,e){$r(0===this.Fr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Ns.forEach(e.mutations,i=>{const r=new Ic(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.br=n})}On(t){}containsKey(t,e){const n=new Ic(e,0),i=this.br.firstAfterOrEqual(n);return Ns.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ns.resolve()}Fr(t,e){return this.vr(t)}vr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Dr(t){const e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Ac{constructor(t){this.Mr=t,this.docs=new Hs(xs.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.Mr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Ns.resolve(n?n.document.mutableCopy():Co.newInvalidDocument(e))}getEntries(t,e){let n=xa();return e.forEach(t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Co.newInvalidDocument(t))}),Ns.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=xa();const s=e.path,o=new xs(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||Ts(Ss(o),n)<=0||(i.has(o.key)||ga(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return Ns.resolve(r)}getAllFromCollectionGroup(t,e,n,i){Jr()}Or(t,e){return Ns.forEach(this.docs,t=>e(t))}newChangeBuffer(t){return new Nc(this)}getSize(t){return Ns.resolve(this.size)}}class Nc extends wc{constructor(t){super(),this.cr=t}applyChanges(t){const e=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?e.push(this.cr.addEntry(t,i)):this.cr.removeEntry(n)}),Ns.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}}class Pc{constructor(t){this.persistence=t,this.Nr=new ba(t=>Zo(t),ta),this.lastRemoteSnapshotVersion=ms.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Tc,this.targetCount=0,this.kr=bc.Bn()}forEachTarget(t,e){return this.Nr.forEach((t,n)=>e(n)),Ns.resolve()}getLastRemoteSnapshotVersion(t){return Ns.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ns.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),Ns.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Lr&&(this.Lr=e),Ns.resolve()}Kn(t){this.Nr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.kr=new bc(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,Ns.resolve()}updateTargetData(t,e){return this.Kn(e),Ns.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,Ns.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Nr.forEach((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Nr.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)}),Ns.waitFor(r).next(()=>i)}getTargetCount(t){return Ns.resolve(this.targetCount)}getTargetData(t,e){const n=this.Nr.get(e)||null;return Ns.resolve(n)}addMatchingKeys(t,e,n){return this.Br.Rr(e,n),Ns.resolve()}removeMatchingKeys(t,e,n){this.Br.mr(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach(e=>{r.push(i.markPotentiallyOrphaned(t,e))}),Ns.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),Ns.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Br.yr(e);return Ns.resolve(n)}containsKey(t,e){return Ns.resolve(this.Br.containsKey(e))}}class Mc{constructor(t,e){this.qr={},this.overlays={},this.Qr=new Rs(0),this.Kr=!1,this.Kr=!0,this.$r=new kc,this.referenceDelegate=t(this),this.Ur=new Pc(this),this.indexManager=new mc,this.remoteDocumentCache=function(t){return new Ac(t)}(t=>this.referenceDelegate.Wr(t)),this.serializer=new fc(e),this.Gr=new Ec(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Sc,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.qr[t.toKey()];return n||(n=new Cc(e,this.referenceDelegate),this.qr[t.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,n){Kr("MemoryPersistence","Starting transaction:",t);const i=new Rc(this.Qr.next());return this.referenceDelegate.zr(),n(i).next(t=>this.referenceDelegate.jr(i).next(()=>t)).toPromise().then(t=>(i.raiseOnCommittedEvent(),t))}Hr(t,e){return Ns.or(Object.values(this.qr).map(n=>()=>n.containsKey(t,e)))}}class Rc extends Cs{constructor(t){super(),this.currentSequenceNumber=t}}class Oc{constructor(t){this.persistence=t,this.Jr=new Tc,this.Yr=null}static Zr(t){return new Oc(t)}get Xr(){if(this.Yr)return this.Yr;throw Jr()}addReference(t,e,n){return this.Jr.addReference(n,e),this.Xr.delete(n.toString()),Ns.resolve()}removeReference(t,e,n){return this.Jr.removeReference(n,e),this.Xr.add(n.toString()),Ns.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),Ns.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach(t=>this.Xr.add(t.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(t=>{t.forEach(t=>this.Xr.add(t.toString()))}).next(()=>n.removeTargetData(t,e))}zr(){this.Yr=new Set}jr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ns.forEach(this.Xr,n=>{const i=xs.fromPath(n);return this.ei(t,i).next(t=>{t||e.removeEntry(i,ms.min())})}).next(()=>(this.Yr=null,e.apply(t)))}updateLimboDocument(t,e){return this.ei(t,e).next(t=>{t?this.Xr.delete(e.toString()):this.Xr.add(e.toString())})}Wr(t){return 0}ei(t,e){return Ns.or([()=>Ns.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}}class Dc{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.$i=n,this.Ui=i}static Wi(t,e){let n=Na(),i=Na();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Dc(t,e.fromCache,n,i)}}class Lc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Fc{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=v()?8:Ps(y())>0?6:4}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.Yi(t,e).next(t=>{r.result=t}).next(()=>{if(!r.result)return this.Zi(t,e,i,n).next(t=>{r.result=t})}).next(()=>{if(r.result)return;const n=new Lc;return this.Xi(t,e,n).next(i=>{if(r.result=i,this.zi)return this.es(t,e,n,i.size)})}).next(()=>r.result)}es(t,e,n,i){return n.documentReadCount<this.ji?(Gr()<=L.DEBUG&&Kr("QueryEngine","SDK will not create cache indexes for query:",pa(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ns.resolve()):(Gr()<=L.DEBUG&&Kr("QueryEngine","Query:",pa(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(Gr()<=L.DEBUG&&Kr("QueryEngine","The SDK decides to create cache indexes for query:",pa(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,la(e))):Ns.resolve())}Yi(t,e){if(sa(e))return Ns.resolve(null);let n=la(e);return this.indexManager.getIndexType(t,n).next(i=>0===i?null:(null!==e.limit&&1===i&&(e=ha(e,null,"F"),n=la(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next(i=>{const r=Na(...i);return this.Ji.getDocuments(t,r).next(i=>this.indexManager.getMinOffset(t,n).next(n=>{const s=this.ts(e,i);return this.ns(e,s,r,n.readTime)?this.Yi(t,ha(e,null,"F")):this.rs(t,s,e,n)}))})))}Zi(t,e,n,i){return sa(e)||i.isEqual(ms.min())?Ns.resolve(null):this.Ji.getDocuments(t,n).next(r=>{const s=this.ts(e,r);return this.ns(e,s,n,i)?Ns.resolve(null):(Gr()<=L.DEBUG&&Kr("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pa(e)),this.rs(t,s,e,Es(i,-1)).next(t=>t))})}ts(t,e){let n=new Ks(ya(t));return e.forEach((e,i)=>{ga(t,i)&&(n=n.add(i))}),n}ns(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Xi(t,e,n){return Gr()<=L.DEBUG&&Kr("QueryEngine","Using full collection scan to execute query:",pa(e)),this.Ji.getDocumentsMatchingQuery(t,e,ks.min(),n)}rs(t,e,n,i){return this.Ji.getDocumentsMatchingQuery(t,n,i).next(t=>(e.forEach(e=>{t=t.insert(e.key,e)}),t))}}class jc{constructor(t,e,n,i){this.persistence=t,this.ss=e,this.serializer=i,this.os=new Hs(fs),this._s=new ba(t=>Zo(t),ta),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(n)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new _c(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.os))}}function Uc(t,e,n,i){return new jc(t,e,n,i)}async function Vc(t,e){const n=Zr(t);return await n.persistence.runTransaction("Handle user change","readonly",t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next(r=>(i=r,n.ls(e),n.mutationQueue.getAllMutationBatches(t))).next(e=>{const r=[],s=[];let o=Na();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next(t=>({hs:t,removedBatchIds:r,addedBatchIds:s}))})})}function zc(t){const e=Zr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function Bc(t,e,n){let i=Na(),r=Na();return n.forEach(t=>i=i.add(t)),e.getEntries(t,i).next(t=>{let i=xa();return n.forEach((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(ms.min())?(e.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),i=i.insert(n,s)):Kr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{Ps:i,Is:r}})}function Wc(t,e){const n=Zr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e)))}function Hc(t,e){const n=Zr(t);return n.persistence.runTransaction("Allocate target","readwrite",t=>{let i;return n.Ur.getTargetData(t,e).next(r=>r?(i=r,Ns.resolve(i)):n.Ur.allocateTargetId(t).next(r=>(i=new dc(e,r,"TargetPurposeListen",t.currentSequenceNumber),n.Ur.addTargetData(t,i).next(()=>i))))}).then(t=>{const i=n.os.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(t.targetId,t),n._s.set(e,t.targetId)),t})}async function qc(t,e,n){const i=Zr(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,t=>i.persistence.referenceDelegate.removeTarget(t,r))}catch(t){if(!Ms(t))throw t;Kr("LocalStore","Failed to update sequence numbers for target ".concat(e,": ").concat(t))}i.os=i.os.remove(e),i._s.delete(r.target)}function Gc(t,e,n){const i=Zr(t);let r=ms.min(),s=Na();return i.persistence.runTransaction("Execute query","readwrite",t=>function(t,e,n){const i=Zr(t),r=i._s.get(n);return void 0!==r?Ns.resolve(i.os.get(r)):i.Ur.getTargetData(e,n)}(i,t,la(e)).next(e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(t,e.targetId).next(t=>{s=t})}).next(()=>i.ss.getDocumentsMatchingQuery(t,e,n?r:ms.min(),n?s:Na())).next(t=>(Kc(i,ma(e),t),{documents:t,Ts:s})))}function Kc(t,e,n){let i=t.us.get(e)||ms.min();n.forEach((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)}),t.us.set(e,i)}class Qc{constructor(){this.activeTargetIds=Ma()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Yc{constructor(){this.so=new Qc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,n){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new Qc,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Xc{_o(t){}shutdown(){}}class Jc{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Kr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){Kr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let $c=null;function Zc(){return null===$c?$c=268435456+Math.round(2147483648*Math.random()):$c++,"0x"+$c.toString(16)}const tu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eu{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}const nu="WebChannelConnection";class iu extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=e+"://"+t.host,this.vo="projects/".concat(n,"/databases/").concat(i),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(i)}get Fo(){return!1}Mo(t,e,n,i,r){const s=Zc(),o=this.xo(t,e.toUriEncodedString());Kr("RestConnection","Sending RPC '".concat(t,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,i,r),this.No(t,o,a,n).then(e=>(Kr("RestConnection","Received RPC '".concat(t,"' ").concat(s,": "),e),e),e=>{throw Yr("RestConnection","RPC '".concat(t,"' ").concat(s," failed with error: "),e,"url: ",o,"request:",n),e})}Lo(t,e,n,i,r,s){return this.Mo(t,e,n,i,r)}Oo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Hr,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((e,n)=>t[n]=e),n&&n.headers.forEach((e,n)=>t[n]=e)}xo(t,e){const n=tu[t];return"".concat(this.Do,"/v1/").concat(e,":").concat(n)}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,n,i){const r=Zc();return new Promise((s,o)=>{const a=new Mr;a.setWithCredentials(!0),a.listenOnce(Or.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Dr.NO_ERROR:const e=a.getResponseJson();Kr(nu,"XHR for RPC '".concat(t,"' ").concat(r," received:"),JSON.stringify(e)),s(e);break;case Dr.TIMEOUT:Kr(nu,"RPC '".concat(t,"' ").concat(r," timed out")),o(new es(ts.DEADLINE_EXCEEDED,"Request time out"));break;case Dr.HTTP_ERROR:const n=a.getStatus();if(Kr(nu,"RPC '".concat(t,"' ").concat(r," failed with status:"),n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(ts).indexOf(e)>=0?e:ts.UNKNOWN}(e.status);o(new es(t,e.message))}else o(new es(ts.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new es(ts.UNAVAILABLE,"Connection failed."));break;default:Jr()}}finally{Kr(nu,"RPC '".concat(t,"' ").concat(r," completed."))}});const l=JSON.stringify(i);Kr(nu,"RPC '".concat(t,"' ").concat(r," sending request:"),i),a.send(e,"POST",l,n,15)})}Bo(t,e,n){const i=Zc(),r=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=Ur(),o=jr(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const c=r.join("");Kr(nu,"Creating RPC '".concat(t,"' stream ").concat(i,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new eu({Io:e=>{d?Kr(nu,"Not sending because RPC '".concat(t,"' stream ").concat(i," is closed:"),e):(h||(Kr(nu,"Opening RPC '".concat(t,"' stream ").concat(i," transport.")),u.open(),h=!0),Kr(nu,"RPC '".concat(t,"' stream ").concat(i," sending:"),e),u.send(e))},To:()=>u.close()}),p=(t,e,n)=>{t.listen(e,t=>{try{n(t)}catch(t){setTimeout(()=>{throw t},0)}})};return p(u,Rr.EventType.OPEN,()=>{d||(Kr(nu,"RPC '".concat(t,"' stream ").concat(i," transport opened.")),f.yo())}),p(u,Rr.EventType.CLOSE,()=>{d||(d=!0,Kr(nu,"RPC '".concat(t,"' stream ").concat(i," transport closed")),f.So())}),p(u,Rr.EventType.ERROR,e=>{d||(d=!0,Yr(nu,"RPC '".concat(t,"' stream ").concat(i," transport errored:"),e),f.So(new es(ts.UNAVAILABLE,"The operation could not be completed")))}),p(u,Rr.EventType.MESSAGE,e=>{var n;if(!d){const r=e.data[0];$r(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Kr(nu,"RPC '".concat(t,"' stream ").concat(i," received error:"),o);const e=o.status;let n=function(t){const e=pl[t];if(void 0!==e)return yl(e)}(e),r=o.message;void 0===n&&(n=ts.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,f.So(new es(n,r)),u.close()}else Kr(nu,"RPC '".concat(t,"' stream ").concat(i," received:"),r),f.bo(r)}}),p(o,Fr.STAT_EVENT,e=>{e.stat===Lr.PROXY?Kr(nu,"RPC '".concat(t,"' stream ").concat(i," detected buffering proxy")):e.stat===Lr.NOPROXY&&Kr(nu,"RPC '".concat(t,"' stream ").concat(i," detected no buffering proxy"))}),setTimeout(()=>{f.wo()},0),f}}function ru(){return"undefined"!=typeof document?document:null}function su(t){return new Fl(t,!0)}class ou{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=t,this.timerId=e,this.ko=n,this.qo=i,this.Qo=r,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const e=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,e-n);i>0&&Kr("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(e," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class au{constructor(t,e,n,i,r,s,o,a){this.ui=t,this.Ho=n,this.Jo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ou(t,e)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,e){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==t?this.t_.reset():e&&e.code===ts.RESOURCE_EXHAUSTED?(Qr(e.toString()),Qr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===ts.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(e)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(t=>{let[n,i]=t;this.Yo===e&&this.P_(n,i)},e=>{t(()=>{const t=new es(ts.UNKNOWN,"Fetching auth token failed: "+e.message);return this.I_(t)})})}P_(t,e){const n=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(t=>{n(()=>this.I_(t))}),this.stream.onMessage(t=>{n(()=>1==++this.e_?this.E_(t):this.onNext(t))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return Kr("PersistentStream","close with error: ".concat(t)),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget(()=>this.Yo===t?e():(Kr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lu extends au{constructor(t,e,n,i,r,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Jr()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?($r(void 0===e||"string"==typeof e),Js.fromBase64String(e||"")):($r(void 0===e||e instanceof Buffer||e instanceof Uint8Array),Js.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?ts.UNKNOWN:yl(t.code);return new es(e,t.message||"")}(o);n=new Al(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Kl(t,i.document.name),s=Bl(i.document.updateTime),o=i.document.createTime?Bl(i.document.createTime):ms.min(),a=new To({mapValue:{fields:i.document.fields}}),l=Co.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new Il(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Kl(t,i.document),s=i.readTime?Bl(i.readTime):ms.min(),o=Co.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Il([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Kl(t,i.document),s=i.removedTargetIds||[];n=new Il([],s,r,null)}else{if(!("filter"in e))return Jr();{e.filter;const t=e.filter;t.targetId;const{count:i=0,unchangedNames:r}=t,s=new fl(i,r),o=t.targetId;n=new Cl(o,s)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return ms.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?ms.min():e.readTime?Bl(e.readTime):ms.min()}(t);return this.listener.d_(e,n)}A_(t){const e={};e.database=Xl(this.serializer),e.addTarget=function(t,e){let n;const i=e.target;if(n=ea(i)?{documents:tc(t,i)}:{query:ec(t,i)._t},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=Vl(t,e.resumeToken);const i=jl(t,e.expectedCount);null!==i&&(n.expectedCount=i)}else if(e.snapshotVersion.compareTo(ms.min())>0){n.readTime=Ul(t,e.snapshotVersion.toTimestamp());const i=jl(t,e.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Jr()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.a_(e)}R_(t){const e={};e.database=Xl(this.serializer),e.removeTarget=t,this.a_(e)}}class cu extends au{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return $r(!!t.streamToken),this.lastStreamToken=t.streamToken,$r(!t.writeResults||0===t.writeResults.length),this.listener.f_()}onNext(t){$r(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const e=function(t,e){return t&&t.length>0?($r(void 0!==e),t.map(t=>function(t,e){let n=t.updateTime?Bl(t.updateTime):Bl(e);return n.isEqual(ms.min())&&(n=Bl(e)),new Qa(n,t.transformResults||[])}(t,e))):[]}(t.writeResults,t.commitTime),n=Bl(t.commitTime);return this.listener.g_(n,e)}p_(){const t={};t.database=Xl(this.serializer),this.a_(t)}m_(t){const e={streamToken:this.lastStreamToken,writes:t.map(t=>Zl(this.serializer,t))};this.a_(e)}}class uu extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new es(ts.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[s,o]=r;return this.connection.Mo(t,Hl(e,n),i,s,o)}).catch(t=>{throw"FirebaseError"===t.name?(t.code===ts.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new es(ts.UNKNOWN,t.toString())})}Lo(t,e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Lo(t,Hl(e,n),i,o,a,r)}).catch(t=>{throw"FirebaseError"===t.name?(t.code===ts.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new es(ts.UNKNOWN,t.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class hu{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(t.toString())),this.C_("Offline")))}set(t){this.x_(),this.S_=0,"Online"===t&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const e="Could not reach Cloud Firestore backend. ".concat(t,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(Qr(e),this.D_=!1):Kr("OnlineStateTracker",e)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class du{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=r,this.k_._o(t=>{n.enqueueAndForget(async()=>{xu(this)&&(Kr("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Zr(t);e.L_.add(4),await pu(e),e.q_.set("Unknown"),e.L_.delete(4),await fu(e)}(this))})}),this.q_=new hu(n,i)}}async function fu(t){if(xu(t))for(const e of t.B_)await e(!0)}async function pu(t){for(const e of t.B_)await e(!1)}function gu(t,e){const n=Zr(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),wu(n)?bu(n):Vu(n).r_()&&yu(n,e))}function mu(t,e){const n=Zr(t),i=Vu(n);n.N_.delete(e),i.r_()&&vu(n,e),0===n.N_.size&&(i.r_()?i.o_():xu(n)&&n.q_.set("Unknown"))}function yu(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ms.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vu(t).A_(e)}function vu(t,e){t.Q_.xe(e),Vu(t).R_(e)}function bu(t){t.Q_=new Pl({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Vu(t).start(),t.q_.v_()}function wu(t){return xu(t)&&!Vu(t).n_()&&t.N_.size>0}function xu(t){return 0===Zr(t).L_.size}function _u(t){t.Q_=void 0}async function Eu(t){t.q_.set("Online")}async function Su(t){t.N_.forEach((e,n)=>{yu(t,e)})}async function ku(t,e){_u(t),wu(t)?(t.q_.M_(e),bu(t)):t.q_.set("Unknown")}async function Tu(t,e,n){if(t.q_.set("Online"),e instanceof Al&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.N_.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.N_.delete(i),t.Q_.removeTarget(i))}(t,e)}catch(n){Kr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Iu(t,n)}else if(e instanceof Il?t.Q_.Ke(e):e instanceof Cl?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ms.min()))try{const e=await zc(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Q_.rt(e);return n.targetChanges.forEach((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.N_.get(i);r&&t.N_.set(i,r.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach((e,n)=>{const i=t.N_.get(e);if(!i)return;t.N_.set(e,i.withResumeToken(Js.EMPTY_BYTE_STRING,i.snapshotVersion)),vu(t,e);const r=new dc(i.target,e,n,i.sequenceNumber);yu(t,r)}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){Kr("RemoteStore","Failed to raise snapshot:",e),await Iu(t,e)}}async function Iu(t,e,n){if(!Ms(e))throw e;t.L_.add(1),await pu(t),t.q_.set("Offline"),n||(n=()=>zc(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Kr("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await fu(t)})}function Cu(t,e){return e().catch(n=>Iu(t,n,e))}async function Au(t){const e=Zr(t),n=zu(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Nu(e);)try{const t=await Wc(e.localStore,i);if(null===t){0===e.O_.length&&n.o_();break}i=t.batchId,Pu(e,t)}catch(t){await Iu(e,t)}Mu(e)&&Ru(e)}function Nu(t){return xu(t)&&t.O_.length<10}function Pu(t,e){t.O_.push(e);const n=zu(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Mu(t){return xu(t)&&!zu(t).n_()&&t.O_.length>0}function Ru(t){zu(t).start()}async function Ou(t){zu(t).p_()}async function Du(t){const e=zu(t);for(const n of t.O_)e.m_(n.mutations)}async function Lu(t,e,n){const i=t.O_.shift(),r=hl.from(i,e,n);await Cu(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Au(t)}async function Fu(t,e){e&&zu(t).V_&&await async function(t,e){if(function(t){return ml(t)&&t!==ts.ABORTED}(e.code)){const n=t.O_.shift();zu(t).s_(),await Cu(t,()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e)),await Au(t)}}(t,e),Mu(t)&&Ru(t)}async function ju(t,e){const n=Zr(t);n.asyncQueue.verifyOperationInProgress(),Kr("RemoteStore","RemoteStore received new credentials");const i=xu(n);n.L_.add(3),await pu(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await fu(n)}async function Uu(t,e){const n=Zr(t);e?(n.L_.delete(2),await fu(n)):e||(n.L_.add(2),await pu(n),n.q_.set("Unknown"))}function Vu(t){return t.K_||(t.K_=function(t,e,n){const i=Zr(t);return i.w_(),new lu(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Eo:Eu.bind(null,t),Ro:Su.bind(null,t),mo:ku.bind(null,t),d_:Tu.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),wu(t)?bu(t):t.q_.set("Unknown")):(await t.K_.stop(),_u(t))})),t.K_}function zu(t){return t.U_||(t.U_=function(t,e,n){const i=Zr(t);return i.w_(),new cu(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Ou.bind(null,t),mo:Fu.bind(null,t),f_:Du.bind(null,t),g_:Lu.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Au(t)):(await t.U_.stop(),t.O_.length>0&&(Kr("RemoteStore","Stopping write stream with ".concat(t.O_.length," pending writes")),t.O_=[]))})),t.U_}class Bu{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(t=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new Bu(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new es(ts.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wu(t,e){if(Qr("AsyncQueue","".concat(e,": ").concat(t)),Ms(t))return new es(ts.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}class Hu{constructor(t){this.comparator=t?(e,n)=>t(e,n)||xs.comparator(e.key,n.key):(t,e)=>xs.comparator(t.key,e.key),this.keyedMap=Ea(),this.sortedSet=new Hs(this.comparator)}static emptySet(t){return new Hu(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Hu))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Hu;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class qu{constructor(){this.W_=new Hs(xs.comparator)}track(t){const e=t.doc.key,n=this.W_.get(e);n?0!==t.type&&3===n.type?this.W_=this.W_.insert(e,t):3===t.type&&1!==n.type?this.W_=this.W_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.W_=this.W_.remove(e):1===t.type&&2===n.type?this.W_=this.W_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):Jr():this.W_=this.W_.insert(e,t)}G_(){const t=[];return this.W_.inorderTraversal((e,n)=>{t.push(n)}),t}}class Gu{constructor(t,e,n,i,r,s,o,a,l){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(t,e,n,i,r){const s=[];return e.forEach(t=>{s.push({type:0,doc:t})}),new Gu(t,e,Hu.emptySet(e),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&da(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}}class Ku{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class Qu{constructor(){this.queries=Yu(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,e){const n=Zr(t),i=n.queries;n.queries=Yu(),i.forEach((t,n)=>{for(const i of n.j_)i.onError(e)})}(this,new es(ts.ABORTED,"Firestore shutting down"))}}function Yu(){return new ba(t=>fa(t),da)}async function Xu(t,e){const n=Zr(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new Ku,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(t){const n=Wu(t,"Initialization of query '".concat(pa(e.query),"' failed"));return void e.onError(n)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&th(n)}async function Ju(t,e){const n=Zr(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const t=s.j_.indexOf(e);t>=0&&(s.j_.splice(t,1),0===s.j_.length?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function $u(t,e){const n=Zr(t);let i=!1;for(const r of e){const t=r.query,e=n.queries.get(t);if(e){for(const t of e.j_)t.X_(r)&&(i=!0);e.z_=r}}i&&th(n)}function Zu(t,e,n){const i=Zr(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function th(t){t.Y_.forEach(t=>{t.next()})}var eh,nh;(nh=eh||(eh={})).ea="default",nh.Cache="cache";class ih{constructor(t,e,n){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Gu(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==e;return(!this.options._a||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}ia(t){if(t.docChanges.length>0)return!0;const e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}oa(t){t=Gu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==eh.Cache}}class rh{constructor(t){this.key=t}}class sh{constructor(t){this.key=t}}class oh{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Na(),this.mutatedKeys=Na(),this.Aa=ya(t),this.Ra=new Hu(this.Aa)}get Va(){return this.Ta}ma(t,e){const n=e?e.fa:new qu,i=e?e.Ra:this.Ra;let r=e?e.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((t,e)=>{const c=i.get(t),u=ga(this.query,e)?e:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Aa(u,a)>0||l&&this.Aa(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),r=d?r.add(t):r.delete(t)):(s=s.delete(t),r=r.delete(t)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{Ra:s,fa:n,ns:o,mutatedKeys:r}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,i){const r=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const s=t.fa.G_();s.sort((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jr()}};return n(t)-n(e)}(t.type,e.type)||this.Aa(t.doc,e.doc)),this.pa(n),i=null!=i&&i;const o=e&&!i?this.ya():[],a=0===this.da.size&&this.current&&!i?1:0,l=a!==this.Ea;return this.Ea=a,0!==s.length||l?{snapshot:new Gu(this.query,t.Ra,r,s,t.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new qu,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),t.modifiedDocuments.forEach(t=>{}),t.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Na(),this.Ra.forEach(t=>{this.Sa(t.key)&&(this.da=this.da.add(t.key))});const e=[];return t.forEach(t=>{this.da.has(t)||e.push(new sh(t))}),this.da.forEach(n=>{t.has(n)||e.push(new rh(n))}),e}ba(t){this.Ta=t.Ts,this.da=Na();const e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return Gu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class ah{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class lh{constructor(t){this.key=t,this.va=!1}}class ch{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new ba(t=>fa(t),da),this.Ma=new Map,this.xa=new Set,this.Oa=new Hs(xs.comparator),this.Na=new Map,this.La=new Tc,this.Ba={},this.ka=new Map,this.qa=bc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function uh(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=Ph(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await dh(i,e,n,!0),r}async function hh(t,e){const n=Ph(t);await dh(n,e,!0,!1)}async function dh(t,e,n,i){const r=await Hc(t.localStore,la(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await fh(t,e,s,"current"===o,r.resumeToken)),t.isPrimaryClient&&n&&gu(t.remoteStore,r),a}async function fh(t,e,n,i,r){t.Ka=(e,n,i)=>async function(t,e,n,i){let r=e.view.ma(n);r.ns&&(r=await Gc(t.localStore,e.query,!1).then(t=>{let{documents:n}=t;return e.view.ma(n,r)}));const s=i&&i.targetChanges.get(e.targetId),o=i&&null!=i.targetMismatches.get(e.targetId),a=e.view.applyChanges(r,t.isPrimaryClient,s,o);return kh(t,e.targetId,a.wa),a.snapshot}(t,e,n,i);const s=await Gc(t.localStore,e,!0),o=new oh(e,s.Ts),a=o.ma(s.documents),l=Tl.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,r),c=o.applyChanges(a,t.isPrimaryClient,l);kh(t,n,c.wa);const u=new ah(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function ph(t,e,n){const i=Zr(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(t=>!da(t,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await qc(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&mu(i.remoteStore,r.targetId),Eh(i,r.targetId)}).catch(As)):(Eh(i,r.targetId),await qc(i.localStore,r.targetId,!0))}async function gh(t,e){const n=Zr(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&1===r.length&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),mu(n.remoteStore,i.targetId))}async function mh(t,e){const n=Zr(t);try{const t=await function(t,e){const n=Zr(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",t=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const o=[];e.targetChanges.forEach((s,a)=>{const l=r.get(a);if(!l)return;o.push(n.Ur.removeMatchingKeys(t,s.removedDocuments,a).next(()=>n.Ur.addMatchingKeys(t,s.addedDocuments,a)));let c=l.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?c=c.withResumeToken(Js.EMPTY_BYTE_STRING,ms.min()).withLastLimboFreeSnapshotVersion(ms.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,i)),r=r.insert(a,c),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Ur.updateTargetData(t,c))});let a=xa(),l=Na();if(e.documentUpdates.forEach(i=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))}),o.push(Bc(t,s,e.documentUpdates).next(t=>{a=t.Ps,l=t.Is})),!i.isEqual(ms.min())){const e=n.Ur.getLastRemoteSnapshotVersion(t).next(e=>n.Ur.setTargetsMetadata(t,t.currentSequenceNumber,i));o.push(e)}return Ns.waitFor(o).next(()=>s.apply(t)).next(()=>n.localDocuments.getLocalViewOfDocuments(t,a,l)).next(()=>a)}).then(t=>(n.os=r,t))}(n.localStore,e);e.targetChanges.forEach((t,e)=>{const i=n.Na.get(e);i&&($r(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.va=!0:t.modifiedDocuments.size>0?$r(i.va):t.removedDocuments.size>0&&($r(i.va),i.va=!1))}),await Ch(n,t,e)}catch(t){await As(t)}}function yh(t,e,n){const i=Zr(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.Fa.forEach((n,i)=>{const r=i.view.Z_(e);r.snapshot&&t.push(r.snapshot)}),function(t,e){const n=Zr(t);n.onlineState=e;let i=!1;n.queries.forEach((t,n)=>{for(const r of n.j_)r.Z_(e)&&(i=!0)}),i&&th(n)}(i.eventManager,e),t.length&&i.Ca.d_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function vh(t,e,n){const i=Zr(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let t=new Hs(xs.comparator);t=t.insert(s,Co.newNoDocument(s,ms.min()));const n=Na().add(s),r=new kl(ms.min(),new Map,new Hs(fs),t,n);await mh(i,r),i.Oa=i.Oa.remove(s),i.Na.delete(e),Ih(i)}else await qc(i.localStore,e,!1).then(()=>Eh(i,e,n)).catch(As)}async function bh(t,e){const n=Zr(t),i=e.batch.batchId;try{const t=await function(t,e){const n=Zr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",t=>{const i=e.batch.keys(),r=n.cs.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=Ns.resolve();return s.forEach(t=>{o=o.next(()=>i.getEntry(e,t)).next(e=>{const s=n.docVersions.get(t);$r(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))})}),o.next(()=>t.mutationQueue.removeMutationBatch(e,r))}(n,t,e,r).next(()=>r.apply(t)).next(()=>n.mutationQueue.performConsistencyCheck(t)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Na();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e))).next(()=>n.localDocuments.getDocuments(t,i))})}(n.localStore,e);_h(n,i,null),xh(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ch(n,t)}catch(t){await As(t)}}async function wh(t,e,n){const i=Zr(t);try{const t=await function(t,e){const n=Zr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next(e=>($r(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e))).next(()=>n.mutationQueue.performConsistencyCheck(t)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i)).next(()=>n.localDocuments.getDocuments(t,i))})}(i.localStore,e);_h(i,e,n),xh(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ch(i,t)}catch(n){await As(n)}}function xh(t,e){(t.ka.get(e)||[]).forEach(t=>{t.resolve()}),t.ka.delete(e)}function _h(t,e,n){const i=Zr(t);let r=i.Ba[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Eh(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(e=>{t.La.containsKey(e)||Sh(t,e)})}function Sh(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);null!==n&&(mu(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ih(t))}function kh(t,e,n){for(const i of n)i instanceof rh?(t.La.addReference(i.key,e),Th(t,i)):i instanceof sh?(Kr("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||Sh(t,i.key)):Jr()}function Th(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(Kr("SyncEngine","New document in limbo: "+n),t.xa.add(i),Ih(t))}function Ih(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new xs(vs.fromString(e)),i=t.qa.next();t.Na.set(i,new lh(n)),t.Oa=t.Oa.insert(n,i),gu(t.remoteStore,new dc(la(ra(n.path)),i,"TargetPurposeLimboResolution",Rs.oe))}}async function Ch(t,e,n){const i=Zr(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((t,a)=>{o.push(i.Ka(a,e,n).then(t=>{var e;if((t||n)&&i.isPrimaryClient){const r=t?!t.fromCache:null===(e=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===e?void 0:e.current;i.sharedClientState.updateQueryState(a.targetId,r?"current":"not-current")}if(t){r.push(t);const e=Dc.Wi(a.targetId,t);s.push(e)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(t,e){const n=Zr(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",t=>Ns.forEach(e,e=>Ns.forEach(e.$i,i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i)).next(()=>Ns.forEach(e.Ui,i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))}catch(t){if(!Ms(t))throw t;Kr("LocalStore","Failed to update sequence numbers: "+t)}for(const i of e){const t=i.targetId;if(!i.fromCache){const e=n.os.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.os=n.os.insert(t,r)}}}(i.localStore,s))}async function Ah(t,e){const n=Zr(t);if(!n.currentUser.isEqual(e)){Kr("SyncEngine","User change. New user:",e.toKey());const t=await Vc(n.localStore,e);n.currentUser=e,function(t,e){t.ka.forEach(t=>{t.forEach(t=>{t.reject(new es(ts.CANCELLED,e))})}),t.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Ch(n,t.hs)}}function Nh(t,e){const n=Zr(t),i=n.Na.get(e);if(i&&i.va)return Na().add(i.key);{let t=Na();const i=n.Ma.get(e);if(!i)return t;for(const e of i){const i=n.Fa.get(e);t=t.unionWith(i.view.Va)}return t}}function Ph(t){const e=Zr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vh.bind(null,e),e.Ca.d_=$u.bind(null,e.eventManager),e.Ca.$a=Zu.bind(null,e.eventManager),e}function Mh(t){const e=Zr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wh.bind(null,e),e}class Rh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=su(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,e){return null}Ha(t,e){return null}za(t){return Uc(this.persistence,new Fc,t.initialUser,this.serializer)}Ga(t){return new Mc(Oc.Zr,this.serializer)}Wa(t){return new Yc}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rh.provider={build:()=>new Rh};class Oh{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>yh(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ah.bind(null,this.syncEngine),await Uu(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Qu}createDatastore(t){const e=su(t.databaseInfo.databaseId),n=function(t){return new iu(t)}(t.databaseInfo);return function(t,e,n,i){return new uu(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,r){return new du(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,t=>yh(this.syncEngine,t,0),Jc.D()?new Jc:new Xc)}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new ch(t,e,n,i,r,s);return o&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(t){const e=Zr(t);Kr("RemoteStore","RemoteStore shutting down."),e.L_.add(5),await pu(e),e.k_.shutdown(),e.q_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate(),null===(e=this.eventManager)||void 0===e||e.terminate()}}Oh.provider={build:()=>new Oh};class Dh{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):Qr("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,e){setTimeout(()=>{this.muted||t(e)},0)}}class Lh{constructor(t,e,n,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=Wr.UNAUTHENTICATED,this.clientId=ds.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(n,async t=>{Kr("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t}),this.appCheckCredentials.start(n,t=>(Kr("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Wu(e,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function Fh(t,e){t.asyncQueue.verifyOperationInProgress(),Kr("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async t=>{i.isEqual(t)||(await Vc(e.localStore,t),i=t)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jh(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Uh(t);Kr("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(t=>ju(e.remoteStore,t)),t.setAppCheckTokenChangeListener((t,n)=>ju(e.remoteStore,n)),t._onlineComponents=e}async function Uh(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Kr("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===ts.FAILED_PRECONDITION||t.code===ts.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;Yr("Error using user provided cache. Falling back to memory cache: "+n),await Fh(t,new Rh)}}else Kr("FirestoreClient","Using default OfflineComponentProvider"),await Fh(t,new Rh);return t._offlineComponents}async function Vh(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Kr("FirestoreClient","Using user provided OnlineComponentProvider"),await jh(t,t._uninitializedComponentsProvider._online)):(Kr("FirestoreClient","Using default OnlineComponentProvider"),await jh(t,new Oh))),t._onlineComponents}function zh(t){return Vh(t).then(t=>t.syncEngine)}async function Bh(t){const e=await Vh(t),n=e.eventManager;return n.onListen=uh.bind(null,e.syncEngine),n.onUnlisten=ph.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hh.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gh.bind(null,e.syncEngine),n}function Wh(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new ns;return t.asyncQueue.enqueueAndForget(async()=>function(t,e,n,i,r){const s=new Dh({next:a=>{s.Za(),e.enqueueAndForget(()=>Ju(t,o));const l=a.docs.has(n);!l&&a.fromCache?r.reject(new es(ts.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&i&&"server"===i.source?r.reject(new es(ts.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(a)},error:t=>r.reject(t)}),o=new ih(ra(n.path),s,{includeMetadataChanges:!0,_a:!0});return Xu(t,o)}(await Bh(t),t.asyncQueue,e,n,i)),i.promise}function Hh(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new ns;return t.asyncQueue.enqueueAndForget(async()=>function(t,e,n,i,r){const s=new Dh({next:n=>{s.Za(),e.enqueueAndForget(()=>Ju(t,o)),n.fromCache&&"server"===i.source?r.reject(new es(ts.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:t=>r.reject(t)}),o=new ih(n,s,{includeMetadataChanges:!0,_a:!0});return Xu(t,o)}(await Bh(t),t.asyncQueue,e,n,i)),i.promise}function qh(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Gh=new Map;function Kh(t,e,n){if(!n)throw new es(ts.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function Qh(t){if(!xs.isDocumentKey(t))throw new es(ts.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function Yh(t){if(xs.isDocumentKey(t))throw new es(ts.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function Xh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?"a custom ".concat(e," object"):"an object"}}return"function"==typeof t?"a function":Jr()}function Jh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new es(ts.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xh(t);throw new es(ts.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}}return t}class $h{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new es(ts.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new es(ts.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new es(ts.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qh(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new es(ts.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (must not be NaN)"));if(t.timeoutSeconds<5)throw new es(ts.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (minimum allowed value is 5)"));if(t.timeoutSeconds>30)throw new es(ts.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Zh{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $h({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new es(ts.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new es(ts.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $h(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new rs;switch(t.type){case"firstParty":return new ls(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new es(ts.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Gh.get(t);e&&(Kr("ComponentProvider","Removing Datastore"),Gh.delete(t),e.terminate())}(this),Promise.resolve()}}function td(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var r;const s=(t=Jh(t,Zh))._getSettings(),o="".concat(e,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Yr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=Wr.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[c(JSON.stringify({alg:"none",type:"JWT"})),c(JSON.stringify(s)),""].join(".")}(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new es(ts.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Wr(s)}t._authCredentials=new ss(new is(e,n))}}class ed{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new ed(this.firestore,t,this._query)}}class nd{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new id(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new nd(this.firestore,t,this._key)}}class id extends ed{constructor(t,e,n){super(t,e,ra(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new nd(this.firestore,null,new xs(t))}withConverter(t){return new id(this.firestore,t,this._path)}}function rd(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(t=N(t),Kh("collection","path",e),t instanceof Zh){const n=vs.fromString(e,...i);return Yh(n),new id(t,null,n)}{if(!(t instanceof nd||t instanceof id))throw new es(ts.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(vs.fromString(e,...i));return Yh(n),new id(t.firestore,null,n)}}function sd(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(t=N(t),1===arguments.length&&(e=ds.newId()),Kh("doc","path",e),t instanceof Zh){const n=vs.fromString(e,...i);return Qh(n),new nd(t,null,new xs(n))}{if(!(t instanceof nd||t instanceof id))throw new es(ts.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(vs.fromString(e,...i));return Qh(n),new nd(t.firestore,t instanceof id?t.converter:null,new xs(n))}}class od{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ou(this,"async_queue_retry"),this.Vu=()=>{const t=ru();t&&Kr("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()},this.mu=t;const e=ru();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const e=ru();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const e=new ns;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Ms(t))throw t;Kr("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const e=this.mu.then(()=>(this.du=!0,t().catch(t=>{this.Eu=t,this.du=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw Qr("INTERNAL UNHANDLED ERROR: ",e),t}).then(t=>(this.du=!1,t))));return this.mu=e,e}enqueueAfterDelay(t,e,n){this.fu(),this.Ru.indexOf(t)>-1&&(e=0);const i=Bu.createAndSchedule(this,t,e,n,t=>this.yu(t));return this.Tu.push(i),i}fu(){this.Eu&&Jr()}verifyOperationInProgress(){}async wu(){let t;do{t=this.mu,await t}while(t!==this.mu)}Su(t){for(const e of this.Tu)if(e.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((t,e)=>t.targetTimeMs-e.targetTimeMs);for(const e of this.Tu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const e=this.Tu.indexOf(t);this.Tu.splice(e,1)}}class ad extends Zh{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new od,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new od(t),this._firestoreClient=void 0,await t}}}function ld(t){if(t._terminated)throw new es(ts.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cd(t),t._firestoreClient}function cd(t){var e,n,i;const r=t._freezeSettings(),s=function(t,e,n,i){return new so(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,qh(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new Lh(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(t){const e=null==t?void 0:t._online.build();return{_offline:null==t?void 0:t._offline.build(e),_online:e}}(t._componentsProvider))}class ud{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ud(Js.fromBase64String(t))}catch(t){throw new es(ts.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new ud(Js.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class hd{constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let i=0;i<e.length;++i)if(0===e[i].length)throw new es(ts.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ws(e)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class dd{constructor(t){this._methodName=t}}class fd{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new es(ts.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new es(ts.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return fs(this._lat,t._lat)||fs(this._long,t._long)}}class pd{constructor(t){this._values=(t||[]).map(t=>t)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(this._values,t._values)}}const gd=/^__.*__$/;class md{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new rl(t,this.data,this.fieldMask,e,this.fieldTransforms):new il(t,this.data,e,this.fieldTransforms)}}class yd{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new rl(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function vd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jr()}}class bd{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.vu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new bd(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Fu({path:n,xu:!1});return i.Ou(t),i}Nu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return Od(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(0===t.length)throw this.Bu("Document fields must not be empty");if(vd(this.Cu)&&gd.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class wd{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||su(t)}Qu(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new bd({Cu:t,methodName:e,qu:n,path:ws.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xd(t){const e=t._freezeSettings(),n=su(t._databaseId);return new wd(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _d(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);Nd("Data must be an object, but it was:",o,i);const a=Cd(i,o);let l,c;if(s.merge)l=new Ys(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=Pd(e,i,n);if(!o.contains(r))throw new es(ts.INVALID_ARGUMENT,"Field '".concat(r,"' is specified in your field mask but missing from your input data."));Dd(t,r)||t.push(r)}l=new Ys(t),c=o.fieldTransforms.filter(t=>l.covers(t.field))}else l=null,c=o.fieldTransforms;return new md(new To(a),l,c)}class Ed extends dd{_toFieldTransform(t){if(2!==t.Cu)throw 1===t.Cu?t.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):t.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ed}}function Sd(t,e,n,i){const r=t.Qu(1,e,n);Nd("Data must be an object, but it was:",r,i);const s=[],o=To.empty();Bs(i,(t,i)=>{const a=Rd(e,t,n);i=N(i);const l=r.Nu(a);if(i instanceof Ed)s.push(a);else{const t=Id(i,l);null!=t&&(s.push(a),o.set(a,t))}});const a=new Ys(s);return new yd(o,a,r.fieldTransforms)}function kd(t,e,n,i,r,s){const o=t.Qu(1,e,n),a=[Pd(e,i,n)],l=[r];if(s.length%2!=0)throw new es(ts.INVALID_ARGUMENT,"Function ".concat(e,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(Pd(e,s[d])),l.push(s[d+1]);const c=[],u=To.empty();for(let d=a.length-1;d>=0;--d)if(!Dd(c,a[d])){const t=a[d];let e=l[d];e=N(e);const n=o.Nu(t);if(e instanceof Ed)c.push(t);else{const i=Id(e,n);null!=i&&(c.push(t),u.set(t,i))}}const h=new Ys(c);return new yd(u,h,o.fieldTransforms)}function Td(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Id(n,t.Qu(i?4:3,e))}function Id(t,e){if(Ad(t=N(t)))return Nd("Unsupported field value:",e,t),Cd(t,e);if(t instanceof dd)return function(t,e){if(!vd(e.Cu))throw e.Bu("".concat(t._methodName,"() can only be used with update() and set()"));if(!e.path)throw e.Bu("".concat(t._methodName,"() is not currently supported inside arrays"));const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=Id(r,e.Lu(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=N(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Da(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=gs.fromDate(t);return{timestampValue:Ul(e.serializer,n)}}if(t instanceof gs){const n=new gs(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ul(e.serializer,n)}}if(t instanceof fd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ud)return{bytesValue:Vl(e.serializer,t._byteString)};if(t instanceof nd){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.Bu("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Wl(t.firestore._databaseId||e.databaseId,t._key.path)}}if(t instanceof pd)return function(t,e){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:t.toArray().map(t=>{if("number"!=typeof t)throw e.Bu("VectorValues must only contain numeric values.");return Ra(e.serializer,t)})}}}}}}(t,e);throw e.Bu("Unsupported field value: ".concat(Xh(t)))}(t,e)}function Cd(t,e){const n={};return Ws(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bs(t,(t,i)=>{const r=Id(i,e.Mu(t));null!=r&&(n[t]=r)}),{mapValue:{fields:n}}}function Ad(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof gs||t instanceof fd||t instanceof ud||t instanceof nd||t instanceof dd||t instanceof pd)}function Nd(t,e,n){if(!Ad(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=Xh(n);throw"an object"===i?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Pd(t,e,n){if((e=N(e))instanceof hd)return e._internalPath;if("string"==typeof e)return Rd(t,e);throw Od("Field path arguments must be of type string or ",t,!1,void 0,n)}const Md=new RegExp("[~\\*/\\[\\]]");function Rd(t,e,n){if(e.search(Md)>=0)throw Od("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return new hd(...e.split("."))._internalPath}catch(i){throw Od("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function Od(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a="Function ".concat(e,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(i)),o&&(l+=" in document ".concat(r)),l+=")"),new es(ts.INVALID_ARGUMENT,a+t+l)}function Dd(t,e){return t.some(t=>t.isEqual(e))}class Ld{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new nd(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Fd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(jd("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Fd extends Ld{data(){return super.data()}}function jd(t,e){return"string"==typeof e?Rd(t,e):e instanceof hd?e._internalPath:e._delegate._internalPath}function Ud(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new es(ts.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vd{}class zd extends Vd{}function Bd(t,e){let n=[];for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];e instanceof Vd&&n.push(e),n=n.concat(r),function(t){const e=t.filter(t=>t instanceof qd).length,n=t.filter(t=>t instanceof Wd).length;if(e>1||e>0&&n>0)throw new es(ts.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)t=o._apply(t);return t}class Wd extends zd{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new Wd(t,e,n)}_apply(t){const e=this._parse(t);return Yd(t._query,e),new ed(t.firestore,t.converter,ua(t._query,e))}_parse(t){const e=xd(t.firestore),n=function(t,e,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new es(ts.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Qd(o,s);const e=[];for(const n of o)e.push(Kd(i,t,n));a={arrayValue:{values:e}}}else a=Kd(i,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Qd(o,s),a=Td(n,e,o,"in"===s||"not-in"===s);return Do.create(r,s,a)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value);return n}}function Hd(t,e,n){const i=e,r=jd("where",t);return Wd._create(r,i,n)}class qd extends Vd{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new qd(t,e)}_parse(t){const e=this._queryConstraints.map(e=>e._parse(t)).filter(t=>t.getFilters().length>0);return 1===e.length?e[0]:Lo.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const i=e.getFlattenedFilters();for(const r of i)Yd(n,r),n=ua(n,r)}(t._query,e),new ed(t.firestore,t.converter,ua(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Gd extends zd{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Gd(t,e)}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new es(ts.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new es(ts.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mo(e,n)}(t._query,this._field,this._direction);return new ed(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new na(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}function Kd(t,e,n){if("string"==typeof(n=N(n))){if(""===n)throw new es(ts.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oa(e)&&-1!==n.indexOf("/"))throw new es(ts.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const i=e.path.child(vs.fromString(n));if(!xs.isDocumentKey(i))throw new es(ts.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(i,"' is not because it has an odd number of segments (").concat(i.length,")."));return yo(t,new xs(i))}if(n instanceof nd)return yo(t,n._key);throw new es(ts.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Xh(n),"."))}function Qd(t,e){if(!Array.isArray(t)||0===t.length)throw new es(ts.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(e.toString(),"' filters."))}function Yd(t,e){const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new es(ts.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(e.op.toString(),"' filter.")):new es(ts.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(e.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Xd{convertValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(lo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return to(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(eo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Jr()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Bs(t,(t,i)=>{n[t]=this.convertValue(i,e)}),n}convertVectorValue(t){var e,n,i;const r=null===(i=null===(n=null===(e=t.fields)||void 0===e?void 0:e.value.arrayValue)||void 0===n?void 0:n.values)||void 0===i?void 0:i.map(t=>to(t.doubleValue));return new pd(r)}convertGeoPoint(t){return new fd(to(t.latitude),to(t.longitude))}convertArray(t,e){return(t.values||[]).map(t=>this.convertValue(t,e))}convertServerTimestamp(t,e){switch(e){case"previous":const n=io(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ro(t));default:return null}}convertTimestamp(t){const e=Zs(t);return new gs(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=vs.fromString(t);$r(hc(n));const i=new oo(n.get(1),n.get(3)),r=new xs(n.popFirst(5));return i.isEqual(e)||Qr("Document ".concat(r," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(e.projectId,"/").concat(e.database,") instead.")),r}}function Jd(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class $d{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Zd extends Ld{constructor(t,e,n,i,r,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const e=new tf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(jd("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class tf extends Zd{data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(t)}}class ef{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new $d(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new tf(this._firestore,this._userDataWriter,n.key,n,new $d(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const t=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new es(ts.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map(n=>{const i=new tf(t._firestore,t._userDataWriter,n.doc.key,n.doc,new $d(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}})}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(t=>e||3!==t.type).map(e=>{const i=new tf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new $d(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,s=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:nf(e.type),doc:i,oldIndex:r,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function nf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jr()}}class rf extends Xd{constructor(t){super(),this.firestore=t}convertBytes(t){return new ud(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new nd(this.firestore,null,e)}}function sf(t){t=Jh(t,ed);const e=Jh(t.firestore,ad),n=ld(e),i=new rf(e);return Ud(t._query),Hh(n,t._query).then(n=>new ef(e,i,t,n))}function of(t,e){return function(t,e){const n=new ns;return t.asyncQueue.enqueueAndForget(async()=>async function(t,e,n){const i=Mh(t);try{const t=await function(t,e){const n=Zr(t),i=gs.now(),r=e.reduce((t,e)=>t.add(e.key),Na());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",t=>{let a=xa(),l=Na();return n.cs.getEntries(t,r).next(t=>{a=t,a.forEach((t,e)=>{e.isValidDocument()||(l=l.add(t))})}).next(()=>n.localDocuments.getOverlayedDocuments(t,a)).next(r=>{s=r;const o=[];for(const t of e){const e=el(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new rl(t.key,e,Io(e.value.mapValue),Ya.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)}).next(e=>{o=e;const i=e.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)})}).then(()=>({batchId:o.batchId,changes:Sa(s)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Ba[t.currentUser.toKey()];i||(i=new Hs(fs)),i=i.insert(e,n),t.Ba[t.currentUser.toKey()]=i}(i,t.batchId,n),await Ch(i,t.changes),await Au(i.remoteStore)}catch(t){const e=Wu(t,"Failed to persist write");n.reject(e)}}(await zh(t),e,n)),n.promise}(ld(t),e)}function af(t,e,n){const i=n.docs.get(e._key),r=new rf(t);return new Zd(t,r,e._key,i,new $d(n.hasPendingWrites,n.fromCache),e.converter)}new WeakMap;!function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t){Hr=t}(Xt),qt(new P("firestore",(t,n)=>{let{instanceIdentifier:i,options:r}=n;const s=t.getProvider("app").getImmediate(),o=new ad(new os(t.getProvider("auth-internal")),new us(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new es(ts.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oo(t.options.projectId,e)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),Zt(Br,"4.7.3",t),Zt(Br,"4.7.3","esm2017")}();const lf=Jt({apiKey:"AIzaSyDjPiJ9hUQpr6LR3DwknDRSdJgQ2ihi7w8",authDomain:"math-wizard-e9ac3.firebaseapp.com",projectId:"math-wizard-e9ac3",storageBucket:"math-wizard-e9ac3.firebasestorage.app",messagingSenderId:"1052246851665",appId:"1:1052246851665:web:82c81f16e791aede4c7870"}),cf=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t();const e=Gt(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function(t,e){const n=Gt(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(E(n.getOptions(),null!==e&&void 0!==e?e:{}))return t;me(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:wr,persistence:[Mi,gi,yi]}),i=g("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const t=new URL(i,location.origin);if(location.origin===t.origin){const e=(r=t.toString(),async t=>{const e=t&&await t.getIdTokenResult(),n=e&&((new Date).getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>Sr)return;const i=null===e||void 0===e?void 0:e.token;kr!==i&&(kr=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))});!function(t,e,n){N(t).beforeAuthStateChanged(e,n)}(n,e,()=>e(n.currentUser)),function(t,e,n,i){N(t).onIdTokenChanged(e,n,i)}(n,t=>e(t))}}var r;const s=f("auth");return s&&Rn(n,"http://".concat(s)),n}(lf),uf=function(t,e){const n="string"==typeof t?t:e||"(default)",i=Gt("object"==typeof t?t:$t(),"firestore").getImmediate({identifier:n});if(!i._initialized){const t=(t=>{const e=f(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]})("firestore");t&&td(i,...t)}return i}(lf),hf=async(t,e)=>{try{return await function(t,e,n){t=Jh(t,nd);const i=Jh(t.firestore,ad),r=Jd(t.converter,e,n);return of(i,[_d(xd(i),"setDoc",t._key,r,null!==t.converter,n).toMutation(t._key,Ya.none())])}(sd(uf,"users",t),G(G({},e),{},{createdAt:new Date,totalQuestions:0,accuracy:0,preferredOperations:mf(e.grade)})),!0}catch(n){throw console.error("Error saving user profile:",n),n}},df=async t=>{try{const e=sd(uf,"users",t),n=await function(t){t=Jh(t,nd);const e=Jh(t.firestore,ad);return Wh(ld(e),t._key).then(n=>af(e,t,n))}(e);return n.exists()?n.data():null}catch(e){throw console.error("Error fetching user profile:",e),e}},ff=async(t,e)=>{try{return await function(t,e){const n=Jh(t.firestore,ad),i=sd(t),r=Jd(t.converter,e);return of(n,[_d(xd(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,Ya.exists(!1))]).then(()=>i)}(rd(uf,"answers"),G(G({userId:t},e),{},{timestamp:new Date})),!0}catch(n){throw console.error("Error saving answer:",n),n}},pf=async t=>{try{const e=Bd(rd(uf,"answers"),Hd("userId","==",t),function(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=jd("orderBy",t);return Gd._create(n,e)}("timestamp","asc"));return(await sf(e)).docs.map(t=>t.data())}catch(e){console.warn("Ordered query failed, falling back to unordered:",e.message);try{const e=Bd(rd(uf,"answers"),Hd("userId","==",t)),n=(await sf(e)).docs.map(t=>t.data());return n.sort((t,e)=>{var n,i;return(null!==(n=t.timestamp)&&void 0!==n&&n.toDate?t.timestamp.toDate():new Date(t.timestamp||0))-(null!==(i=e.timestamp)&&void 0!==i&&i.toDate?e.timestamp.toDate():new Date(e.timestamp||0))}),n}catch(n){return console.error("Error fetching answer history:",n),[]}}},gf=async t=>{try{const e=await pf(t);if(0===e.length)return{totalQuestions:0,accuracy:0,streak:0,weakAreas:[]};const n=e.length,i=e.filter(t=>t.correct).length,r=Math.round(i/n*100),s={};e.forEach(t=>{const e=t.operation||"general";s[e]||(s[e]={correct:0,total:0}),s[e].total++,t.correct&&s[e].correct++});const o=Object.entries(s).map(t=>{let[e,n]=t;return{name:e,accuracy:n.total>0?Math.round(n.correct/n.total*100):0,total:n.total}}).sort((t,e)=>t.accuracy-e.accuracy);let a=0;for(let t=e.length-1;t>=0&&e[t].correct;t--)a++;return{totalQuestions:n,accuracy:r,streak:a,weakAreas:o}}catch(e){return console.error("Error calculating stats:",e),{totalQuestions:0,accuracy:0,streak:0,weakAreas:[]}}};function mf(t){return{1:["addition","subtraction"],2:["addition","subtraction","multiplication"],3:["multiplication","division"],4:["fractions","decimals"],5:["fractions","decimals","percentages"],6:["fractions","decimals","percentages"],7:["percentages","ratios","algebra"],8:["algebra","geometry"],9:["algebra","geometry","trigonometry"],10:["algebra","geometry","trigonometry","calculus"]}[Math.min(t,10)]||["addition","subtraction","multiplication","division"]}var yf=n(579);function vf(t){let{onRegistrationComplete:e}=t;const[n,i]=(0,r.useState)({email:"",password:"",confirmPassword:"",name:"",age:"",grade:""}),[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[h,d]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),g=t=>({"auth/email-already-in-use":"This email already has an account. Try logging in instead!","auth/invalid-email":"Please enter a valid email address.","auth/weak-password":"Password must be at least 6 characters.","auth/user-not-found":"No account found with this email. Try registering instead!","auth/wrong-password":"Incorrect password. Please try again.","auth/invalid-credential":"Incorrect email or password. Please try again.","auth/too-many-requests":"Too many attempts. Please wait a moment and try again."}[t]||null);return(0,yf.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-violet-100 via-purple-50 to-amber-50 flex items-center justify-center p-4",children:(0,yf.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[(0,yf.jsxs)("div",{className:"text-center mb-8",children:[(0,yf.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-violet-600 to-purple-500 mb-2",children:"\ud83e\uddd9 Math Wizard"}),(0,yf.jsx)("p",{className:"text-gray-600 text-sm",children:"Learn math the fun way with AI!"}),(0,yf.jsxs)("div",{className:"flex justify-center mt-4 bg-gray-100 rounded-lg p-1",children:[(0,yf.jsx)("button",{type:"button",onClick:()=>{d(!1),o("")},className:"flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition ".concat(h?"text-gray-500 hover:text-gray-700":"bg-white shadow text-violet-600"),children:"Register"}),(0,yf.jsx)("button",{type:"button",onClick:()=>{d(!0),o("")},className:"flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition ".concat(h?"bg-white shadow text-violet-600":"text-gray-500 hover:text-gray-700"),children:"Login"})]})]}),h?(0,yf.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(""),p(!1),l(!0);try{if(!n.email||!n.password)throw new Error("Please enter your email and password");await function(t,e,n){return Kt(t.app)?Promise.reject(be(t)):li(N(t),Kn.credential(e,n)).catch(async e=>{throw e.code==="auth/".concat("password-does-not-meet-requirements")&&ui(t),e})}(cf,n.email,n.password),e()}catch(i){o(g(i.code)||i.message)}finally{l(!1)}},className:"space-y-4",children:[(0,yf.jsxs)("div",{children:[(0,yf.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Email"}),(0,yf.jsx)("input",{type:"email",placeholder:"your@email.com",value:n.email,onChange:t=>i(G(G({},n),{},{email:t.target.value})),className:"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600 focus:ring-2 focus:ring-violet-200 transition",required:!0})]}),(0,yf.jsxs)("div",{children:[(0,yf.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Password"}),(0,yf.jsx)("input",{type:"password",placeholder:"Enter your password",value:n.password,onChange:t=>i(G(G({},n),{},{password:t.target.value})),className:"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600 focus:ring-2 focus:ring-violet-200 transition",required:!0})]}),(0,yf.jsx)("div",{className:"text-right",children:(0,yf.jsx)("button",{type:"button",onClick:async()=>{if(o(""),p(!1),n.email){l(!0);try{await async function(t,e,n){const i=kn(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&ci(i,r,n),await Mn(i,r,"getOobCode",Vn)}(cf,n.email),p(!0)}catch(t){o(g(t.code)||t.message)}finally{l(!1)}}else o("Please enter your email address first, then click Forgot Password.")},disabled:a,className:"text-sm text-violet-600 hover:underline font-medium",children:"Forgot Password?"})}),f&&(0,yf.jsx)("div",{className:"p-3 bg-green-100 border-l-4 border-green-500 text-green-700 text-sm rounded",children:"\u2705 Password reset email sent! Check your inbox (and spam folder)."}),s&&(0,yf.jsx)("div",{className:"p-3 bg-red-100 border-l-4 border-red-500 text-red-700 text-sm rounded",children:s}),(0,yf.jsx)("button",{type:"submit",disabled:a,className:"w-full bg-gradient-to-r from-violet-500 to-purple-600 text-white font-bold py-3 rounded-lg hover:shadow-lg transform hover:scale-105 transition disabled:opacity-50",children:a?"Logging in...":"\ud83d\udd11 Log In"}),(0,yf.jsxs)("p",{className:"text-center text-sm text-gray-500",children:["Don't have an account?"," ",(0,yf.jsx)("button",{type:"button",onClick:()=>{d(!1),o(""),p(!1)},className:"text-violet-600 font-semibold hover:underline",children:"Register here"})]})]}):(0,yf.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(""),l(!0);try{if(!n.name||!n.age||!n.grade)throw new Error("Please fill in all required fields");if(n.email&&n.password!==n.confirmPassword)throw new Error("Passwords do not match");if(n.password&&n.password.length<6)throw new Error("Password must be at least 6 characters");let t;t=n.email&&n.password?await async function(t,e,n){if(Kt(t.app))return Promise.reject(be(t));const i=kn(t),r=Mn(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ti),s=await r.catch(e=>{throw e.code==="auth/".concat("password-does-not-meet-requirements")&&ui(t),e}),o=await ei._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(o.user),o}(cf,n.email,n.password):await async function(t){var e;if(Kt(t.app))return Promise.reject(be(t));const n=kn(t);if(await n._initializationPromise,null===(e=n.currentUser)||void 0===e?void 0:e.isAnonymous)return new ei({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await ti(n,{returnSecureToken:!0}),r=await ei._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}(cf),await hf(t.user.uid,{name:n.name,age:parseInt(n.age),grade:parseInt(n.grade),email:n.email||"guest@mathwizard.local",isGuest:!n.email}),e()}catch(i){const t=g(i.code);"auth/email-already-in-use"===i.code?(o(t),d(!0)):o(t||i.message)}finally{l(!1)}},className:"space-y-4",children:[(0,yf.jsxs)("div",{children:[(0,yf.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Your Name"}),(0,yf.jsx)("input",{type:"text",placeholder:"Enter your name",value:n.name,onChange:t=>i(G(G({},n),{},{name:t.target.value})),className:"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600 focus:ring-2 focus:ring-violet-200 transition",required:!0})]}),(0,yf.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yf.jsxs)("div",{children:[(0,yf.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Age"}),(0,yf.jsx)("input",{type:"number",placeholder:"Age",value:n.age,onChange:t=>i(G(G({},n),{},{age:t.target.value})),className:"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600 focus:ring-2 focus:ring-violet-200 transition",min:"4",max:"18",required:!0})]}),(0,yf.jsxs)("div",{children:[(0,yf.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Grade"}),(0,yf.jsxs)("select",{value:n.grade,onChange:t=>i(G(G({},n),{},{grade:t.target.value})),className:"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600 focus:ring-2 focus:ring-violet-200 transition",required:!0,children:[(0,yf.jsx)("option",{value:"",children:"Select"}),[1,2,3,4,5,6,7,8,9,10].map(t=>(0,yf.jsxs)("option",{value:t,children:["Grade ",t]},t))]})]})]}),!c&&(0,yf.jsxs)(yf.Fragment,{children:[(0,yf.jsxs)("div",{children:[(0,yf.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Email (Optional - for saving progress)"}),(0,yf.jsx)("input",{type:"email",placeholder:"your@email.com",value:n.email,onChange:t=>i(G(G({},n),{},{email:t.target.value})),className:"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600 focus:ring-2 focus:ring-violet-200 transition"})]}),n.email&&(0,yf.jsxs)(yf.Fragment,{children:[(0,yf.jsxs)("div",{children:[(0,yf.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Password"}),(0,yf.jsx)("input",{type:"password",placeholder:"At least 6 characters",value:n.password,onChange:t=>i(G(G({},n),{},{password:t.target.value})),className:"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600 focus:ring-2 focus:ring-violet-200 transition",required:!0})]}),(0,yf.jsxs)("div",{children:[(0,yf.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Confirm Password"}),(0,yf.jsx)("input",{type:"password",placeholder:"Confirm password",value:n.confirmPassword,onChange:t=>i(G(G({},n),{},{confirmPassword:t.target.value})),className:"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600 focus:ring-2 focus:ring-violet-200 transition",required:!0})]})]})]}),s&&(0,yf.jsx)("div",{className:"p-3 bg-red-100 border-l-4 border-red-500 text-red-700 text-sm rounded",children:s}),(0,yf.jsxs)("div",{className:"space-y-3",children:[(0,yf.jsx)("button",{type:"submit",disabled:a,className:"w-full bg-gradient-to-r from-amber-400 to-orange-500 text-white font-bold py-3 rounded-lg hover:shadow-lg transform hover:scale-105 transition disabled:opacity-50",children:a?"Creating Account...":"\ud83d\ude80 Start Learning!"}),!c&&n.email&&(0,yf.jsx)("button",{type:"button",onClick:()=>u(!0),className:"w-full bg-gray-300 text-gray-800 font-bold py-2 rounded-lg hover:bg-gray-400 transition",children:"Or Play as Guest"})]}),(0,yf.jsxs)("p",{className:"text-center text-sm text-gray-500",children:["Already have an account?"," ",(0,yf.jsx)("button",{type:"button",onClick:()=>{d(!0),o("")},className:"text-violet-600 font-semibold hover:underline",children:"Log in here"})]})]}),c&&!h&&(0,yf.jsx)("p",{className:"text-center text-sm text-gray-600 mt-4",children:"\u26a0\ufe0f Guest mode: Progress won't be saved across devices"})]})})}function bf(t,e){return function(){return t.apply(e,arguments)}}const{toString:wf}=Object.prototype,{getPrototypeOf:xf}=Object,{iterator:_f,toStringTag:Ef}=Symbol,Sf=(kf=Object.create(null),t=>{const e=wf.call(t);return kf[e]||(kf[e]=e.slice(8,-1).toLowerCase())});var kf;const Tf=t=>(t=t.toLowerCase(),e=>Sf(e)===t),If=t=>e=>typeof e===t,{isArray:Cf}=Array,Af=If("undefined");function Nf(t){return null!==t&&!Af(t)&&null!==t.constructor&&!Af(t.constructor)&&Rf(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Pf=Tf("ArrayBuffer");const Mf=If("string"),Rf=If("function"),Of=If("number"),Df=t=>null!==t&&"object"===typeof t,Lf=t=>{if("object"!==Sf(t))return!1;const e=xf(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Ef in t)&&!(_f in t)},Ff=Tf("Date"),jf=Tf("File"),Uf=Tf("Blob"),Vf=Tf("FileList"),zf=Tf("URLSearchParams"),[Bf,Wf,Hf,qf]=["ReadableStream","Request","Response","Headers"].map(Tf);function Gf(t,e){let n,i,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),Cf(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(Nf(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),s=i.length;let o;for(n=0;n<s;n++)o=i[n],e.call(null,t[o],o,t)}}function Kf(t,e){if(Nf(t))return null;e=e.toLowerCase();const n=Object.keys(t);let i,r=n.length;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Qf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:n.g,Yf=t=>!Af(t)&&t!==Qf;const Xf=(Jf="undefined"!==typeof Uint8Array&&xf(Uint8Array),t=>Jf&&t instanceof Jf);var Jf;const $f=Tf("HTMLFormElement"),Zf=(t=>{let{hasOwnProperty:e}=t;return(t,n)=>e.call(t,n)})(Object.prototype),tp=Tf("RegExp"),ep=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};Gf(n,(n,r)=>{let s;!1!==(s=e(n,r,t))&&(i[r]=s||n)}),Object.defineProperties(t,i)};const np=Tf("AsyncFunction"),ip=((t,e)=>{return t?setImmediate:e?(n="axios@".concat(Math.random()),i=[],Qf.addEventListener("message",t=>{let{source:e,data:r}=t;e===Qf&&r===n&&i.length&&i.shift()()},!1),t=>{i.push(t),Qf.postMessage(n,"*")}):t=>setTimeout(t);var n,i})("function"===typeof setImmediate,Rf(Qf.postMessage)),rp="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Qf):"undefined"!==typeof process&&process.nextTick||ip,sp={isArray:Cf,isArrayBuffer:Pf,isBuffer:Nf,isFormData:t=>{let e;return t&&("function"===typeof FormData&&t instanceof FormData||Rf(t.append)&&("formdata"===(e=Sf(t))||"object"===e&&Rf(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&Pf(t.buffer),e},isString:Mf,isNumber:Of,isBoolean:t=>!0===t||!1===t,isObject:Df,isPlainObject:Lf,isEmptyObject:t=>{if(!Df(t)||Nf(t))return!1;try{return 0===Object.keys(t).length&&Object.getPrototypeOf(t)===Object.prototype}catch(e){return!1}},isReadableStream:Bf,isRequest:Wf,isResponse:Hf,isHeaders:qf,isUndefined:Af,isDate:Ff,isFile:jf,isBlob:Uf,isRegExp:tp,isFunction:Rf,isStream:t=>Df(t)&&Rf(t.pipe),isURLSearchParams:zf,isTypedArray:Xf,isFileList:Vf,forEach:Gf,merge:function t(){const{caseless:e,skipUndefined:n}=Yf(this)&&this||{},i={},r=(r,s)=>{const o=e&&Kf(i,s)||s;Lf(i[o])&&Lf(r)?i[o]=t(i[o],r):Lf(r)?i[o]=t({},r):Cf(r)?i[o]=r.slice():n&&Af(r)||(i[o]=r)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&Gf(arguments[s],r);return i},extend:function(t,e,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Gf(e,(e,i)=>{n&&Rf(e)?t[i]=bf(e,n):t[i]=e},{allOwnKeys:i}),t},trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,i)=>{let r,s,o;const a={};if(e=e||{},null==t)return e;do{for(r=Object.getOwnPropertyNames(t),s=r.length;s-- >0;)o=r[s],i&&!i(o,t,e)||a[o]||(e[o]=t[o],a[o]=!0);t=!1!==n&&xf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:Sf,kindOfTest:Tf,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return-1!==i&&i===n},toArray:t=>{if(!t)return null;if(Cf(t))return t;let e=t.length;if(!Of(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[_f]).call(t);let i;for(;(i=n.next())&&!i.done;){const n=i.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const i=[];for(;null!==(n=t.exec(e));)i.push(n);return i},isHTMLForm:$f,hasOwnProperty:Zf,hasOwnProp:Zf,reduceDescriptors:ep,freezeMethods:t=>{ep(t,(e,n)=>{if(Rf(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=t[n];Rf(i)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(t,e)=>{const n={},i=t=>{t.forEach(t=>{n[t]=!0})};return Cf(t)?i(t):i(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,e,n){return e.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(t,e)=>null!=t&&Number.isFinite(t=+t)?t:e,findKey:Kf,global:Qf,isContextDefined:Yf,isSpecCompliantForm:function(t){return!!(t&&Rf(t.append)&&"FormData"===t[Ef]&&t[_f])},toJSONObject:t=>{const e=new Array(10),n=(t,i)=>{if(Df(t)){if(e.indexOf(t)>=0)return;if(Nf(t))return t;if(!("toJSON"in t)){e[i]=t;const r=Cf(t)?[]:{};return Gf(t,(t,e)=>{const s=n(t,i+1);!Af(s)&&(r[e]=s)}),e[i]=void 0,r}}return t};return n(t,0)},isAsyncFn:np,isThenable:t=>t&&(Df(t)||Rf(t))&&Rf(t.then)&&Rf(t.catch),setImmediate:ip,asap:rp,isIterable:t=>null!=t&&Rf(t[_f])};function op(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}sp.inherits(op,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:sp.toJSONObject(this.config),code:this.code,status:this.status}}});const ap=op.prototype,lp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{lp[t]={value:t}}),Object.defineProperties(op,lp),Object.defineProperty(ap,"isAxiosError",{value:!0}),op.from=(t,e,n,i,r,s)=>{const o=Object.create(ap);sp.toFlatObject(t,o,function(t){return t!==Error.prototype},t=>"isAxiosError"!==t);const a=t&&t.message?t.message:"Error",l=null==e&&t?t.code:e;return op.call(o,a,l,n,i,r),t&&null==o.cause&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const cp=op;function up(t){return sp.isPlainObject(t)||sp.isArray(t)}function hp(t){return sp.endsWith(t,"[]")?t.slice(0,-2):t}function dp(t,e,n){return t?t.concat(e).map(function(t,e){return t=hp(t),!n&&e?"["+t+"]":t}).join(n?".":""):e}const fp=sp.toFlatObject(sp,{},null,function(t){return/^is[A-Z]/.test(t)});const pp=function(t,e,n){if(!sp.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const i=(n=sp.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(t,e){return!sp.isUndefined(e[t])})).metaTokens,r=n.visitor||c,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&sp.isSpecCompliantForm(e);if(!sp.isFunction(r))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(sp.isDate(t))return t.toISOString();if(sp.isBoolean(t))return t.toString();if(!a&&sp.isBlob(t))throw new cp("Blob is not supported. Use a Buffer instead.");return sp.isArrayBuffer(t)||sp.isTypedArray(t)?a&&"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}function c(t,n,r){let a=t;if(t&&!r&&"object"===typeof t)if(sp.endsWith(n,"{}"))n=i?n:n.slice(0,-2),t=JSON.stringify(t);else if(sp.isArray(t)&&function(t){return sp.isArray(t)&&!t.some(up)}(t)||(sp.isFileList(t)||sp.endsWith(n,"[]"))&&(a=sp.toArray(t)))return n=hp(n),a.forEach(function(t,i){!sp.isUndefined(t)&&null!==t&&e.append(!0===o?dp([n],i,s):null===o?n:n+"[]",l(t))}),!1;return!!up(t)||(e.append(dp(r,n,s),l(t)),!1)}const u=[],h=Object.assign(fp,{defaultVisitor:c,convertValue:l,isVisitable:up});if(!sp.isObject(t))throw new TypeError("data must be an object");return function t(n,i){if(!sp.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+i.join("."));u.push(n),sp.forEach(n,function(n,s){!0===(!(sp.isUndefined(n)||null===n)&&r.call(e,n,sp.isString(s)?s.trim():s,i,h))&&t(n,i?i.concat(s):[s])}),u.pop()}}(t),e};function gp(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(t){return e[t]})}function mp(t,e){this._pairs=[],t&&pp(t,this,e)}const yp=mp.prototype;yp.append=function(t,e){this._pairs.push([t,e])},yp.toString=function(t){const e=t?function(e){return t.call(this,e,gp)}:gp;return this._pairs.map(function(t){return e(t[0])+"="+e(t[1])},"").join("&")};const vp=mp;function bp(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function wp(t,e,n){if(!e)return t;const i=n&&n.encode||bp;sp.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(s=r?r(e,n):sp.isURLSearchParams(e)?e.toString():new vp(e,n).toString(i),s){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+s}return t}const xp=class{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){sp.forEach(this.handlers,function(e){null!==e&&t(e)})}},_p={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ep={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:vp,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Sp="undefined"!==typeof window&&"undefined"!==typeof document,kp="object"===typeof navigator&&navigator||void 0,Tp=Sp&&(!kp||["ReactNative","NativeScript","NS"].indexOf(kp.product)<0),Ip="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Cp=Sp&&window.location.href||"http://localhost",Ap=G(G({},i),Ep);const Np=function(t){function e(t,n,i,r){let s=t[r++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=r>=t.length;if(s=!s&&sp.isArray(i)?i.length:s,a)return sp.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!o;i[s]&&sp.isObject(i[s])||(i[s]=[]);return e(t,n,i[s],r)&&sp.isArray(i[s])&&(i[s]=function(t){const e={},n=Object.keys(t);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],e[s]=t[s];return e}(i[s])),!o}if(sp.isFormData(t)&&sp.isFunction(t.entries)){const n={};return sp.forEachEntry(t,(t,i)=>{e(function(t){return sp.matchAll(/\w+|\[(\w*)]/g,t).map(t=>"[]"===t[0]?"":t[1]||t[0])}(t),i,n,0)}),n}return null};const Pp={transitional:_p,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",i=n.indexOf("application/json")>-1,r=sp.isObject(t);r&&sp.isHTMLForm(t)&&(t=new FormData(t));if(sp.isFormData(t))return i?JSON.stringify(Np(t)):t;if(sp.isArrayBuffer(t)||sp.isBuffer(t)||sp.isStream(t)||sp.isFile(t)||sp.isBlob(t)||sp.isReadableStream(t))return t;if(sp.isArrayBufferView(t))return t.buffer;if(sp.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return pp(t,new Ap.classes.URLSearchParams,G({visitor:function(t,e,n,i){return Ap.isNode&&sp.isBuffer(t)?(this.append(e,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((s=sp.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return pp(s?{"files[]":t}:t,e&&new e,this.formSerializer)}}return r||i?(e.setContentType("application/json",!1),function(t,e,n){if(sp.isString(t))try{return(e||JSON.parse)(t),sp.trim(t)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||Pp.transitional,n=e&&e.forcedJSONParsing,i="json"===this.responseType;if(sp.isResponse(t)||sp.isReadableStream(t))return t;if(t&&sp.isString(t)&&(n&&!this.responseType||i)){const n=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(r){if(n){if("SyntaxError"===r.name)throw cp.from(r,cp.ERR_BAD_RESPONSE,this,null,this.response);throw r}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ap.classes.FormData,Blob:Ap.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};sp.forEach(["delete","get","head","post","put","patch"],t=>{Pp.headers[t]={}});const Mp=Pp,Rp=sp.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Op=Symbol("internals");function Dp(t){return t&&String(t).trim().toLowerCase()}function Lp(t){return!1===t||null==t?t:sp.isArray(t)?t.map(Lp):String(t)}function Fp(t,e,n,i,r){return sp.isFunction(i)?i.call(this,e,n):(r&&(e=n),sp.isString(e)?sp.isString(i)?-1!==e.indexOf(i):sp.isRegExp(i)?i.test(e):void 0:void 0)}class jp{constructor(t){t&&this.set(t)}set(t,e,n){const i=this;function r(t,e,n){const r=Dp(e);if(!r)throw new Error("header name must be a non-empty string");const s=sp.findKey(i,r);(!s||void 0===i[s]||!0===n||void 0===n&&!1!==i[s])&&(i[s||e]=Lp(t))}const s=(t,e)=>sp.forEach(t,(t,n)=>r(t,n,e));if(sp.isPlainObject(t)||t instanceof this.constructor)s(t,e);else if(sp.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim()))s((t=>{const e={};let n,i,r;return t&&t.split("\n").forEach(function(t){r=t.indexOf(":"),n=t.substring(0,r).trim().toLowerCase(),i=t.substring(r+1).trim(),!n||e[n]&&Rp[n]||("set-cookie"===n?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e})(t),e);else if(sp.isObject(t)&&sp.isIterable(t)){let n,i,r={};for(const e of t){if(!sp.isArray(e))throw TypeError("Object iterator must return a key-value pair");r[i=e[0]]=(n=r[i])?sp.isArray(n)?[...n,e[1]]:[n,e[1]]:e[1]}s(r,e)}else null!=t&&r(e,t,n);return this}get(t,e){if(t=Dp(t)){const n=sp.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}(t);if(sp.isFunction(e))return e.call(this,t,n);if(sp.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Dp(t)){const n=sp.findKey(this,t);return!(!n||void 0===this[n]||e&&!Fp(0,this[n],n,e))}return!1}delete(t,e){const n=this;let i=!1;function r(t){if(t=Dp(t)){const r=sp.findKey(n,t);!r||e&&!Fp(0,n[r],r,e)||(delete n[r],i=!0)}}return sp.isArray(t)?t.forEach(r):r(t),i}clear(t){const e=Object.keys(this);let n=e.length,i=!1;for(;n--;){const r=e[n];t&&!Fp(0,this[r],r,t,!0)||(delete this[r],i=!0)}return i}normalize(t){const e=this,n={};return sp.forEach(this,(i,r)=>{const s=sp.findKey(n,r);if(s)return e[s]=Lp(i),void delete e[r];const o=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}(r):String(r).trim();o!==r&&delete e[r],e[o]=Lp(i),n[o]=!0}),this}concat(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.constructor.concat(this,...e)}toJSON(t){const e=Object.create(null);return sp.forEach(this,(n,i)=>{null!=n&&!1!==n&&(e[i]=t&&sp.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(t=>{let[e,n]=t;return e+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t){const e=new this(t);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach(t=>e.set(t)),e}static accessor(t){const e=(this[Op]=this[Op]={accessors:{}}).accessors,n=this.prototype;function i(t){const i=Dp(t);e[i]||(!function(t,e){const n=sp.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(t,n,r){return this[i].call(this,e,t,n,r)},configurable:!0})})}(n,t),e[i]=!0)}return sp.isArray(t)?t.forEach(i):i(t),this}}jp.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),sp.reduceDescriptors(jp.prototype,(t,e)=>{let{value:n}=t,i=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(t){this[i]=t}}}),sp.freezeMethods(jp);const Up=jp;function Vp(t,e){const n=this||Mp,i=e||n,r=Up.from(i.headers);let s=i.data;return sp.forEach(t,function(t){s=t.call(n,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function zp(t){return!(!t||!t.__CANCEL__)}function Bp(t,e,n){cp.call(this,null==t?"canceled":t,cp.ERR_CANCELED,e,n),this.name="CanceledError"}sp.inherits(Bp,cp,{__CANCEL__:!0});const Wp=Bp;function Hp(t,e,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(new cp("Request failed with status code "+n.status,[cp.ERR_BAD_REQUEST,cp.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}const qp=function(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r,s=0,o=0;return e=void 0!==e?e:1e3,function(a){const l=Date.now(),c=i[o];r||(r=l),n[s]=a,i[s]=l;let u=o,h=0;for(;u!==s;)h+=n[u++],u%=t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),l-r<e)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}};const Gp=function(t,e){let n,i,r=0,s=1e3/e;const o=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();r=s,n=null,i&&(clearTimeout(i),i=null),t(...e)};return[function(){const t=Date.now(),e=t-r;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];e>=s?o(l,t):(n=l,i||(i=setTimeout(()=>{i=null,o(n)},s-e)))},()=>n&&o(n)]},Kp=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;const r=qp(50,250);return Gp(n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-i,l=r(a);i=s;t({loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:n,lengthComputable:null!=o,[e?"download":"upload"]:!0})},n)},Qp=(t,e)=>{const n=null!=t;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},Yp=t=>function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return sp.asap(()=>t(...n))},Xp=Ap.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Ap.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Ap.origin),Ap.navigator&&/(msie|trident)/i.test(Ap.navigator.userAgent)):()=>!0,Jp=Ap.hasStandardBrowserEnv?{write(t,e,n,i,r,s,o){if("undefined"===typeof document)return;const a=["".concat(t,"=").concat(encodeURIComponent(e))];sp.isNumber(n)&&a.push("expires=".concat(new Date(n).toUTCString())),sp.isString(i)&&a.push("path=".concat(i)),sp.isString(r)&&a.push("domain=".concat(r)),!0===s&&a.push("secure"),sp.isString(o)&&a.push("SameSite=".concat(o)),document.cookie=a.join("; ")},read(t){if("undefined"===typeof document)return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function $p(t,e,n){let i=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e);return t&&(i||0==n)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const Zp=t=>t instanceof Up?G({},t):t;function tg(t,e){e=e||{};const n={};function i(t,e,n,i){return sp.isPlainObject(t)&&sp.isPlainObject(e)?sp.merge.call({caseless:i},t,e):sp.isPlainObject(e)?sp.merge({},e):sp.isArray(e)?e.slice():e}function r(t,e,n,r){return sp.isUndefined(e)?sp.isUndefined(t)?void 0:i(void 0,t,0,r):i(t,e,0,r)}function s(t,e){if(!sp.isUndefined(e))return i(void 0,e)}function o(t,e){return sp.isUndefined(e)?sp.isUndefined(t)?void 0:i(void 0,t):i(void 0,e)}function a(n,r,s){return s in e?i(n,r):s in t?i(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(t,e,n)=>r(Zp(t),Zp(e),0,!0)};return sp.forEach(Object.keys(G(G({},t),e)),function(i){const s=l[i]||r,o=s(t[i],e[i],i);sp.isUndefined(o)&&s!==a||(n[i]=o)}),n}const eg=t=>{const e=tg({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=Up.from(o),e.url=wp($p(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),sp.isFormData(n))if(Ap.hasStandardBrowserEnv||Ap.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(sp.isFunction(n.getHeaders)){const t=n.getHeaders(),e=["content-type","content-length"];Object.entries(t).forEach(t=>{let[n,i]=t;e.includes(n.toLowerCase())&&o.set(n,i)})}if(Ap.hasStandardBrowserEnv&&(i&&sp.isFunction(i)&&(i=i(e)),i||!1!==i&&Xp(e.url))){const t=r&&s&&Jp.read(s);t&&o.set(r,t)}return e},ng="undefined"!==typeof XMLHttpRequest&&function(t){return new Promise(function(e,n){const i=eg(t);let r=i.data;const s=Up.from(i.headers).normalize();let o,a,l,c,u,{responseType:h,onUploadProgress:d,onDownloadProgress:f}=i;function p(){c&&c(),u&&u(),i.cancelToken&&i.cancelToken.unsubscribe(o),i.signal&&i.signal.removeEventListener("abort",o)}let g=new XMLHttpRequest;function m(){if(!g)return;const i=Up.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());Hp(function(t){e(t),p()},function(t){n(t),p()},{data:h&&"text"!==h&&"json"!==h?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:i,config:t,request:g}),g=null}g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout,"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(m)},g.onabort=function(){g&&(n(new cp("Request aborted",cp.ECONNABORTED,t,g)),g=null)},g.onerror=function(e){const i=e&&e.message?e.message:"Network Error",r=new cp(i,cp.ERR_NETWORK,t,g);r.event=e||null,n(r),g=null},g.ontimeout=function(){let e=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const r=i.transitional||_p;i.timeoutErrorMessage&&(e=i.timeoutErrorMessage),n(new cp(e,r.clarifyTimeoutError?cp.ETIMEDOUT:cp.ECONNABORTED,t,g)),g=null},void 0===r&&s.setContentType(null),"setRequestHeader"in g&&sp.forEach(s.toJSON(),function(t,e){g.setRequestHeader(e,t)}),sp.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),h&&"json"!==h&&(g.responseType=i.responseType),f&&([l,u]=Kp(f,!0),g.addEventListener("progress",l)),d&&g.upload&&([a,c]=Kp(d),g.upload.addEventListener("progress",a),g.upload.addEventListener("loadend",c)),(i.cancelToken||i.signal)&&(o=e=>{g&&(n(!e||e.type?new Wp(null,t,g):e),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(o),i.signal&&(i.signal.aborted?o():i.signal.addEventListener("abort",o)));const y=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(i.url);y&&-1===Ap.protocols.indexOf(y)?n(new cp("Unsupported protocol "+y+":",cp.ERR_BAD_REQUEST,t)):g.send(r||null)})},ig=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let n,i=new AbortController;const r=function(t){if(!n){n=!0,o();const e=t instanceof Error?t:this.reason;i.abort(e instanceof cp?e:new Wp(e instanceof Error?e.message:e))}};let s=e&&setTimeout(()=>{s=null,r(new cp("timeout ".concat(e," of ms exceeded"),cp.ETIMEDOUT))},e);const o=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach(t=>{t.unsubscribe?t.unsubscribe(r):t.removeEventListener("abort",r)}),t=null)};t.forEach(t=>t.addEventListener("abort",r));const{signal:a}=i;return a.unsubscribe=()=>sp.asap(o),a}};function rg(t,e){this.v=t,this.k=e}function sg(t){return function(){return new og(t.apply(this,arguments))}}function og(t){var e,n;function i(e,n){try{var s=t[e](n),o=s.value,a=o instanceof rg;Promise.resolve(a?o.v:o).then(function(n){if(a){var l="return"===e?"return":"next";if(!o.k||n.done)return i(l,n);n=t[l](n).value}r(s.done?"return":"normal",n)},function(t){i("throw",t)})}catch(t){r("throw",t)}}function r(t,r){switch(t){case"return":e.resolve({value:r,done:!0});break;case"throw":e.reject(r);break;default:e.resolve({value:r,done:!1})}(e=e.next)?i(e.key,e.arg):n=null}this._invoke=function(t,r){return new Promise(function(s,o){var a={key:t,arg:r,resolve:s,reject:o,next:null};n?n=n.next=a:(e=n=a,i(t,r))})},"function"!=typeof t.return&&(this.return=void 0)}function ag(t){return new rg(t,0)}function lg(t){var e={},n=!1;function i(e,i){return n=!0,i=new Promise(function(n){n(t[e](i))}),{done:!1,value:new rg(i,1)}}return e["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},e.next=function(t){return n?(n=!1,t):i("next",t)},"function"==typeof t.throw&&(e.throw=function(t){if(n)throw n=!1,t;return i("throw",t)}),"function"==typeof t.return&&(e.return=function(t){return n?(n=!1,t):i("return",t)}),e}function cg(t){var e,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(e=t[n]))return e.call(t);if(i&&null!=(e=t[i]))return new ug(e.call(t));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function ug(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return ug=function(t){this.s=t,this.n=t.next},ug.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new ug(t)}og.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},og.prototype.next=function(t){return this._invoke("next",t)},og.prototype.throw=function(t){return this._invoke("throw",t)},og.prototype.return=function(t){return this._invoke("return",t)};const hg=function*(t,e){let n=t.byteLength;if(!e||n<e)return void(yield t);let i,r=0;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},dg=function(){var t=sg(function*(t,e){var n,i=!1,r=!1;try{for(var s,o=cg(fg(t));i=!(s=yield ag(o.next())).done;i=!1){const t=s.value;yield*lg(cg(hg(t,e)))}}catch(a){r=!0,n=a}finally{try{i&&null!=o.return&&(yield ag(o.return()))}finally{if(r)throw n}}});return function(e,n){return t.apply(this,arguments)}}(),fg=function(){var t=sg(function*(t){if(t[Symbol.asyncIterator])return void(yield*lg(cg(t)));const e=t.getReader();try{for(;;){const{done:t,value:n}=yield ag(e.read());if(t)break;yield n}}finally{yield ag(e.cancel())}});return function(e){return t.apply(this,arguments)}}(),pg=(t,e,n,i)=>{const r=dg(t,e);let s,o=0,a=t=>{s||(s=!0,i&&i(t))};return new ReadableStream({async pull(t){try{const{done:e,value:i}=await r.next();if(e)return a(),void t.close();let s=i.byteLength;if(n){let t=o+=s;n(t)}t.enqueue(new Uint8Array(i))}catch(e){throw a(e),e}},cancel:t=>(a(t),r.return())},{highWaterMark:2})},{isFunction:gg}=sp,mg=(t=>{let{Request:e,Response:n}=t;return{Request:e,Response:n}})(sp.global),{ReadableStream:yg,TextEncoder:vg}=sp.global,bg=function(t){try{for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return!!t(...n)}catch(r){return!1}},wg=t=>{t=sp.merge.call({skipUndefined:!0},mg,t);const{fetch:e,Request:n,Response:i}=t,r=e?gg(e):"function"===typeof fetch,s=gg(n),o=gg(i);if(!r)return!1;const a=r&&gg(yg),l=r&&("function"===typeof vg?(c=new vg,t=>c.encode(t)):async t=>new Uint8Array(await new n(t).arrayBuffer()));var c;const u=s&&a&&bg(()=>{let t=!1;const e=new n(Ap.origin,{body:new yg,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),h=o&&a&&bg(()=>sp.isReadableStream(new i("").body)),d={stream:h&&(t=>t.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!d[t]&&(d[t]=(e,n)=>{let i=e&&e[t];if(i)return i.call(e);throw new cp("Response type '".concat(t,"' is not supported"),cp.ERR_NOT_SUPPORT,n)})});const f=async(t,e)=>{const i=sp.toFiniteNumber(t.getContentLength());return null==i?(async t=>{if(null==t)return 0;if(sp.isBlob(t))return t.size;if(sp.isSpecCompliantForm(t)){const e=new n(Ap.origin,{method:"POST",body:t});return(await e.arrayBuffer()).byteLength}return sp.isArrayBufferView(t)||sp.isArrayBuffer(t)?t.byteLength:(sp.isURLSearchParams(t)&&(t+=""),sp.isString(t)?(await l(t)).byteLength:void 0)})(e):i};return async t=>{let{url:r,method:o,data:a,signal:l,cancelToken:c,timeout:p,onDownloadProgress:g,onUploadProgress:m,responseType:y,headers:v,withCredentials:b="same-origin",fetchOptions:w}=eg(t),x=e||fetch;y=y?(y+"").toLowerCase():"text";let _=ig([l,c&&c.toAbortSignal()],p),E=null;const S=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let k;try{if(m&&u&&"get"!==o&&"head"!==o&&0!==(k=await f(v,a))){let t,e=new n(r,{method:"POST",body:a,duplex:"half"});if(sp.isFormData(a)&&(t=e.headers.get("content-type"))&&v.setContentType(t),e.body){const[t,n]=Qp(k,Kp(Yp(m)));a=pg(e.body,65536,t,n)}}sp.isString(b)||(b=b?"include":"omit");const e=s&&"credentials"in n.prototype,l=G(G({},w),{},{signal:_,method:o.toUpperCase(),headers:v.normalize().toJSON(),body:a,duplex:"half",credentials:e?b:void 0});E=s&&new n(r,l);let c=await(s?x(E,w):x(r,l));const p=h&&("stream"===y||"response"===y);if(h&&(g||p&&S)){const t={};["status","statusText","headers"].forEach(e=>{t[e]=c[e]});const e=sp.toFiniteNumber(c.headers.get("content-length")),[n,r]=g&&Qp(e,Kp(Yp(g),!0))||[];c=new i(pg(c.body,65536,n,()=>{r&&r(),S&&S()}),t)}y=y||"text";let T=await d[sp.findKey(d,y)||"text"](c,t);return!p&&S&&S(),await new Promise((e,n)=>{Hp(e,n,{data:T,headers:Up.from(c.headers),status:c.status,statusText:c.statusText,config:t,request:E})})}catch(T){if(S&&S(),T&&"TypeError"===T.name&&/Load failed|fetch/i.test(T.message))throw Object.assign(new cp("Network Error",cp.ERR_NETWORK,t,E),{cause:T.cause||T});throw cp.from(T,T&&T.code,t,E)}}},xg=new Map,_g=t=>{let e=t&&t.env||{};const{fetch:n,Request:i,Response:r}=e,s=[i,r,n];let o,a,l=s.length,c=xg;for(;l--;)o=s[l],a=c.get(o),void 0===a&&c.set(o,a=l?new Map:wg(e)),c=a;return a},Eg=(_g(),{http:null,xhr:ng,fetch:{get:_g}});sp.forEach(Eg,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(n){}Object.defineProperty(t,"adapterName",{value:e})}});const Sg=t=>"- ".concat(t),kg=t=>sp.isFunction(t)||null===t||!1===t;const Tg={getAdapter:function(t,e){t=sp.isArray(t)?t:[t];const{length:n}=t;let i,r;const s={};for(let o=0;o<n;o++){let n;if(i=t[o],r=i,!kg(i)&&(r=Eg[(n=String(i)).toLowerCase()],void 0===r))throw new cp("Unknown adapter '".concat(n,"'"));if(r&&(sp.isFunction(r)||(r=r.get(e))))break;s[n||"#"+o]=r}if(!r){const t=Object.entries(s).map(t=>{let[e,n]=t;return"adapter ".concat(e," ")+(!1===n?"is not supported by the environment":"is not available in the build")});let e=n?t.length>1?"since :\n"+t.map(Sg).join("\n"):" "+Sg(t[0]):"as no adapter specified";throw new cp("There is no suitable adapter to dispatch the request "+e,"ERR_NOT_SUPPORT")}return r},adapters:Eg};function Ig(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Wp(null,t)}function Cg(t){Ig(t),t.headers=Up.from(t.headers),t.data=Vp.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return Tg.getAdapter(t.adapter||Mp.adapter,t)(t).then(function(e){return Ig(t),e.data=Vp.call(t,t.transformResponse,e),e.headers=Up.from(e.headers),e},function(e){return zp(e)||(Ig(t),e&&e.response&&(e.response.data=Vp.call(t,t.transformResponse,e.response),e.response.headers=Up.from(e.response.headers))),Promise.reject(e)})}const Ag="1.13.2",Ng={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ng[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Pg={};Ng.transitional=function(t,e,n){function i(t,e){return"[Axios v"+Ag+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,r,s)=>{if(!1===t)throw new cp(i(r," has been removed"+(e?" in "+e:"")),cp.ERR_DEPRECATED);return e&&!Pg[r]&&(Pg[r]=!0,console.warn(i(r," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,r,s)}},Ng.spelling=function(t){return(e,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(t)),!0)};const Mg={assertOptions:function(t,e,n){if("object"!==typeof t)throw new cp("options must be an object",cp.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const s=i[r],o=e[s];if(o){const e=t[s],n=void 0===e||o(e,s,t);if(!0!==n)throw new cp("option "+s+" must be "+n,cp.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new cp("Unknown option "+s,cp.ERR_BAD_OPTION)}},validators:Ng},Rg=Mg.validators;class Og{constructor(t){this.defaults=t||{},this.interceptors={request:new xp,response:new xp}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const e=t.stack?t.stack.replace(/^.+\n/,""):"";try{n.stack?e&&!String(n.stack).endsWith(e.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+e):n.stack=e}catch(i){}}throw n}}_request(t,e){"string"===typeof t?(e=e||{}).url=t:e=t||{},e=tg(this.defaults,e);const{transitional:n,paramsSerializer:i,headers:r}=e;void 0!==n&&Mg.assertOptions(n,{silentJSONParsing:Rg.transitional(Rg.boolean),forcedJSONParsing:Rg.transitional(Rg.boolean),clarifyTimeoutError:Rg.transitional(Rg.boolean)},!1),null!=i&&(sp.isFunction(i)?e.paramsSerializer={serialize:i}:Mg.assertOptions(i,{encode:Rg.function,serialize:Rg.function},!0)),void 0!==e.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Mg.assertOptions(e,{baseUrl:Rg.spelling("baseURL"),withXsrfToken:Rg.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let s=r&&sp.merge(r.common,r[e.method]);r&&sp.forEach(["delete","get","head","post","put","patch","common"],t=>{delete r[t]}),e.headers=Up.concat(s,r);const o=[];let a=!0;this.interceptors.request.forEach(function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,o.unshift(t.fulfilled,t.rejected))});const l=[];let c;this.interceptors.response.forEach(function(t){l.push(t.fulfilled,t.rejected)});let u,h=0;if(!a){const t=[Cg.bind(this),void 0];for(t.unshift(...o),t.push(...l),u=t.length,c=Promise.resolve(e);h<u;)c=c.then(t[h++],t[h++]);return c}u=o.length;let d=e;for(;h<u;){const t=o[h++],e=o[h++];try{d=t(d)}catch(f){e.call(this,f);break}}try{c=Cg.call(this,d)}catch(f){return Promise.reject(f)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(t){return wp($p((t=tg(this.defaults,t)).baseURL,t.url,t.allowAbsoluteUrls),t.params,t.paramsSerializer)}}sp.forEach(["delete","get","head","options"],function(t){Og.prototype[t]=function(e,n){return this.request(tg(n||{},{method:t,url:e,data:(n||{}).data}))}}),sp.forEach(["post","put","patch"],function(t){function e(e){return function(n,i,r){return this.request(tg(r||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}Og.prototype[t]=e(),Og.prototype[t+"Form"]=e(!0)});const Dg=Og;class Lg{constructor(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(t){e=t});const n=this;this.promise.then(t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null}),this.promise.then=t=>{let e;const i=new Promise(t=>{n.subscribe(t),e=t}).then(t);return i.cancel=function(){n.unsubscribe(e)},i},t(function(t,i,r){n.reason||(n.reason=new Wp(t,i,r),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=e=>{t.abort(e)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new Lg(function(e){t=e}),cancel:t}}}const Fg=Lg;const jg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(jg).forEach(t=>{let[e,n]=t;jg[n]=e});const Ug=jg;const Vg=function t(e){const n=new Dg(e),i=bf(Dg.prototype.request,n);return sp.extend(i,Dg.prototype,n,{allOwnKeys:!0}),sp.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return t(tg(e,n))},i}(Mp);Vg.Axios=Dg,Vg.CanceledError=Wp,Vg.CancelToken=Fg,Vg.isCancel=zp,Vg.VERSION=Ag,Vg.toFormData=pp,Vg.AxiosError=cp,Vg.Cancel=Vg.CanceledError,Vg.all=function(t){return Promise.all(t)},Vg.spread=function(t){return function(e){return t.apply(null,e)}},Vg.isAxiosError=function(t){return sp.isObject(t)&&!0===t.isAxiosError},Vg.mergeConfig=tg,Vg.AxiosHeaders=Up,Vg.formToJSON=t=>Np(sp.isHTMLForm(t)?new FormData(t):t),Vg.getAdapter=Tg.getAdapter,Vg.HttpStatusCode=Ug,Vg.default=Vg;const zg=Vg,Bg={"KG-1":{gradeLevel:"KG - 1st Grade",complexity:"beginner",modules:[{name:"Addition",topics:["Introduction to Addition","Addition on Number Line","Addition Patterns","Single-digit Addition","Two-digit Addition"]},{name:"Subtraction",topics:["Introduction to Subtraction","Subtraction on Number Line","Single-digit Subtraction","Two-digit Subtraction","Number Patterns in Subtraction"]},{name:"Multiplication",topics:["Counting in Groups","Introduction to Multiplication","Repeated Addition","Multiplication Tables (2-10)","Multiplication Properties"]},{name:"Division",topics:["Introduction to Division","Division as Grouping","Division as Sharing","Basic Division Facts","Speed Division"]},{name:"Fractions",topics:["Introduction to Fractions","Halves and Thirds","Equivalent Fractions","Like and Unlike Fractions","Fractions of a Whole"]},{name:"Logic & Patterns",topics:["Pattern Recognition","Logical Thinking","Arithmetic Progressions","Geometric Patterns","Puzzles and Games"]}]},"2-3":{gradeLevel:"Grade 2-3",complexity:"elementary",modules:[{name:"Arithmetic Operations",topics:["Addition with Regrouping","Subtraction with Regrouping","Multiplication Facts","Division Facts","Multi-digit Addition & Subtraction"]},{name:"Fractions & Decimals",topics:["Understanding Fractions","Comparing Fractions","Introduction to Decimals","Decimal Place Value","Fraction Operations"]},{name:"Geometry",topics:["Shapes and Properties","Angles Basics","Perimeter and Area","Symmetry","Coordinate Geometry Intro"]},{name:"Variables & Equations",topics:["Introduction to Variables","Simple Equations","Balancing Equations","Word Problems with Variables","Solving for Unknown"]}]},"4-5":{gradeLevel:"Grade 4-5",complexity:"intermediate",modules:[{name:"Arithmetic",topics:["Multi-digit Multiplication","Long Division","Decimal Operations","Fraction Addition & Subtraction","Mixed Numbers"]},{name:"Fractions & Decimals",topics:["Equivalent Fractions","Comparing and Ordering Fractions","Decimal Place Value","Decimal Comparison","Fraction-Decimal Conversion"]},{name:"Geometry",topics:["Angles and Triangles","Quadrilaterals","Perimeter and Area Calculation","Volume Basics","Coordinate Geometry"]},{name:"Algebra",topics:["Variables and Expressions","Equations with Variables","Inequalities","Order of Operations","Function Basics"]},{name:"Statistics & Probability",topics:["Data Collection and Analysis","Graphs and Charts","Probability Basics","Mean and Median","Logical Reasoning"]}]},"6-7":{gradeLevel:"Grade 6-7",complexity:"intermediate-advanced",modules:[{name:"Arithmetic & Number Theory",topics:["Factors and Multiples","Prime Factorization","GCD and LCM","Whole Numbers and Integers","Rational Numbers"]},{name:"Fractions, Decimals & Percentages",topics:["Fraction Operations","Decimal Operations","Percentage Calculations","Ratios and Proportions","Rate Problems"]},{name:"Pre-Algebra",topics:["Expressions and Equations","Two-step Equations","Inequalities","Functions and Relations","Graphing Linear Equations"]},{name:"Geometry",topics:["Angles and Angle Relationships","Triangles and Polygons","Area and Perimeter","Surface Area and Volume","Coordinate Geometry"]},{name:"Statistics & Probability",topics:["Data Analysis","Mean, Median, Mode","Probability Theory","Counting Principles","Sample Space"]},{name:"Advanced Reasoning",topics:["Logical Deduction","Pattern Analysis","Puzzles and Games","Mathematical Proof Basics","Problem-Solving Techniques"]}]},"7-8":{gradeLevel:"Grade 7-8",complexity:"advanced",modules:[{name:"Algebra",topics:["Linear Equations","Systems of Equations","Quadratic Equations Intro","Polynomials","Factoring"]},{name:"Functions & Graphing",topics:["Functions and Notation","Linear Functions","Slope and Intercepts","Function Evaluation","Rate of Change"]},{name:"Geometry & Trigonometry",topics:["Congruence and Similarity","Pythagorean Theorem","Area and Volume","Surface Area","Coordinate Geometry"]},{name:"Statistics & Probability",topics:["Probability Distributions","Expected Value","Mean, Median, Mode","Data Analysis","Counting Principles"]},{name:"Exponents & Roots",topics:["Powers and Exponents","Scientific Notation","Radicals and Roots","Rational Exponents","Exponential Growth"]}]},"9+":{gradeLevel:"Grade 9+",complexity:"expert",modules:[{name:"Algebra",topics:["Quadratic Equations","Polynomials and Factoring","Rational Expressions","Exponential and Logarithmic Functions","Complex Numbers"]},{name:"Functions & Analysis",topics:["Advanced Functions","Composition of Functions","Inverse Functions","Limits Introduction","Continuity"]},{name:"Geometry & Trigonometry",topics:["Coordinate Geometry","Advanced Trigonometry","Trigonometric Functions","Law of Sines and Cosines","Vectors Basics"]},{name:"Calculus Basics",topics:["Limits and Derivatives","Derivative Rules","Applications of Derivatives","Integration Basics","Fundamental Theorem"]},{name:"Statistics & Probability",topics:["Advanced Probability","Distributions","Hypothesis Testing","Regression Analysis","Bayesian Statistics"]},{name:"Mathematical Reasoning",topics:["Mathematical Proofs","Logical Argumentation","Discrete Mathematics","Set Theory","Combinatorics"]}]}},Wg=t=>Bg[t]||Bg["4-5"],Hg=t=>{const e=(t=>{const e=Wg(t),n=[];return e.modules.forEach(t=>{n.push(...t.topics)}),n})(t);return e[Math.floor(Math.random()*e.length)]},qg=async function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];try{const o=((t,e)=>{if(!e||0===e.length)return Hg(t);const n=Bg[t];if(!n||!n.modules)return Hg(t);const i=[];return n.modules.forEach(t=>{e.includes(t.name)&&i.push(...t.topics)}),i.length>0?i[Math.floor(Math.random()*i.length)]:Hg(t)})(e,i);let a="medium";if(t&&t.length>0){const e=t.slice(-10).reduce((t,e)=>t+(e.correct?1:0),0)/Math.min(10,t.length);a=e>.85?"hard":e>.7?"medium":"easy"}const l=i&&i.length>0?"Selected modules: ".concat(i.join(", "),"\n"):"";let c="";i&&i.some(t=>t.includes("Logic & Patterns"))||"logic_patterns"===n||"logic_patterns_problem"===n?c='QUESTION TYPE: Logic & Patterns - Generate UNIQUE pattern/sequence questions.\nVARIETY: Use different types each time:\n- Number sequences (arithmetic, geometric, Fibonacci-like)\n- Letter sequences (alphabetical, skipping patterns)\n- Mixed alphanumeric patterns (1A, 2B, etc.)\n- Visual/shape patterns descriptions\n- Logical reasoning puzzles\n- Alternating patterns\nExamples: "What comes next: 2, 4, 6, 8, ___?", "Find the pattern: 1, 1, 2, 3, 5, 8, ___?", "Identify: A, C, E, G, ___?"\nCRITICAL: Each question must be DIFFERENT from previous ones. Focus on pattern recognition, NOT simple arithmetic.':"algebra"===n||"algebra_problem"===n?c='QUESTION TYPE: Algebra - Generate UNIQUE algebraic equations and expressions.\nVARIETY: Use different structures each time:\n- Linear equations (2x + 5 = 13, 3x - 7 = 8)\n- Variable relationships (If y = 2x and x = 5, what is y?)\n- Expression simplification (4x + 2x, 5a - 2a + 3a)\n- Multi-step equations\n- Word problems with variables\nExamples: "If 2x + 5 = 13, what is x?", "Simplify: 3x + 2x", "If y = 2x and x = 5, what is y?"\nCRITICAL: Do NOT generate simple arithmetic. Must involve variables or algebraic thinking.':"geometry"===n||"geometry_problem"===n?c='QUESTION TYPE: Geometry - Generate UNIQUE geometric problems.\nVARIETY: Use different concepts each time:\n- Area calculations (rectangles, triangles, circles, squares)\n- Perimeter and circumference\n- Volume calculations\n- Angle relationships\n- Coordinate geometry\n- 3D shapes\nExamples: "What is the area of a rectangle 8cm \xd7 5cm?", "If a square has area 36, what is its perimeter?", "A triangle has base 10cm and height 6cm. What is its area?"\nCRITICAL: Do NOT generate simple arithmetic. Must involve geometric concepts.':"statistics"===n||"statistics_problem"===n?c='QUESTION TYPE: Statistics & Probability - Generate UNIQUE statistical problems.\nVARIETY: Use different concepts each time:\n- Mean, median, mode, range\n- Probability (dice, coins, cards, combinations)\n- Data interpretation\n- Distribution analysis\n- Conditional probability\nExamples: "If a die is rolled, what is the probability of getting a 3?", "What is the mean of 2, 4, 6, 8?", "What is the median of 3, 5, 7, 9, 11?"\nCRITICAL: Do NOT generate simple arithmetic. Must involve statistical thinking.':"calculus"===n||"calculus_problem"===n?c='QUESTION TYPE: Calculus - Generate UNIQUE calculus concepts.\nVARIETY: Use different techniques each time:\n- Derivatives (power rule, chain rule)\n- Limits\n- Integration\n- Rates of change\n- Critical points\nExamples: "What is the derivative of x\xb2?", "Find the limit as x approaches 2 of (x + 1)", "What is the derivative of 3x\xb2 + 2x?"\nCRITICAL: Do NOT generate simple arithmetic. Must involve calculus concepts.':"fractions"===n||"fractions_problem"===n?c='QUESTION TYPE: Fractions - Generate UNIQUE fraction problems.\nVARIETY: Use different operations each time:\n- Addition of fractions (1/4 + 1/4, 1/2 + 1/3)\n- Subtraction of fractions\n- Multiplication/Division of fractions\n- Simplification (4/8, 6/12)\n- Finding fractions of numbers (1/3 of 30)\n- Word problems with fractions\nExamples: "What is 1/4 + 1/4?", "What is 2/3 of 18?", "Simplify: 4/8"\nCRITICAL: Focus on fractions, not basic arithmetic with whole numbers.':"decimals"!==n&&"decimals_problem"!==n||(c='QUESTION TYPE: Decimals - Generate UNIQUE decimal problems.\nVARIETY: Use different operations each time:\n- Addition of decimals (2.5 + 1.3)\n- Subtraction of decimals\n- Multiplication of decimals\n- Division of decimals\n- Decimal to fraction conversion\n- Real-world decimal problems (money, measurements)\nExamples: "What is 2.5 + 1.3?", "Multiply: 2.5 \xd7 4", "What is 10.5 \xf7 2?"\nCRITICAL: Focus on decimals, not basic arithmetic with whole numbers.');i&&i.some(t=>t.includes("Exponents"))&&!c&&(c='QUESTION TYPE: Exponents & Roots - Generate UNIQUE exponent and root problems.\nVARIETY: Use different concepts each time:\n- Powers (What is 2\u2075?, What is 3\u2074?)\n- Square roots (What is \u221a144?, \u221a81?)\n- Cube roots (What is \u221b27?)\n- Scientific notation (Express 5000 in scientific notation)\n- Exponent rules (Simplify 2\xb3 \xd7 2\u2074)\n- Negative exponents (What is 2\u207b\xb3?)\nExamples: "What is 2\u2075?", "What is \u221a144?", "Simplify: 3\xb2 \xd7 3\xb3", "What is 5\u2070?"\nCRITICAL: The answer must ALWAYS be a single number. Do NOT generate questions about growth rates or word problems.');const u="Generate a single UNIQUE and FRESH math question for a ".concat(e," grade student STRICTLY based on the selected modules.\n\n").concat(l,"Topic: ").concat(o,"\nComplexity: ").concat(a,"\n\n").concat(c,'\n\nCRITICAL REQUIREMENTS:\n- MUST focus on the topic: "').concat(o,'" from modules: ').concat(i.join(", "),"\n- Generate a COMPLETELY NEW and DIFFERENT question (not a variation of common questions)\n- Keep it to one sentence maximum\n- Make it engaging and age-appropriate for grade ").concat(e,'\n- NEVER generate: simple arithmetic like "What is X + Y?", "What is X - Y?", "What is X \xd7 Y?", "What is X \xf7 Y?" with just numbers\n- Must be conceptually appropriate for the selected module\n- Make the question INTERESTING and VARIED\n\nRESPONSE FORMAT: You MUST respond with a valid JSON object and nothing else.\nThe JSON must have exactly two keys:\n- "question": the question text (string)\n- "answer": the correct numeric answer (number). For letter/pattern answers use a string.\nExample: {"question": "What is the area of a rectangle with length 8cm and width 5cm?", "answer": 40}\nExample: {"question": "What comes next: A, C, E, G, ___?", "answer": "I"}\nDo NOT include any text outside the JSON object.'),h=(await zg.post("https://api.openai.com/v1/chat/completions",{model:"gpt-3.5-turbo",messages:[{role:"user",content:u}],max_tokens:200,temperature:r?.8:.5},{headers:{Authorization:"Bearer ".concat({NODE_ENV:"production",PUBLIC_URL:"/math-wizard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDjPiJ9hUQpr6LR3DwknDRSdJgQ2ihi7w8",REACT_APP_FIREBASE_AUTH_DOMAIN:"math-wizard-e9ac3.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"math-wizard-e9ac3",REACT_APP_FIREBASE_STORAGE_BUCKET:"math-wizard-e9ac3.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1052246851665",REACT_APP_FIREBASE_APP_ID:"1:1052246851665:web:82c81f16e791aede4c7870"}.REACT_APP_OPENAI_API_KEY),"Content-Type":"application/json"}})).data.choices[0].message.content.trim();try{const t=h.replace(/^```(?:json)?\s*/i,"").replace(/\s*```$/i,"").trim(),e=JSON.parse(t);if(e&&e.question)return{question:e.question,answer:void 0!==e.answer?e.answer:null}}catch(s){console.warn("AI response was not valid JSON, using raw text:",h)}return{question:h,answer:null}}catch(o){console.warn("AI generation failed, using fallback:",o.message);return{question:Gg(n,e),answer:null}}},Gg=function(t){const e={"KG-1":{maxNum:20,maxOp:10},"2-3":{maxNum:50,maxOp:25},"4-5":{maxNum:100,maxOp:50},"6-7":{maxNum:200,maxOp:100},"7-8":{maxNum:500,maxOp:200},"9+":{maxNum:1e3,maxOp:500}},n=e[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"4-5"]||e["4-5"],i={addition:["What is ".concat(Math.floor(Math.random()*n.maxNum)," + ").concat(Math.floor(Math.random()*n.maxOp),"?"),"If you have ".concat(Math.floor(Math.random()*n.maxNum)," items and get ").concat(Math.floor(Math.random()*n.maxOp)," more, how many do you have?"),"".concat(Math.floor(Math.random()*n.maxNum)," + ").concat(Math.floor(Math.random()*n.maxOp)," = ?"),"Add: ".concat(Math.floor(Math.random()*n.maxNum/2)," + ").concat(Math.floor(Math.random()*n.maxNum/2)," + ").concat(Math.floor(Math.random()*n.maxNum/2))],subtraction:["What is ".concat(Math.floor(Math.random()*n.maxNum)," - ").concat(Math.floor(Math.random()*n.maxOp),"?"),"If you had ".concat(Math.floor(Math.random()*n.maxNum)," items and used ").concat(Math.floor(Math.random()*n.maxOp),", how many are left?"),"".concat(Math.floor(Math.random()*n.maxNum)," - ").concat(Math.floor(Math.random()*n.maxOp)," = ?"),"Subtract: ".concat(Math.floor(Math.random()*n.maxNum)," - ").concat(Math.floor(Math.random()*n.maxNum/2))],multiplication:["What is ".concat(Math.floor(15*Math.random())+2," \xd7 ").concat(Math.floor(15*Math.random())+2,"?"),"If each group has ".concat(Math.floor(12*Math.random())+2," items and there are ").concat(Math.floor(12*Math.random())+2," groups, how many items total?"),"".concat(Math.floor(12*Math.random())+1," \xd7 ").concat(Math.floor(12*Math.random())+1," = ?"),"Multiply: ".concat(Math.floor(20*Math.random())+1," \xd7 ").concat(Math.floor(20*Math.random())+1)],division:["What is ".concat(Math.floor(Math.random()*n.maxNum)," \xf7 ").concat(Math.floor(12*Math.random())+1,"?"),"If you split ".concat(Math.floor(Math.random()*n.maxNum)," equally among ").concat(Math.floor(12*Math.random())+1," groups, how many in each group?"),"".concat(Math.floor(Math.random()*n.maxNum)," \xf7 ").concat(Math.floor(12*Math.random())+1," = ?"),"Divide: ".concat(Math.floor(Math.random()*n.maxNum)," \xf7 ").concat(Math.floor(12*Math.random())+1)],fractions:["What is 1/4 + 1/4?","What is 1/3 of 30?","If you eat 1/2 of a pizza, how much is left?","What is 2/5 + 1/5?","If 1/4 of a number is 25, what is the number?","Simplify: 4/8","What is 3/4 - 1/4?","What is 1/2 + 1/3?","Simplify: 6/12","What is 2/3 of 18?","If 1/5 of a cake is 20g, what is the whole cake?","What is 3/5 + 1/5?","Simplify: 5/10","What is 1/2 of 50?"],decimals:["What is 2.5 + 1.3?","What is 4.2 - 1.8?","Multiply: 2.5 \xd7 4","What is 10.5 \xf7 2?","Add: 3.14 + 2.86","What is 5.6 - 2.3?","Multiply: 1.5 \xd7 2","What is 7.5 \xf7 3?","Add: 2.25 + 3.75","What is 6.4 - 1.2?","Multiply: 0.5 \xd7 8","What is 9.6 \xf7 2?","Add: 1.5 + 2.5 + 3.5","What is 8.1 - 3.2?"],algebra:["If 2x + 5 = 13, what is x?","Solve: 3x - 7 = 8","If y = 2x and x = 5, what is y?","Simplify: 4x + 2x","If 5x = 25, what is x?","Solve: x/2 = 10","What is x if x + 8 = 15?","Solve: 2x - 3 = 7","If 3x = 21, what is x?","Simplify: 3a + 2a + a","Solve: 4x + 2 = 18","If x - 5 = 10, what is x?","What is y if y = 3x and x = 4?","Solve: 2x + 4 = 12","If 6x = 30, what is x?"],geometry:["What is the area of a rectangle with length 8cm and width 5cm?","If a square has side 6cm, what is its perimeter?","What is the area of a triangle with base 10cm and height 6cm?","If a circle has radius 5cm, what is its circumference? (Use \u03c0 \u2248 3.14)","A rectangle has area 24cm\xb2. If its width is 4cm, what is its length?","If a square has perimeter 20cm, what is its side length?","What is the volume of a cube with side 3cm?","A circle has diameter 10cm. What is its radius?","What is the area of a square with side 7cm?","If a rectangle has length 12cm and area 60cm\xb2, what is its width?","A triangle has base 8cm and area 20cm\xb2. What is its height?","What is the perimeter of a rectangle 5cm \xd7 3cm?"],statistics:["If a die is rolled, what is the probability of getting a 3?","What is the mean of 2, 4, 6, 8?","If you flip a coin, what is the probability of getting heads?","What is the median of 3, 5, 7, 9, 11?","If there are 5 red balls and 3 blue balls in a bag, what is the probability of drawing a red ball?","What is the mode of 1, 2, 2, 3, 3, 3, 4?","If a die is rolled, what is the probability of getting an even number?","What is the mean of 10, 20, 30?","If you pick a card from a deck, what is the probability of getting a heart?","What is the range of 5, 8, 12, 3, 9?","If a die is rolled twice, what is the probability of getting two 6s?","What is the median of 2, 4, 6, 8, 10?"],calculus:["What is the derivative of x\xb2?","Find the limit as x approaches 2 of (x + 1)","What is the derivative of 3x\xb2 + 2x?","Find the integral of 2x","What is the derivative of 5x\xb3?","Find the derivative of x\xb2 + 3x","What is the limit as x approaches 1 of (2x + 3)?","Find the integral of x","What is the derivative of 4x\xb2 - 2x?","Find the derivative of sin(x)"],logic_patterns:["What comes next in the sequence: 2, 4, 6, 8, ___?","Find the pattern: 1, 1, 2, 3, 5, 8, ___?","What is the missing number: 5, 10, 15, ___, 25?","Identify the pattern: 1, 4, 9, 16, ___?","Find the pattern: 10, 20, 30, 40, ___?","What comes next: 3, 6, 9, 12, ___?","Continue the sequence: 2, 5, 10, 17, ___?","What is the next number: 1, 2, 4, 8, ___?","Find the pattern: 100, 90, 80, 70, ___?","What comes next: 1, 3, 5, 7, ___?","Identify the pattern: 2, 6, 12, 20, ___?","What is the missing number: 50, 40, 30, 20, ___?","Find the sequence: 5, 5, 10, 15, 25, ___?","What comes next: 16, 14, 12, 10, ___?","Continue: 1, 4, 7, 10, ___?","Identify the pattern: 2, 4, 8, 16, ___?","What is the next: 81, 64, 49, 36, ___?","Find the pattern: 11, 22, 33, 44, ___?","What comes next: A, B, C, D, ___?","Find the pattern: A, C, E, G, ___?","What is the missing letter: D, E, F, G, ___?","Identify the pattern: Z, X, V, T, ___?","What comes next: B, D, F, H, ___?","Find the sequence: A, B, B, C, C, C, ___?","What is the next letter: M, N, O, P, ___?","Identify the pattern: A, Z, B, Y, C, ___?","What comes next: F, E, D, C, ___?","Find the pattern: A, C, F, J, ___?","What comes next in the pattern: \u25b3, \u25ad, \u25b2, \u25a2, ___?","Find the visual pattern: \u25cf, \u25cf\u25cf, \u25cf\u25cf\u25cf, ___?","What comes next: 1A, 2B, 3C, 4D, ___?","Identify the pattern: A1, A2, B2, B3, C3, ___?","Find the sequence: 5a, 10b, 15c, 20d, ___?","If the pattern is multiply by 2: 1, 2, 4, 8, ___?","If the pattern is add 5 each time: 3, 8, 13, 18, ___?","If the pattern is subtract 2: 20, 18, 16, 14, ___?","If the pattern doubles then adds 1: 1, 3, 7, 15, ___?"]},r=i[t]||i.addition;return r[Math.floor(Math.random()*r.length)]};function Kg(t){let{userId:e,userGrade:n,mode:i,selectedModules:s,onNext:o,onEndSession:a}=t;const[l,c]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[d,f]=(0,r.useState)(""),[p,g]=(0,r.useState)(null),[m,y]=(0,r.useState)(""),[v,b]=(0,r.useState)(null),[w,x]=(0,r.useState)(!0),[_,E]=(0,r.useState)(!1),[S,k]=(0,r.useState)({correct:0,total:0,difficulty:"Medium"}),[T,I]=(0,r.useState)(0),[C,A]=(0,r.useState)(0),[N,P]=(0,r.useState)([]),[M,R]=(0,r.useState)(!1),[O,D]=(0,r.useState)(!1),[L,F]=(0,r.useState)(!1),j=(0,r.useRef)(null);(0,r.useEffect)(()=>{U()},[]),(0,r.useEffect)(()=>{if("test"===i&&!M)return j.current=setInterval(()=>{A(t=>t+1)},1e3),()=>clearInterval(j.current)},[i,M]);const U=async()=>{x(!0);try{const t="play"===i?await pf(e):[],r=(()=>{const t={Addition:["addition"],Subtraction:["subtraction"],Multiplication:["multiplication"],Division:["division"],Fractions:["fractions"],"Logic & Patterns":["logic_patterns"],"Arithmetic Operations":["addition","subtraction","multiplication","division"],"Fractions & Decimals":["fractions","decimals"],"Variables & Equations":["algebra"],Geometry:["geometry"],Algebra:["algebra"],Arithmetic:["addition","subtraction","multiplication","division"],"Statistics & Probability":["statistics"],"Arithmetic & Number Theory":["addition","subtraction","multiplication","division"],"Fractions, Decimals & Percentages":["fractions","decimals"],"Pre-Algebra":["algebra"],"Advanced Reasoning":["logic_patterns"],"Functions & Graphing":["algebra"],"Geometry & Trigonometry":["geometry"],"Exponents & Roots":["addition"],"Functions & Analysis":["algebra","calculus"],"Calculus Basics":["calculus"],"Mathematical Reasoning":["logic_patterns"]};if(!s||0===s.length)return["addition","subtraction","multiplication","division"];const e=new Set;return s.forEach(n=>{(t[n]||["addition","subtraction","multiplication","division"]).forEach(t=>e.add(t))}),Array.from(e)})(),o="play"===i?V(t,r):z(r);h(o);const a=await async function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const r=["logic_patterns","algebra","geometry","statistics","calculus","fractions","decimals"].includes(n);if(i&&i.length>0&&{NODE_ENV:"production",PUBLIC_URL:"/math-wizard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDjPiJ9hUQpr6LR3DwknDRSdJgQ2ihi7w8",REACT_APP_FIREBASE_AUTH_DOMAIN:"math-wizard-e9ac3.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"math-wizard-e9ac3",REACT_APP_FIREBASE_STORAGE_BUCKET:"math-wizard-e9ac3.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1052246851665",REACT_APP_FIREBASE_APP_ID:"1:1052246851665:web:82c81f16e791aede4c7870"}.REACT_APP_OPENAI_API_KEY)return qg(t,e,n,i,r);const s=r?.9:.7;return{NODE_ENV:"production",PUBLIC_URL:"/math-wizard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDjPiJ9hUQpr6LR3DwknDRSdJgQ2ihi7w8",REACT_APP_FIREBASE_AUTH_DOMAIN:"math-wizard-e9ac3.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"math-wizard-e9ac3",REACT_APP_FIREBASE_STORAGE_BUCKET:"math-wizard-e9ac3.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1052246851665",REACT_APP_FIREBASE_APP_ID:"1:1052246851665:web:82c81f16e791aede4c7870"}.REACT_APP_OPENAI_API_KEY&&Math.random()<s?qg(t,e,n,i,r):{question:Gg(n,e),answer:null}}(t,n,o,s),l=a.question;c(l);const u=null!==a.answer&&void 0!==a.answer?a.answer:B(l,o);g(u)}catch(t){console.error("Error loading question:",t),c("Unable to load question. Please try again.")}finally{x(!1)}},V=(t,e)=>{if(0===e.length&&(e=["addition","subtraction","multiplication","division"]),0===t.length)return e[Math.floor(Math.random()*e.length)];const n={};t.forEach(t=>{const e=t.operation||"addition";n[e]||(n[e]={correct:0,total:0}),n[e].total++,t.correct&&n[e].correct++});const i=Object.entries(n).filter(t=>{let[n]=t;return e.includes(n)}).sort((t,e)=>{let[,n]=t,[,i]=e;return n.correct/n.total-i.correct/i.total}).map(t=>{let[e]=t;return e});return i.length>0&&Math.random()<.7?i[0]:e[Math.floor(Math.random()*e.length)]},z=t=>(0===t.length&&(t=["addition","subtraction","multiplication","division"]),t[Math.floor(Math.random()*t.length)]),B=(t,e)=>{if("algebra"===e||"algebra_problem"===e){if(t.includes("2x + 5 = 13"))return 4;if(t.includes("3x - 7 = 8"))return 5;if(t.includes("y = 2x")&&t.includes("x = 5"))return 10;if(t.includes("4x + 2x"))return 0;if(t.includes("5x = 25"))return 5;if(t.includes("x/2 = 10"))return 20;if(t.includes("2x + 4 = 12"))return 4;if(t.includes("3x = 21"))return 7;if(t.includes("x + 8 = 15"))return 7;const e=/(\d*)x\s*([+-])\s*(\d+)\s*=\s*(\d+)/,n=t.match(e);if(n){const t=n[1]?parseInt(n[1]):1,e=n[2],i=parseInt(n[3]),r=parseInt(n[4]);if("+"===e)return(r-i)/t;if("-"===e)return(r+i)/t}const i=/(\d*)x\s*=\s*(\d+)/,r=t.match(i);if(r){const t=r[1]?parseInt(r[1]):1;return parseInt(r[2])/t}const s=t.match(/\d+/g);if(s&&s.length>=2)return parseInt(s[s.length-1])}if("geometry"===e||"geometry_problem"===e){if(t.includes("8")&&t.includes("5")&&t.includes("area")&&t.includes("rectangle"))return 40;if(t.includes("6")&&t.includes("perimeter")&&t.includes("square"))return 24;if(t.includes("10")&&t.includes("6")&&t.includes("triangle"))return 30;if(t.includes("5")&&t.includes("circumference"))return 31.4;if(t.includes("24")&&t.includes("4"))return 6;if(t.includes("side 3")&&t.includes("volume"))return 27;if(t.includes("diameter 10"))return 5;if(t.includes("side 7")&&t.includes("area")&&t.includes("square"))return 49;if((t.includes("area")||t.includes("Area"))&&t.includes("rectangle")){const e=t.match(/(\d+)\s*(?:cm|m)?\s*(?:\xd7|x|by)\s*(\d+)/);if(e)return parseInt(e[1])*parseInt(e[2])}if((t.includes("perimeter")||t.includes("Perimeter"))&&t.includes("rectangle")){const e=t.match(/(\d+)\s*(?:cm|m)?\s*(?:\xd7|x|by)\s*(\d+)/);if(e)return 2*(parseInt(e[1])+parseInt(e[2]))}const e=t.match(/\d+/g);if(e&&e.length>=2)return parseInt(e[0])*parseInt(e[1])}if("statistics"===e||"statistics_problem"===e){if(t.includes("die")&&t.includes("3"))return.17;if(t.includes("mean")&&t.includes("2")&&t.includes("4")&&t.includes("6")&&t.includes("8"))return 5;if(t.includes("coin")&&t.includes("heads"))return.5;if(t.includes("3")&&t.includes("5")&&t.includes("median"))return 7;if(t.includes("red")&&t.includes("5")&&t.includes("3"))return.63;if(t.includes("mean")||t.includes("Mean")){const e=t.match(/\d+/g);if(e&&e.length>=2){const t=e.reduce((t,e)=>parseInt(t)+parseInt(e),0);return Math.round(t/e.length*100)/100}}return null}if("calculus"===e||"calculus_problem"===e)return t.includes("x\xb2")?2:t.includes("3x\xb2")?6:t.includes("5x\xb3")?15:(t.includes("2"),1);const n={"\u2070":0,"\xb9":1,"\xb2":2,"\xb3":3,"\u2074":4,"\u2075":5,"\u2076":6,"\u2077":7,"\u2078":8,"\u2079":9},i=t.match(/\u221a(\d+)/);if(i){const t=parseInt(i[1]),e=Math.sqrt(t);return Number.isInteger(e)?e:Math.round(100*e)/100}const r=t.match(/\u221b(\d+)/);if(r){const t=parseInt(r[1]),e=Math.cbrt(t);return Number.isInteger(e)?e:Math.round(100*e)/100}const s=t.match(/(\d+)\s*\^\s*(\d+)/);if(s)return Math.pow(parseInt(s[1]),parseInt(s[2]));const o=t.match(/(\d+)([\u2070\xb9\xb2\xb3\u2074\u2075\u2076\u2077\u2078\u2079]+)/);if(o){const t=parseInt(o[1]),e=o[2];let i=0;for(const r of e)i=10*i+(n[r]||0);return Math.pow(t,i)}const a=t.match(/(\d+)\s*to the power (?:of\s*)?(\d+)/i);if(a)return Math.pow(parseInt(a[1]),parseInt(a[2]));const l=t.match(/square root (?:of\s*)?(\d+)/i);if(l){const t=parseInt(l[1]),e=Math.sqrt(t);return Number.isInteger(e)?e:Math.round(100*e)/100}const c=t.match(/cube root (?:of\s*)?(\d+)/i);if(c){const t=parseInt(c[1]),e=Math.cbrt(t);return Number.isInteger(e)?e:Math.round(100*e)/100}const u=t.match(/(\d+)([\u2070\xb9\xb2\xb3\u2074\u2075\u2076\u2077\u2078\u2079]+)\s*[\xd7x]\s*(\d+)([\u2070\xb9\xb2\xb3\u2074\u2075\u2076\u2077\u2078\u2079]+)/);if(u){const t=parseInt(u[1]),e=u[2],i=parseInt(u[3]),r=u[4];let s=0,o=0;for(const a of e)s=10*s+(n[a]||0);for(const a of r)o=10*o+(n[a]||0);return t===i?Math.pow(t,s+o):Math.pow(t,s)*Math.pow(i,o)}if("logic_patterns"===e||"logic_patterns_problem"===e){if(t.match(/[A-Za-z],\s*[A-Za-z],\s*[A-Za-z]/)){const e=t.match(/[A-Za-z]/g);if(e&&e.length>=2){const t=e[0].toUpperCase(),n=e[1].toUpperCase().charCodeAt(0)-t.charCodeAt(0);let i=e[e.length-1].toUpperCase().charCodeAt(0)+n;if(i<=90)return String.fromCharCode(i)}return"E"}if(t.includes("2, 4, 6, 8"))return 10;if(t.includes("1, 1, 2, 3, 5, 8"))return 13;if(t.includes("5, 5, 10, 15, 25"))return 40;if(t.includes("5, 10, 15, ___")||t.includes("5, 10, 15, _,"))return 20;if(t.includes("1, 4, 9, 16"))return 25;if(t.includes("10, 20, 30, 40"))return 50;if(t.includes("3, 6, 9, 12"))return 15;if(t.includes("1, 3, 5, 7"))return 9;if(t.includes("2, 4, 8, 16"))return 32;if(t.includes("1, 4, 7, 10"))return 13;const e=t.match(/(\d+(?:\s*,\s*\d+){2,})/),n=e?e[0].match(/\d+/g):t.match(/\d+/g);if(n&&n.length>=3){const t=n.map(t=>parseInt(t));let e=!0;for(let n=2;n<t.length;n++)if(t[n]!==t[n-1]+t[n-2]){e=!1;break}if(e&&t.length>=3)return t[t.length-1]+t[t.length-2];if(0!==t[0]){const e=t[1]/t[0];let n=1!==e;for(let i=2;i<t.length;i++)if(0===t[i-1]||t[i]/t[i-1]!==e){n=!1;break}if(n)return t[t.length-1]*e}if(t.length>=3){const e=[];for(let i=1;i<t.length;i++)e.push(t[i]-t[i-1]);const n=[];for(let t=1;t<e.length;t++)n.push(e[t]-e[t-1]);if(n.length>0&&n.every(t=>t===n[0])){const i=e[e.length-1]+n[0];return t[t.length-1]+i}}if(t.length>=2){const e=t[t.length-1];return e+(e-t[t.length-2])}}}const h=t.match(/(\d+(?:\.\d+)?)(?:\s*\+\s*(\d+(?:\.\d+)?))+/),d=t.match(/(\d+(?:\.\d+)?)(?:\s*-\s*(\d+(?:\.\d+)?))+/),f=t.match(/(\d+(?:\.\d+)?)(?:\s*[\xd7x]\s*(\d+(?:\.\d+)?))+/);if("addition"===e&&h){const t=h[0].match(/\d+(?:\.\d+)?/g);if(t&&t.length>2)return Math.round(100*t.reduce((t,e)=>t+parseFloat(e),0))/100}if("subtraction"===e&&d){const t=d[0].match(/\d+(?:\.\d+)?/g);if(t&&t.length>2)return Math.round(100*t.slice(1).reduce((t,e)=>t-parseFloat(e),parseFloat(t[0])))/100}if("multiplication"===e&&f){const t=f[0].match(/\d+(?:\.\d+)?/g);if(t&&t.length>2)return Math.round(100*t.reduce((t,e)=>t*parseFloat(e),1))/100}if("fractions"===e){const e=/(\d+)\s*\/\s*(\d+)\s*([+-])\s*(\d+)\s*\/\s*(\d+)/,n=t.match(e);if(n){const t=parseInt(n[1]),e=parseInt(n[2]),i=n[3],r=parseInt(n[4]),s=parseInt(n[5]);if("+"===i){return(t*s+r*e)/(e*s)}if("-"===i){return(t*s-r*e)/(e*s)}}const i=/(\d+)\s*\/\s*(\d+)\s*(?:of|\xd7)\s*(\d+)/,r=t.match(i);if(r){return parseInt(r[1])/parseInt(r[2])*parseInt(r[3])}const s=/(\d+)\s*\/\s*(\d+)\s*of\s*a\s*number\s*is\s*(\d+)/i,o=t.match(s);if(o){const t=parseInt(o[1]),e=parseInt(o[2]);return parseInt(o[3])*e/t}const a=/(\d+)\s*\/\s*(\d+)\s*of\s*(?:what|which)\s*number\s*(?:is|equals|=)\s*(\d+)/i,l=t.match(a);if(l){const t=parseInt(l[1]),e=parseInt(l[2]);return parseInt(l[3])*e/t}const c=t.match(/\d+/g);if(c&&c.length>=2)return parseInt(c[0])/parseInt(c[1])}const p={addition:/(\d+(?:\.\d+)?)\s*\+\s*(\d+(?:\.\d+)?)/,subtraction:/(\d+(?:\.\d+)?)\s*-\s*(\d+(?:\.\d+)?)/,multiplication:/(\d+(?:\.\d+)?)\s*[\xd7x]\s*(\d+(?:\.\d+)?)/,division:/(\d+(?:\.\d+)?)\s*[\xf7/]\s*(\d+(?:\.\d+)?)/,fractions:/(\d+)\s*\/\s*(\d+)\s*[+\xd7x\xf7/-]\s*(\d+)\s*\/\s*(\d+)/,decimals:/(\d+(?:\.\d+)?)\s*[+\xd7x\xf7/-]\s*(\d+(?:\.\d+)?)/}[e];if(p){const n=t.match(p);if(n){const i=parseFloat(n[1]),r=parseFloat(n[2]);switch(e){case"addition":return Math.round(100*(i+r))/100;case"subtraction":return Math.round(100*(i-r))/100;case"multiplication":return Math.round(i*r*100)/100;case"division":return Math.round(i/r*100)/100;case"decimals":return t.match(/\d\s*[\xd7x]\s*\d/)?Math.round(i*r*100)/100:t.match(/\d\s*[\xf7/]\s*\d/)?Math.round(i/r*100)/100:t.match(/\d\s*-\s*\d/)?Math.round(100*(i-r))/100:Math.round(100*(i+r))/100;default:return null}}}const g=t.match(/\d+(?:\.\d+)?/g);if(g&&g.length>=2){const n=g.map(t=>parseFloat(t));switch(e){case"addition":return Math.round(100*n.reduce((t,e)=>t+e,0))/100;case"subtraction":return Math.round(100*n.slice(1).reduce((t,e)=>t-e,n[0]))/100;case"multiplication":return Math.round(100*n.reduce((t,e)=>t*e,1))/100;case"division":return Math.round(n[0]/n[n.length-1]*100)/100;case"decimals":return t.match(/\d\s*[\xd7x]\s*\d/)?Math.round(100*n.reduce((t,e)=>t*e,1))/100:t.match(/\d\s*[\xf7/]\s*\d/)?Math.round(n[0]/n[n.length-1]*100)/100:t.match(/\d\s*-\s*\d/)?Math.round(100*n.slice(1).reduce((t,e)=>t-e,n[0]))/100:Math.round(100*n.reduce((t,e)=>t+e,0))/100;default:return null}}return null},W=(t,e)=>{const i=function(t,e){const n=e>0?t/e:0,i=(t=>{const e={"KG-1":{veryEasy:0,easy:.25,medium:.4,hard:.6,veryHard:.75},"2-3":{veryEasy:.1,easy:.3,medium:.5,hard:.7,veryHard:.85},"4-5":{veryEasy:.2,easy:.4,medium:.6,hard:.75,veryHard:.85},"6-7":{veryEasy:.3,easy:.5,medium:.65,hard:.8,veryHard:.88},"7-8":{veryEasy:.4,easy:.55,medium:.7,hard:.82,veryHard:.9},"9+":{veryEasy:.5,easy:.65,medium:.75,hard:.85,veryHard:.92}};return e[t]||e["4-5"]})(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"4-5");let r,s;return n<i.veryEasy?(r="Very Easy",s=i.veryEasy):n<i.easy?(r="Easy",s=i.easy):n<i.medium?(r="Medium",s=i.medium):n<i.hard?(r="Hard",s=i.hard):(r="Very Hard",s=i.veryHard),{difficulty:r,accuracy:Math.round(100*n),threshold:Math.round(100*s)}}(t,e,n);return i.difficulty},H=(t,e,n)=>({addition:"Tip: Add numbers step by step. Break large numbers into tens and ones.",subtraction:"Tip: Subtract by counting up from the smaller number, or break into parts.",multiplication:"Tip: Multiplication is repeated addition. You can also break numbers into parts: e.g. 12\xd75 = (10\xd75)+(2\xd75).",division:'Tip: Think "what number times the divisor gives the dividend?" Division is the reverse of multiplication.',fractions:'Tip: For fraction operations, find a common denominator first. "Of" means multiply: a/b of X = (a\xd7X)/b.',decimals:"Tip: Line up decimal points for +/\u2212. For \xd7, multiply as whole numbers then count decimal places.",algebra:"Tip: Isolate the variable by doing the same operation to both sides. Work backwards from the result.",geometry:"Tip: Rectangle area = l\xd7w, triangle = \xbd\xd7b\xd7h, circle = \u03c0\xd7r\xb2. Perimeter = sum of all sides.",statistics:"Tip: Mean = sum\xf7count. Median = middle value when sorted. Probability = favorable\xf7total outcomes.",calculus:"Tip: Power rule: d/dx(x\u207f) = n\xb7x\u207f\u207b\xb9. For limits, try direct substitution first.",logic_patterns:"Tip: Check differences between terms (arithmetic), ratios (geometric), or sums of previous terms (Fibonacci-like)."}[t]||"Tip: Review the question carefully and try breaking it into smaller steps."),q=t=>{const e=Math.floor(t/60),n=t%60;return"".concat(e,":").concat(n.toString().padStart(2,"0"))};if(L){const t=S.total>0?Math.round(S.correct/S.total*100):0,e=t>=80?"\ud83c\udf1f":t>=60?"\ud83d\udc4d":t>=40?"\ud83d\udcaa":"\ud83d\udcda";return(0,yf.jsxs)("div",{className:"max-w-lg mx-auto bg-white rounded-2xl p-6 shadow-xl",children:[(0,yf.jsxs)("div",{className:"text-center mb-6",children:[(0,yf.jsxs)("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:[e," Session Complete!"]}),(0,yf.jsx)("p",{className:"text-gray-500",children:"Great practice session \u2014 here's your recap"})]}),(0,yf.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,yf.jsxs)("div",{className:"bg-violet-50 rounded-xl p-4 text-center",children:[(0,yf.jsx)("p",{className:"text-3xl font-bold text-violet-600",children:S.total}),(0,yf.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Questions"})]}),(0,yf.jsxs)("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[(0,yf.jsx)("p",{className:"text-3xl font-bold text-green-600",children:S.correct}),(0,yf.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Correct"})]}),(0,yf.jsxs)("div",{className:"bg-purple-50 rounded-xl p-4 text-center",children:[(0,yf.jsxs)("p",{className:"text-3xl font-bold text-purple-600",children:[t,"%"]}),(0,yf.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Accuracy"})]})]}),N.length>0&&(0,yf.jsxs)("div",{className:"mb-6",children:[(0,yf.jsxs)("h3",{className:"font-bold text-gray-800 mb-3",children:["\u274c Questions to Review (",N.length,")"]}),(0,yf.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:N.map((t,e)=>(0,yf.jsxs)("div",{className:"bg-red-50 border-l-4 border-red-400 p-3 rounded-r-lg text-sm",children:[(0,yf.jsx)("p",{className:"font-semibold text-gray-800 mb-1",children:t.question}),(0,yf.jsxs)("p",{className:"text-red-600",children:["Your answer: ",t.yourAnswer]}),(0,yf.jsxs)("p",{className:"text-green-600",children:["Correct answer: ",t.correctAnswer]})]},e))})]}),0===N.length&&S.total>0&&(0,yf.jsx)("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 rounded-r-lg mb-6 text-center",children:(0,yf.jsx)("p",{className:"text-lg font-bold text-green-700",children:"\ud83c\udf89 All correct! Outstanding!"})}),(0,yf.jsx)("button",{onClick:a,className:"w-full bg-gradient-to-r from-violet-500 to-purple-600 text-white font-bold py-3 min-h-[44px] rounded-lg hover:shadow-lg transform hover:scale-105 transition",children:"\u2190 Back to Modules"})]})}if(M){const t=S.total>0?Math.round(S.correct/S.total*100):0,e=t>=90?"A+":t>=80?"A":t>=70?"B":t>=60?"C":t>=50?"D":"F",n=t>=80?"text-green-600":t>=60?"text-yellow-600":"text-red-600";return(0,yf.jsxs)("div",{className:"max-w-lg mx-auto bg-white rounded-2xl p-6 shadow-xl",children:[(0,yf.jsxs)("div",{className:"text-center mb-6",children:[(0,yf.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"\ud83d\udcdd Test Complete!"}),(0,yf.jsx)("p",{className:"text-gray-500",children:"Here's how you did"})]}),(0,yf.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,yf.jsxs)("div",{className:"bg-violet-50 rounded-xl p-4 text-center",children:[(0,yf.jsxs)("p",{className:"text-3xl font-bold text-violet-600",children:[S.correct,"/",S.total]}),(0,yf.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Correct"})]}),(0,yf.jsxs)("div",{className:"bg-purple-50 rounded-xl p-4 text-center",children:[(0,yf.jsx)("p",{className:"text-3xl font-bold ".concat(n),children:e}),(0,yf.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[t,"%"]})]}),(0,yf.jsxs)("div",{className:"bg-amber-50 rounded-xl p-4 text-center",children:[(0,yf.jsx)("p",{className:"text-3xl font-bold text-amber-600",children:q(C)}),(0,yf.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Time"})]})]}),N.length>0&&(0,yf.jsxs)("div",{className:"mb-6",children:[(0,yf.jsxs)("h3",{className:"font-bold text-gray-800 mb-3",children:["\u274c Questions to Review (",N.length,")"]}),(0,yf.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:N.map((t,e)=>(0,yf.jsxs)("div",{className:"bg-red-50 border-l-4 border-red-400 p-3 rounded-r-lg text-sm",children:[(0,yf.jsx)("p",{className:"font-semibold text-gray-800 mb-1",children:t.question}),(0,yf.jsxs)("p",{className:"text-red-600",children:["Your answer: ",t.yourAnswer]}),(0,yf.jsxs)("p",{className:"text-green-600",children:["Correct answer: ",t.correctAnswer]})]},e))})]}),0===N.length&&(0,yf.jsx)("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 rounded-r-lg mb-6 text-center",children:(0,yf.jsx)("p",{className:"text-lg font-bold text-green-700",children:"\ud83c\udf89 Perfect Score! Amazing work!"})}),(0,yf.jsx)("button",{onClick:a,className:"w-full bg-gradient-to-r from-violet-500 to-purple-600 text-white font-bold py-3 min-h-[44px] rounded-lg hover:shadow-lg transform hover:scale-105 transition",children:"\u2190 Back to Modules"})]})}return w?(0,yf.jsx)("div",{className:"max-w-xl mx-auto bg-gradient-to-br from-violet-50 to-purple-50 rounded-xl p-6 shadow-lg animate-pulse h-96 flex items-center justify-center",children:(0,yf.jsx)("p",{className:"text-2xl font-bold text-violet-600",children:"Loading question... \ud83e\udd14"})}):(0,yf.jsxs)("div",{className:"max-w-xl mx-auto bg-gradient-to-br from-violet-50 to-purple-50 rounded-xl p-6 shadow-lg",children:[(0,yf.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,yf.jsxs)("div",{className:"flex items-center gap-3",children:[(0,yf.jsxs)("div",{className:"text-sm font-semibold text-gray-600",children:["Operation: ",(0,yf.jsx)("span",{className:"text-violet-600 capitalize",children:u})]}),(0,yf.jsxs)("div",{className:"px-3 py-1 rounded-full text-white text-sm font-bold ".concat("Very Hard"===S.difficulty?"bg-red-600":"Hard"===S.difficulty?"bg-orange-600":"Medium"===S.difficulty?"bg-yellow-600":"Easy"===S.difficulty?"bg-green-600":"bg-green-500"),children:["\ud83d\udcca ",S.difficulty]})]}),(0,yf.jsx)("button",{onClick:()=>{"play"===i&&S.total>0?F(!0):a()},className:"px-4 py-2 min-h-[44px] bg-red-500 text-white text-sm font-semibold rounded-lg hover:bg-red-600 transition",title:"End this practice/test session",children:"End Session"})]}),(0,yf.jsx)("div",{className:"text-center mb-2 text-sm font-semibold text-gray-600",children:"test"===i?(0,yf.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yf.jsxs)("span",{children:["Question ",Math.min(S.total+1,10),"/",10]}),(0,yf.jsxs)("span",{children:["\u2705 ",S.correct,"/",S.total]}),(0,yf.jsxs)("span",{children:["\u23f1\ufe0f ",q(C)]})]}):(0,yf.jsxs)(yf.Fragment,{children:["Questions: ",S.total," | Correct: ",S.correct," (",S.total>0?Math.round(S.correct/S.total*100):0,"%)"]})}),(0,yf.jsx)("div",{className:"bg-white rounded-lg p-4 mb-4 border-2 border-violet-300",children:(0,yf.jsx)("h2",{className:"text-xl font-bold text-gray-800 text-center",children:l})}),(0,yf.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),null===p)return y("\u274c Unable to extract answer from this question. Please try the next question."),void b(!1);let n=!1,i=d;if("logic_patterns"===u||"logic_patterns_problem"===u)(p&&"string"===typeof p||null!==p)&&(n=i.toString().trim().toUpperCase()===p.toString().toUpperCase());else{const t=(t=>{const e=(t||"").toString().trim();if(!e)return NaN;const n=e.match(/^(\d+)\s+(\d+)\s*\/\s*(\d+)$/);if(n){const t=parseInt(n[1]),e=parseInt(n[2]),i=parseInt(n[3]);return 0!==i?t+e/i:NaN}const i=e.match(/^(-?\d+)\s*\/\s*(\d+)$/);if(i){const t=parseInt(i[1]),e=parseInt(i[2]);return 0!==e?t/e:NaN}return parseFloat(e)})(d);if(i=t,isNaN(t))return y("\u274c Please enter a valid number (e.g. 42, 0.5, or 1/2)."),void b(!1);n=Math.abs(t-p)<.01||t===p}if(b(n),n)y("\ud83c\udf89 Correct! Amazing!"),D(!0),setTimeout(()=>D(!1),2e3);else{const t=H(u,l,p);y("\u274c Not quite. The answer is ".concat(p,".\n").concat(t))}const r=S.total+1,s=n?S.correct+1:S.correct,o=W(s,r);k({correct:s,total:r,difficulty:o}),I(T+1),n||P(t=>[...t,{question:l,yourAnswer:i,correctAnswer:p,operation:u}]);try{await ff(e,{question:l,operation:u,userAnswer:i,correctAnswer:p,correct:n})}catch(a){console.error("Error saving answer:",a)}},className:"space-y-4",children:[(0,yf.jsxs)("div",{children:[(0,yf.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Your Answer:"}),(0,yf.jsx)("input",{type:"text",inputMode:"logic_patterns"===u||"logic_patterns_problem"===u?"text":"decimal",value:d,onChange:t=>f(t.target.value),placeholder:"logic_patterns"===u||"logic_patterns_problem"===u?"Enter letter (A, B, C, etc)":"Enter your answer (e.g. 42 or 0.5)",className:"w-full p-3 border-2 border-violet-400 rounded-lg text-lg font-semibold focus:outline-none focus:border-violet-600 focus:ring-2 focus:ring-violet-200 transition disabled:opacity-50 disabled:bg-gray-100",disabled:null!==v,autoFocus:!0})]}),null===v&&(0,yf.jsx)("button",{type:"button",onClick:()=>E(!_),className:"text-sm text-violet-600 hover:text-violet-800 font-semibold underline",children:_?"\u2705 Hint Shown":"? Need a hint?"}),_&&null===v&&(0,yf.jsxs)("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 p-3 rounded text-sm text-gray-700",children:["\ud83d\udca1 ",(t=>{const e={addition:["Break big numbers into tens and ones, then add each part separately.","Try adding the ones digits first, then the tens.","Line up the numbers by place value and add column by column."],subtraction:["Try counting up from the smaller number to the larger one.","Break the problem into smaller steps \u2014 subtract the ones first, then the tens.","If the top digit is smaller, you may need to borrow from the next column."],multiplication:["Multiplication is repeated addition. For example, 4 \xd7 3 = 4 + 4 + 4.","Break one number into parts: 12 \xd7 5 = (10 \xd7 5) + (2 \xd7 5).","Look for patterns in your times tables to help."],division:["Division is the opposite of multiplication. Think: what times the divisor gives the dividend?","Try estimating first \u2014 is the answer closer to 5 or 50?","Break the dividend into friendly parts that divide evenly."],fractions:["To add fractions, make sure the denominators (bottom numbers) are the same first.",'Remember: "of" means multiply. So 1/3 of 12 = (1/3) \xd7 12.',"To simplify a fraction, divide top and bottom by the same number."],decimals:["Line up the decimal points before adding or subtracting.","When multiplying decimals, count total decimal places in both numbers.","Think of decimals as money \u2014 0.5 is like 50 cents."],algebra:["To solve for x, do the same operation to both sides of the equation.","Work backwards: if 2x + 5 = 13, first subtract 5, then divide by 2.","Replace the variable with your answer to check if both sides are equal."],geometry:["Area of a rectangle = length \xd7 width. Perimeter = 2 \xd7 (length + width).","Area of a triangle = (base \xd7 height) \xf7 2.","For circles: circumference = \u03c0 \xd7 diameter, area = \u03c0 \xd7 radius\xb2."],statistics:["Mean = sum of all values \xf7 number of values.","Median is the middle value when numbers are sorted in order.","Probability = favorable outcomes \xf7 total possible outcomes."],calculus:["The derivative of x\u207f is n \xd7 x\u207f\u207b\xb9 (power rule).","A derivative tells you the rate of change \u2014 how fast something changes.","For limits, try plugging the value directly into the expression first."],logic_patterns:["Look at the differences between consecutive numbers \u2014 is there a pattern?","Check if each number is multiplied by the same value (geometric pattern).","Try checking if each number is the sum of the two before it (like Fibonacci)."]},n=e[t]||e.addition;return n[Math.floor(Math.random()*n.length)]})(u)]}),(0,yf.jsx)("button",{type:"submit",disabled:null!==v||!d,className:"w-full bg-gradient-to-r from-emerald-400 to-teal-500 text-white font-bold py-3 min-h-[44px] rounded-lg disabled:opacity-50 hover:shadow-lg transform hover:scale-105 transition",children:"Submit Answer \u2713"})]}),O&&(0,yf.jsx)("div",{className:"fixed inset-0 pointer-events-none z-50 overflow-hidden",children:[...Array(20)].map((t,e)=>(0,yf.jsx)("div",{className:"absolute animate-confetti text-2xl",style:{left:"".concat(100*Math.random(),"%"),animationDelay:"".concat(.5*Math.random(),"s"),animationDuration:"".concat(1.5+Math.random(),"s")},children:["\u2b50","\ud83c\udf1f","\ud83c\udf89","\ud83c\udf8a","\ud83d\udcab","\u2728"][e%6]},e))}),m&&(0,yf.jsx)("div",{className:"mt-4 p-4 rounded-lg font-bold ".concat(v?"bg-green-100 text-green-700 border-2 border-green-400 text-center text-lg":"bg-red-100 text-red-700 border-2 border-red-400"),children:v?m:(0,yf.jsxs)(yf.Fragment,{children:[(0,yf.jsx)("p",{className:"text-lg text-center",children:m.split("\n")[0]}),(0,yf.jsx)("p",{className:"text-sm font-medium mt-2 text-red-600 opacity-80",children:m.split("\n")[1]})]})}),null!==v&&(0,yf.jsx)("button",{onClick:()=>{if("test"===i&&S.total>=10)return clearInterval(j.current),void R(!0);f(""),b(null),y(""),E(!1),D(!1),U(),o&&o()},className:"w-full mt-4 bg-gradient-to-r from-amber-400 to-orange-500 text-white font-bold py-3 min-h-[44px] rounded-lg hover:shadow-lg transform hover:scale-105 transition",children:"Next Question \u2192"})]})}const Qg=["KG-1","2-3","4-5","6-7","7-8","9+"],Yg={"KG-1":{name:"Kindergarten - 1st Grade",color:"from-pink-400 to-red-400",icon:"\ud83c\udf88"},"2-3":{name:"2nd - 3rd Grade",color:"from-orange-400 to-yellow-400",icon:"\ud83c\udf1f"},"4-5":{name:"4th - 5th Grade",color:"from-green-400 to-teal-400",icon:"\ud83c\udfaf"},"6-7":{name:"6th - 7th Grade",color:"from-blue-400 to-cyan-400",icon:"\ud83d\ude80"},"7-8":{name:"7th - 8th Grade",color:"from-purple-400 to-indigo-400",icon:"\u26a1"},"9+":{name:"9th Grade and Above",color:"from-indigo-500 to-purple-600",icon:"\ud83c\udfc6"}};function Xg(t){var e;let{userId:n,userGrade:i,userProfile:s}=t;const[o,a]=(0,r.useState)(null),[l,c]=(0,r.useState)((t=>{if("string"===typeof t&&Yg[t])return t;const e=parseInt(t);return e<=1?"KG-1":e<=3?"2-3":e<=5?"4-5":e<=7?"6-7":e<=8?"7-8":"9+"})(i)||"4-5"),[u,h]=(0,r.useState)([]),[d,f]=(0,r.useState)(0);if(o)return(0,yf.jsx)(Kg,{userId:n,userGrade:l,mode:o,selectedModules:u,onNext:()=>f(d+1),onEndSession:()=>{a(null),f(0)}});const p=(null===(e=Wg(l))||void 0===e?void 0:e.modules)||[],g=p.map(t=>t.name);return(0,yf.jsx)("div",{className:"min-h-[calc(100vh-52px)] bg-violet-50 p-2 sm:p-4 flex flex-col",children:(0,yf.jsxs)("div",{className:"max-w-7xl mx-auto w-full flex flex-col h-full",children:[(0,yf.jsxs)("div",{className:"text-center mb-2 flex-shrink-0",children:[(0,yf.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-800 mb-0.5",children:"\ud83d\udcda Choose Your Modules"}),(0,yf.jsxs)("p",{className:"text-xs sm:text-sm lg:text-base text-gray-600",children:["Hi ",null===s||void 0===s?void 0:s.name,"! Select a grade & modules \ud83d\udc4b"]})]}),(0,yf.jsxs)("div",{className:"flex flex-col flex-1 gap-2",children:[(0,yf.jsxs)("div",{className:"bg-white rounded-xl p-2 shadow-lg flex-shrink-0",children:[(0,yf.jsx)("h3",{className:"text-sm sm:text-base lg:text-lg font-bold text-gray-800 mb-2",children:"\ud83c\udf93 Select Your Grade"}),(0,yf.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-3 lg:grid-cols-6 gap-1.5 sm:gap-2",children:Qg.map(t=>{var e;const n=Yg[t],i=t===l,r=((null===(e=Wg(t))||void 0===e?void 0:e.modules)||[]).length;return(0,yf.jsxs)("button",{onClick:()=>{c(t),h([])},"aria-label":"Select ".concat(n.name),"aria-pressed":i,className:"p-2 rounded-lg border-2 text-left transition flex flex-col ".concat(i?"bg-gradient-to-r ".concat(n.color," text-white border-2 border-white shadow-lg"):"bg-gray-50 border-gray-300 hover:border-gray-400"),children:[(0,yf.jsx)("div",{className:"text-2xl sm:text-3xl lg:text-4xl mb-1",children:n.icon}),(0,yf.jsxs)("div",{children:[(0,yf.jsx)("div",{className:"font-bold text-xs sm:text-sm lg:text-base ".concat(i?"text-white":"text-gray-800"," leading-tight"),children:t}),(0,yf.jsx)("div",{className:"text-xs leading-tight ".concat(i?"text-white opacity-90":"text-gray-600"),children:n.name}),(0,yf.jsxs)("div",{className:"text-xs leading-tight mt-1 ".concat(i?"text-white opacity-80":"text-gray-500"),children:[r," \ud83d\udcda"]})]})]},t)})})]}),(0,yf.jsxs)("div",{className:"bg-white rounded-xl p-2 shadow-lg flex flex-col flex-1 overflow-hidden",children:[(0,yf.jsxs)("div",{className:"flex justify-between items-center mb-2 flex-shrink-0",children:[(0,yf.jsxs)("h3",{className:"text-sm sm:text-base lg:text-lg font-bold text-gray-800",children:["\ud83d\udcda Modules for ",l]}),(0,yf.jsxs)("div",{className:"flex gap-1",children:[(0,yf.jsx)("button",{onClick:()=>{h(g)},className:"px-3 py-2 min-h-[44px] text-xs sm:text-sm bg-emerald-500 text-white font-semibold rounded-lg hover:bg-emerald-600 transition",children:"\u2705 All"}),(0,yf.jsx)("button",{onClick:()=>{h([])},className:"px-3 py-2 min-h-[44px] text-xs sm:text-sm bg-red-500 text-white font-semibold rounded-lg hover:bg-red-600 transition",children:"\u274c Clear"})]})]}),(0,yf.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-1.5 sm:gap-2 overflow-y-auto flex-1 mb-2 content-start max-h-[40vh] sm:max-h-[50vh]",children:p.map((t,e)=>{const n=u.includes(t.name),i=["from-pink-400 to-rose-400","from-orange-400 to-amber-400","from-green-400 to-emerald-400","from-blue-400 to-cyan-400","from-purple-400 to-violet-400","from-teal-400 to-green-400","from-indigo-400 to-blue-400","from-yellow-400 to-orange-400","from-rose-400 to-pink-400","from-cyan-400 to-teal-400"],r=["\ud83d\udcd0","\u2795","\u2796","\u2716\ufe0f","\u2797","\ud83d\udd22","\ud83d\udcca","\ud83e\udde9","\ud83d\udd3a","\ud83d\udca1","\ud83d\udccf","\ud83c\udfb2","\u26a1","\ud83c\udfc6","\ud83e\uddee"],s=i[e%i.length],o=r[e%r.length];return(0,yf.jsxs)("button",{onClick:()=>{return e=t.name,void h(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]);var e},"aria-label":"".concat(n?"Deselect":"Select"," ").concat(t.name," module"),"aria-pressed":n,className:"p-2 rounded-lg border-2 text-left transition flex flex-col ".concat(n?"bg-gradient-to-r ".concat(s," text-white border-white shadow-lg"):"bg-gray-50 border-gray-300 hover:border-gray-400"),children:[(0,yf.jsx)("div",{className:"text-xl sm:text-2xl mb-1",children:n?"\u2705":o}),(0,yf.jsx)("div",{className:"font-bold text-xs sm:text-sm leading-tight ".concat(n?"text-white":"text-gray-800"),children:t.name}),(0,yf.jsxs)("div",{className:"text-xs leading-tight mt-0.5 ".concat(n?"text-white opacity-80":"text-gray-500"),children:[t.topics.length," topics"]})]},t.name)})}),0===u.length&&(0,yf.jsx)("p",{className:"text-xs text-red-600 font-semibold mb-2 flex-shrink-0",children:"\u26a0\ufe0f Select at least one module"}),(0,yf.jsxs)("div",{className:"grid grid-cols-2 gap-2 flex-shrink-0",children:[(0,yf.jsx)("button",{onClick:()=>u.length>0&&a("play"),disabled:0===u.length,className:"bg-gradient-to-r from-amber-400 to-orange-500 text-white font-bold py-3 min-h-[44px] rounded-lg hover:shadow-lg transform hover:scale-105 transition disabled:opacity-50 text-xs sm:text-sm",children:"\ud83c\udfaf Play Mode"}),(0,yf.jsx)("button",{onClick:()=>u.length>0&&a("test"),disabled:0===u.length,className:"bg-gradient-to-r from-violet-500 to-purple-600 text-white font-bold py-3 min-h-[44px] rounded-lg hover:shadow-lg transform hover:scale-105 transition disabled:opacity-50 text-xs sm:text-sm",children:"\ud83d\udcdd Test Mode"})]})]})]})]})})}function Jg(t){return t+.5|0}const $g=(t,e,n)=>Math.max(Math.min(t,n),e);function Zg(t){return $g(Jg(2.55*t),0,255)}function tm(t){return $g(Jg(255*t),0,255)}function em(t){return $g(Jg(t/2.55)/100,0,1)}function nm(t){return $g(Jg(100*t),0,100)}const im={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},rm=[..."0123456789ABCDEF"],sm=t=>rm[15&t],om=t=>rm[(240&t)>>4]+rm[15&t],am=t=>(240&t)>>4===(15&t);function lm(t){var e=(t=>am(t.r)&&am(t.g)&&am(t.b)&&am(t.a))(t)?sm:om;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const cm=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function um(t,e,n){const i=e*Math.min(n,1-n),r=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+t/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function hm(t,e,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+t/60)%6;return n-n*e*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function dm(t,e,n){const i=um(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function fm(t){const e=t.r/255,n=t.g/255,i=t.b/255,r=Math.max(e,n,i),s=Math.min(e,n,i),o=(r+s)/2;let a,l,c;return r!==s&&(c=r-s,l=o>.5?c/(2-r-s):c/(r+s),a=function(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}(e,n,i,c,r),a=60*a+.5),[0|a,l||0,o]}function pm(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(tm)}function gm(t,e,n){return pm(um,t,e,n)}function mm(t){return(t%360+360)%360}function ym(t){const e=cm.exec(t);let n,i=255;if(!e)return;e[5]!==n&&(i=e[6]?Zg(+e[5]):tm(+e[5]));const r=mm(+e[2]),s=+e[3]/100,o=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return pm(dm,t,e,n)}(r,s,o):"hsv"===e[1]?function(t,e,n){return pm(hm,t,e,n)}(r,s,o):gm(r,s,o),{r:n[0],g:n[1],b:n[2],a:i}}const vm={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},bm={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let wm;function xm(t){wm||(wm=function(){const t={},e=Object.keys(bm),n=Object.keys(vm);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,vm[s]);s=parseInt(bm[o],16),t[a]=[s>>16&255,s>>8&255,255&s]}return t}(),wm.transparent=[0,0,0,0]);const e=wm[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const _m=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Em=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,Sm=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function km(t,e,n){if(t){let i=fm(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=gm(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Tm(t,e){return t?Object.assign(e||{},t):t}function Im(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=tm(t[3]))):(e=Tm(t,{r:0,g:0,b:0,a:1})).a=tm(e.a),e}function Cm(t){return"r"===t.charAt(0)?function(t){const e=_m.exec(t);let n,i,r,s=255;if(e){if(e[7]!==n){const t=+e[7];s=e[8]?Zg(t):$g(255*t,0,255)}return n=+e[1],i=+e[3],r=+e[5],n=255&(e[2]?Zg(n):$g(n,0,255)),i=255&(e[4]?Zg(i):$g(i,0,255)),r=255&(e[6]?Zg(r):$g(r,0,255)),{r:n,g:i,b:r,a:s}}}(t):ym(t)}class Am{constructor(t){if(t instanceof Am)return t;const e=typeof t;let n;"object"===e?n=Im(t):"string"===e&&(n=function(t){var e,n=t.length;return"#"===t[0]&&(4===n||5===n?e={r:255&17*im[t[1]],g:255&17*im[t[2]],b:255&17*im[t[3]],a:5===n?17*im[t[4]]:255}:7!==n&&9!==n||(e={r:im[t[1]]<<4|im[t[2]],g:im[t[3]]<<4|im[t[4]],b:im[t[5]]<<4|im[t[6]],a:9===n?im[t[7]]<<4|im[t[8]]:255})),e}(t)||xm(t)||Cm(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Tm(this._rgb);return t&&(t.a=em(t.a)),t}set rgb(t){this._rgb=Im(t)}rgbString(){return this._valid?function(t){return t&&(t.a<255?"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(em(t.a),")"):"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")"))}(this._rgb):void 0}hexString(){return this._valid?lm(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=fm(t),n=e[0],i=nm(e[1]),r=nm(e[2]);return t.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(em(t.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,i=t.rgb;let r;const s=e===r?.5:e,o=2*s-1,a=n.a-i.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const i=Sm(em(t.r)),r=Sm(em(t.g)),s=Sm(em(t.b));return{r:tm(Em(i+n*(Sm(em(e.r))-i))),g:tm(Em(r+n*(Sm(em(e.g))-r))),b:tm(Em(s+n*(Sm(em(e.b))-s))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new Am(this.rgb)}alpha(t){return this._rgb.a=tm(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=Jg(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return km(this._rgb,2,t),this}darken(t){return km(this._rgb,2,-t),this}saturate(t){return km(this._rgb,1,t),this}desaturate(t){return km(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=fm(t);n[0]=mm(n[0]+e),n=gm(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function Nm(){}const Pm=(()=>{let t=0;return()=>t++})();function Mm(t){return null===t||void 0===t}function Rm(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function Om(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function Dm(t){return("number"===typeof t||t instanceof Number)&&isFinite(+t)}function Lm(t,e){return Dm(t)?t:e}function Fm(t,e){return"undefined"===typeof t?e:t}const jm=(t,e)=>"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Um(t,e,n){if(t&&"function"===typeof t.call)return t.apply(n,e)}function Vm(t,e,n,i){let r,s,o;if(Rm(t))if(s=t.length,i)for(r=s-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<s;r++)e.call(n,t[r],r);else if(Om(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function zm(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Bm(t){if(Rm(t))return t.map(Bm);if(Om(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Bm(t[n[r]]);return e}return t}function Wm(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function Hm(t,e,n,i){if(!Wm(t))return;const r=e[t],s=n[t];Om(r)&&Om(s)?qm(r,s,i):e[t]=Bm(s)}function qm(t,e,n){const i=Rm(e)?e:[e],r=i.length;if(!Om(t))return t;const s=(n=n||{}).merger||Hm;let o;for(let a=0;a<r;++a){if(o=i[a],!Om(o))continue;const e=Object.keys(o);for(let i=0,r=e.length;i<r;++i)s(e[i],t,o,n)}return t}function Gm(t,e){return qm(t,e,{merger:Km})}function Km(t,e,n){if(!Wm(t))return;const i=e[t],r=n[t];Om(i)&&Om(r)?Gm(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Bm(r))}const Qm={"":t=>t,x:t=>t.x,y:t=>t.y};function Ym(t,e){const n=Qm[e]||(Qm[e]=function(t){const e=function(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function Xm(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Jm=t=>"undefined"!==typeof t,$m=t=>"function"===typeof t,Zm=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};const ty=Math.PI,ey=2*ty,ny=ey+ty,iy=Number.POSITIVE_INFINITY,ry=ty/180,sy=ty/2,oy=ty/4,ay=2*ty/3,ly=Math.log10,cy=Math.sign;function uy(t,e,n){return Math.abs(t-e)<n}function hy(t){const e=Math.round(t);t=uy(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(ly(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function dy(t){return!function(t){return"symbol"===typeof t||"object"===typeof t&&null!==t&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function fy(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function py(t){return t*(ty/180)}function gy(t){return t*(180/ty)}function my(t){if(!Dm(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function yy(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*ty&&(s+=ey),{angle:s,distance:r}}function vy(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function by(t,e){return(t-e+ny)%ey-ty}function wy(t){return(t%ey+ey)%ey}function xy(t,e,n,i){const r=wy(t),s=wy(e),o=wy(n),a=wy(s-r),l=wy(o-r),c=wy(r-s),u=wy(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function _y(t,e,n){return Math.max(e,Math.min(n,t))}function Ey(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Sy(t,e,n){n=n||(n=>t[n]<e);let i,r=t.length-1,s=0;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const ky=(t,e,n,i)=>Sy(t,n,i?i=>{const r=t[i][e];return r<n||r===n&&t[i+1][e]===n}:i=>t[i][e]<n),Ty=(t,e,n)=>Sy(t,n,i=>t[i][e]>=n);const Iy=["push","pop","shift","splice","unshift"];function Cy(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);-1!==r&&i.splice(r,1),i.length>0||(Iy.forEach(e=>{delete t[e]}),delete t._chartjs)}function Ay(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Ny="undefined"===typeof window?function(t){return t()}:window.requestAnimationFrame;function Py(t,e){let n=[],i=!1;return function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];n=s,i||(i=!0,Ny.call(window,()=>{i=!1,t.apply(e,n)}))}}const My=t=>"start"===t?"left":"end"===t?"right":"center",Ry=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function Oy(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:d,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(r=Math.min(ky(l,u,h).lo,n?i:ky(e,u,o.getPixelForValue(h)).lo),c){const t=l.slice(0,r+1).reverse().findIndex(t=>!Mm(t[a.axis]));r-=Math.max(0,t)}r=_y(r,0,i-1)}if(p){let t=Math.max(ky(l,o.axis,d,!0).hi+1,n?0:ky(e,u,o.getPixelForValue(d),!0).hi+1);if(c){const e=l.slice(t-1).findIndex(t=>!Mm(t[a.axis]));t+=Math.max(0,e)}s=_y(t,r,i)-r}else s=i-r}return{start:r,count:s}}function Dy(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Ly=t=>0===t||1===t,Fy=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*ey/n),jy=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ey/n)+1,Uy={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*sy),easeOutSine:t=>Math.sin(t*sy),easeInOutSine:t=>-.5*(Math.cos(ty*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Ly(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ly(t)?t:Fy(t,.075,.3),easeOutElastic:t=>Ly(t)?t:jy(t,.075,.3),easeInOutElastic(t){const e=.1125;return Ly(t)?t:t<.5?.5*Fy(2*t,e,.45):.5+.5*jy(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-Uy.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*Uy.easeInBounce(2*t):.5*Uy.easeOutBounce(2*t-1)+.5};function Vy(t){if(t&&"object"===typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function zy(t){return Vy(t)?t:new Am(t)}function By(t){return Vy(t)?t:new Am(t).saturate(.5).darken(.1).hexString()}const Wy=["x","y","borderWidth","radius","tension"],Hy=["color","borderColor","backgroundColor"];const qy=new Map;function Gy(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let i=qy.get(n);return i||(i=new Intl.NumberFormat(t,e),qy.set(n,i)),i}(e,n).format(t)}const Ky={values:t=>Rm(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(r="scientific"),s=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const o=ly(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Gy(t,i,l)},logarithmic(t,e,n){if(0===t)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(ly(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?Ky.numeric.call(this,t,e,n):""}};var Qy={formatters:Ky};const Yy=Object.create(null),Xy=Object.create(null);function Jy(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const e=n[i];t=t[e]||(t[e]=Object.create(null))}return t}function $y(t,e,n){return"string"===typeof e?qm(Jy(t,e),n):qm(Jy(t,""),e)}class Zy{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>By(e.backgroundColor),this.hoverBorderColor=(t,e)=>By(e.borderColor),this.hoverColor=(t,e)=>By(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return $y(this,t,e)}get(t){return Jy(this,t)}describe(t,e){return $y(Xy,t,e)}override(t,e){return $y(Yy,t,e)}route(t,e,n,i){const r=Jy(this,t),s=Jy(this,n),o="_"+e;Object.defineProperties(r,{[o]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[o],e=s[i];return Om(t)?Object.assign({},e,t):Fm(t,e)},set(t){this[o]=t}}})}apply(t){t.forEach(t=>t(this))}}var tv=new Zy({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:Hy},numbers:{type:"number",properties:Wy}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Qy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function ev(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function nv(t,e,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],void 0===h||null===h||Rm(h)){if(Rm(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||Rm(d)||(o=ev(t,r,s,o,d))}else o=ev(t,r,s,o,h);t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function iv(t,e,n){const i=t.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function rv(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function sv(t,e,n,i){ov(t,e,n,i,null)}function ov(t,e,n,i,r){let s,o,a,l,c,u,h,d;const f=e.pointStyle,p=e.rotation,g=e.radius;let m=(p||0)*ry;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return t.save(),t.translate(n,i),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:r?t.ellipse(n,i,r/2,g,0,0,ey):t.arc(n,i,g,0,ey),t.closePath();break;case"triangle":u=r?r/2:g,t.moveTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=ay,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=ay,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),t.closePath();break;case"rectRounded":c=.516*g,l=g-c,o=Math.cos(m+oy)*l,h=Math.cos(m+oy)*(r?r/2-c:l),a=Math.sin(m+oy)*l,d=Math.sin(m+oy)*(r?r/2-c:l),t.arc(n-h,i-a,c,m-ty,m-sy),t.arc(n+d,i-o,c,m-sy,m),t.arc(n+h,i+a,c,m,m+sy),t.arc(n-d,i+o,c,m+sy,m+ty),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=r?r/2:l,t.rect(n-u,i-l,2*u,2*l);break}m+=oy;case"rectRot":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-a),t.lineTo(n+d,i-o),t.lineTo(n+h,i+a),t.lineTo(n-d,i+o),t.closePath();break;case"crossRot":m+=oy;case"cross":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"star":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o),m+=oy,h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"line":o=r?r/2:Math.cos(m)*g,a=Math.sin(m)*g,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(m)*(r?r/2:g),i+Math.sin(m)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function av(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function lv(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function cv(t){t.restore()}function uv(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if("middle"===r){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===r!==!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function hv(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function dv(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function fv(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function pv(t,e,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=Rm(e)?e:[e],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(t.save(),t.font=r.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Mm(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&fv(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Mm(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),dv(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function gv(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*ty,ty,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,ty,sy,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,sy,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-sy,!0),t.lineTo(n+o.topLeft,i)}const mv=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,yv=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function vv(t,e){const n=(""+t).match(mv);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const bv=t=>+t||0;function wv(t,e){const n={},i=Om(e),r=i?Object.keys(e):e,s=Om(t)?i?n=>Fm(t[n],t[e[n]]):e=>t[e]:()=>t;for(const o of r)n[o]=bv(s(o));return n}function xv(t){return wv(t,{top:"y",right:"x",bottom:"y",left:"x"})}function _v(t){return wv(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ev(t){const e=xv(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Sv(t,e){t=t||{},e=e||tv.font;let n=Fm(t.size,e.size);"string"===typeof n&&(n=parseInt(n,10));let i=Fm(t.style,e.style);i&&!(""+i).match(yv)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Fm(t.family,e.family),lineHeight:vv(Fm(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Fm(t.weight,e.weight),string:""};return r.string=function(t){return!t||Mm(t.size)||Mm(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(r),r}function kv(t,e,n,i){let r,s,o,a=!0;for(r=0,s=t.length;r<s;++r)if(o=t[r],void 0!==o&&(void 0!==e&&"function"===typeof o&&(o=o(e),a=!1),void 0!==n&&Rm(o)&&(o=o[n%o.length],a=!1),void 0!==o))return i&&!a&&(i.cacheable=!1),o}function Tv(t,e){return Object.assign(Object.create(t),e)}function Iv(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>t[0];const r=(arguments.length>2?arguments[2]:void 0)||t;"undefined"===typeof n&&(n=jv("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:n,_getTarget:i,override:i=>Iv([i,...t],e,r,n)};return new Proxy(s,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,i)=>Mv(n,i,()=>function(t,e,n,i){let r;for(const s of e)if(r=jv(Nv(s,t),n),"undefined"!==typeof r)return Pv(t,r)?Lv(n,i,t,r):r}(i,e,t,n)),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>Uv(t).includes(e),ownKeys:t=>Uv(t),set(t,e,n){const r=t._storage||(t._storage=i());return t[e]=r[e]=n,delete t._keys,!0}})}function Cv(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Av(t,i),setContext:e=>Cv(t,e,n,i),override:r=>Cv(t.override(r),e,n,i)};return new Proxy(r,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>Mv(t,e,()=>function(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];$m(a)&&o.isScriptable(e)&&(a=function(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);a.delete(t),Pv(t,l)&&(l=Lv(r._scopes,r,t,l));return l}(e,a,t,n));Rm(a)&&a.length&&(a=function(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if("undefined"!==typeof s.index&&i(t))return e[s.index%e.length];if(Om(e[0])){const n=e,i=r._scopes.filter(t=>t!==n);e=[];for(const l of n){const n=Lv(i,r,t,l);e.push(Cv(n,s,o&&o[t],a))}}return e}(e,a,t,o.isIndexable));Pv(e,a)&&(a=Cv(a,r,s&&s[e],o));return a}(t,e,n)),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,i)=>(t[n]=i,delete e[n],!0)})}function Av(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:$m(n)?n:()=>n,isIndexable:$m(i)?i:()=>i}}const Nv=(t,e)=>t?t+Xm(e):e,Pv=(t,e)=>Om(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Mv(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];const i=n();return t[e]=i,i}function Rv(t,e,n){return $m(t)?t(e,n):t}const Ov=(t,e)=>!0===t?e:"string"===typeof t?Ym(e,t):void 0;function Dv(t,e,n,i,r){for(const s of e){const e=Ov(n,s);if(e){t.add(e);const s=Rv(e._fallback,n,r);if("undefined"!==typeof s&&s!==n&&s!==i)return s}else if(!1===e&&"undefined"!==typeof i&&n!==i)return null}return!1}function Lv(t,e,n,i){const r=e._rootScopes,s=Rv(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=Fv(a,o,n,s||n,i);return null!==l&&(("undefined"===typeof s||s===n||(l=Fv(a,o,s,l,i),null!==l))&&Iv(Array.from(a),[""],r,s,()=>function(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];if(Rm(r)&&Om(n))return n;return r||{}}(e,n,i)))}function Fv(t,e,n,i,r){for(;n;)n=Dv(t,e,n,i,r);return n}function jv(t,e){for(const n of e){if(!n)continue;const e=n[t];if("undefined"!==typeof e)return e}}function Uv(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter(t=>!t.startsWith("_")))e.add(t);return Array.from(e)}(t._scopes)),e}function Vv(t,e,n,i){const{iScale:r}=t,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=e[c],o[a]={r:r.parse(Ym(u,s),c)};return o}const zv=Number.EPSILON||1e-14,Bv=(t,e)=>e<t.length&&!t[e].skip&&t[e],Wv=t=>"x"===t?"y":"x";function Hv(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=vy(s,r),l=vy(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+d*(o.x-r.x),y:s.y+d*(o.y-r.y)}}}function qv(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Wv(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=Bv(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=Bv(t,o+1),l){if(c){const t=c[e]-l[e];r[o]=0!==t?(c[n]-l[n])/t:0}s[o]=a?c?cy(r[o-1])!==cy(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}!function(t,e,n){const i=t.length;let r,s,o,a,l,c=Bv(t,0);for(let u=0;u<i-1;++u)l=c,c=Bv(t,u+1),l&&c&&(uy(e[u],0,zv)?n[u]=n[u+1]=0:(r=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=s*o*e[u])))}(t,r,s),function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=Wv(n),r=t.length;let s,o,a,l=Bv(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=Bv(t,c+1),!a)continue;const r=a[n],u=a[i];o&&(s=(r-o[n])/3,a["cp1".concat(n)]=r-s,a["cp1".concat(i)]=u-s*e[c]),l&&(s=(l[n]-r)/3,a["cp2".concat(n)]=r+s,a["cp2".concat(i)]=u+s*e[c])}}(t,s,e)}function Gv(t,e,n){return Math.max(Math.min(t,n),e)}function Kv(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===e.cubicInterpolationMode)qv(t,r);else{let n=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=Hv(n,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}e.capBezierPoints&&function(t,e){let n,i,r,s,o,a=av(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&av(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=Gv(r.cp1x,e.left,e.right),r.cp1y=Gv(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Gv(r.cp2x,e.left,e.right),r.cp2y=Gv(r.cp2y,e.top,e.bottom)))}(t,n)}function Qv(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Yv(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function Xv(t,e,n){let i;return"string"===typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const Jv=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const $v=["top","right","bottom","left"];function Zv(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=$v[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function tb(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Jv(n),s="border-box"===r.boxSizing,o=Zv(r,"padding"),a=Zv(r,"border","width"),{x:l,y:c,box:u}=function(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o,a,l=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(r,s,t.target))o=r,a=s;else{const t=e.getBoundingClientRect();o=i.clientX-t.left,a=i.clientY-t.top,l=!0}return{x:o,y:a,box:l}}(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}const eb=t=>Math.round(10*t)/10;function nb(t,e,n,i){const r=Jv(t),s=Zv(r,"margin"),o=Xv(r.maxWidth,t,"clientWidth")||iy,a=Xv(r.maxHeight,t,"clientHeight")||iy,l=function(t,e,n){let i,r;if(void 0===e||void 0===n){const s=t&&Yv(t);if(s){const t=s.getBoundingClientRect(),o=Jv(s),a=Zv(o,"border","width"),l=Zv(o,"padding");e=t.width-l.width-a.width,n=t.height-l.height-a.height,i=Xv(o.maxWidth,s,"clientWidth"),r=Xv(o.maxHeight,s,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||iy,maxHeight:r||iy}}(t,e,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const t=Zv(r,"border","width"),e=Zv(r,"padding");c-=e.width+t.width,u-=e.height+t.height}c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=eb(Math.min(c,o,l.maxWidth)),u=eb(Math.min(u,a,l.maxHeight)),c&&!u&&(u=eb(c/2));return(void 0!==e||void 0!==n)&&i&&l.height&&u>l.height&&(u=l.height,c=eb(Math.floor(u*i))),{width:c,height:u}}function ib(t,e,n){const i=e||1,r=eb(t.height*i),s=eb(t.width*i);t.height=eb(t.height),t.width=eb(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(t.height,"px"),o.style.width="".concat(t.width,"px")),(t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s)&&(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0)}const rb=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Qv()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(e){}return t}();function sb(t,e){const n=function(t,e){return Jv(t).getPropertyValue(e)}(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ob(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function ab(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function lb(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=ob(t,r,n),a=ob(r,s,n),l=ob(s,e,n),c=ob(o,a,n),u=ob(a,l,n);return ob(c,u,n)}function cb(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function ub(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function hb(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function db(t){return"angle"===t?{between:xy,compare:by,normalize:wy}:{between:Ey,compare:(t,e)=>t-e,normalize:t=>t}}function fb(t){let{start:e,end:n,count:i,loop:r,style:s}=t;return{start:e%i,end:n%i,loop:r&&(n-e+1)%i===0,style:s}}function pb(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=db(i),{start:u,end:h,loop:d,style:f}=function(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=db(i),l=e.length;let c,u,{start:h,end:d,loop:f}=t;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&o(a(e[h%l][i]),r,s);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:t.style}}(t,e,n),p=[];let g,m,y,v=!1,b=null;const w=()=>v||l(r,y,g)&&0!==a(r,y),x=()=>!v||0===a(s,g)||l(s,y,g);for(let _=u,E=u;_<=h;++_)m=e[_%o],m.skip||(g=c(m[i]),g!==y&&(v=l(g,r,s),null===b&&w()&&(b=0===a(g,r)?_:E),null!==b&&x()&&(p.push(fb({start:b,end:_,loop:d,count:o,style:f})),b=null),E=_,y=g));return null!==b&&p.push(fb({start:b,end:h,loop:d,count:o,style:f})),p}function gb(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=pb(i[r],t.points,e);s.length&&n.push(...s)}return n}function mb(t,e,n,i){return i&&i.setContext&&n?function(t,e,n,i){const r=t._chart.getContext(),s=yb(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,h=e[0].start,d=h;function f(t,e,i,r){const s=a?-1:1;if(t!==e){for(t+=l;n[t%l].skip;)t-=s;for(;n[e%l].skip;)e+=s;t%l!==e%l&&(c.push({start:t%l,end:e%l,loop:i,style:r}),u=r,h=e%l)}}for(const p of e){h=a?h:p.start;let t,e=n[h%l];for(d=h+1;d<=p.end;d++){const s=n[d%l];t=yb(i.setContext(Tv(r,{type:"segment",p0:e,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),vb(t,u)&&f(h,d-1,p.loop,u),e=s,u=t}h<d-1&&f(h,d-1,p.loop,u)}return c}(t,e,n,i):e}function yb(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function vb(t,e){if(!e)return!1;const n=[],i=function(t,e){return Vy(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function bb(t,e,n){return t.options.clip?t[n]:e[n]}function wb(t,e){const n=e._clip;if(n.disabled)return!1;const i=function(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:bb(n,e,"left"),right:bb(n,e,"right"),top:bb(i,e,"top"),bottom:bb(i,e,"bottom")}:e}(e,t.chartArea);return{left:!1===n.left?0:i.left-(!0===n.left?0:n.left),right:!1===n.right?t.width:i.right+(!0===n.right?0:n.right),top:!1===n.top?0:i.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?t.height:i.bottom+(!0===n.bottom?0:n.bottom)}}class xb{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const r=e.listeners[i],s=e.duration;r.forEach(i=>i({chart:t,initial:e.initial,numSteps:s,currentStep:Math.min(n-e.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=Ny.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),e=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,o=r.length-1,a=!1;for(;o>=0;--o)s=r[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,n,t,"progress")),r.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=r.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var _b=new xb;const Eb="transparent",Sb={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=zy(t||Eb),r=i.valid&&zy(e||Eb);return r&&r.valid?r.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class kb{constructor(t,e,n,i){const r=e[n];i=kv([t.to,i,r,t.from]);const s=kv([t.from,r,i]);this._active=!0,this._fn=t.fn||Sb[t.type||typeof s],this._easing=Uy[t.easing]||Uy.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=kv([t.to,e,i,t.from]),this._from=kv([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,r=this._from,s=this._loop,o=this._to;let a;if(this._active=r!==o&&(s||e<n),!this._active)return this._target[i]=o,void this._notify(!0);e<0?this._target[i]=r:(a=e/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[i]=this._fn(r,o,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][e]()}}class Tb{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Om(t))return;const e=Object.keys(tv.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!Om(r))return;const s={};for(const t of e)s[t]=r[t];(Rm(r.properties)&&r.properties||[i]).forEach(t=>{t!==i&&n.has(t)||n.set(t,s)})})}_animateOptions(t,e){const n=e.options,i=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const e=t[i[r]];e&&e.active()&&n.push(e.wait())}return Promise.all(n)}(t.options.$animations,n).then(()=>{t.options=n},()=>{}),r}_createAnimations(t,e){const n=this._properties,i=[],r=t.$animations||(t.$animations={}),s=Object.keys(e),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(t,e));continue}const c=e[l];let u=r[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,o);continue}u.cancel()}h&&h.duration?(r[l]=u=new kb(h,t,l,c),i.push(u)):t[l]=c}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(_b.add(this._chart,n),!0):void 0}}function Ib(t,e){const n=t&&t.options||{},i=n.reverse,r=void 0===n.min?e:0,s=void 0===n.max?e:0;return{start:i?s:r,end:i?r:s}}function Cb(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function Ab(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=t.keys,s="single"===i.mode;let o,a,l,c;if(null===e)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,i.all)continue;break}c=t.values[l],Dm(c)&&(s||0===e||cy(e)===cy(c))&&(e+=c)}return u||i.all?e:0}function Nb(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function Pb(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Mb(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const e=t[r.index];if(n&&e>0||!n&&e<0)return r.index}return null}function Rb(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=function(t,e,n){return"".concat(t.id,".").concat(e.id,".").concat(n.stack||n.type)}(s,o,i),h=e.length;let d;for(let f=0;f<h;++f){const t=e[f],{[l]:n,[c]:s}=t;d=(t._stacks||(t._stacks={}))[c]=Pb(r,u,n),d[a]=s,d._top=Mb(d,o,!0,i.type),d._bottom=Mb(d,o,!1,i.type);(d._visualValues||(d._visualValues={}))[a]=s}}function Ob(t,e){const n=t.scales;return Object.keys(n).filter(t=>n[t].axis===e).shift()}function Db(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n],void 0!==e[i]._visualValues&&void 0!==e[i]._visualValues[n]&&delete e[i]._visualValues[n]}}}const Lb=t=>"reset"===t||"none"===t,Fb=(t,e)=>e?t:Object.assign({},t);class jb{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Nb(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Db(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,r=e.xAxisID=Fm(n.xAxisID,Ob(t,"x")),s=e.yAxisID=Fm(n.yAxisID,Ob(t,"y")),o=e.rAxisID=Fm(n.rAxisID,Ob(t,"r")),a=e.indexAxis,l=e.iAxisID=i(a,r,s,o),c=e.vAxisID=i(a,s,r,o);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(s),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Cy(this._data,this),t._stacked&&Db(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(Om(e)){const t=this._cachedMeta;this._data=function(t,e){const{iScale:n,vScale:i}=e,r="x"===n.axis?"x":"y",s="x"===i.axis?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:t[u]};return a}(e,t)}else if(n!==e){if(n){Cy(n,this);const t=this._cachedMeta;Db(t),t._parsed=[]}e&&Object.isExtensible(e)&&(r=this,(i=e)._chartjs?i._chartjs.listeners.push(r):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),Iy.forEach(t=>{const e="_onData"+Xm(t),n=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];const o=n.apply(this,r);return i._chartjs.listeners.forEach(t=>{"function"===typeof t[e]&&t[e](...r)}),o}})}))),this._syncList=[],this._data=e}var i,r}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=Nb(e.vScale,e),e.stack!==n.stack&&(i=!0,Db(e),e.stack=n.stack),this._resyncElements(t),(i||r!==e._stacked)&&(Rb(this,e._parsed),e._stacked=Nb(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:s}=n,o=r.axis;let a,l,c,u=0===t&&e===i.length||n._sorted,h=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=Rm(i[t])?this.parseArrayData(n,i,t,e):Om(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const r=()=>null===l[o]||h&&l[o]<h[o];for(a=0;a<e;++a)n._parsed[a+t]=l=c[a],u&&(r()&&(u=!1),h=l);n._sorted=u}s&&Rb(this,c)}parsePrimitiveData(t,e,n,i){const{iScale:r,vScale:s}=t,o=r.axis,a=s.axis,l=r.getLabels(),c=r===s,u=new Array(i);let h,d,f;for(h=0,d=i;h<d;++h)f=h+n,u[h]={[o]:c||r.parse(l[f],f),[a]:s.parse(e[f],f)};return u}parseArrayData(t,e,n,i){const{xScale:r,yScale:s}=t,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=e[c],o[a]={x:r.parse(u[0],c),y:s.parse(u[1],c)};return o}parseObjectData(t,e,n,i){const{xScale:r,yScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(i);let c,u,h,d;for(c=0,u=i;c<u;++c)h=c+n,d=e[h],l[c]={x:r.parse(Ym(d,o),h),y:s.parse(Ym(d,a),h)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,r=this._cachedMeta,s=e[t.axis];return Ab({keys:Cb(i,!0),values:e._stacks[t.axis]._visualValues},s,r.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const r=n[e.axis];let s=null===r?NaN:r;const o=i&&n._stacks[e.axis];i&&o&&(i.values=o,s=Ab(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&t===n.iScale,s=i.length,o=this._getOtherScale(t),a=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Cb(n,!0),values:null})(e,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(o);let h,d;function f(){d=i[h];const e=d[o.axis];return!Dm(d[t.axis])||c>e||u<e}for(h=0;h<s&&(f()||(this.updateRangeFromParsed(l,t,d,a),!r));++h);if(r)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,t,d,a);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i][t.axis],Dm(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,i,r;return Om(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:!1===t}}(Fm(this.options.clip,function(t,e,n){if(!1===n)return!1;const i=Ib(t,n),r=Ib(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],r=e.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||i.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,r,o,a),c=o;c<o+a;++c){const e=i[c];e.hidden||(e.active&&l?s.push(e):e.draw(t,r))}for(c=0;c<s.length;++c)s[c].draw(t,r)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];r=e.$context||(e.$context=function(t,e,n){return Tv(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=function(t,e){return Tv(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===e,r=this._cachedDataOpts,s=t+"-"+e,o=r[s],a=this.enableOptionSharing&&Jm(n);if(o)return Fb(o,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),u=i?["".concat(t,"Hover"),"hover",t,""]:[t,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(tv.elements[t]),f=l.resolveNamedOptions(h,d,()=>this.getContext(n,i,e),u);return f.$shared&&(f.$shared=a,r[s]=Object.freeze(Fb(f,a))),f}_resolveAnimations(t,e,n){const i=this.chart,r=this._cachedDataOpts,s="animation-".concat(e),o=r[s];if(o)return o;let a;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,e),s=i.getOptionScopes(this.getDataset(),r);a=i.createResolver(s,this.getContext(t,n,e))}const l=new Tb(i,a&&a.animations);return a&&a._cacheable&&(r[s]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Lb(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),i=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(e,r)||r!==i;return this.updateSharedOptions(r,e,n),{sharedOptions:r,includeOptions:s}}updateElement(t,e,n,i){Lb(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!Lb(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[o,a,l]of this._syncList)this[o](a,l);this._syncList=[];const i=n.length,r=e.length,s=Math.min(r,i);s&&this.parse(0,s),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,s=t+e;let o;const a=t=>{for(t.length+=e,o=t.length-1;o>=s;o--)t[o]=t[o-e]};for(a(r),o=t;o<s;++o)r[o]=new this.dataElementType;this._parsing&&a(i._parsed),this.parse(t,e),n&&this.updateElements(r,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&Db(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Ub(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,r=n.length;e<r;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=Ay(i.sort((t,e)=>t-e))}return t._cache.$bar}(e,t.type);let i,r,s,o,a=e._length;const l=()=>{32767!==s&&-32768!==s&&(Jm(o)&&(a=Math.min(a,Math.abs(s-o)||a)),o=s)};for(i=0,r=n.length;i<r;++i)s=e.getPixelForValue(n[i]),l();for(o=void 0,i=0,r=e.ticks.length;i<r;++i)s=e.getPixelForTick(i),l();return a}function Vb(t,e,n,i){return Rm(t)?function(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function zb(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=e[c],h={},h[r.axis]=a||r.parse(o[c],c),l.push(Vb(d,h,s,c));return l}function Bb(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function Wb(t,e,n,i){let r=e.borderSkipped;const s={};if(!r)return void(t.borderSkipped=s);if(!0===r)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:u}=function(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}(t);"middle"===r&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[Hb(u,o,a,l)]=!0,r=c)),s[Hb(r,o,a,l)]=!0,t.borderSkipped=s}function Hb(t,e,n,i){var r,s,o;return i?(o=n,t=qb(t=(r=t)===(s=e)?o:r===o?s:r,n,e)):t=qb(t,e,n),t}function qb(t,e,n){return"start"===t?e:"end"===t?n:t}function Gb(t,e,n){let{inflateAmount:i}=e;t.inflateAmount="auto"===i?1===n?.33:0:i}H(jb,"defaults",{}),H(jb,"datasetElementType",null),H(jb,"dataElementType",null);class Kb extends jb{parsePrimitiveData(t,e,n,i){return zb(t,e,n,i)}parseArrayData(t,e,n,i){return zb(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:r,vScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l="x"===r.axis?o:a,c="x"===s.axis?o:a,u=[];let h,d,f,p;for(h=n,d=n+i;h<d;++h)p=e[h],f={},f[r.axis]=r.parse(Ym(p,l),h),u.push(Vb(Ym(p,c),f,s,h));return u}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const r=n._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,r=this.getParsed(t),s=r._custom,o=Bb(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const r="reset"===i,{index:s,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(e,i);for(let d=e;d<e+n;d++){const e=this.getParsed(d),n=r||Mm(e[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(e._stacks||{})[o.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||Bb(e._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(g.options=u||this.resolveDataElementOptions(d,t[d].active?"active":i));const m=g.options||t[d].options;Wb(g,m,p,s),Gb(g,m,c.ratio),this.updateElement(t[d],d,g,i)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(t=>t.controller.options.grouped),r=n.options.stacked,s=[],o=this._cachedMeta.controller.getParsed(e),a=o&&o[n.axis],l=t=>{const e=t._parsed.find(t=>t[n.axis]===a),i=e&&e[t.vScale.axis];if(Mm(i)||isNaN(i))return!0};for(const c of i)if((void 0===e||!l(c))&&((!1===r||-1===s.indexOf(c.stack)||void 0===r&&void 0===c.stack)&&s.push(c.stack),c.index===t))break;return s.length||s.push(void 0),s}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[Fm("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,n){const i=this._getStacks(t,n),r=void 0!==e?i.indexOf(e):-1;return-1===r?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let r,s;for(r=0,s=e.data.length;r<s;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const o=t.barThickness;return{min:o||Ub(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:i},options:{base:r,minBarLength:s}}=this,o=r||0,a=this.getParsed(t),l=a._custom,c=Bb(l);let u,h,d=a[e.axis],f=0,p=n?this.applyStack(e,a,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&cy(d)!==cy(l.barEnd)&&(f=0),f+=d);const g=Mm(r)||c?f:r;let m=e.getPixelForValue(g);if(u=this.chart.getDataVisibility(t)?e.getPixelForValue(f+p):m,h=u-m,Math.abs(h)<s){h=function(t,e,n){return 0!==t?cy(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(h,e,o)*s,d===o&&(m-=h/2);const t=e.getPixelForDecimal(0),r=e.getPixelForDecimal(1),l=Math.min(t,r),f=Math.max(t,r);m=Math.max(Math.min(m,f),l),u=m+h,n&&!c&&(a._stacks[e.axis]._visualValues[i]=e.getValueForPixel(u)-e.getValueForPixel(m))}if(m===e.getPixelForValue(o)){const t=cy(h)*e.getLineWidthForValue(o)/2;m+=t,h-=t}return{size:h,base:m,head:u,center:u+h/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,r=i.skipNull,s=Fm(i.maxBarThickness,1/0);let o,a;const l=this._getAxisCount();if(e.grouped){const n=r?this._getStackCount(t):e.stackCount,c="flex"===i.barThickness?function(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;null===o&&(o=s-(null===a?e.end-e.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}(t,e,i,n*l):function(t,e,n,i){const r=n.barThickness;let s,o;return Mm(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}(t,e,i,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,h=this._getAxis().indexOf(Fm(u,this.getFirstScaleIdForIndexAxis())),d=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+h;o=c.start+c.chunk*d+c.chunk/2,a=Math.min(s,c.chunk*c.ratio)}else o=n.getPixelForValue(this.getParsed(t)[n.axis],t),a=Math.min(s,e.min*e.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let r=0;for(;r<i;++r)null===this.getParsed(r)[e.axis]||n[r].hidden||n[r].draw(this._ctx)}}H(Kb,"id","bar"),H(Kb,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),H(Kb,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Qb extends jb{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const r=super.parsePrimitiveData(t,e,n,i);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+n).radius;return r}parseArrayData(t,e,n,i){const r=super.parseArrayData(t,e,n,i);for(let s=0;s<r.length;s++){const t=e[n+s];r[s]._custom=Fm(t[2],this.resolveDataElementOptions(s+n).radius)}return r}parseObjectData(t,e,n,i){const r=super.parseObjectData(t,e,n,i);for(let s=0;s<r.length;s++){const t=e[n+s];r[s]._custom=Fm(t&&t.r&&+t.r,this.resolveDataElementOptions(s+n).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,s=this.getParsed(t),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y),l=s._custom;return{label:n[t]||"",value:"("+o+", "+a+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(e,i),c=s.axis,u=o.axis;for(let h=e;h<e+n;h++){const e=t[h],n=!r&&this.getParsed(h),d={},f=d[c]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=d[u]=r?o.getBasePixel():o.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=a||this.resolveDataElementOptions(h,e.active?"active":i),r&&(d.options.radius=0)),this.updateElement(e,h,d,i)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==e&&(i.radius=0),i.radius+=Fm(n&&n._custom,r),i}}H(Qb,"id","bubble"),H(Qb,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),H(Qb,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class Yb extends jb{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,s,o=t=>+n[t];if(Om(n[t])){const{key:t="value"}=this._parsing;o=e=>+Ym(n[e],t)}for(r=t,s=t+e;r<s;++r)i._parsed[r]=o(r)}}_getRotation(){return py(this.options.rotation-90)}_getCircumference(){return py(this.options.circumference)}_getRotationExtents(){let t=ey,e=-ey;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+s)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min((l=this.options.cutout,c=o,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(t,e,n){let i=1,r=1,s=0,o=0;if(e<ey){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(t,e,i)=>xy(t,a,l,!0)?1:Math.max(e,e*n,i,i*n),p=(t,e,i)=>xy(t,a,l,!0)?-1:Math.min(e,e*n,i,i*n),g=f(0,c,h),m=f(sy,u,d),y=p(ty,c,h),v=p(ty+sy,u,d);i=(g-y)/2,r=(m-v)/2,s=-(g+y)/2,o=-(m+v)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}(d,h,a),y=(n.width-s)/f,v=(n.height-s)/p,b=Math.max(Math.min(y,v)/2,0),w=jm(this.options.radius,b),x=(w-Math.max(w*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=m*w,i.total=this.calculateTotal(),this.outerRadius=w-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*u,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/ey)}updateElements(t,e,n,i){const r="reset"===i,s=this.chart,o=s.chartArea,a=s.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,u=r&&a.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(e,i);let g,m=this._getRotation();for(g=0;g<e;++g)m+=this._circumference(g,r);for(g=e;g<e+n;++g){const e=this._circumference(g,r),n=t[g],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:d,innerRadius:h};p&&(s.options=f||this.resolveDataElementOptions(g,n.active?"active":i)),m+=e,this.updateElement(n,g,s,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const r=t._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?ey*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Gy(e._parsed[t],n.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,r,s,o,a;if(!t)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),t=s.data,o=s.controller;break}if(!t)return 0;for(i=0,r=t.length;i<r;++i)a=o.resolveDataElementOptions(i),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(Fm(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}H(Yb,"id","doughnut"),H(Yb,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),H(Yb,"descriptors",{_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),H(Yb,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:n,textAlign:i,color:r,useBorderRadius:s,borderRadius:o}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((e,a)=>{const l=t.getDatasetMeta(0).controller.getStyle(a);return{text:e,fillStyle:l.backgroundColor,fontColor:r,hidden:!t.getDataVisibility(a),lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:l.borderWidth,strokeStyle:l.borderColor,textAlign:i,pointStyle:n,borderRadius:s&&(o||l.borderRadius),index:a}}):[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}});class Xb extends jb{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=e,s=this.chart._animationsDisabled;let{start:o,count:a}=Oy(e,i,s);this._drawStart=o,this._drawCount=a,Dy(e)&&(o=0,a=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},t),this.updateElements(i,o,a,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,i),h=s.axis,d=o.axis,{spanGaps:f,segment:p}=this.options,g=dy(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||r||"none"===i,y=e+n,v=t.length;let b=e>0&&this.getParsed(e-1);for(let w=0;w<v;++w){const n=t[w],f=m?n:{};if(w<e||w>=y){f.skip=!0;continue}const v=this.getParsed(w),x=Mm(v[d]),_=f[h]=s.getPixelForValue(v[h],w),E=f[d]=r||x?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,v,a):v[d],w);f.skip=isNaN(_)||isNaN(E)||x,f.stop=w>0&&Math.abs(v[h]-b[h])>g,p&&(f.parsed=v,f.raw=l.data[w]),u&&(f.options=c||this.resolveDataElementOptions(w,n.active?"active":i)),m||this.updateElement(n,w,f,i),b=v}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,s)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}H(Xb,"id","line"),H(Xb,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),H(Xb,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Jb extends jb{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Gy(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:r}}parseObjectData(t,e,n,i){return Vv.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((t,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<e.min&&(e.min=i),i>e.max&&(e.max=i))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(i/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(t,e,n,i){const r="reset"===i,s=this.chart,o=s.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,u=a.getIndexAngle(0)-.5*ty;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<e;++h)d+=this._computeAngle(h,i,f);for(h=e;h<e+n;h++){const e=t[h];let n=d,p=d+this._computeAngle(h,i,f),g=s.getDataVisibility(h)?a.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,r&&(o.animateScale&&(g=0),o.animateRotate&&(n=p=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,e.active?"active":i)};this.updateElement(e,h,m,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++}),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?py(this.resolveDataElementOptions(t,e).angle||n):0}}H(Jb,"id","polarArea"),H(Jb,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),H(Jb,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map((e,r)=>{const s=t.getDatasetMeta(0).controller.getStyle(r);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class $b extends Yb{}H($b,"id","pie"),H($b,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Zb extends jb{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return Vv.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],r=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===i.length,options:e};this.updateElement(n,void 0,s,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const r=this._cachedMeta.rScale,s="reset"===i;for(let o=e;o<e+n;o++){const e=t[o],n=this.resolveDataElementOptions(o,e.active?"active":i),a=r.getPointPositionForValue(o,this.getParsed(o).r),l=s?r.xCenter:a.x,c=s?r.yCenter:a.y,u={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,o,u,i)}}}H(Zb,"id","radar"),H(Zb,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),H(Zb,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class tw extends jb{getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,s=this.getParsed(t),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y);return{label:n[t]||"",value:"("+o+", "+a+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,i=this.chart._animationsDisabled;let{start:r,count:s}=Oy(e,n,i);if(this._drawStart=r,this._drawCount=s,Dy(e)&&(r=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:s}=e;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const o=this.resolveDatasetElementOptions(t);o.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:o},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,r,s,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,i),u=this.getSharedOptions(c),h=this.includeOptions(i,u),d=s.axis,f=o.axis,{spanGaps:p,segment:g}=this.options,m=dy(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||"none"===i;let v=e>0&&this.getParsed(e-1);for(let b=e;b<e+n;++b){const e=t[b],n=this.getParsed(b),c=y?e:{},p=Mm(n[f]),w=c[d]=s.getPixelForValue(n[d],b),x=c[f]=r||p?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[f],b);c.skip=isNaN(w)||isNaN(x)||p,c.stop=b>0&&Math.abs(n[d]-v[d])>m,g&&(c.parsed=n,c.raw=l.data[b]),h&&(c.options=u||this.resolveDataElementOptions(b,e.active?"active":i)),y||this.updateElement(e,b,c,i),v=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!e.length)return i;const r=e[0].size(this.resolveDataElementOptions(0)),s=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,r,s)/2}}H(tw,"id","scatter"),H(tw,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),H(tw,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var ew=Object.freeze({__proto__:null,BarController:Kb,BubbleController:Qb,DoughnutController:Yb,LineController:Xb,PieController:$b,PolarAreaController:Jb,RadarController:Zb,ScatterController:tw});function nw(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class iw{static override(t){Object.assign(iw.prototype,t)}constructor(t){H(this,"options",void 0),this.options=t||{}}init(){}formats(){return nw()}parse(){return nw()}format(){return nw()}add(){return nw()}diff(){return nw()}startOf(){return nw()}endOf(){return nw()}}var rw=iw;function sw(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&"r"!==e&&o&&s.length){const o=a._reversePixels?Ty:ky;if(!i){const i=o(s,e,n);if(l){const{vScale:e}=r._cachedMeta,{_parsed:n}=t,s=n.slice(0,i.lo+1).reverse().findIndex(t=>!Mm(t[e.axis]));i.lo-=Math.max(0,s);const o=n.slice(i.hi).findIndex(t=>!Mm(t[e.axis]));i.hi+=Math.max(0,o)}return i}if(r._sharedOptions){const t=s[0],i="function"===typeof t.getRange&&t.getRange(e);if(i){const t=o(s,e,n-i),r=o(s,e,n+i);return{lo:t.lo,hi:r.hi}}}}return{lo:0,hi:s.length-1}}function ow(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:t,data:n}=s[a],{lo:l,hi:c}=sw(s[a],e,o,r);for(let e=l;e<=c;++e){const r=n[e];r.skip||i(r,t,e)}}}function aw(t,e,n,i,r){const s=[];if(!r&&!t.isPointInArea(e))return s;return ow(t,n,e,function(n,o,a){(r||av(n,t.chartArea,0))&&n.inRange(e.x,e.y,i)&&s.push({element:n,datasetIndex:o,index:a})},!0),s}function lw(t,e,n,i,r,s){let o=[];const a=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const r=e?Math.abs(t.x-i.x):0,s=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return ow(t,n,e,function(n,c,u){const h=n.inRange(e.x,e.y,r);if(i&&!h)return;const d=n.getCenterPoint(r);if(!(!!s||t.isPointInArea(d))&&!h)return;const f=a(e,d);f<l?(o=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&o.push({element:n,datasetIndex:c,index:u})}),o}function cw(t,e,n,i,r,s){return s||t.isPointInArea(e)?"r"!==n||i?lw(t,e,n,i,r,s):function(t,e,n,i){let r=[];return ow(t,n,e,function(t,n,s){const{startAngle:o,endAngle:a}=t.getProps(["startAngle","endAngle"],i),{angle:l}=yy(t,{x:e.x,y:e.y});xy(l,o,a)&&r.push({element:t,datasetIndex:n,index:s})}),r}(t,e,n,r):[]}function uw(t,e,n,i,r){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return ow(t,n,e,(t,i,l)=>{t[o]&&t[o](e[n],r)&&(s.push({element:t,datasetIndex:i,index:l}),a=a||t.inRange(e.x,e.y,r))}),i&&!a?[]:s}var hw={evaluateInteractionItems:ow,modes:{index(t,e,n,i){const r=tb(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?aw(t,r,s,i,o):cw(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{const e=a[0].index,n=t.data[e];n&&!n.skip&&l.push({element:n,datasetIndex:t.index,index:e})}),l):[]},dataset(t,e,n,i){const r=tb(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?aw(t,r,s,i,o):cw(t,r,s,!1,i,o);if(a.length>0){const e=a[0].datasetIndex,n=t.getDatasetMeta(e).data;a=[];for(let t=0;t<n.length;++t)a.push({element:n[t],datasetIndex:e,index:t})}return a},point:(t,e,n,i)=>aw(t,tb(e,t),n.axis||"xy",i,n.includeInvisible||!1),nearest(t,e,n,i){const r=tb(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return cw(t,r,s,n.intersect,i,o)},x:(t,e,n,i)=>uw(t,tb(e,t),"x",n.intersect,i),y:(t,e,n,i)=>uw(t,tb(e,t),"y",n.intersect,i)}};const dw=["left","top","right","bottom"];function fw(t,e){return t.filter(t=>t.pos===e)}function pw(t,e){return t.filter(t=>-1===dw.indexOf(t.pos)&&t.box.axis===e)}function gw(t,e){return t.sort((t,n)=>{const i=e?n:t,r=e?t:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function mw(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:r}=n;if(!t||!dw.includes(i))continue;const s=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:o}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*i:o&&e.availableWidth,a.height=r):(a.width=i,a.height=c?c*r:o&&e.availableHeight)}return n}function yw(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function vw(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function bw(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!Om(r)){n.size&&(t[r]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?s.height:s.width),n.size=e.size/e.count,t[r]+=n.size}s.getPadding&&vw(o,s.getPadding());const a=Math.max(0,e.outerWidth-yw(o,t,"left","right")),l=Math.max(0,e.outerHeight-yw(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function ww(t,e){const n=e.maxPadding;function i(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{i[t]=Math.max(e[t],n[t])}),i}return i(t?["left","right"]:["top","bottom"])}function xw(t,e,n,i){const r=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,ww(a.horizontal,e));const{same:o,other:h}=bw(e,n,a,i);c|=o&&r.length,u=u||h,l.fullSize||r.push(a)}return c&&xw(r,e,n,i)||u}function _w(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function Ew(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const t=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const i=e.w*c,s=l.size||t.height;Jm(l.start)&&(o=l.start),t.fullSize?_w(t,r.left,o,n.outerWidth-r.right-r.left,s):_w(t,e.left+l.placed,o,i,s),l.start=o,l.placed+=i,o=t.bottom}else{const i=e.h*c,o=l.size||t.width;Jm(l.start)&&(s=l.start),t.fullSize?_w(t,s,r.top,o,n.outerHeight-r.bottom-r.top):_w(t,s,e.top+l.placed,o,i),l.start=s,l.placed+=i,s=t.right}}e.x=s,e.y=o}var Sw={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=Ev(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=function(t){const e=function(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],({position:s,options:{stack:o,stackWeight:a=1}}=r),e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}(t),n=gw(e.filter(t=>t.box.fullSize),!0),i=gw(fw(e,"left"),!0),r=gw(fw(e,"right")),s=gw(fw(e,"top"),!0),o=gw(fw(e,"bottom")),a=pw(e,"x"),l=pw(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:fw(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}(t.boxes),l=a.vertical,c=a.horizontal;Vm(t.boxes,t=>{"function"===typeof t.beforeLayout&&t.beforeLayout()});const u=l.reduce((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},r);vw(d,Ev(i));const f=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),p=mw(l.concat(c),h);xw(a.fullSize,f,h,p),xw(l,f,h,p),xw(c,f,h,p)&&xw(l,f,h,p),function(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),Ew(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,Ew(a.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Vm(a.chartArea,e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class kw{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class Tw extends kw{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Iw="$chartjs",Cw={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Aw=t=>null===t||""===t;const Nw=!!rb&&{passive:!0};function Pw(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Nw)}function Mw(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Rw(t,e,n){const i=t.canvas,r=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||Mw(n.addedNodes,i),e=e&&!Mw(n.removedNodes,i);e&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function Ow(t,e,n){const i=t.canvas,r=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||Mw(n.removedNodes,i),e=e&&!Mw(n.addedNodes,i);e&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Dw=new Map;let Lw=0;function Fw(){const t=window.devicePixelRatio;t!==Lw&&(Lw=t,Dw.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function jw(t,e,n){const i=t.canvas,r=i&&Yv(i);if(!r)return;const s=Py((t,e)=>{const i=r.clientWidth;n(t,e),i<r.clientWidth&&n()},window),o=new ResizeObserver(t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||s(n,i)});return o.observe(r),function(t,e){Dw.size||window.addEventListener("resize",Fw),Dw.set(t,e)}(t,s),o}function Uw(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){Dw.delete(t),Dw.size||window.removeEventListener("resize",Fw)}(t)}function Vw(t,e,n){const i=t.canvas,r=Py(e=>{null!==t.ctx&&n(function(t,e){const n=Cw[t.type]||t.type,{x:i,y:r}=tb(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==r?r:null}}(e,t))},t);return function(t,e,n){t&&t.addEventListener(e,n,Nw)}(i,e,r),r}class zw extends kw{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Iw]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Aw(r)){const e=sb(t,"width");void 0!==e&&(t.width=e)}if(Aw(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=sb(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Iw])return!1;const n=e[Iw].initial;["height","width"].forEach(t=>{const i=n[t];Mm(i)?e.removeAttribute(t):e.setAttribute(t,i)});const i=n.style||{};return Object.keys(i).forEach(t=>{e.style[t]=i[t]}),e.width=e.width,delete e[Iw],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),r={attach:Rw,detach:Ow,resize:jw}[e]||Vw;i[e]=r(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];if(!i)return;({attach:Uw,detach:Uw,resize:Uw}[e]||Pw)(t,e,i),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return nb(t,e,n,i)}isAttached(t){const e=t&&Yv(t);return!(!e||!e.isConnected)}}class Bw{constructor(){H(this,"x",void 0),H(this,"y",void 0),H(this,"active",!1),H(this,"options",void 0),H(this,"$animations",void 0)}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return dy(this.x)&&dy(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach(t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]}),i}}function Ww(t,e){const n=t.options.ticks,i=function(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?function(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return function(t,e,n,i){let r,s=0,o=n[0];for(i=Math.ceil(i),r=0;r<t.length;r++)r===o&&(e.push(t[r]),s++,o=n[s*i])}(e,c,s,o/r),c;const u=function(t,e,n){const i=function(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),r=e.length/n;if(!i)return Math.max(r,1);const s=function(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort((t,e)=>t-e).pop(),e}(i);for(let o=0,a=s.length-1;o<a;o++){const t=s[o];if(t>r)return t}return Math.max(r,1)}(s,e,r);if(o>0){let t,n;const i=o>1?Math.round((l-a)/(o-1)):null;for(Hw(e,c,u,Mm(i)?0:a-i,a),t=0,n=o-1;t<n;t++)Hw(e,c,u,s[t],s[t+1]);return Hw(e,c,u,l,Mm(i)?e.length:l+i),c}return Hw(e,c,u),c}function Hw(t,e,n,i,r){const s=Fm(i,0),o=Math.min(Fm(r,t.length),t.length);let a,l,c,u=0;for(n=Math.ceil(n),r&&(a=r-i,n=a/Math.floor(a/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<o;l++)l===c&&(e.push(t[l]),u++,c=Math.round(s+u*n))}H(Bw,"defaults",{}),H(Bw,"defaultRoutes",void 0);const qw=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,Gw=(t,e)=>Math.min(e||t,t);function Kw(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function Qw(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l,c=t.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-s,o-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(r-1))/2,c+=r<e?l:-l,c<s-a||c>o+a)))return c}function Yw(t){return t.drawTicks?t.tickLength:0}function Xw(t,e){if(!t.display)return 0;const n=Sv(t.font,e),i=Ev(t.padding);return(Rm(t.text)?t.text.length:1)*n.lineHeight+i.height}function Jw(t,e,n){let i=My(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}class $w extends Bw{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=Lm(t,Number.POSITIVE_INFINITY),e=Lm(e,Number.NEGATIVE_INFINITY),n=Lm(n,Number.POSITIVE_INFINITY),i=Lm(i,Number.NEGATIVE_INFINITY),{min:Lm(t,n),max:Lm(e,i),minDefined:Dm(t),maxDefined:Dm(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)e=o[a].controller.getMinMax(this,t),r||(n=Math.min(n,e.min)),s||(i=Math.max(i,e.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Lm(n,Lm(i,n)),max:Lm(i,Lm(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Um(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:r,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:i,max:r}=t,s=jm(e,(r-i)/2),o=(t,e)=>n&&0===t?0:t+e;return{min:o(i,-Math.abs(s)),max:o(r,s)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?Kw(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Ww(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Um(this.options.afterUpdate,[this])}beforeSetDimensions(){Um(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Um(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Um(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Um(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,r;for(n=0,i=t.length;n<i;n++)r=t[n],r.label=Um(e.callback,[r.value,n,t],this)}afterTickToLabelConversion(){Um(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Um(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=Gw(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,r=e.maxRotation;let s,o,a,l=i;if(!this._isVisible()||!e.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=_y(this.chart.width-u,0,this.maxWidth);s=t.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(t.offset?.5:1)),o=this.maxHeight-Yw(t.grid)-e.padding-Xw(t.title,this.chart.options.font),a=Math.sqrt(u*u+h*h),l=gy(Math.min(Math.asin(_y((c.highest.height+6)/s,-1,1)),Math.asin(_y(o/a,-1,1))-Math.asin(_y(h/a,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){Um(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Um(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:r}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=Xw(i,e.options.font);if(o?(t.width=this.maxWidth,t.height=Yw(r)+s):(t.height=this.maxHeight,t.width=Yw(r)+s),n.display&&this.ticks.length){const{first:e,last:i,widest:r,highest:s}=this._getLabelSizes(),a=2*n.padding,l=py(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(o){const e=n.mirror?0:u*r.width+c*s.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=n.mirror?0:c*r.width+u*s.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,i,u,c)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:r,padding:s},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;a?l?(u=i*t.width,h=n*e.height):(u=n*t.height,h=i*e.width):"start"===r?h=e.width:"end"===r?u=t.width:"inner"!==r&&(u=t.width/2,h=e.width/2),this.paddingLeft=Math.max((u-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=e.height/2,i=t.height/2;"start"===r?(n=0,i=t.height):"end"===r&&(n=e.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Um(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)Mm(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=Kw(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:i,_longestTextCache:r}=this,s=[],o=[],a=Math.floor(e/Gw(e,n));let l,c,u,h,d,f,p,g,m,y,v,b=0,w=0;for(l=0;l<e;l+=a){if(h=t[l].label,d=this._resolveTickFontOptions(l),i.font=f=d.string,p=r[f]=r[f]||{data:{},gc:[]},g=d.lineHeight,m=y=0,Mm(h)||Rm(h)){if(Rm(h))for(c=0,u=h.length;c<u;++c)v=h[c],Mm(v)||Rm(v)||(m=ev(i,p.data,p.gc,m,v),y+=g)}else m=ev(i,p.data,p.gc,m,h),y=g;s.push(m),o.push(y),b=Math.max(m,b),w=Math.max(y,w)}!function(t,e){Vm(t,t=>{const n=t.gc,i=n.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[n[r]];n.splice(0,i)}})}(r,e);const x=s.indexOf(b),_=o.indexOf(w),E=t=>({width:s[t]||0,height:o[t]||0});return{first:E(0),last:E(e-1),widest:E(x),highest:E(_),widths:s,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return _y(this._alignToPixels?iv(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return Tv(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=Tv(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=py(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),s=t.autoSkipPadding||0,o=r?r.widest.width+s:0,a=r?r.highest.height+s:0;return this.isHorizontal()?a*n>o*i?o/n:a/i:a*i<o*n?a/n:o/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:r,position:s,border:o}=i,a=r.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),u=Yw(r),h=[],d=o.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(t){return iv(n,t,f)};let m,y,v,b,w,x,_,E,S,k,T,I;if("top"===s)m=g(this.bottom),x=this.bottom-u,E=m-p,k=g(t.top)+p,I=t.bottom;else if("bottom"===s)m=g(this.top),k=t.top,I=g(t.bottom)-p,x=m+p,E=this.top+u;else if("left"===s)m=g(this.right),w=this.right-u,_=m-p,S=g(t.left)+p,T=t.right;else if("right"===s)m=g(this.left),S=t.left,T=g(t.right)-p,w=m+p,_=this.left+u;else if("x"===e){if("center"===s)m=g((t.top+t.bottom)/2+.5);else if(Om(s)){const t=Object.keys(s)[0],e=s[t];m=g(this.chart.scales[t].getPixelForValue(e))}k=t.top,I=t.bottom,x=m+p,E=x+u}else if("y"===e){if("center"===s)m=g((t.left+t.right)/2);else if(Om(s)){const t=Object.keys(s)[0],e=s[t];m=g(this.chart.scales[t].getPixelForValue(e))}w=m-p,_=w-u,S=t.left,T=t.right}const C=Fm(i.ticks.maxTicksLimit,c),A=Math.max(1,Math.ceil(c/C));for(y=0;y<c;y+=A){const t=this.getContext(y),e=r.setContext(t),i=o.setContext(t),s=e.lineWidth,c=e.color,u=i.dash||[],d=i.dashOffset,f=e.tickWidth,p=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;v=Qw(this,y,a),void 0!==v&&(b=iv(n,v,s),l?w=_=S=T=b:x=E=k=I=b,h.push({tx1:w,ty1:x,tx2:_,ty2:E,x1:S,y1:k,x2:T,y2:I,width:s,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,h}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:r}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=r,h=Yw(n.grid),d=h+c,f=u?-c:d,p=-py(this.labelRotation),g=[];let m,y,v,b,w,x,_,E,S,k,T,I,C="middle";if("top"===i)x=this.bottom-f,_=this._getXAxisLabelAlignment();else if("bottom"===i)x=this.top+f,_=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(h);_=t.textAlign,w=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(h);_=t.textAlign,w=t.x}else if("x"===e){if("center"===i)x=(t.top+t.bottom)/2+d;else if(Om(i)){const t=Object.keys(i)[0],e=i[t];x=this.chart.scales[t].getPixelForValue(e)+d}_=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)w=(t.left+t.right)/2-d;else if(Om(i)){const t=Object.keys(i)[0],e=i[t];w=this.chart.scales[t].getPixelForValue(e)}_=this._getYAxisLabelAlignment(h).textAlign}"y"===e&&("start"===a?C="top":"end"===a&&(C="bottom"));const A=this._getLabelSizes();for(m=0,y=o.length;m<y;++m){v=o[m],b=v.label;const t=r.setContext(this.getContext(m));E=this.getPixelForTick(m)+r.labelOffset,S=this._resolveTickFontOptions(m),k=S.lineHeight,T=Rm(b)?b.length:1;const e=T/2,n=t.color,a=t.textStrokeColor,c=t.textStrokeWidth;let h,d=_;if(s?(w=E,"inner"===_&&(d=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),I="top"===i?"near"===l||0!==p?-T*k+k/2:"center"===l?-A.highest.height/2-e*k+k:-A.highest.height+k/2:"near"===l||0!==p?k/2:"center"===l?A.highest.height/2-e*k:A.highest.height-T*k,u&&(I*=-1),0===p||t.showLabelBackdrop||(w+=k/2*Math.sin(p))):(x=E,I=(1-T)*k/2),t.showLabelBackdrop){const e=Ev(t.backdropPadding),n=A.heights[m],i=A.widths[m];let r=I-e.top,s=0-e.left;switch(C){case"middle":r-=n/2;break;case"bottom":r-=n}switch(_){case"center":s-=i/2;break;case"right":s-=i;break;case"inner":m===y-1?s-=i:m>0&&(s-=i/2)}h={left:s,top:r,width:i+e.width,height:n+e.height,color:t.backdropColor}}g.push({label:b,font:S,textOffset:I,options:{rotation:p,color:n,strokeColor:a,strokeWidth:c,textAlign:d,textBaseline:C,translation:[w,x],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-py(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,s=t+r,o=this._getLabelSizes().widest.width;let a,l;return"left"===e?i?(l=this.right+r,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l+=o)):(l=this.right-s,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l=this.left)):"right"===e?i?(l=this.left+r,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l-=o)):(l=this.left+s,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:r,height:s}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,r,s),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex(e=>e.value===t);if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,s;const o=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(r=0,s=i.length;r<s;++r){const t=i[r];e.drawOnChartArea&&o({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&o({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=iv(t,this.left,s)-s/2,c=iv(t,this.right,o)+o/2,u=h=a):(u=iv(t,this.top,s)-s/2,h=iv(t,this.bottom,o)+o/2,l=c=a),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(l,u),e.lineTo(c,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&lv(e,n);const i=this.getLabelItems(t);for(const r of i){const t=r.options,n=r.font;pv(e,r.label,0,r.textOffset,n,t)}n&&cv(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const r=Sv(n.font),s=Ev(n.padding),o=n.align;let a=r.lineHeight/2;"bottom"===e||"center"===e||Om(e)?(a+=s.bottom,Rm(n.text)&&(a+=r.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h,d,f,p=0;const g=o-r,m=a-s;if(t.isHorizontal()){if(d=Ry(i,s,a),Om(n)){const t=Object.keys(n)[0],i=n[t];f=u[t].getPixelForValue(i)+g-e}else f="center"===n?(c.bottom+c.top)/2+g-e:qw(t,n,e);h=a-s}else{if(Om(n)){const t=Object.keys(n)[0],i=n[t];d=u[t].getPixelForValue(i)-m+e}else d="center"===n?(c.left+c.right)/2-m+e:qw(t,n,e);f=Ry(i,o,r),p="left"===n?-sy:sy}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,a,e,o);pv(t,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:h,textAlign:Jw(o,e,i),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=Fm(t.grid&&t.grid.z,-1),i=Fm(t.border&&t.border.z,0);return this._isVisible()&&this.draw===$w.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,s;for(r=0,s=e.length;r<s;++r){const s=e[r];s[n]!==this.id||t&&s.type!==t||i.push(s)}return i}_resolveTickFontOptions(t){return Sv(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Zw{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const i=this.items,r=t.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,function(t,e,n){const i=qm(Object.create(null),[n?tv.get(n):{},tv.get(e),t.defaults]);tv.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");tv.route(s,r,l,a)})}(e,t.defaultRoutes);t.descriptors&&tv.describe(e,t.descriptors)}(t,s,n),this.override&&tv.override(t.id,t.overrides)),s}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in tv[i]&&(delete tv[i][n],this.override&&delete Yy[n])}}class tx{constructor(){this.controllers=new Zw(jb,"datasets",!0),this.elements=new Zw(Bw,"elements"),this.plugins=new Zw(Object,"plugins"),this.scales=new Zw($w,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e)}remove(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e)}addControllers(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.controllers)}addElements(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.elements)}addPlugins(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.plugins)}addScales(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.controllers)}removeElements(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.elements)}removePlugins(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.plugins)}removeScales(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.scales)}_each(t,e,n){[...e].forEach(e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):Vm(e,e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)})})}_exec(t,e,n){const i=Xm(t);Um(n["before"+i],[],n),e[t](n),Um(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var ex=new tx;class nx{constructor(){this._init=void 0}notify(t,e,n,i){if("beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),void 0===this._init)return;const r=i?this._descriptors(t).filter(i):this._descriptors(t),s=this._notify(r,t,e,n);return"afterDestroy"===e&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),s}_notify(t,e,n,i){i=i||{};for(const r of t){const t=r.plugin;if(!1===Um(t[n],[e,i,r.options],t)&&i.cancelable)return!1}return!0}invalidate(){Mm(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=Fm(n.options&&n.options.plugins,{}),r=function(t){const e={},n=[],i=Object.keys(ex.plugins.items);for(let s=0;s<i.length;s++)n.push(ex.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const t=r[s];-1===n.indexOf(t)&&(n.push(t),e[t.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==i||e?function(t,e,n,i){let{plugins:r,localIds:s}=e;const o=[],a=t.getContext();for(const l of r){const e=l.id,r=ix(n[e],i);null!==r&&o.push({plugin:l,options:rx(t.config,{plugin:l,local:s[e]},r,a)})}return o}(t,r,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter(t=>!e.some(e=>t.plugin.id===e.plugin.id));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function ix(t,e){return e||!1!==t?!0===t?{}:t:null}function rx(t,e,n,i){let{plugin:r,local:s}=e;const o=t.pluginScopeKeys(r),a=t.getOptionScopes(n,o);return s&&r.defaults&&a.push(r.defaults),t.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function sx(t,e){const n=tv.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function ox(t){if("x"===t||"y"===t||"r"===t)return t}function ax(t){return"top"===t||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0}function lx(t){if(ox(t))return t;for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(const r of n){const e=r.axis||ax(r.position)||t.length>1&&ox(t[0].toLowerCase());if(e)return e}throw new Error("Cannot determine type of '".concat(t,"' axis. Please provide 'axis' or 'position' option."))}function cx(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function ux(t,e){const n=Yy[t.type]||{scales:{}},i=e.scales||{},r=sx(t.type,e),s=Object.create(null);return Object.keys(i).forEach(e=>{const o=i[e];if(!Om(o))return console.error("Invalid scale configuration for scale: ".concat(e));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(e));const a=lx(e,o,function(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(e=>e.xAxisID===t||e.yAxisID===t);if(n.length)return cx(t,"x",n[0])||cx(t,"y",n[0])}return{}}(e,t),tv.scales[o.type]),l=function(t,e){return t===e?"_index_":"_value_"}(a,r),c=n.scales||{};s[e]=Gm(Object.create(null),[{axis:a},o,c[a],c[l]])}),t.data.datasets.forEach(n=>{const r=n.type||t.type,o=n.indexAxis||sx(r,e),a=(Yy[r]||{}).scales||{};Object.keys(a).forEach(t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,o),r=n[e+"AxisID"]||e;s[r]=s[r]||Object.create(null),Gm(s[r],[{axis:e},i[r],a[t]])})}),Object.keys(s).forEach(t=>{const e=s[t];Gm(e,[tv.scales[e.type],tv.scale])}),s}function hx(t){const e=t.options||(t.options={});e.plugins=Fm(e.plugins,{}),e.scales=ux(t,e)}function dx(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const fx=new Map,px=new Set;function gx(t,e){let n=fx.get(t);return n||(n=e(),fx.set(t,n),px.add(n)),n}const mx=(t,e,n)=>{const i=Ym(e,n);void 0!==i&&t.add(i)};class yx{constructor(t){this._config=function(t){return(t=t||{}).data=dx(t.data),hx(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=dx(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),hx(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return gx(t,()=>[["datasets.".concat(t),""]])}datasetAnimationScopeKeys(t,e){return gx("".concat(t,".transition.").concat(e),()=>[["datasets.".concat(t,".transitions.").concat(e),"transitions.".concat(e)],["datasets.".concat(t),""]])}datasetElementScopeKeys(t,e){return gx("".concat(t,"-").concat(e),()=>[["datasets.".concat(t,".elements.").concat(e),"datasets.".concat(t),"elements.".concat(e),""]])}pluginScopeKeys(t){const e=t.id,n=this.type;return gx("".concat(n,"-plugin-").concat(e),()=>[["plugins.".concat(e),...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:r}=this,s=this._cachedScopes(t,n),o=s.get(e);if(o)return o;const a=new Set;e.forEach(e=>{t&&(a.add(t),e.forEach(e=>mx(a,t,e))),e.forEach(t=>mx(a,i,t)),e.forEach(t=>mx(a,Yy[r]||{},t)),e.forEach(t=>mx(a,tv,t)),e.forEach(t=>mx(a,Xy,t))});const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),px.has(e)&&s.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,Yy[e]||{},tv.datasets[e]||{},{type:e},tv,Xy]}resolveNamedOptions(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:s,subPrefixes:o}=vx(this._resolverCache,t,i);let a=s;if(function(t,e){const{isScriptable:n,isIndexable:i}=Av(t);for(const r of e){const e=n(r),s=i(r),o=(s||e)&&t[r];if(e&&($m(o)||bx(o))||s&&Rm(o))return!0}return!1}(s,e)){r.$shared=!1;a=Cv(s,n=$m(n)?n():n,this.createResolver(t,n,o))}for(const l of e)r[l]=a[l];return r}createResolver(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=vx(this._resolverCache,t,n);return Om(e)?Cv(r,e,void 0,i):r}}function vx(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);if(!s){s={resolver:Iv(e,n),subPrefixes:n.filter(t=>!t.toLowerCase().includes("hover"))},i.set(r,s)}return s}const bx=t=>Om(t)&&Object.getOwnPropertyNames(t).some(e=>$m(t[e]));const wx=["top","bottom","left","right","chartArea"];function xx(t,e){return"top"===t||"bottom"===t||-1===wx.indexOf(t)&&"x"===e}function _x(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Ex(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Um(n&&n.onComplete,[t],e)}function Sx(t){const e=t.chart,n=e.options.animation;Um(n&&n.onProgress,[t],e)}function kx(t){return Qv()&&"string"===typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Tx={},Ix=t=>{const e=kx(t);return Object.values(Tx).filter(t=>t.canvas===e).pop()};function Cx(t,e,n){const i=Object.keys(t);for(const r of i){const i=+r;if(i>=e){const s=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=s)}}}class Ax{static register(){ex.add(...arguments),Nx()}static unregister(){ex.remove(...arguments),Nx()}constructor(t,e){const n=this.config=new yx(e),i=kx(t),r=Ix(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!Qv()||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?Tw:zw}(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,s.aspectRatio),a=o&&o.canvas,l=a&&a.height,c=a&&a.width;this.id=Pm(),this.ctx=o,this.canvas=a,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new nx,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}(t=>this.update(t),s.resizeDelay||0),this._dataChanges=[],Tx[this.id]=this,o&&a?(_b.listen(this,"complete",Ex),_b.listen(this,"progress",Sx),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:r}=this;return Mm(t)?e&&r?r:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ex}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ib(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return rv(this.canvas,this.ctx),this}stop(){return _b.stop(this),this}resize(t,e){_b.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,t,e,r),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,ib(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),Um(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){Vm(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce((t,e)=>(t[e]=!1,t),{});let r=[];e&&(r=r.concat(Object.keys(e).map(t=>{const n=e[t],i=lx(t,n),r="r"===i,s="x"===i;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}}))),Vm(r,e=>{const r=e.options,s=r.id,o=lx(s,r),a=Fm(r.type,e.dtype);void 0!==r.position&&xx(r.position,o)===xx(e.dposition)||(r.position=e.dposition),i[s]=!0;let l=null;if(s in n&&n[s].type===a)l=n[s];else{l=new(ex.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,t)}),Vm(i,(t,e)=>{t||delete n[e]}),Vm(n,t=>{Sw.configure(this,t,t.options),Sw.addBox(this,t)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((t,e)=>t.index-e.index),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(_x("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((t,n)=>{0===e.filter(e=>e===t._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let r=this.getDatasetMeta(n);const s=i.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=i.indexAxis||sx(s,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const e=ex.getController(s),{datasetElementType:i,dataElementType:o}=tv.datasets[s];Object.assign(e,{dataElementType:ex.getElement(o),datasetElementType:i&&ex.getElement(i)}),r.controller=new e(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){Vm(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:t}=this.getDatasetMeta(l),e=!i&&-1===r.indexOf(t);t.buildOrUpdateElements(e),s=Math.max(+t.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||Vm(r,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(_x("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Vm(this.scales,t=>{Sw.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);Zm(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of e){Cx(t,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter(t=>t[0]===e).map((t,e)=>e+","+t.splice(1).join(","))),i=n(0);for(let r=1;r<e;r++)if(!Zm(i,n(r)))return;return Array.from(i).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Sw.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],Vm(this.boxes,t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,e)=>{t._idx=e}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,$m(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(_b.has(this)?this.attached&&!_b.running(this)&&_b.start(this):(this.draw(),Ex({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,e)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,r;for(i=0,r=e.length;i<r;++i){const r=e[i];t&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},i=wb(this,t);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(i&&lv(e,i),t.controller.draw(),i&&cv(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return av(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,i){const r=hw.modes[e];return"function"===typeof r?r(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter(t=>t&&t._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Tv(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"===typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",r=this.getDatasetMeta(t),s=r.controller._resolveAnimations(void 0,i);Jm(e)?(r.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),s.update(r,{visible:n}),this.update(e=>e.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),_b.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),rv(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Tx[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};Vm(this.options.events,t=>n(t,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},r=(t,e)=>{this.canvas&&this.resize(t,e)};let s;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",o)},e.isAttached(this.canvas)?o():s()}unbindEvents(){Vm(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Vm(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let r,s,o,a;for("dataset"===e&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),o=0,a=t.length;o<a;++o){s=t[o];const e=s&&this.getDatasetMeta(s.datasetIndex).controller;e&&e[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(t=>{let{datasetIndex:e,index:n}=t;const i=this.getDatasetMeta(e);if(!i)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:i.data[n],index:n}});!zm(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter(e=>e.plugin.id===t).length}_updateHoverStyles(t,e,n){const i=this.options.hover,r=(t,e)=>t.filter(t=>!e.some(e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)),s=r(e,t),o=n?t:r(t,e);s.length&&this.updateHoverStyle(s,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:r}=this,s=e,o=this._getActiveElements(t,i,n,s),a=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),l=function(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}(t,this._lastEvent,n,a);n&&(this._lastEvent=null,Um(r.onHover,[t,o,this],this),a&&Um(r.onClick,[t,o,this],this));const c=!zm(o,i);return(c||e)&&(this._active=o,this._updateHoverStyles(o,i,e)),this._lastEvent=l,c}_getActiveElements(t,e,n,i){if("mouseout"===t.type)return[];if(!n)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}function Nx(){return Vm(Ax.instances,t=>t._plugins.invalidate())}function Px(t,e,n,i){const r=wv(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-e)/2,o=Math.min(s,i*e/2),a=t=>{const e=(n-Math.min(s,t))*i/2;return _y(t,0,Math.min(s,e))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:_y(r.innerStart,0,o),innerEnd:_y(r.innerEnd,0,o)}}function Mx(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Rx(t,e,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let f=0;const p=r-l;if(i){const t=((u>0?u-i:0)+(h>0?h-i:0))/2;f=(p-(0!==t?p*t/(t+i):p))/2}const g=(p-Math.max(.001,p*h-n/ty)/h)/2,m=l+g+f,y=r-g-f,{outerStart:v,outerEnd:b,innerStart:w,innerEnd:x}=Px(e,d,h,y-m),_=h-v,E=h-b,S=m+v/_,k=y-b/E,T=d+w,I=d+x,C=m+w/T,A=y-x/I;if(t.beginPath(),s){const e=(S+k)/2;if(t.arc(o,a,h,S,e),t.arc(o,a,h,e,k),b>0){const e=Mx(E,k,o,a);t.arc(e.x,e.y,b,k,y+sy)}const n=Mx(I,y,o,a);if(t.lineTo(n.x,n.y),x>0){const e=Mx(I,A,o,a);t.arc(e.x,e.y,x,y+sy,A+Math.PI)}const i=(y-x/d+(m+w/d))/2;if(t.arc(o,a,d,y-x/d,i,!0),t.arc(o,a,d,i,m+w/d,!0),w>0){const e=Mx(T,C,o,a);t.arc(e.x,e.y,w,C+Math.PI,m-sy)}const r=Mx(_,m,o,a);if(t.lineTo(r.x,r.y),v>0){const e=Mx(_,S,o,a);t.arc(e.x,e.y,v,m-sy,S)}}else{t.moveTo(o,a);const e=Math.cos(S)*h+o,n=Math.sin(S)*h+a;t.lineTo(e,n);const i=Math.cos(k)*h+o,r=Math.sin(k)*h+a;t.lineTo(i,r)}t.closePath()}function Ox(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d,borderRadius:f}=l,p="inner"===l.borderAlign;if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=d,p?(t.lineWidth=2*c,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let g=e.endAngle;if(s){Rx(t,e,n,i,g,r);for(let e=0;e<s;++e)t.stroke();isNaN(a)||(g=o+(a%ey||ey))}p&&function(t,e,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;t.beginPath(),t.arc(s,o,a,i-c,n+c),l>r?(c=r/l,t.arc(s,o,l,n+c,i-c,!0)):t.arc(s,o,r,n+sy,i-sy),t.closePath(),t.clip()}(t,e,g),l.selfJoin&&g-o>=ty&&0===f&&"miter"!==u&&function(t,e,n){const{startAngle:i,x:r,y:s,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,h=Math.min(c/o,wy(i-n));if(t.beginPath(),t.arc(r,s,o-c/2,i+h/2,n-h/2),a>0){const e=Math.min(c/a,wy(i-n));t.arc(r,s,a+c/2,n-e/2,i+e/2,!0)}else{const e=Math.min(c/2,o*wy(i-n));if("round"===u)t.arc(r,s,e,n-ty/2,i+ty/2,!0);else if("bevel"===u){const o=2*e*e,a=-o*Math.cos(n+ty/2)+r,l=-o*Math.sin(n+ty/2)+s,c=o*Math.cos(i+ty/2)+r,u=o*Math.sin(i+ty/2)+s;t.lineTo(a,l),t.lineTo(c,u)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}(t,e,g),s||(Rx(t,e,n,i,g,r),t.stroke())}H(Ax,"defaults",tv),H(Ax,"instances",Tx),H(Ax,"overrides",Yy),H(Ax,"registry",ex),H(Ax,"version","4.5.1"),H(Ax,"getChart",Ix);class Dx extends Bw{constructor(t){super(),H(this,"circumference",void 0),H(this,"endAngle",void 0),H(this,"fullCircles",void 0),H(this,"innerRadius",void 0),H(this,"outerRadius",void 0),H(this,"pixelMargin",void 0),H(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=yy(i,{x:t,y:e}),{startAngle:o,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=Fm(u,a-o),f=xy(r,o,a)&&o!==a,p=d>=ey||f,g=Ey(s,l+h,c+h);return p&&g}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:a,spacing:l}=this.options,c=(i+r)/2,u=(s+o+l+a)/2;return{x:e+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/4,r=(e.spacing||0)/2,s=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>ey?Math.floor(n/ey):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const o=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(o)*i,Math.sin(o)*i);const a=i*(1-Math.sin(Math.min(ty,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Rx(t,e,n,i,l,r);for(let e=0;e<s;++e)t.fill();isNaN(a)||(l=o+(a%ey||ey))}Rx(t,e,n,i,l,r),t.fill()}(t,this,a,r,s),Ox(t,this,a,r,s),t.restore()}}function Lx(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;t.lineCap=Fm(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Fm(n.borderDash,e.borderDash)),t.lineDashOffset=Fm(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Fm(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Fm(n.borderWidth,e.borderWidth),t.strokeStyle=Fm(n.borderColor,e.borderColor)}function Fx(t,e,n){t.lineTo(n.x,n.y)}function jx(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function Ux(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=jx(r,n,i),u=function(t){return t.stepped?uv:t.tension||"monotone"===t.cubicInterpolationMode?hv:Fx}(s);let h,d,f,{move:p=!0,reverse:g}=i||{};for(h=0;h<=c;++h)d=r[(a+(g?c-h:h))%o],d.skip||(p?(t.moveTo(d.x,d.y),p=!1):u(t,f,d,g,s.stepped),f=d);return l&&(d=r[(a+(g?c:0))%o],u(t,f,d,g,s.stepped)),!!l}function Vx(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=jx(r,n,i),{move:l=!0,reverse:c}=i||{};let u,h,d,f,p,g,m=0,y=0;const v=t=>(o+(c?a-t:t))%s,b=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(l&&(h=r[v(0)],t.moveTo(h.x,h.y)),u=0;u<=a;++u){if(h=r[v(u)],h.skip)continue;const e=h.x,n=h.y,i=0|e;i===d?(n<f?f=n:n>p&&(p=n),m=(y*m+e)/++y):(b(),t.lineTo(e,n),d=i,y=0,f=p=n),g=n}b()}function zx(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&"monotone"!==e.cubicInterpolationMode&&!e.stepped&&!n?Vx:Ux}H(Dx,"id","arc"),H(Dx,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),H(Dx,"defaultRoutes",{backgroundColor:"backgroundColor"}),H(Dx,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t});const Bx="function"===typeof Path2D;function Wx(t,e,n,i){Bx&&!e.options.segment?function(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),Lx(t,e.options),t.stroke(r)}(t,e,n,i):function(t,e,n,i){const{segments:r,options:s}=e,o=zx(e);for(const a of r)Lx(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}class Hx extends Bw{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;Kv(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=function(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}(n,r,s,i);return mb(t,!0===i?[{start:o,end:a,loop:s}]:function(t,e,n,i){const r=t.length,s=[];let o,a=e,l=t[e];for(o=e+1;o<=n;++o){const n=t[o%r];n.skip||n.stop?l.skip||(i=!1,s.push({start:e%r,end:(o-1)%r,loop:i}),e=a=n.stop?o:null):(a=o,l.skip&&(e=o)),l=n}return null!==a&&s.push({start:e%r,end:a%r,loop:i}),s}(n,o,a<o?a+r:a,!!t._fullLoop&&0===o&&a===r-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],r=this.points,s=gb(this,{property:e,start:i,end:i});if(!s.length)return;const o=[],a=function(t){return t.stepped?ab:t.tension||"monotone"===t.cubicInterpolationMode?lb:ob}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],h=r[c],d=r[u];if(h===d){o.push(h);continue}const f=a(h,d,Math.abs((i-h[e])/(d[e]-h[e])),n.stepped);f[e]=t[e],o.push(f)}return 1===o.length?o[0]:o}pathSegment(t,e,n){return zx(this)(t,this,e,n)}path(t,e,n){const i=this.segments,r=zx(this);let s=this._loop;e=e||0,n=n||this.points.length-e;for(const o of i)s&=r(t,this,o,{start:e,end:e+n-1});return!!s}draw(t,e,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),Wx(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function qx(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}H(Hx,"id","line"),H(Hx,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),H(Hx,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),H(Hx,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t});class Gx extends Bw{constructor(t){super(),H(this,"parsed",void 0),H(this,"skip",void 0),H(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(e-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return qx(this,t,"x",e)}inYRange(t,e){return qx(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!av(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,sv(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Kx(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-h,u=i+h):(h=s/2,a=n-h,l=n+h,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function Qx(t,e,n,i){return t?0:_y(e,n,i)}function Yx(t){const e=Kx(t),n=e.right-e.left,i=e.bottom-e.top,r=function(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=xv(i);return{t:Qx(r.top,s.top,0,n),r:Qx(r.right,s.right,0,e),b:Qx(r.bottom,s.bottom,0,n),l:Qx(r.left,s.left,0,e)}}(t,n/2,i/2),s=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=_v(r),o=Math.min(e,n),a=t.borderSkipped,l=i||Om(r);return{topLeft:Qx(!l||a.top||a.left,s.topLeft,0,o),topRight:Qx(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Qx(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Qx(!l||a.bottom||a.right,s.bottomRight,0,o)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Xx(t,e,n,i){const r=null===e,s=null===n,o=t&&!(r&&s)&&Kx(t,i);return o&&(r||Ey(e,o.left,o.right))&&(s||Ey(n,o.top,o.bottom))}function Jx(t,e){t.rect(e.x,e.y,e.w,e.h)}function $x(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+o,radius:t.radius}}H(Gx,"id","point"),H(Gx,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),H(Gx,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class Zx extends Bw{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:s}=Yx(this),o=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?gv:Jx;var a;t.save(),s.w===r.w&&s.h===r.h||(t.beginPath(),o(t,$x(s,e,r)),t.clip(),o(t,$x(r,-e,s)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),o(t,$x(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return Xx(this,t,e,n)}inXRange(t,e){return Xx(this,t,null,e)}inYRange(t,e){return Xx(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}H(Zx,"id","bar"),H(Zx,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),H(Zx,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var t_=Object.freeze({__proto__:null,ArcElement:Dx,BarElement:Zx,LineElement:Hx,PointElement:Gx});const e_=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],n_=e_.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function i_(t){return e_[t%e_.length]}function r_(t){return n_[t%n_.length]}function s_(t){let e=0;return(n,i)=>{const r=t.getDatasetMeta(i).controller;r instanceof Yb?e=function(t,e){return t.backgroundColor=t.data.map(()=>i_(e++)),e}(n,e):r instanceof Jb?e=function(t,e){return t.backgroundColor=t.data.map(()=>r_(e++)),e}(n,e):r&&(e=function(t,e){return t.borderColor=i_(e),t.backgroundColor=r_(e),++e}(n,e))}}function o_(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var a_={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=t.config,{elements:s}=r,o=o_(i)||(a=r)&&(a.borderColor||a.backgroundColor)||s&&o_(s)||"rgba(0,0,0,0.1)"!==tv.borderColor||"rgba(0,0,0,0.1)"!==tv.backgroundColor;var a;if(!n.forceOverride&&o)return;const l=s_(t);i.forEach(l)}};function l_(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function c_(t){t.data.datasets.forEach(t=>{l_(t)})}var u_={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void c_(t);const i=t.width;t.data.datasets.forEach((e,r)=>{const{_data:s,indexAxis:o}=e,a=t.getDatasetMeta(r),l=s||e.data;if("y"===kv([o,t.options.indexAxis]))return;if(!a.controller.supportsDecimation)return;const c=t.scales[a.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(t.options.parsing)return;let{start:u,count:h}=function(t,e){const n=e.length;let i,r=0;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=_y(ky(e,s.axis,o).lo,0,n-1)),i=c?_y(ky(e,s.axis,a).hi+1,r,n)-r:n-r,{start:r,count:i}}(a,l);if(h<=(n.threshold||4*i))return void l_(e);let d;switch(Mm(s)&&(e._data=l,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":d=function(t,e,n,i,r){const s=r.samples||i;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let u,h,d,f,p,g=e;for(o[l++]=t[g],u=0;u<s-2;u++){let i,r=0,s=0;const c=Math.floor((u+1)*a)+1+e,m=Math.min(Math.floor((u+2)*a)+1,n)+e,y=m-c;for(i=c;i<m;i++)r+=t[i].x,s+=t[i].y;r/=y,s/=y;const v=Math.floor(u*a)+1+e,b=Math.min(Math.floor((u+1)*a)+1,n)+e,{x:w,y:x}=t[g];for(d=f=-1,i=v;i<b;i++)f=.5*Math.abs((w-r)*(t[i].y-x)-(w-t[i].x)*(s-x)),f>d&&(d=f,h=t[i],p=i);o[l++]=h,g=p}return o[l++]=t[c],o}(l,u,h,i,n);break;case"min-max":d=function(t,e,n,i){let r,s,o,a,l,c,u,h,d,f,p=0,g=0;const m=[],y=e+n-1,v=t[e].x,b=t[y].x-v;for(r=e;r<e+n;++r){s=t[r],o=(s.x-v)/b*i,a=s.y;const e=0|o;if(e===l)a<d?(d=a,c=r):a>f&&(f=a,u=r),p=(g*p+s.x)/++g;else{const n=r-1;if(!Mm(c)&&!Mm(u)){const e=Math.min(c,u),i=Math.max(c,u);e!==h&&e!==n&&m.push(G(G({},t[e]),{},{x:p})),i!==h&&i!==n&&m.push(G(G({},t[i]),{},{x:p}))}r>0&&n!==h&&m.push(t[n]),m.push(s),l=e,g=0,d=f=a,c=u=h=r}}return m}(l,u,h,i);break;default:throw new Error("Unsupported decimation algorithm '".concat(n.algorithm,"'"))}e._decimated=d})},destroy(t){c_(t)}};function h_(t,e,n,i){if(i)return;let r=e[t],s=n[t];return"angle"===t&&(r=wy(r),s=wy(s)),{property:t,start:r,end:s}}function d_(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function f_(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function p_(t,e){let n=[],i=!1;return Rm(t)?(i=!0,n=t):n=function(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,s=[];return e.segments.forEach(t=>{let{start:e,end:o}=t;o=d_(e,o,r);const a=r[e],l=r[o];null!==i?(s.push({x:a.x,y:i}),s.push({x:l.x,y:i})):null!==n&&(s.push({x:n,y:a.y}),s.push({x:n,y:l.y}))}),s}(t,e),n.length?new Hx({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function g_(t){return t&&!1!==t.fill}function m_(t,e,n){let i=t[e].fill;const r=[e];let s;if(!n)return i;for(;!1!==i&&-1===r.indexOf(i);){if(!Dm(i))return i;if(s=t[i],!s)return!1;if(s.visible)return i;r.push(i),i=s.fill}return!1}function y_(t,e,n){const i=function(t){const e=t.options,n=e.fill;let i=Fm(n&&n.target,n);void 0===i&&(i=!!e.backgroundColor);if(!1===i||null===i)return!1;if(!0===i)return"origin";return i}(t);if(Om(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return Dm(r)&&Math.floor(r)===r?function(t,e,n,i){"-"!==t&&"+"!==t||(n=e+n);if(n===e||n<0||n>=i)return!1;return n}(i[0],e,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function v_(t,e,n){const i=[];for(let r=0;r<n.length;r++){const s=n[r],{first:o,last:a,point:l}=b_(s,e,"x");if(!(!l||o&&a))if(o)i.unshift(l);else if(t.push(l),!a)break}t.push(...i)}function b_(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const t=s[c],e=o[t.start][n],i=o[t.end][n];if(Ey(r,e,i)){a=r===e,l=r===i;break}}return{first:a,last:l,point:i}}class w_{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:r,radius:s}=this;return e=e||{start:0,end:ey},t.arc(i,r,s,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:i}=this,r=t.angle;return{x:e+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function x_(t){const{chart:e,fill:n,line:i}=t;if(Dm(n))return function(t,e){const n=t.getDatasetMeta(e),i=n&&t.isDatasetVisible(e);return i?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:i}=t,r=[],s=i.segments,o=i.points,a=function(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const t=i[r];if(t.index===e)break;t.hidden||n.unshift(t.dataset)}return n}(e,n);a.push(p_({x:null,y:e.bottom},i));for(let l=0;l<s.length;l++){const t=s[l];for(let e=t.start;e<=t.end;e++)v_(r,o[e],a)}return new Hx({points:r,options:{}})}(t);if("shape"===n)return!0;const r=function(t){const e=t.scale||{};if(e.getPointPositionForValue)return function(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=function(t,e,n){let i;return i="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:Om(t)?t.value:e.getBaseValue(),i}(n,e,s),a=[];if(i.grid.circular){const t=e.getPointPositionForValue(0,s);return new w_({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,o));return a}(t);return function(t){const{scale:e={},fill:n}=t,i=function(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:Om(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(n,e);if(Dm(i)){const t=e.isHorizontal();return{x:t?i:null,y:t?null:i}}return null}(t)}(t);return r instanceof w_?r:p_(r,i)}function __(t,e,n){const i=x_(e),{chart:r,index:s,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,h=c.backgroundColor,{above:d=h,below:f=h}=u||{},p=r.getDatasetMeta(s),g=wb(r,p);i&&o.points.length&&(lv(t,n),function(t,e){const{line:n,target:i,above:r,below:s,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=s;s!==r&&("x"===c?(E_(t,i,o.top),k_(t,{line:n,target:i,color:r,scale:a,property:c,clip:l}),t.restore(),t.save(),E_(t,i,o.bottom)):"y"===c&&(S_(t,i,o.left),k_(t,{line:n,target:i,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),S_(t,i,o.right),u=r));k_(t,{line:n,target:i,color:u,scale:a,property:c,clip:l}),t.restore()}(t,{line:o,target:i,above:d,below:f,area:n,scale:a,axis:l,clip:g}),cv(t))}function E_(t,e,n){const{segments:i,points:r}=e;let s=!0,o=!1;t.beginPath();for(const a of i){const{start:i,end:l}=a,c=r[i],u=r[d_(i,l,r)];s?(t.moveTo(c.x,c.y),s=!1):(t.lineTo(c.x,n),t.lineTo(c.x,c.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(u.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function S_(t,e,n){const{segments:i,points:r}=e;let s=!0,o=!1;t.beginPath();for(const a of i){const{start:i,end:l}=a,c=r[i],u=r[d_(i,l,r)];s?(t.moveTo(c.x,c.y),s=!1):(t.lineTo(n,c.y),t.lineTo(c.x,c.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,u.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function k_(t,e){const{line:n,target:i,property:r,color:s,scale:o,clip:a}=e,l=function(t,e,n){const i=t.segments,r=t.points,s=e.points,o=[];for(const a of i){let{start:t,end:i}=a;i=d_(t,i,r);const l=h_(n,r[t],r[i],a.loop);if(!e.segments){o.push({source:a,target:l,start:r[t],end:r[i]});continue}const c=gb(e,l);for(const e of c){const t=h_(n,s[e.start],s[e.end],e.loop),i=pb(a,r,t);for(const r of i)o.push({source:r,target:e,start:{[n]:f_(l,t,"start",Math.max)},end:{[n]:f_(l,t,"end",Math.min)}})}}return o}(n,i,r);for(const{source:c,target:u,start:h,end:d}of l){const{style:{backgroundColor:e=s}={}}=c,l=!0!==i;t.save(),t.fillStyle=e,T_(t,o,a,l&&h_(r,h,d)),t.beginPath();const f=!!n.pathSegment(t,c);let p;if(l){f?t.closePath():I_(t,i,d,r);const e=!!i.pathSegment(t,u,{move:f,reverse:!0});p=f&&e,p||I_(t,i,h,r)}t.closePath(),t.fill(p?"evenodd":"nonzero"),t.restore()}}function T_(t,e,n,i){const r=e.chart.chartArea,{property:s,start:o,end:a}=i||{};if("x"===s||"y"===s){let e,i,l,c;"x"===s?(e=o,i=r.top,l=a,c=r.bottom):(e=r.left,i=o,l=r.right,c=a),t.beginPath(),n&&(e=Math.max(e,n.left),l=Math.min(l,n.right),i=Math.max(i,n.top),c=Math.min(c,n.bottom)),t.rect(e,i,l-e,c-i),t.clip()}}function I_(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}var C_={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Hx&&(l={visible:t.isDatasetVisible(o),index:o,fill:y_(a,o,i),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],l&&!1!==l.fill&&(l.fill=m_(r,o,n.propagate))},beforeDraw(t,e,n){const i="beforeDraw"===n.drawTime,r=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=r.length-1;o>=0;--o){const e=r[o].$filler;e&&(e.line.updateControlPoints(s,e.axis),i&&e.fill&&__(t.ctx,e,s))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=t.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const e=i[r].$filler;g_(e)&&__(t.ctx,e,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;g_(i)&&"beforeDatasetDraw"===n.drawTime&&__(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const A_=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class N_ extends Bw{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Um(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(e=>t.filter(e,this.chart.data))),t.sort&&(e=e.sort((e,n)=>t.sort(e,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=Sv(n.font),r=i.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=A_(n,r);let l,c;e.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,r,o,a)+10):(c=this.maxHeight,l=this._fitCols(s,i,o,a)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:r,maxWidth:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+o;let u=t;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach((t,f)=>{const p=n+e/2+r.measureText(t.text).width;(0===f||l[l.length-1]+p+2*o>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),a[f]={left:0,top:d,row:h,width:p,height:i},l[l.length-1]+=p+o}),u}_fitCols(t,e,n,i){const{ctx:r,maxHeight:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-t;let u=o,h=0,d=0,f=0,p=0;return this.legendItems.forEach((t,s)=>{const{itemWidth:g,itemHeight:m}=function(t,e,n,i,r){const s=function(t,e,n,i){let r=t.text;r&&"string"!==typeof r&&(r=r.reduce((t,e)=>t.length>e.length?t:e));return e+n.size/2+i.measureText(r).width}(i,t,e,n),o=function(t,e,n){let i=t;"string"!==typeof e.text&&(i=P_(e,n));return i}(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}(n,e,r,t,i);s>0&&d+m+2*o>c&&(u+=h+o,l.push({width:h,height:d}),f+=h+o,p++,h=d=0),a[s]={left:f,top:d,col:p,width:g,height:m},h=Math.max(h,g),d+=m+o}),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:r}}=this,s=cb(r,this.left,this.width);if(this.isHorizontal()){let r=0,o=Ry(n,this.left+i,this.right-this.lineWidths[r]);for(const a of e)r!==a.row&&(r=a.row,o=Ry(n,this.left+i,this.right-this.lineWidths[r])),a.top+=this.top+t+i,a.left=s.leftForLtr(s.x(o),a.width),o+=a.width+i}else{let r=0,o=Ry(n,this.top+t+i,this.bottom-this.columnSizes[r].height);for(const a of e)a.col!==r&&(r=a.col,o=Ry(n,this.top+t+i,this.bottom-this.columnSizes[r].height)),a.top=o,a.left+=this.left+i,a.left=s.leftForLtr(s.x(a.left),a.width),o+=a.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;lv(t,this),this._draw(),cv(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:r,labels:s}=t,o=tv.color,a=cb(t.rtl,this.left,this.width),l=Sv(s.font),{padding:c}=s,u=l.size,h=u/2;let d;this.drawTitle(),i.textAlign=a.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=A_(s,u),m=this.isHorizontal(),y=this._computeTitleHeight();d=m?{x:Ry(r,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:Ry(r,this.top+y+c,this.bottom-e[0].height),line:0},ub(this.ctx,t.textDirection);const v=g+c;this.legendItems.forEach((b,w)=>{i.strokeStyle=b.fontColor,i.fillStyle=b.fontColor;const x=i.measureText(b.text).width,_=a.textAlign(b.textAlign||(b.textAlign=s.textAlign)),E=f+h+x;let S=d.x,k=d.y;a.setWidth(this.width),m?w>0&&S+E+c>this.right&&(k=d.y+=v,d.line++,S=d.x=Ry(r,this.left+c,this.right-n[d.line])):w>0&&k+v>this.bottom&&(S=d.x=S+e[d.line].width+c,d.line++,k=d.y=Ry(r,this.top+y+c,this.bottom-e[d.line].height));if(function(t,e,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;i.save();const r=Fm(n.lineWidth,1);if(i.fillStyle=Fm(n.fillStyle,o),i.lineCap=Fm(n.lineCap,"butt"),i.lineDashOffset=Fm(n.lineDashOffset,0),i.lineJoin=Fm(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=Fm(n.strokeStyle,o),i.setLineDash(Fm(n.lineDash,[])),s.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=a.xPlus(t,f/2);ov(i,o,l,e+h,s.pointStyleWidth&&f)}else{const s=e+Math.max((u-p)/2,0),o=a.leftForLtr(t,f),l=_v(n.borderRadius);i.beginPath(),Object.values(l).some(t=>0!==t)?gv(i,{x:o,y:s,w:f,h:p,radius:l}):i.rect(o,s,f,p),i.fill(),0!==r&&i.stroke()}i.restore()}(a.x(S),k,b),S=((t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e)(_,S+f+h,m?S+E:this.right,t.rtl),function(t,e,n){pv(i,n.text,t,e+g/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(S),k,b),m)d.x+=E+c;else if("string"!==typeof b.text){const t=l.lineHeight;d.y+=P_(b,t)+c}else d.y+=v}),hb(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Sv(e.font),i=Ev(e.padding);if(!e.display)return;const r=cb(t.rtl,this.left,this.width),s=this.ctx,o=e.position,a=n.size/2,l=i.top+a;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=Ry(t.align,u,this.right-h);else{const e=this.columnSizes.reduce((t,e)=>Math.max(t,e.height),0);c=l+Ry(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const d=Ry(o,u,u+h);s.textAlign=r.textAlign(My(o)),s.textBaseline="middle",s.strokeStyle=e.color,s.fillStyle=e.color,s.font=n.string,pv(s,e.text,d,c,n)}_computeTitleHeight(){const t=this.options.title,e=Sv(t.font),n=Ev(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,r;if(Ey(t,this.left,this.right)&&Ey(e,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],Ey(t,i.left,i.left+i.width)&&Ey(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const i=this._hoveredItem,r=((t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index)(i,n);i&&!r&&Um(e.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!r&&Um(e.onHover,[t,n,this],this)}else n&&Um(e.onClick,[t,n,this],this)}}function P_(t,e){return e*(t.text?t.text.length:0)}var M_={id:"legend",_element:N_,start(t,e,n){const i=t.legend=new N_({ctx:t.ctx,options:n,chart:t});Sw.configure(t,i,n),Sw.addBox(t,i)},stop(t){Sw.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Sw.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(t=>{const l=t.controller.getStyle(n?0:void 0),c=Ev(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:t.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class R_ extends Bw{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=Rm(n.text)?n.text.length:1;this._padding=Ev(n.padding);const r=i*Sv(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:r,options:s}=this,o=s.align;let a,l,c,u=0;return this.isHorizontal()?(l=Ry(o,n,r),c=e+t,a=r-n):("left"===s.position?(l=n+t,c=Ry(o,i,e),u=-.5*ty):(l=r-t,c=Ry(o,e,i),u=.5*ty),a=i-e),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Sv(e.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:s,maxWidth:o,rotation:a}=this._drawArgs(i);pv(t,e.text,0,0,n,{color:e.color,maxWidth:o,rotation:a,textAlign:My(e.align),textBaseline:"middle",translation:[r,s]})}}var O_={id:"title",_element:R_,start(t,e,n){!function(t,e){const n=new R_({ctx:t.ctx,options:e,chart:t});Sw.configure(t,n,e),Sw.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;Sw.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Sw.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const D_=new WeakMap;var L_={id:"subtitle",start(t,e,n){const i=new R_({ctx:t.ctx,options:n,chart:t});Sw.configure(t,i,n),Sw.addBox(t,i),D_.set(t,i)},stop(t){Sw.removeBox(t,D_.get(t)),D_.delete(t)},beforeUpdate(t,e,n){const i=D_.get(t);Sw.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const F_={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i.add(t.x),r+=t.y,++s}}if(0===s||0===i.size)return!1;const o=[...i].reduce((t,e)=>t+e)/i.size;return{x:o,y:r/s}},nearest(t,e){if(!t.length)return!1;let n,i,r,s=e.x,o=e.y,a=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=vy(e,i.getCenterPoint());t<a&&(a=t,r=i)}}if(r){const t=r.tooltipPosition();s=t.x,o=t.y}return{x:s,y:o}}};function j_(t,e){return e&&(Rm(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function U_(t){return("string"===typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function V_(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function z_(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Sv(e.bodyFont),c=Sv(e.titleFont),u=Sv(e.footerFont),h=s.length,d=r.length,f=i.length,p=Ev(e.padding);let g=p.height,m=0,y=i.reduce((t,e)=>t+e.before.length+e.lines.length+e.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){g+=f*(e.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let v=0;const b=function(t){m=Math.max(m,n.measureText(t).width+v)};return n.save(),n.font=c.string,Vm(t.title,b),n.font=l.string,Vm(t.beforeBody.concat(t.afterBody),b),v=e.displayColors?o+2+e.boxPadding:0,Vm(i,t=>{Vm(t.before,b),Vm(t.lines,b),Vm(t.after,b)}),v=0,n.font=u.string,Vm(t.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function B_(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return"center"===i?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),function(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;return"left"===t&&r+s+o>e.width||"right"===t&&r-s-o<0||void 0}(c,t,e,n)&&(c="center"),c}function W_(t,e,n){const i=n.yAlign||e.yAlign||function(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||B_(t,e,n,i),yAlign:i}}function H_(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=_v(o);let p=function(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,a);const g=function(t,e,n){let{y:i,height:r}=t;return"top"===e?i+=n:i-="bottom"===e?r+n:r/2,i}(e,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,d)+r:"right"===a&&(p+=Math.max(h,f)+r),{x:_y(p,0,i.width-e.width),y:_y(g,0,i.height-e.height)}}function q_(t,e,n){const i=Ev(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function G_(t){return j_([],U_(t))}function K_(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Q_={beforeTitle:Nm,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Nm,beforeBody:Nm,beforeLabel:Nm,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Mm(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Nm,afterBody:Nm,beforeFooter:Nm,footer:Nm,afterFooter:Nm};function Y_(t,e,n,i){const r=t[e].call(n,i);return"undefined"===typeof r?Q_[e].call(n,i):r}class X_ extends Bw{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,r=new Tb(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,Tv(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,i=Y_(n,"beforeTitle",this,t),r=Y_(n,"title",this,t),s=Y_(n,"afterTitle",this,t);let o=[];return o=j_(o,U_(i)),o=j_(o,U_(r)),o=j_(o,U_(s)),o}getBeforeBody(t,e){return G_(Y_(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,i=[];return Vm(t,t=>{const e={before:[],lines:[],after:[]},r=K_(n,t);j_(e.before,U_(Y_(r,"beforeLabel",this,t))),j_(e.lines,Y_(r,"label",this,t)),j_(e.after,U_(Y_(r,"afterLabel",this,t))),i.push(e)}),i}getAfterBody(t,e){return G_(Y_(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,i=Y_(n,"beforeFooter",this,t),r=Y_(n,"footer",this,t),s=Y_(n,"afterFooter",this,t);let o=[];return o=j_(o,U_(i)),o=j_(o,U_(r)),o=j_(o,U_(s)),o}_createItems(t){const e=this._active,n=this.chart.data,i=[],r=[],s=[];let o,a,l=[];for(o=0,a=e.length;o<a;++o)l.push(V_(this.chart,e[o]));return t.filter&&(l=l.filter((e,i,r)=>t.filter(e,i,r,n))),t.itemSort&&(l=l.sort((e,i)=>t.itemSort(e,i,n))),Vm(l,e=>{const n=K_(t.callbacks,e);i.push(Y_(n,"labelColor",this,e)),r.push(Y_(n,"labelPointStyle",this,e)),s.push(Y_(n,"labelTextColor",this,e))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let r,s=[];if(i.length){const t=F_[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const e=this._size=z_(this,n),o=Object.assign({},t,e),a=W_(this.chart,n,o),l=H_(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,r={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const r=this.getCaretPosition(t,n,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:r}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=_v(o),{x:h,y:d}=t,{width:f,height:p}=e;let g,m,y,v,b,w;return"center"===r?(b=d+p/2,"left"===i?(g=h,m=g-s,v=b+s,w=b-s):(g=h+f,m=g+s,v=b-s,w=b+s),y=g):(m="left"===i?h+Math.max(a,c)+s:"right"===i?h+f-Math.max(l,u)-s:this.caretX,"top"===r?(v=d,b=v-s,g=m-s,y=m+s):(v=d+p,b=v+s,g=m+s,y=m-s),w=v),{x1:g,x2:m,x3:y,y1:v,y2:b,y3:w}}drawTitle(t,e,n){const i=this.title,r=i.length;let s,o,a;if(r){const l=cb(n.rtl,this.x,this.width);for(t.x=q_(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",s=Sv(n.titleFont),o=n.titleSpacing,e.fillStyle=n.titleColor,e.font=s.string,a=0;a<r;++a)e.fillText(i[a],l.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+o,a+1===r&&(t.y+=n.titleMarginBottom-o)}}_drawColorBox(t,e,n,i,r){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=r,c=Sv(r.bodyFont),u=q_(this,"left",r),h=i.x(u),d=a<c.lineHeight?(c.lineHeight-a)/2:0,f=e.y+d;if(r.usePointStyle){const e={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=i.leftForLtr(h,l)+l/2,c=f+a/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,sv(t,e,n,c),t.strokeStyle=s.borderColor,t.fillStyle=s.backgroundColor,sv(t,e,n,c)}else{t.lineWidth=Om(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,t.strokeStyle=s.borderColor,t.setLineDash(s.borderDash||[]),t.lineDashOffset=s.borderDashOffset||0;const e=i.leftForLtr(h,l),n=i.leftForLtr(i.xPlus(h,1),l-2),o=_v(s.borderRadius);Object.values(o).some(t=>0!==t)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,gv(t,{x:e,y:f,w:l,h:a,radius:o}),t.fill(),t.stroke(),t.fillStyle=s.backgroundColor,t.beginPath(),gv(t,{x:n,y:f+1,w:l-2,h:a-2,radius:o}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(e,f,l,a),t.strokeRect(e,f,l,a),t.fillStyle=s.backgroundColor,t.fillRect(n,f+1,l-2,a-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:r,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=Sv(n.bodyFont);let h=u.lineHeight,d=0;const f=cb(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+d),t.y+h/2),t.y+=h+r},g=f.textAlign(s);let m,y,v,b,w,x,_;for(e.textAlign=s,e.textBaseline="middle",e.font=u.string,t.x=q_(this,g,n),e.fillStyle=n.bodyColor,Vm(this.beforeBody,p),d=o&&"right"!==g?"center"===s?l/2+c:l+2+c:0,b=0,x=i.length;b<x;++b){for(m=i[b],y=this.labelTextColors[b],e.fillStyle=y,Vm(m.before,p),v=m.lines,o&&v.length&&(this._drawColorBox(e,t,b,f,n),h=Math.max(u.lineHeight,a)),w=0,_=v.length;w<_;++w)p(v[w]),h=u.lineHeight;Vm(m.after,p)}d=0,h=u.lineHeight,Vm(this.afterBody,p),t.y-=r}drawFooter(t,e,n){const i=this.footer,r=i.length;let s,o;if(r){const a=cb(n.rtl,this.x,this.width);for(t.x=q_(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=a.textAlign(n.footerAlign),e.textBaseline="middle",s=Sv(n.footerFont),e.fillStyle=n.footerColor,e.font=s.string,o=0;o<r;++o)e.fillText(i[o],a.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:r,yAlign:s}=this,{x:o,y:a}=t,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=_v(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(o+u,a),"top"===s&&this.drawCaret(t,e,n,i),e.lineTo(o+l-h,a),e.quadraticCurveTo(o+l,a,o+l,a+h),"center"===s&&"right"===r&&this.drawCaret(t,e,n,i),e.lineTo(o+l,a+c-f),e.quadraticCurveTo(o+l,a+c,o+l-f,a+c),"bottom"===s&&this.drawCaret(t,e,n,i),e.lineTo(o+d,a+c),e.quadraticCurveTo(o,a+c,o,a+c-d),"center"===s&&"left"===r&&this.drawCaret(t,e,n,i),e.lineTo(o,a+u),e.quadraticCurveTo(o,a,o+u,a),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=F_[t.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=z_(this,t),o=Object.assign({},n,this._size),a=W_(e,t,o),l=H_(t,o,a,e);i._to===l.x&&r._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=Ev(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,i,e),ub(t,e.textDirection),r.y+=s.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),hb(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map(t=>{let{datasetIndex:e,index:n}=t;const i=this.chart.getDatasetMeta(e);if(!i)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:i.data[n],index:n}}),r=!zm(n,i),s=this._positionChanged(i,e);(r||s)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],s=this._getActiveElements(t,r,e,n),o=this._positionChanged(s,t),a=e||!zm(s,r)||o;return a&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,n,i){const r=this.options;if("mouseout"===t.type)return[];if(!i)return e.filter(t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index));const s=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(t,e){const{caretX:n,caretY:i,options:r}=this,s=F_[r.position].call(this,t,e);return!1!==s&&(n!==s.x||i!==s.y)}}H(X_,"positioners",F_);var J_={id:"tooltip",_element:X_,positioners:F_,afterInit(t,e,n){n&&(t.tooltip=new X_({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",G(G({},n),{},{cancelable:!0})))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Q_},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},$_=Object.freeze({__proto__:null,Colors:a_,Decimation:u_,Filler:C_,Legend:M_,SubTitle:L_,Title:O_,Tooltip:J_});function Z_(t,e,n,i){const r=t.indexOf(e);if(-1===r)return((t,e,n,i)=>("string"===typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,i);return r!==t.lastIndexOf(e)?n:r}function tE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class eE extends $w{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:i}of e)t[n]===i&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Mm(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:_y(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:Z_(n,t,Fm(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===t&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=t;s<=e;s++)i.push({value:s});return i}getLabelForValue(t){return tE.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!==typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function nE(t,e){const n=[],{bounds:i,step:r,min:s,max:o,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=t,d=r||1,f=c-1,{min:p,max:g}=e,m=!Mm(s),y=!Mm(o),v=!Mm(l),b=(g-p)/(u+1);let w,x,_,E,S=hy((g-p)/f/d)*d;if(S<1e-14&&!m&&!y)return[{value:p},{value:g}];E=Math.ceil(g/S)-Math.floor(p/S),E>f&&(S=hy(E*S/f/d)*d),Mm(a)||(w=Math.pow(10,a),S=Math.ceil(S*w)/w),"ticks"===i?(x=Math.floor(p/S)*S,_=Math.ceil(g/S)*S):(x=p,_=g),m&&y&&r&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((o-s)/r,S/1e3)?(E=Math.round(Math.min((o-s)/S,c)),S=(o-s)/E,x=s,_=o):v?(x=m?s:x,_=y?o:_,E=l-1,S=(_-x)/E):(E=(_-x)/S,E=uy(E,Math.round(E),S/1e3)?Math.round(E):Math.ceil(E));const k=Math.max(my(S),my(x));w=Math.pow(10,Mm(a)?k:a),x=Math.round(x*w)/w,_=Math.round(_*w)/w;let T=0;for(m&&(h&&x!==s?(n.push({value:s}),x<s&&T++,uy(Math.round((x+T*S)*w)/w,s,iE(s,b,t))&&T++):x<s&&T++);T<E;++T){const t=Math.round((x+T*S)*w)/w;if(y&&t>o)break;n.push({value:t})}return y&&h&&_!==o?n.length&&uy(n[n.length-1].value,o,iE(o,b,t))?n[n.length-1].value=o:n.push({value:o}):y&&_!==o||n.push({value:_}),n}function iE(t,e,n){let{horizontal:i,minRotation:r}=n;const s=py(r),o=(i?Math.sin(s):Math.cos(s))||.001,a=.75*e*(""+t).length;return Math.min(e/o,a)}H(eE,"id","category"),H(eE,"defaults",{ticks:{callback:tE}});class rE extends $w{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Mm(t)||("number"===typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const s=t=>i=e?i:t,o=t=>r=n?r:t;if(t){const t=cy(i),e=cy(r);t<0&&e<0?o(0):t>0&&e>0&&s(0)}if(i===r){let e=0===r?1:Math.abs(.05*r);o(r+e),t||s(i-e)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(e," ticks. Limiting to 1000.")),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=nE({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&fy(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return Gy(t,this.chart.options.locale,this.options.ticks.format)}}class sE extends rE{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Dm(t)?t:0,this.max=Dm(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=py(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}H(sE,"id","linear"),H(sE,"defaults",{ticks:{callback:Qy.formatters.numeric}});const oE=t=>Math.floor(ly(t)),aE=(t,e)=>Math.pow(10,oE(t)+e);function lE(t){return 1===t/Math.pow(10,oE(t))}function cE(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function uE(t,e){let{min:n,max:i}=e;n=Lm(t.min,n);const r=[],s=oE(n);let o=function(t,e){let n=oE(e-t);for(;cE(t,e,n)>10;)n++;for(;cE(t,e,n)<10;)n--;return Math.min(n,oE(t))}(n,i),a=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),c=s>o?Math.pow(10,s):0,u=Math.round((n-c)*a)/a,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,o)),f=Lm(t.min,Math.round((c+h+d*Math.pow(10,o))*a)/a);for(;f<i;)r.push({value:f,major:lE(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(o++,d=2,a=o>=0?1:a),f=Math.round((c+h+d*Math.pow(10,o))*a)/a;const p=Lm(t.max,f);return r.push({value:p,major:lE(p),significand:d}),r}class hE extends $w{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=rE.prototype.parse.apply(this,[t,e]);if(0!==n)return Dm(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Dm(t)?Math.max(0,t):null,this.max=Dm(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Dm(this._userMin)&&(this.min=t===aE(this.min,0)?aE(this.min,-1):aE(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const r=e=>n=t?n:e,s=t=>i=e?i:t;n===i&&(n<=0?(r(1),s(10)):(r(aE(n,-1)),s(aE(i,1)))),n<=0&&r(aE(i,-1)),i<=0&&s(aE(n,1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e=uE({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&fy(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":Gy(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=ly(t),this._valueRange=ly(this.max)-ly(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(ly(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function dE(t){const e=t.ticks;if(e.display&&t.display){const t=Ev(e.backdropPadding);return Fm(e.font&&e.font.size,tv.font.size)+t.height}return 0}function fE(t,e,n){return n=Rm(n)?n:[n],{w:nv(t,e.string,n),h:n.length*e.lineHeight}}function pE(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function gE(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?ty/s:0;for(let l=0;l<s;l++){const s=o.setContext(t.getPointLabelContext(l));r[l]=s.padding;const c=t.getPointPosition(l,t.drawingArea+r[l],a),u=Sv(s.font),h=fE(t.ctx,u,t._pointLabels[l]);i[l]=h;const d=wy(t.getIndexAngle(l)+a),f=Math.round(gy(d));mE(n,e,d,pE(f,c.x,h.w,0,180),pE(f,c.y,h.h,90,270))}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:dE(s)/2,additionalAngle:o?ty/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=e[u];const r=yE(t,u,l);i.push(r),"auto"===a&&(r.visible=vE(r,c),r.visible&&(c=r))}return i}(t,i,r)}function mE(t,e,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function yE(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,i+r+o,s),c=Math.round(gy(wy(l.angle+sy))),u=function(t,e,n){90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e);return t}(l.y,a.h,c),h=function(t){if(0===t||180===t)return"center";if(t<180)return"left";return"right"}(c),d=function(t,e,n){"right"===n?t-=e:"center"===n&&(t-=e/2);return t}(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function vE(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:s}=t;return!(av({x:n,y:i},e)||av({x:n,y:s},e)||av({x:r,y:i},e)||av({x:r,y:s},e))}function bE(t,e,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=e;if(!Mm(a)){const n=_v(e.borderRadius),l=Ev(e.backdropPadding);t.fillStyle=a;const c=i-l.left,u=r-l.top,h=s-i+l.width,d=o-r+l.height;Object.values(n).some(t=>0!==t)?(t.beginPath(),gv(t,{x:c,y:u,w:h,h:d,radius:n}),t.fill()):t.fillRect(c,u,h,d)}}function wE(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,ey);else{let n=t.getPointPosition(0,e);r.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=t.getPointPosition(s,e),r.lineTo(n.x,n.y)}}H(hE,"id","logarithmic"),H(hE,"defaults",{ticks:{callback:Qy.formatters.logarithmic,major:{enabled:!0}}});class xE extends rE{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Ev(dE(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Dm(t)&&!isNaN(t)?t:0,this.max=Dm(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/dE(this.options))}generateTickLabels(t){rE.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((t,e)=>{const n=Um(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""}).filter((t,e)=>this.chart.getDataVisibility(e))}fit(){const t=this.options;t.display&&t.pointLabels.display?gE(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){return wy(t*(ey/(this._pointLabels.length||1))+py(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(Mm(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Mm(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return Tv(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(t)-sy+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),wE(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i,border:r}=e,s=this._pointLabels.length;let o,a,l;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const e=t._pointLabelItems[r];if(!e.visible)continue;const s=i.setContext(t.getPointLabelContext(r));bE(n,s,e);const o=Sv(s.font),{x:a,y:l,textAlign:c}=e;pv(n,t._pointLabels[r],a,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach((t,e)=>{if(0!==e||0===e&&this.min<0){a=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),o=i.setContext(n),l=r.setContext(n);!function(t,e,n,i,r){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),wE(t,n,o,i),s.closePath(),s.stroke(),s.restore())}(this,o,a,s,l)}}),n.display){for(t.save(),o=s-1;o>=0;o--){const i=n.setContext(this.getPointLabelContext(o)),{color:r,lineWidth:s}=i;s&&r&&(t.lineWidth=s,t.strokeStyle=r,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,a=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),l=this.getPointPosition(o,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,s;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((i,o)=>{if(0===o&&this.min>=0&&!e.reverse)return;const a=n.setContext(this.getContext(o)),l=Sv(a.font);if(r=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){t.font=l.string,s=t.measureText(i.label).width,t.fillStyle=a.backdropColor;const e=Ev(a.backdropPadding);t.fillRect(-s/2-e.left,-r-l.size/2-e.top,s+e.width,l.size+e.height)}pv(t,i.label,0,-r,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})}),t.restore()}drawTitle(){}}H(xE,"id","radialLinear"),H(xE,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Qy.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}}),H(xE,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),H(xE,"descriptors",{angleLines:{_fallback:"grid"}});const _E={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},EE=Object.keys(_E);function SE(t,e){return t-e}function kE(t,e){if(Mm(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return"function"===typeof i&&(o=i(o)),Dm(o)||(o="string"===typeof i?n.parse(o,i):n.parse(o)),null===o?null:(r&&(o="week"!==r||!dy(s)&&!0!==s?n.startOf(o,r):n.startOf(o,"isoWeek",s)),+o)}function TE(t,e,n,i){const r=EE.length;for(let s=EE.indexOf(t);s<r-1;++s){const t=_E[EE[s]],r=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(r*t.size))<=i)return EE[s]}return EE[r-1]}function IE(t,e,n){if(n){if(n.length){const{lo:i,hi:r}=Sy(n,e);t[n[i]>=e?n[i]:n[r]]=!0}}else t[e]=!0}function CE(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return 0!==s&&n?function(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}(t,i,r,n):i}class AE extends $w{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.time||(t.time={}),i=this._adapter=new rw(t.adapters.date);i.init(e),Gm(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:kE(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:r,minDefined:s,maxDefined:o}=this.getUserBounds();function a(t){s||isNaN(t.min)||(i=Math.min(i,t.min)),o||isNaN(t.max)||(r=Math.max(r,t.max))}s&&o||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),i=Dm(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),r=Dm(r)&&!isNaN(r)?r:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,s=function(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}(i,r,this.max);return this._unit=e.unit||(n.autoSkip?TE(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(t,e,n,i,r){for(let s=EE.length-1;s>=EE.indexOf(n);s--){const n=EE[s];if(_E[n].common&&t._adapter.diff(r,i,n)>=e-1)return n}return EE[n?EE.indexOf(n):0]}(this,s.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=EE.indexOf(t)+1,n=EE.length;e<n;++e)if(_E[EE[e]].common)return EE[e]}(this._unit):void 0,this.initOffsets(i),t.reverse&&s.reverse(),CE(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(){let t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(t=this.getDecimalForValue(n[0]),i=1===n.length?1-t:(this.getDecimalForValue(n[1])-t)/2,e=this.getDecimalForValue(n[n.length-1]),r=1===n.length?e:(e-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;i=_y(i,0,s),r=_y(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,r=i.time,s=r.unit||TE(r.minUnit,e,n,this._getLabelCapacity(e)),o=Fm(i.ticks.stepSize,1),a="week"===s&&r.isoWeekday,l=dy(a)||!0===a,c={};let u,h,d=e;if(l&&(d=+t.startOf(d,"isoWeek",a)),d=+t.startOf(d,l?"day":s),t.diff(n,e,s)>1e5*o)throw new Error(e+" and "+n+" are too far apart with stepSize of "+o+" "+s);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+t.add(u,o,s),h++)IE(c,u,f);return u!==n&&"ticks"!==i.bounds&&1!==h||IE(c,u,f),Object.keys(c).sort(SE).map(t=>+t)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,i=this._unit,r=e||n[i];return this._adapter.format(t,r)}_tickFormatFunction(t,e,n,i){const r=this.options,s=r.ticks.callback;if(s)return Um(s,[t,e,n],this);const o=r.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&o[a],u=l&&o[l],h=n[e],d=l&&u&&h&&h.major;return this._adapter.format(t,i||(d?u:c))}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=py(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),s=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*r+o*s,h:n*s+o*r}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,r=this._tickFormatFunction(t,0,CE(this,[t],this._majorUnit),i),s=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(kE(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Ay(t.sort(SE))}}function NE(t,e,n){let i,r,s,o,a=0,l=t.length-1;n?(e>=t[a].pos&&e<=t[l].pos&&({lo:a,hi:l}=ky(t,"pos",e)),({pos:i,time:s}=t[a]),({pos:r,time:o}=t[l])):(e>=t[a].time&&e<=t[l].time&&({lo:a,hi:l}=ky(t,"time",e)),({time:i,pos:s}=t[a]),({time:r,pos:o}=t[l]));const c=r-i;return c?s+(o-s)*(e-i)/c:s}H(AE,"id","time"),H(AE,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class PE extends AE{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=NE(e,this.min),this._tableRange=NE(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],r=[];let s,o,a,l,c;for(s=0,o=t.length;s<o;++s)l=t[s],l>=e&&l<=n&&i.push(l);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(s=0,o=i.length;s<o;++s)c=i[s+1],a=i[s-1],l=i[s],Math.round((c+a)/2)!==l&&r.push({time:l,pos:s/(o-1)});return r}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return n.includes(t)&&n.length||n.splice(0,0,t),n.includes(e)&&1!==n.length||n.push(e),n.sort((t,e)=>t-e)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(NE(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return NE(this._table,n*this._tableRange+this._minPos,!0)}}H(PE,"id","timeseries"),H(PE,"defaults",AE.defaults);const ME=[ew,t_,$_,Object.freeze({__proto__:null,CategoryScale:eE,LinearScale:sE,LogarithmicScale:hE,RadialLinearScale:xE,TimeScale:AE,TimeSeriesScale:PE})],RE=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],OE="label";function DE(t,e){"function"===typeof t?t(e):t&&(t.current=e)}function LE(t,e){t.labels=e}function FE(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:OE;const i=[];t.datasets=e.map(e=>{const r=t.datasets.find(t=>t[n]===e[n]);return r&&e.data&&!i.includes(r)?(i.push(r),Object.assign(r,e),r):G({},e)})}function jE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:OE;const n={labels:[],datasets:[]};return LE(n,t.labels),FE(n,t.datasets,e),n}function UE(t,e){const{height:n=150,width:i=300,redraw:s=!1,datasetIdKey:o,type:a,data:l,options:c,plugins:u=[],fallbackContent:h,updateMode:d}=t,f=function(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(t,RE),p=(0,r.useRef)(null),g=(0,r.useRef)(null),m=()=>{p.current&&(g.current=new Ax(p.current,{type:a,data:jE(l,o),options:c&&G({},c),plugins:u}),DE(e,g.current))},y=()=>{DE(e,null),g.current&&(g.current.destroy(),g.current=null)};return(0,r.useEffect)(()=>{!s&&g.current&&c&&function(t,e){const n=t.options;n&&e&&Object.assign(n,e)}(g.current,c)},[s,c]),(0,r.useEffect)(()=>{!s&&g.current&&LE(g.current.config.data,l.labels)},[s,l.labels]),(0,r.useEffect)(()=>{!s&&g.current&&l.datasets&&FE(g.current.config.data,l.datasets,o)},[s,l.datasets]),(0,r.useEffect)(()=>{g.current&&(s?(y(),setTimeout(m)):g.current.update(d))},[s,c,l.labels,l.datasets,d]),(0,r.useEffect)(()=>{g.current&&(y(),setTimeout(m))},[a]),(0,r.useEffect)(()=>(m(),()=>y()),[]),(0,yf.jsx)("canvas",G(G({ref:p,role:"img",height:n,width:i},f),{},{children:h}))}const VE=(0,r.forwardRef)(UE);function zE(t,e){return Ax.register(e),(0,r.forwardRef)((e,n)=>(0,yf.jsx)(VE,G(G({},e),{},{ref:n,type:t})))}const BE=zE("line",Xb),WE=zE("bar",Kb);Ax.register(...ME);function HE(t){let{userId:e}=t;const[n,i]=(0,r.useState)({totalQuestions:0,accuracy:0,streak:0,weakAreas:[],sessionData:[]}),[s,o]=(0,r.useState)({labels:[],data:[]}),[a,l]=(0,r.useState)(!0);(0,r.useEffect)(()=>{c()},[e]);const c=async()=>{l(!0);try{const[t,n]=await Promise.all([gf(e),pf(e)]);if(i(t),n&&n.length>0){const t={};n.forEach(e=>{var n;let i;i=null!==(n=e.timestamp)&&void 0!==n&&n.toDate?e.timestamp.toDate():e.timestamp?new Date(e.timestamp):new Date;const r=i.toLocaleDateString("en-US",{month:"short",day:"numeric"});t[r]||(t[r]={correct:0,total:0,ts:i}),t[r].total++,e.correct&&t[r].correct++});const e=Object.entries(t).sort((t,e)=>{let[,n]=t,[,i]=e;return n.ts-i.ts}).slice(-7);o({labels:e.map(t=>{let[e]=t;return e}),data:e.map(t=>{let[,e]=t;return Math.round(e.correct/e.total*100)})})}}catch(t){console.error("Error loading analytics:",t)}finally{l(!1)}};if(a)return(0,yf.jsx)("div",{className:"min-h-screen bg-violet-50 flex items-center justify-center",children:(0,yf.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-violet-600",children:"Loading your progress... \ud83d\udcca"})});const u=s.labels.length>0,h={labels:u?s.labels:["No data yet"],datasets:[{label:"Accuracy (%)",data:u?s.data:[0],borderColor:"#7C3AED",backgroundColor:"rgba(124, 58, 237, 0.1)",tension:.4,fill:!0,pointRadius:6,pointBackgroundColor:"#7C3AED",pointBorderColor:"#fff",pointBorderWidth:2}]},d={labels:n.weakAreas.map(t=>t.name.charAt(0).toUpperCase()+t.name.slice(1)),datasets:[{label:"Accuracy by Topic (%)",data:n.weakAreas.map(t=>t.accuracy),backgroundColor:["rgba(255, 99, 132, 0.7)","rgba(54, 162, 235, 0.7)","rgba(255, 206, 86, 0.7)","rgba(75, 192, 192, 0.7)","rgba(153, 102, 255, 0.7)"],borderColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF"],borderWidth:2}]},f={responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!0,labels:{font:{size:12,weight:"bold"},padding:15}}},scales:{y:{beginAtZero:!0,max:100,ticks:{font:{size:11}}},x:{ticks:{font:{size:11}}}}};return(0,yf.jsx)("div",{className:"min-h-screen bg-violet-50 p-4 sm:p-6",children:(0,yf.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,yf.jsxs)("div",{className:"text-center mb-12",children:[(0,yf.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-800 mb-2",children:"\ud83d\udcca Your Progress"}),(0,yf.jsx)("p",{className:"text-gray-600",children:"Keep learning and improving! \ud83d\ude80"})]}),(0,yf.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,yf.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg border-l-4 border-amber-400",children:[(0,yf.jsx)("p",{className:"text-gray-600 text-sm font-semibold mb-2",children:"Total Questions"}),(0,yf.jsx)("p",{className:"text-3xl sm:text-4xl font-bold text-amber-500",children:n.totalQuestions}),(0,yf.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"questions answered"})]}),(0,yf.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg border-l-4 border-emerald-400",children:[(0,yf.jsx)("p",{className:"text-gray-600 text-sm font-semibold mb-2",children:"Accuracy"}),(0,yf.jsxs)("p",{className:"text-3xl sm:text-4xl font-bold text-emerald-500",children:[n.accuracy,"%"]}),(0,yf.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"overall score"})]}),(0,yf.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg border-l-4 border-violet-400",children:[(0,yf.jsx)("p",{className:"text-gray-600 text-sm font-semibold mb-2",children:"Current Streak \ud83d\udd25"}),(0,yf.jsx)("p",{className:"text-3xl sm:text-4xl font-bold text-violet-500",children:n.streak}),(0,yf.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"correct in a row"})]}),(0,yf.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg border-l-4 border-purple-400",children:[(0,yf.jsx)("p",{className:"text-gray-600 text-sm font-semibold mb-2",children:"Topics"}),(0,yf.jsx)("p",{className:"text-3xl sm:text-4xl font-bold text-purple-500",children:n.weakAreas.length}),(0,yf.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"types practiced"})]})]}),(0,yf.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[(0,yf.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[(0,yf.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"\ud83d\udcc8 Accuracy Trend"}),(0,yf.jsx)("div",{className:"relative h-80",children:(0,yf.jsx)(BE,{data:h,options:f})})]}),n.weakAreas.length>0?(0,yf.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[(0,yf.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"\ud83d\udcca Accuracy by Topic"}),(0,yf.jsx)("div",{className:"relative h-80",children:(0,yf.jsx)(WE,{data:d,options:f})})]}):(0,yf.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-lg flex items-center justify-center",children:(0,yf.jsx)("p",{className:"text-gray-500 text-center",children:"Start solving questions to see your topic breakdown!"})})]}),(0,yf.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[(0,yf.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"\ud83d\udcaa Focus Areas"}),n.weakAreas.length>0?(0,yf.jsx)("ul",{className:"space-y-3",children:n.weakAreas.map((t,e)=>{let n="bg-red-100",i="text-red-700",r="bg-red-500";return t.accuracy>=70?(n="bg-green-100",i="text-green-700",r="bg-green-500"):t.accuracy>=50&&(n="bg-yellow-100",i="text-yellow-700",r="bg-yellow-500"),(0,yf.jsxs)("div",{className:"flex justify-between items-center p-4 ".concat(n," rounded-lg border-l-4 ").concat(t.accuracy>=70?"border-green-500":t.accuracy>=50?"border-yellow-500":"border-red-500"),children:[(0,yf.jsxs)("div",{children:[(0,yf.jsx)("span",{className:"font-semibold ".concat(i," block capitalize text-lg"),children:t.name}),(0,yf.jsxs)("span",{className:"text-sm text-gray-600",children:[t.total," questions"]})]}),(0,yf.jsxs)("span",{className:"px-4 py-2 rounded-full text-white text-lg font-bold ".concat(r),children:[t.accuracy,"%"]})]},e)})}):(0,yf.jsx)("p",{className:"text-gray-500 text-center py-6",children:"No data yet. Start playing to see your progress!"})]}),(0,yf.jsxs)("div",{className:"bg-gradient-to-r from-violet-50 to-purple-50 rounded-lg p-6 mt-8",children:[(0,yf.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"\ud83d\udca1 Tips for Success"}),(0,yf.jsxs)("ul",{className:"grid md:grid-cols-2 gap-4 text-gray-700",children:[(0,yf.jsxs)("li",{className:"flex items-start",children:[(0,yf.jsx)("span",{className:"text-2xl mr-3",children:"\ud83c\udfaf"}),(0,yf.jsx)("span",{children:"Focus on weak areas to improve faster"})]}),(0,yf.jsxs)("li",{className:"flex items-start",children:[(0,yf.jsx)("span",{className:"text-2xl mr-3",children:"\ud83d\udd25"}),(0,yf.jsx)("span",{children:"Build streaks by answering correctly in a row"})]}),(0,yf.jsxs)("li",{className:"flex items-start",children:[(0,yf.jsx)("span",{className:"text-2xl mr-3",children:"\ud83d\udcda"}),(0,yf.jsx)("span",{children:"Practice different operation types regularly"})]}),(0,yf.jsxs)("li",{className:"flex items-start",children:[(0,yf.jsx)("span",{className:"text-2xl mr-3",children:"\u23f0"}),(0,yf.jsx)("span",{children:"Challenge yourself with timed tests"})]})]})]})]})})}function qE(t){let{userId:e,userProfile:n,onBack:i,onProfileUpdated:s}=t;const[o,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)({name:(null===n||void 0===n?void 0:n.name)||"",age:(null===n||void 0===n?void 0:n.age)||"",grade:(null===n||void 0===n?void 0:n.grade)||""}),[u,h]=(0,r.useState)(""),[d,f]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[m,y]=(0,r.useState)(!1);return(0,yf.jsx)("div",{className:"min-h-screen bg-violet-50 p-4 sm:p-6",children:(0,yf.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,yf.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,yf.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-800",children:"\u2699\ufe0f Settings"}),(0,yf.jsx)("button",{onClick:i,className:"px-6 py-2 min-h-[44px] bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition",children:"\u2190 Back"})]}),(0,yf.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-6",children:[(0,yf.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,yf.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83d\udc64 My Profile"}),(0,yf.jsx)("button",{onClick:()=>a(!o),className:"px-4 py-2 min-h-[44px] rounded-lg font-semibold transition ".concat(o?"bg-red-500 text-white hover:bg-red-600":"bg-violet-500 text-white hover:bg-violet-600"),children:o?"Cancel":"\u270f\ufe0f Edit"})]}),o?(0,yf.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),y(!0),g("");try{if(await function(t,e,n){t=Jh(t,nd);const i=Jh(t.firestore,ad),r=xd(i);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(e=N(e))||e instanceof hd?kd(r,"updateDoc",t._key,e,n,a):Sd(r,"updateDoc",t._key,e),of(i,[s.toMutation(t._key,Ya.exists(!0))])}(sd(uf,"users",e),{name:l.name,age:parseInt(l.age),grade:parseInt(l.grade),updatedAt:new Date}),u&&u===d)await function(t,e){return hi(N(t),null,e)}(cf.currentUser,u),h(""),f("");else if(u||d)return g("\u274c Passwords do not match"),void y(!1);g("\u2705 Profile updated successfully!"),a(!1),s&&await s();const t=setTimeout(()=>{i()},1500);return()=>clearTimeout(t)}catch(n){g("\u274c Error: ".concat(n.message))}finally{y(!1)}},className:"space-y-4",children:[(0,yf.jsxs)("div",{children:[(0,yf.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Name"}),(0,yf.jsx)("input",{type:"text",value:l.name,onChange:t=>c(G(G({},l),{},{name:t.target.value})),className:"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600",required:!0})]}),(0,yf.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yf.jsxs)("div",{children:[(0,yf.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Age"}),(0,yf.jsx)("input",{type:"number",value:l.age,onChange:t=>c(G(G({},l),{},{age:t.target.value})),className:"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600",min:"4",max:"18",required:!0})]}),(0,yf.jsxs)("div",{children:[(0,yf.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Grade"}),(0,yf.jsx)("select",{value:l.grade,onChange:t=>c(G(G({},l),{},{grade:t.target.value})),className:"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600",required:!0,children:[1,2,3,4,5,6,7,8,9,10].map(t=>(0,yf.jsxs)("option",{value:t,children:["Grade ",t]},t))})]})]}),!(null!==n&&void 0!==n&&n.isGuest)&&(0,yf.jsxs)(yf.Fragment,{children:[(0,yf.jsx)("div",{className:"pt-4 border-t-2 border-gray-200",children:(0,yf.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"\ud83d\udd10 Change Password (Optional)"})}),(0,yf.jsxs)("div",{children:[(0,yf.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"New Password"}),(0,yf.jsx)("input",{type:"password",value:u,onChange:t=>h(t.target.value),placeholder:"Leave blank to keep current password",className:"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600"})]}),(0,yf.jsxs)("div",{children:[(0,yf.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Confirm Password"}),(0,yf.jsx)("input",{type:"password",value:d,onChange:t=>f(t.target.value),placeholder:"Confirm new password",className:"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600"})]})]}),p&&(0,yf.jsx)("div",{className:"p-3 rounded-lg text-sm font-semibold ".concat(p.includes("\u2705")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:p}),(0,yf.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-gradient-to-r from-violet-500 to-purple-600 text-white font-bold py-3 min-h-[44px] rounded-lg hover:shadow-lg transform hover:scale-105 transition disabled:opacity-50",children:m?"Saving...":"\ud83d\udcbe Save Changes"})]}):(0,yf.jsxs)("div",{className:"space-y-4",children:[(0,yf.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[(0,yf.jsx)("span",{className:"font-semibold text-gray-700",children:"Name:"}),(0,yf.jsx)("span",{className:"text-xl text-violet-600",children:l.name})]}),(0,yf.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[(0,yf.jsx)("span",{className:"font-semibold text-gray-700",children:"Age:"}),(0,yf.jsxs)("span",{className:"text-xl text-violet-600",children:[l.age," years"]})]}),(0,yf.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[(0,yf.jsx)("span",{className:"font-semibold text-gray-700",children:"Grade:"}),(0,yf.jsxs)("span",{className:"text-xl text-violet-600",children:["Grade ",l.grade]})]}),(0,yf.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[(0,yf.jsx)("span",{className:"font-semibold text-gray-700",children:"Email:"}),(0,yf.jsx)("span",{className:"text-sm text-gray-600",children:null===n||void 0===n?void 0:n.email})]}),(0,yf.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[(0,yf.jsx)("span",{className:"font-semibold text-gray-700",children:"Account Type:"}),(0,yf.jsx)("span",{className:"text-sm font-bold px-3 py-1 rounded-full bg-violet-200 text-violet-800",children:null!==n&&void 0!==n&&n.isGuest?"Guest":"Premium"})]})]})]}),(0,yf.jsxs)("div",{className:"bg-violet-50 border-l-4 border-violet-500 rounded-lg p-6",children:[(0,yf.jsx)("h3",{className:"font-bold text-violet-800 mb-3",children:"\ud83d\udca1 Settings Tips"}),(0,yf.jsxs)("ul",{className:"text-sm text-violet-700 space-y-2",children:[(0,yf.jsx)("li",{children:"\u2705 Update your age/grade to get better recommendations"}),(0,yf.jsx)("li",{children:"\u2705 Change your name anytime"}),(0,yf.jsx)("li",{children:"\u2705 Password changes are secure and encrypted"}),(0,yf.jsx)("li",{children:"\u2705 Your progress is always saved to the cloud"})]})]})]})})}const GE=function(){const[t,e]=(0,r.useState)(null),[n,i]=(0,r.useState)(null),[s,o]=(0,r.useState)("home"),[a,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const t=function(t,e,n,i){return N(t).onAuthStateChanged(e,n,i)}(cf,async t=>{if(t){e(t);try{const e=await df(t.uid);i(e)}catch(n){console.error("Error fetching user profile:",n)}}else e(null),i(null);l(!1)});return()=>t()},[]);const h=async()=>{try{await function(t){return N(t).signOut()}(cf),o("home")}catch(t){console.error("Error logging out:",t)}},d=()=>{o("home")};return a?(0,yf.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-violet-500 to-purple-600",children:(0,yf.jsxs)("div",{className:"text-center",children:[(0,yf.jsx)("div",{className:"text-6xl mb-4 animate-bounce",children:"\ud83e\uddd9"}),(0,yf.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Loading Math Wizard..."})]})}):t&&n?(0,yf.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,yf.jsx)("nav",{className:"bg-gradient-to-r from-violet-600 to-purple-700 text-white shadow-lg sticky top-0 z-50",children:(0,yf.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:[(0,yf.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yf.jsxs)("button",{onClick:()=>{o("home"),u(!1)},className:"flex items-center space-x-2 hover:opacity-80 transition cursor-pointer",children:[(0,yf.jsx)("span",{className:"text-2xl sm:text-3xl",children:"\ud83e\uddd9"}),(0,yf.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"Math Wizard"})]}),(0,yf.jsxs)("div",{className:"hidden md:block text-center",children:[(0,yf.jsx)("p",{className:"text-sm opacity-90",children:"Welcome back!"}),(0,yf.jsxs)("p",{className:"font-semibold",children:[null===n||void 0===n?void 0:n.name," \u2022 Grade ",null===n||void 0===n?void 0:n.grade]})]}),(0,yf.jsxs)("div",{className:"hidden md:flex items-center space-x-3",children:[(0,yf.jsx)("button",{onClick:()=>o("home"),className:"px-4 py-2 rounded-lg font-semibold transition ".concat("home"===s?"bg-white text-violet-700 shadow-lg":"hover:bg-white hover:bg-opacity-20"),children:"\ud83c\udfae Play"}),(0,yf.jsx)("button",{onClick:()=>o("analytics"),className:"px-4 py-2 rounded-lg font-semibold transition ".concat("analytics"===s?"bg-white text-violet-700 shadow-lg":"hover:bg-white hover:bg-opacity-20"),children:"\ud83d\udcca Progress"}),(0,yf.jsx)("button",{onClick:()=>o("settings"),className:"px-4 py-2 rounded-lg font-semibold transition ".concat("settings"===s?"bg-white text-violet-700 shadow-lg":"hover:bg-white hover:bg-opacity-20"),children:"\u2699\ufe0f Settings"}),(0,yf.jsx)("button",{onClick:h,className:"px-4 py-2 rounded-lg font-semibold bg-red-600 hover:bg-red-700 transition",children:"\ud83d\udeaa Logout"})]}),(0,yf.jsx)("button",{onClick:()=>u(!c),className:"md:hidden p-2 rounded-lg hover:bg-white hover:bg-opacity-20 transition","aria-label":"Toggle menu",children:c?(0,yf.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,yf.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,yf.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,yf.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),c&&(0,yf.jsxs)("div",{className:"md:hidden mt-3 pt-3 border-t border-white border-opacity-30 space-y-2",children:[(0,yf.jsxs)("p",{className:"text-sm text-center opacity-90 mb-2",children:[null===n||void 0===n?void 0:n.name," \u2022 Grade ",null===n||void 0===n?void 0:n.grade]}),(0,yf.jsx)("button",{onClick:()=>{o("home"),u(!1)},className:"w-full text-left px-4 py-3 rounded-lg font-semibold transition ".concat("home"===s?"bg-white text-violet-700 shadow":"hover:bg-white hover:bg-opacity-20"),children:"\ud83c\udfae Play"}),(0,yf.jsx)("button",{onClick:()=>{o("analytics"),u(!1)},className:"w-full text-left px-4 py-3 rounded-lg font-semibold transition ".concat("analytics"===s?"bg-white text-violet-700 shadow":"hover:bg-white hover:bg-opacity-20"),children:"\ud83d\udcca Progress"}),(0,yf.jsx)("button",{onClick:()=>{o("settings"),u(!1)},className:"w-full text-left px-4 py-3 rounded-lg font-semibold transition ".concat("settings"===s?"bg-white text-violet-700 shadow":"hover:bg-white hover:bg-opacity-20"),children:"\u2699\ufe0f Settings"}),(0,yf.jsx)("button",{onClick:()=>{h(),u(!1)},className:"w-full text-left px-4 py-3 rounded-lg font-semibold bg-red-600 hover:bg-red-700 transition",children:"\ud83d\udeaa Logout"})]})]})}),(0,yf.jsxs)("main",{className:"home"===s?"":"py-8",children:["home"===s&&(0,yf.jsx)("div",{className:"animate-fade-in",children:(0,yf.jsx)(Xg,{userId:t.uid,userGrade:null===n||void 0===n?void 0:n.grade,userProfile:n})},"home"),"analytics"===s&&(0,yf.jsx)("div",{className:"animate-fade-in",children:(0,yf.jsx)(HE,{userId:t.uid})},"analytics"),"settings"===s&&(0,yf.jsx)("div",{className:"animate-fade-in",children:(0,yf.jsx)(qE,{userId:t.uid,userProfile:n,onBack:()=>o("home"),onProfileUpdated:async()=>{if(t)try{const e=await df(t.uid);i(e)}catch(e){console.error("Error refreshing profile:",e)}}})},"settings")]}),(0,yf.jsx)("footer",{className:"bg-gray-900 text-white py-6 mt-12",children:(0,yf.jsxs)("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[(0,yf.jsx)("p",{className:"text-sm opacity-75",children:"\xa9 2026 Math Wizard. Made with \ud83d\udc99 for curious minds."}),(0,yf.jsx)("p",{className:"text-xs opacity-50 mt-2",children:"Keep your learning streak alive! \ud83d\udd25"})]})})]}):(0,yf.jsx)(vf,{onRegistrationComplete:d})};s.createRoot(document.getElementById("root")).render((0,yf.jsx)(r.StrictMode,{children:(0,yf.jsx)(GE,{})}))})();
//# sourceMappingURL=main.3d23bbfd.js.map