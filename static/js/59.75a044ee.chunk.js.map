{"version":3,"file":"static/js/59.75a044ee.chunk.js","mappings":"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","sources":["components/ParentDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { Line, Doughnut } from 'react-chartjs-2';\nimport 'chart.js/auto';\nimport { getUserStats, getUserAnswerHistory } from '../services/databaseService';\nimport { getUserXP, getLevelForXP, getLevelTitle, levelProgress, xpToNextLevel } from '../services/xpService';\n\n/**\n * ParentDashboard ‚Äî A dedicated, read-only overview for parents / guardians.\n *\n * Shows:\n *  1. Child summary card (name, grade, level, total XP)\n *  2. Weekly progress report (questions per day, accuracy trend)\n *  3. Time-spent estimation (based on answer count √ó average pace)\n *  4. Topic mastery breakdown (doughnut chart)\n *  5. Strengths & areas for improvement\n *  6. Recent activity feed (last 20 answers)\n */\n\nconst ESTIMATED_SECONDS_PER_QUESTION = 45; // average time per question for estimation\n\nfunction formatDuration(totalSeconds) {\n  const h = Math.floor(totalSeconds / 3600);\n  const m = Math.floor((totalSeconds % 3600) / 60);\n  if (h > 0) return `${h}h ${m}m`;\n  return `${m}m`;\n}\n\nexport default function ParentDashboard({ userId, userProfile, onBack }) {\n  const [stats, setStats] = useState(null);\n  const [xpData, setXpData] = useState(null);\n  const [weeklyData, setWeeklyData] = useState(null);\n  const [recentActivity, setRecentActivity] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const loadData = useCallback(async () => {\n    setLoading(true);\n    try {\n      const [statsData, history, xp] = await Promise.all([\n        getUserStats(userId),\n        getUserAnswerHistory(userId),\n        getUserXP(userId),\n      ]);\n\n      setStats(statsData);\n      setXpData(xp);\n\n      // --- Weekly data (last 7 days) ---\n      const today = new Date();\n      const last7 = [];\n      for (let i = 6; i >= 0; i--) {\n        const d = new Date(today);\n        d.setDate(d.getDate() - i);\n        last7.push(d.toISOString().slice(0, 10));\n      }\n\n      const dayBuckets = {};\n      last7.forEach(d => { dayBuckets[d] = { correct: 0, total: 0 }; });\n\n      if (history && history.length > 0) {\n        history.forEach(a => {\n          let date;\n          if (a.timestamp?.toDate) date = a.timestamp.toDate();\n          else if (a.timestamp) date = new Date(a.timestamp);\n          else return;\n          const key = date.toISOString().slice(0, 10);\n          if (dayBuckets[key]) {\n            dayBuckets[key].total++;\n            if (a.correct) dayBuckets[key].correct++;\n          }\n        });\n\n        // Recent activity ‚Äî last 20\n        const recent = history.slice(-20).reverse().map(a => {\n          let date;\n          if (a.timestamp?.toDate) date = a.timestamp.toDate();\n          else if (a.timestamp) date = new Date(a.timestamp);\n          else date = new Date();\n          return {\n            question: a.question || 'Question',\n            operation: a.operation || 'general',\n            correct: !!a.correct,\n            date,\n          };\n        });\n        setRecentActivity(recent);\n      }\n\n      setWeeklyData({\n        labels: last7.map(d => {\n          const dt = new Date(d + 'T12:00:00');\n          return dt.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });\n        }),\n        questions: last7.map(d => dayBuckets[d].total),\n        accuracy: last7.map(d => dayBuckets[d].total > 0 ? Math.round((dayBuckets[d].correct / dayBuckets[d].total) * 100) : null),\n      });\n    } catch (error) {\n      console.error('Error loading parent dashboard:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [userId]);\n\n  useEffect(() => { loadData(); }, [loadData]);\n\n  // --- Loading skeleton ---\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 p-4 sm:p-6\">\n        <div className=\"max-w-5xl mx-auto\">\n          <div className=\"skeleton h-9 w-64 mx-auto mb-4 rounded\" />\n          <div className=\"skeleton h-5 w-48 mx-auto mb-8 rounded\" />\n          <div className=\"grid sm:grid-cols-3 gap-4 mb-8\">\n            {[1, 2, 3].map(i => (\n              <div key={i} className=\"bg-white rounded-xl p-6 shadow-lg\">\n                <div className=\"skeleton h-5 w-24 mb-3 rounded\" />\n                <div className=\"skeleton h-8 w-20 mb-2 rounded\" />\n                <div className=\"skeleton h-3 w-full rounded\" />\n              </div>\n            ))}\n          </div>\n          <div className=\"grid md:grid-cols-2 gap-6 mb-8\">\n            {[1, 2].map(i => (\n              <div key={i} className=\"bg-white rounded-xl p-6 shadow-lg\">\n                <div className=\"skeleton h-6 w-40 mb-4 rounded\" />\n                <div className=\"skeleton h-56 w-full rounded\" />\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const level = getLevelForXP(xpData?.totalXP || 0);\n  const totalTimeEstimate = (stats?.totalQuestions || 0) * ESTIMATED_SECONDS_PER_QUESTION;\n  const weeklyQuestions = weeklyData ? weeklyData.questions.reduce((a, b) => a + b, 0) : 0;\n  const weeklyTimeEstimate = weeklyQuestions * ESTIMATED_SECONDS_PER_QUESTION;\n\n  // --- Topic mastery doughnut ---\n  const topicColors = [\n    '#7C3AED', '#F59E0B', '#10B981', '#EF4444', '#3B82F6',\n    '#EC4899', '#8B5CF6', '#14B8A6', '#F97316', '#6366F1',\n  ];\n  const hasTopic = stats?.weakAreas?.length > 0;\n  const doughnutData = {\n    labels: hasTopic ? stats.weakAreas.map(a => a.name.charAt(0).toUpperCase() + a.name.slice(1)) : ['No data'],\n    datasets: [{\n      data: hasTopic ? stats.weakAreas.map(a => a.total) : [1],\n      backgroundColor: hasTopic ? topicColors.slice(0, stats.weakAreas.length) : ['#E5E7EB'],\n      borderWidth: 2,\n      borderColor: '#fff',\n    }],\n  };\n\n  // --- Weekly questions line chart ---\n  const weeklyChartData = weeklyData ? {\n    labels: weeklyData.labels,\n    datasets: [\n      {\n        label: 'Questions',\n        data: weeklyData.questions,\n        borderColor: '#7C3AED',\n        backgroundColor: 'rgba(124, 58, 237, 0.1)',\n        tension: 0.4,\n        fill: true,\n        pointRadius: 5,\n        pointBackgroundColor: '#7C3AED',\n        yAxisID: 'y',\n      },\n      {\n        label: 'Accuracy %',\n        data: weeklyData.accuracy,\n        borderColor: '#10B981',\n        backgroundColor: 'rgba(16, 185, 129, 0.08)',\n        tension: 0.4,\n        fill: false,\n        pointRadius: 5,\n        pointBackgroundColor: '#10B981',\n        borderDash: [5, 5],\n        yAxisID: 'y1',\n        spanGaps: true,\n      },\n    ],\n  } : null;\n\n  // Strengths & weaknesses\n  const strengths = (stats?.weakAreas || []).filter(a => a.accuracy >= 70).sort((a, b) => b.accuracy - a.accuracy);\n  const improvements = (stats?.weakAreas || []).filter(a => a.accuracy < 70).sort((a, b) => a.accuracy - b.accuracy);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-4 sm:p-6\">\n      <div className=\"max-w-5xl mx-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-800\">üë®‚Äçüë©‚Äçüëß Parent Dashboard</h1>\n            <p className=\"text-gray-500 text-sm mt-1\">Progress report for <span className=\"font-semibold text-violet-600\">{userProfile?.name}</span></p>\n          </div>\n          <button\n            onClick={onBack}\n            className=\"px-5 py-2 min-h-[44px] bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition font-semibold\"\n          >\n            ‚Üê Back\n          </button>\n        </div>\n\n        {/* Child Summary Cards */}\n        <div className=\"grid sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\n          {/* Level */}\n          <div className=\"bg-white rounded-xl p-5 shadow-lg border-t-4 border-violet-500\">\n            <p className=\"text-sm font-semibold text-gray-500 mb-1\">Level</p>\n            <p className=\"text-2xl font-bold text-violet-600\">Lv. {level}</p>\n            <p className=\"text-xs text-gray-500 mt-1\">{getLevelTitle(level)}</p>\n            <div className=\"w-full h-2 bg-gray-200 rounded-full mt-2 overflow-hidden\">\n              <div\n                className=\"h-full bg-gradient-to-r from-violet-400 to-purple-600 rounded-full transition-all\"\n                style={{ width: `${Math.round(levelProgress(xpData?.totalXP || 0) * 100)}%` }}\n              />\n            </div>\n            <p className=\"text-xs text-gray-400 mt-1\">{xpData?.totalXP || 0} XP total ‚Ä¢ {xpToNextLevel(xpData?.totalXP || 0)} to next</p>\n          </div>\n\n          {/* Weekly Activity */}\n          <div className=\"bg-white rounded-xl p-5 shadow-lg border-t-4 border-amber-500\">\n            <p className=\"text-sm font-semibold text-gray-500 mb-1\">This Week</p>\n            <p className=\"text-2xl font-bold text-amber-600\">{weeklyQuestions}</p>\n            <p className=\"text-xs text-gray-500 mt-1\">questions answered</p>\n            <p className=\"text-xs text-gray-400 mt-2\">‚è±Ô∏è ~{formatDuration(weeklyTimeEstimate)} estimated</p>\n          </div>\n\n          {/* Overall Accuracy */}\n          <div className=\"bg-white rounded-xl p-5 shadow-lg border-t-4 border-emerald-500\">\n            <p className=\"text-sm font-semibold text-gray-500 mb-1\">Accuracy</p>\n            <p className=\"text-2xl font-bold text-emerald-600\">{stats?.accuracy || 0}%</p>\n            <p className=\"text-xs text-gray-500 mt-1\">overall score</p>\n            <p className=\"text-xs text-gray-400 mt-2\">{stats?.totalQuestions || 0} total questions</p>\n          </div>\n\n          {/* Time Spent */}\n          <div className=\"bg-white rounded-xl p-5 shadow-lg border-t-4 border-blue-500\">\n            <p className=\"text-sm font-semibold text-gray-500 mb-1\">Total Time</p>\n            <p className=\"text-2xl font-bold text-blue-600\">{formatDuration(totalTimeEstimate)}</p>\n            <p className=\"text-xs text-gray-500 mt-1\">estimated practice time</p>\n            <p className=\"text-xs text-gray-400 mt-2\">Grade {userProfile?.grade} ‚Ä¢ Age {userProfile?.age}</p>\n          </div>\n        </div>\n\n        {/* Charts Row */}\n        <div className=\"grid md:grid-cols-2 gap-6 mb-8\">\n          {/* Weekly Trend */}\n          <div className=\"bg-white rounded-xl p-6 shadow-lg\">\n            <h3 className=\"text-lg font-bold text-gray-800 mb-4\">üìÖ Weekly Activity</h3>\n            {weeklyChartData ? (\n              <div className=\"relative h-64\">\n                <Line\n                  data={weeklyChartData}\n                  options={{\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    interaction: { mode: 'index', intersect: false },\n                    plugins: {\n                      legend: { display: true, labels: { font: { size: 11 }, padding: 10 } },\n                    },\n                    scales: {\n                      y: { beginAtZero: true, title: { display: true, text: 'Questions' }, ticks: { font: { size: 10 } } },\n                      y1: { beginAtZero: true, max: 100, position: 'right', title: { display: true, text: 'Accuracy %' }, ticks: { font: { size: 10 } }, grid: { drawOnChartArea: false } },\n                      x: { ticks: { font: { size: 9 }, maxRotation: 45 } },\n                    },\n                  }}\n                />\n              </div>\n            ) : (\n              <div className=\"h-64 flex items-center justify-center text-gray-400\">No data yet</div>\n            )}\n          </div>\n\n          {/* Topic Mastery */}\n          <div className=\"bg-white rounded-xl p-6 shadow-lg\">\n            <h3 className=\"text-lg font-bold text-gray-800 mb-4\">üéØ Topic Distribution</h3>\n            <div className=\"relative h-64 flex items-center justify-center\">\n              <Doughnut\n                data={doughnutData}\n                options={{\n                  responsive: true,\n                  maintainAspectRatio: false,\n                  plugins: {\n                    legend: { position: 'bottom', labels: { font: { size: 11 }, padding: 8, boxWidth: 12 } },\n                  },\n                }}\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Strengths & Improvements */}\n        <div className=\"grid md:grid-cols-2 gap-6 mb-8\">\n          {/* Strengths */}\n          <div className=\"bg-white rounded-xl p-6 shadow-lg\">\n            <h3 className=\"text-lg font-bold text-gray-800 mb-4\">üí™ Strengths</h3>\n            {strengths.length > 0 ? (\n              <ul className=\"space-y-2\">\n                {strengths.map((s, i) => (\n                  <li key={i} className=\"flex items-center justify-between p-3 bg-green-50 rounded-lg\">\n                    <span className=\"font-semibold text-green-700 capitalize\">{s.name}</span>\n                    <span className=\"text-sm font-bold text-green-600 bg-green-200 px-3 py-1 rounded-full\">{s.accuracy}%</span>\n                  </li>\n                ))}\n              </ul>\n            ) : (\n              <p className=\"text-gray-400 text-sm text-center py-4\">Keep practicing to build strengths!</p>\n            )}\n          </div>\n\n          {/* Areas for Improvement */}\n          <div className=\"bg-white rounded-xl p-6 shadow-lg\">\n            <h3 className=\"text-lg font-bold text-gray-800 mb-4\">üìà Areas for Improvement</h3>\n            {improvements.length > 0 ? (\n              <ul className=\"space-y-2\">\n                {improvements.map((s, i) => (\n                  <li key={i} className=\"flex items-center justify-between p-3 bg-amber-50 rounded-lg\">\n                    <div>\n                      <span className=\"font-semibold text-amber-700 capitalize block\">{s.name}</span>\n                      <span className=\"text-xs text-gray-500\">{s.total} questions attempted</span>\n                    </div>\n                    <span className={`text-sm font-bold px-3 py-1 rounded-full ${\n                      s.accuracy < 50 ? 'text-red-600 bg-red-100' : 'text-amber-600 bg-amber-200'\n                    }`}>{s.accuracy}%</span>\n                  </li>\n                ))}\n              </ul>\n            ) : (\n              <p className=\"text-gray-400 text-sm text-center py-4\">Great job ‚Äî all topics above 70%!</p>\n            )}\n          </div>\n        </div>\n\n        {/* Recent Activity */}\n        <div className=\"bg-white rounded-xl p-6 shadow-lg mb-8\">\n          <h3 className=\"text-lg font-bold text-gray-800 mb-4\">üïê Recent Activity</h3>\n          {recentActivity.length > 0 ? (\n            <div className=\"space-y-2 max-h-80 overflow-y-auto\">\n              {recentActivity.map((a, i) => (\n                <div key={i} className={`flex items-center justify-between p-3 rounded-lg text-sm ${\n                  a.correct ? 'bg-green-50' : 'bg-red-50'\n                }`}>\n                  <div className=\"flex-1 min-w-0 mr-3\">\n                    <p className=\"font-medium text-gray-800 truncate\">{a.question}</p>\n                    <p className=\"text-xs text-gray-500 capitalize\">{a.operation} ‚Ä¢ {a.date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', hour: 'numeric', minute: '2-digit' })}</p>\n                  </div>\n                  <span className={`flex-shrink-0 px-2 py-1 rounded-full text-xs font-bold ${\n                    a.correct ? 'bg-green-200 text-green-700' : 'bg-red-200 text-red-700'\n                  }`}>\n                    {a.correct ? '‚úì Correct' : '‚úó Wrong'}\n                  </span>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"text-gray-400 text-sm text-center py-4\">No activity yet ‚Äî start practicing!</p>\n          )}\n        </div>\n\n        {/* Parent Tips */}\n        <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border-l-4 border-blue-500\">\n          <h3 className=\"font-bold text-blue-800 mb-3\">üí° Tips for Parents</h3>\n          <ul className=\"text-sm text-blue-700 space-y-2\">\n            <li>üìä Check this dashboard weekly to monitor learning progress</li>\n            <li>üéØ Encourage practice on topics with accuracy below 70%</li>\n            <li>üî• Celebrate streaks and level-ups to keep motivation high</li>\n            <li>‚è∞ Aim for at least 10 questions per day for steady improvement</li>\n            <li>üß™ Use Test mode periodically to track progress on specific topics</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["formatDuration","totalSeconds","h","Math","floor","m","concat","ParentDashboard","_ref","_stats$weakAreas","userId","userProfile","onBack","stats","setStats","useState","xpData","setXpData","weeklyData","setWeeklyData","recentActivity","setRecentActivity","loading","setLoading","loadData","useCallback","async","statsData","history","xp","Promise","all","getUserStats","getUserAnswerHistory","getUserXP","today","Date","last7","i","d","setDate","getDate","push","toISOString","slice","dayBuckets","forEach","correct","total","length","a","_a$timestamp","date","timestamp","toDate","key","recent","reverse","map","_a$timestamp2","question","operation","labels","toLocaleDateString","weekday","month","day","questions","accuracy","round","error","console","useEffect","_jsx","className","children","_jsxs","level","getLevelForXP","totalXP","totalTimeEstimate","totalQuestions","weeklyQuestions","reduce","b","weeklyTimeEstimate","hasTopic","weakAreas","doughnutData","name","charAt","toUpperCase","datasets","data","backgroundColor","borderWidth","borderColor","weeklyChartData","label","tension","fill","pointRadius","pointBackgroundColor","yAxisID","borderDash","spanGaps","strengths","filter","sort","improvements","onClick","getLevelTitle","style","width","levelProgress","xpToNextLevel","grade","age","Line","options","responsive","maintainAspectRatio","interaction","mode","intersect","plugins","legend","display","font","size","padding","scales","y","beginAtZero","title","text","ticks","y1","max","position","grid","drawOnChartArea","x","maxRotation","Doughnut","boxWidth","s","hour","minute"],"ignoreList":[],"sourceRoot":""}