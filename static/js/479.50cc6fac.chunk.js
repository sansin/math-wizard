"use strict";(self.webpackChunkmath_wizard=self.webpackChunkmath_wizard||[]).push([[479],{479(e,t,a){a.r(t),a.d(t,{default:()=>E});var n=a(43),s=a(722);const r={"KG-1":{gradeLevel:"KG - 1st Grade",complexity:"beginner",modules:[{name:"Addition",topics:["Introduction to Addition","Addition on Number Line","Addition Patterns","Single-digit Addition","Two-digit Addition"]},{name:"Subtraction",topics:["Introduction to Subtraction","Subtraction on Number Line","Single-digit Subtraction","Two-digit Subtraction","Number Patterns in Subtraction"]},{name:"Multiplication",topics:["Counting in Groups","Introduction to Multiplication","Repeated Addition","Multiplication Tables (2-10)","Multiplication Properties"]},{name:"Division",topics:["Introduction to Division","Division as Grouping","Division as Sharing","Basic Division Facts","Speed Division"]},{name:"Fractions",topics:["Introduction to Fractions","Halves and Thirds","Equivalent Fractions","Like and Unlike Fractions","Fractions of a Whole"]},{name:"Logic & Patterns",topics:["Pattern Recognition","Logical Thinking","Arithmetic Progressions","Geometric Patterns","Puzzles and Games"]}]},"2-3":{gradeLevel:"Grade 2-3",complexity:"elementary",modules:[{name:"Arithmetic Operations",topics:["Addition with Regrouping","Subtraction with Regrouping","Multiplication Facts","Division Facts","Multi-digit Addition & Subtraction"]},{name:"Fractions & Decimals",topics:["Understanding Fractions","Comparing Fractions","Introduction to Decimals","Decimal Place Value","Fraction Operations"]},{name:"Geometry",topics:["Shapes and Properties","Angles Basics","Perimeter and Area","Symmetry","Coordinate Geometry Intro"]},{name:"Variables & Equations",topics:["Introduction to Variables","Simple Equations","Balancing Equations","Word Problems with Variables","Solving for Unknown"]}]},"4-5":{gradeLevel:"Grade 4-5",complexity:"intermediate",modules:[{name:"Arithmetic",topics:["Multi-digit Multiplication","Long Division","Decimal Operations","Fraction Addition & Subtraction","Mixed Numbers"]},{name:"Fractions & Decimals",topics:["Equivalent Fractions","Comparing and Ordering Fractions","Decimal Place Value","Decimal Comparison","Fraction-Decimal Conversion"]},{name:"Geometry",topics:["Angles and Triangles","Quadrilaterals","Perimeter and Area Calculation","Volume Basics","Coordinate Geometry"]},{name:"Algebra",topics:["Variables and Expressions","Equations with Variables","Inequalities","Order of Operations","Function Basics"]},{name:"Statistics & Probability",topics:["Data Collection and Analysis","Graphs and Charts","Probability Basics","Mean and Median","Logical Reasoning"]}]},"6-7":{gradeLevel:"Grade 6-7",complexity:"intermediate-advanced",modules:[{name:"Arithmetic & Number Theory",topics:["Factors and Multiples","Prime Factorization","GCD and LCM","Whole Numbers and Integers","Rational Numbers"]},{name:"Fractions, Decimals & Percentages",topics:["Fraction Operations","Decimal Operations","Percentage Calculations","Ratios and Proportions","Rate Problems"]},{name:"Pre-Algebra",topics:["Expressions and Equations","Two-step Equations","Inequalities","Functions and Relations","Graphing Linear Equations"]},{name:"Geometry",topics:["Angles and Angle Relationships","Triangles and Polygons","Area and Perimeter","Surface Area and Volume","Coordinate Geometry"]},{name:"Statistics & Probability",topics:["Data Analysis","Mean, Median, Mode","Probability Theory","Counting Principles","Sample Space"]},{name:"Advanced Reasoning",topics:["Logical Deduction","Pattern Analysis","Puzzles and Games","Mathematical Proof Basics","Problem-Solving Techniques"]}]},"7-8":{gradeLevel:"Grade 7-8",complexity:"advanced",modules:[{name:"Algebra",topics:["Linear Equations","Systems of Equations","Quadratic Equations Intro","Polynomials","Factoring"]},{name:"Functions & Graphing",topics:["Functions and Notation","Linear Functions","Slope and Intercepts","Function Evaluation","Rate of Change"]},{name:"Geometry & Trigonometry",topics:["Congruence and Similarity","Pythagorean Theorem","Area and Volume","Surface Area","Coordinate Geometry"]},{name:"Statistics & Probability",topics:["Probability Distributions","Expected Value","Mean, Median, Mode","Data Analysis","Counting Principles"]},{name:"Exponents & Roots",topics:["Powers and Exponents","Scientific Notation","Radicals and Roots","Rational Exponents","Exponential Growth"]}]},"9+":{gradeLevel:"Grade 9+",complexity:"expert",modules:[{name:"Algebra",topics:["Quadratic Equations","Polynomials and Factoring","Rational Expressions","Exponential and Logarithmic Functions","Complex Numbers"]},{name:"Functions & Analysis",topics:["Advanced Functions","Composition of Functions","Inverse Functions","Limits Introduction","Continuity"]},{name:"Geometry & Trigonometry",topics:["Coordinate Geometry","Advanced Trigonometry","Trigonometric Functions","Law of Sines and Cosines","Vectors Basics"]},{name:"Calculus Basics",topics:["Limits and Derivatives","Derivative Rules","Applications of Derivatives","Integration Basics","Fundamental Theorem"]},{name:"Statistics & Probability",topics:["Advanced Probability","Distributions","Hypothesis Testing","Regression Analysis","Bayesian Statistics"]},{name:"Mathematical Reasoning",topics:["Mathematical Proofs","Logical Argumentation","Discrete Mathematics","Set Theory","Combinatorics"]}]}},i=e=>r[e]||r["4-5"],o=e=>{const t=(e=>{const t=i(e),a=[];return t.modules.forEach(e=>{a.push(...e.topics)}),a})(e);return t[Math.floor(Math.random()*t.length)]},l=async function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const s=["logic_patterns","algebra","geometry","statistics","calculus","fractions","decimals"].includes(a);if(n&&n.length>0&&{NODE_ENV:"production",PUBLIC_URL:"/math-wizard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDjPiJ9hUQpr6LR3DwknDRSdJgQ2ihi7w8",REACT_APP_FIREBASE_AUTH_DOMAIN:"math-wizard-e9ac3.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"math-wizard-e9ac3",REACT_APP_FIREBASE_STORAGE_BUCKET:"math-wizard-e9ac3.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1052246851665",REACT_APP_FIREBASE_APP_ID:"1:1052246851665:web:82c81f16e791aede4c7870"}.REACT_APP_OPENAI_API_KEY)return c(e,t,a,n,s);const r=s?.9:.7;if({NODE_ENV:"production",PUBLIC_URL:"/math-wizard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDjPiJ9hUQpr6LR3DwknDRSdJgQ2ihi7w8",REACT_APP_FIREBASE_AUTH_DOMAIN:"math-wizard-e9ac3.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"math-wizard-e9ac3",REACT_APP_FIREBASE_STORAGE_BUCKET:"math-wizard-e9ac3.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1052246851665",REACT_APP_FIREBASE_APP_ID:"1:1052246851665:web:82c81f16e791aede4c7870"}.REACT_APP_OPENAI_API_KEY&&Math.random()<r)return c(e,t,a,n,s);return{question:d(a,t),answer:null}},c=async function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];try{const c=((e,t)=>{if(!t||0===t.length)return o(e);const a=r[e];if(!a||!a.modules)return o(e);const n=[];return a.modules.forEach(e=>{t.includes(e.name)&&n.push(...e.topics)}),n.length>0?n[Math.floor(Math.random()*n.length)]:o(e)})(t,n);let d="medium";if(e&&e.length>0){const t=e.slice(-10).reduce((e,t)=>e+(t.correct?1:0),0)/Math.min(10,e.length);d=t>.85?"hard":t>.7?"medium":"easy"}const m=n&&n.length>0?"Selected modules: ".concat(n.join(", "),"\n"):"";let u="";n&&n.some(e=>e.includes("Logic & Patterns"))||"logic_patterns"===a||"logic_patterns_problem"===a?u='QUESTION TYPE: Logic & Patterns - Generate UNIQUE pattern/sequence questions.\nVARIETY: Use different types each time:\n- Number sequences (arithmetic, geometric, Fibonacci-like)\n- Letter sequences (alphabetical, skipping patterns)\n- Mixed alphanumeric patterns (1A, 2B, etc.)\n- Visual/shape patterns descriptions\n- Logical reasoning puzzles\n- Alternating patterns\nExamples: "What comes next: 2, 4, 6, 8, ___?", "Find the pattern: 1, 1, 2, 3, 5, 8, ___?", "Identify: A, C, E, G, ___?"\nCRITICAL: Each question must be DIFFERENT from previous ones. Focus on pattern recognition, NOT simple arithmetic.':"algebra"===a||"algebra_problem"===a?u='QUESTION TYPE: Algebra - Generate UNIQUE algebraic equations and expressions.\nVARIETY: Use different structures each time:\n- Linear equations (2x + 5 = 13, 3x - 7 = 8)\n- Variable relationships (If y = 2x and x = 5, what is y?)\n- Expression simplification (4x + 2x, 5a - 2a + 3a)\n- Multi-step equations\n- Word problems with variables\nExamples: "If 2x + 5 = 13, what is x?", "Simplify: 3x + 2x", "If y = 2x and x = 5, what is y?"\nCRITICAL: Do NOT generate simple arithmetic. Must involve variables or algebraic thinking.':"geometry"===a||"geometry_problem"===a?u='QUESTION TYPE: Geometry - Generate UNIQUE geometric problems.\nVARIETY: Use different concepts each time:\n- Area calculations (rectangles, triangles, circles, squares)\n- Perimeter and circumference\n- Volume calculations\n- Angle relationships\n- Coordinate geometry\n- 3D shapes\nExamples: "What is the area of a rectangle 8cm \xd7 5cm?", "If a square has area 36, what is its perimeter?", "A triangle has base 10cm and height 6cm. What is its area?"\nCRITICAL: Do NOT generate simple arithmetic. Must involve geometric concepts.':"statistics"===a||"statistics_problem"===a?u='QUESTION TYPE: Statistics & Probability - Generate UNIQUE statistical problems.\nVARIETY: Use different concepts each time:\n- Mean, median, mode, range\n- Probability (dice, coins, cards, combinations)\n- Data interpretation\n- Distribution analysis\n- Conditional probability\nExamples: "If a die is rolled, what is the probability of getting a 3?", "What is the mean of 2, 4, 6, 8?", "What is the median of 3, 5, 7, 9, 11?"\nCRITICAL: Do NOT generate simple arithmetic. Must involve statistical thinking.':"calculus"===a||"calculus_problem"===a?u='QUESTION TYPE: Calculus - Generate UNIQUE calculus concepts.\nVARIETY: Use different techniques each time:\n- Derivatives (power rule, chain rule)\n- Limits\n- Integration\n- Rates of change\n- Critical points\nExamples: "What is the derivative of x\xb2?", "Find the limit as x approaches 2 of (x + 1)", "What is the derivative of 3x\xb2 + 2x?"\nCRITICAL: Do NOT generate simple arithmetic. Must involve calculus concepts.':"fractions"===a||"fractions_problem"===a?u='QUESTION TYPE: Fractions - Generate UNIQUE fraction problems.\nVARIETY: Use different operations each time:\n- Addition of fractions (1/4 + 1/4, 1/2 + 1/3)\n- Subtraction of fractions\n- Multiplication/Division of fractions\n- Simplification (4/8, 6/12)\n- Finding fractions of numbers (1/3 of 30)\n- Word problems with fractions\nExamples: "What is 1/4 + 1/4?", "What is 2/3 of 18?", "Simplify: 4/8"\nCRITICAL: Focus on fractions, not basic arithmetic with whole numbers.':"decimals"!==a&&"decimals_problem"!==a||(u='QUESTION TYPE: Decimals - Generate UNIQUE decimal problems.\nVARIETY: Use different operations each time:\n- Addition of decimals (2.5 + 1.3)\n- Subtraction of decimals\n- Multiplication of decimals\n- Division of decimals\n- Decimal to fraction conversion\n- Real-world decimal problems (money, measurements)\nExamples: "What is 2.5 + 1.3?", "Multiply: 2.5 \xd7 4", "What is 10.5 \xf7 2?"\nCRITICAL: Focus on decimals, not basic arithmetic with whole numbers.');n&&n.some(e=>e.includes("Exponents"))&&!u&&(u='QUESTION TYPE: Exponents & Roots - Generate UNIQUE exponent and root problems.\nVARIETY: Use different concepts each time:\n- Powers (What is 2\u2075?, What is 3\u2074?)\n- Square roots (What is \u221a144?, \u221a81?)\n- Cube roots (What is \u221b27?)\n- Scientific notation (Express 5000 in scientific notation)\n- Exponent rules (Simplify 2\xb3 \xd7 2\u2074)\n- Negative exponents (What is 2\u207b\xb3?)\nExamples: "What is 2\u2075?", "What is \u221a144?", "Simplify: 3\xb2 \xd7 3\xb3", "What is 5\u2070?"\nCRITICAL: The answer must ALWAYS be a single number. Do NOT generate questions about growth rates or word problems.');const h="Generate a single UNIQUE and FRESH math question for a ".concat(t," grade student STRICTLY based on the selected modules.\n\n").concat(m,"Topic: ").concat(c,"\nComplexity: ").concat(d,"\n\n").concat(u,'\n\nCRITICAL REQUIREMENTS:\n- MUST focus on the topic: "').concat(c,'" from modules: ').concat(n.join(", "),"\n- Generate a COMPLETELY NEW and DIFFERENT question (not a variation of common questions)\n- Keep it to one sentence maximum\n- Make it engaging and age-appropriate for grade ").concat(t,'\n- NEVER generate: simple arithmetic like "What is X + Y?", "What is X - Y?", "What is X \xd7 Y?", "What is X \xf7 Y?" with just numbers\n- Must be conceptually appropriate for the selected module\n- Make the question INTERESTING and VARIED\n\nRESPONSE FORMAT: You MUST respond with a valid JSON object and nothing else.\nThe JSON must have exactly two keys:\n- "question": the question text (string)\n- "answer": the correct numeric answer (number). For letter/pattern answers use a string.\nExample: {"question": "What is the area of a rectangle with length 8cm and width 5cm?", "answer": 40}\nExample: {"question": "What comes next: A, C, E, G, ___?", "answer": "I"}\nDo NOT include any text outside the JSON object.'),x=(await s.A.post("https://api.openai.com/v1/chat/completions",{model:"gpt-3.5-turbo",messages:[{role:"user",content:h}],max_tokens:200,temperature:i?.8:.5},{headers:{Authorization:"Bearer ".concat({NODE_ENV:"production",PUBLIC_URL:"/math-wizard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDjPiJ9hUQpr6LR3DwknDRSdJgQ2ihi7w8",REACT_APP_FIREBASE_AUTH_DOMAIN:"math-wizard-e9ac3.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"math-wizard-e9ac3",REACT_APP_FIREBASE_STORAGE_BUCKET:"math-wizard-e9ac3.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1052246851665",REACT_APP_FIREBASE_APP_ID:"1:1052246851665:web:82c81f16e791aede4c7870"}.REACT_APP_OPENAI_API_KEY),"Content-Type":"application/json"}})).data.choices[0].message.content.trim();try{const e=x.replace(/^```(?:json)?\s*/i,"").replace(/\s*```$/i,"").trim(),t=JSON.parse(e);if(t&&t.question)return{question:t.question,answer:void 0!==t.answer?t.answer:null}}catch(l){console.warn("AI response was not valid JSON, using raw text:",x)}return{question:x,answer:null}}catch(c){console.warn("AI generation failed, using fallback:",c.message);return{question:d(a,t),answer:null}}},d=function(e){const t={"KG-1":{maxNum:20,maxOp:10},"2-3":{maxNum:50,maxOp:25},"4-5":{maxNum:100,maxOp:50},"6-7":{maxNum:200,maxOp:100},"7-8":{maxNum:500,maxOp:200},"9+":{maxNum:1e3,maxOp:500}},a=t[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"4-5"]||t["4-5"],n={addition:["What is ".concat(Math.floor(Math.random()*a.maxNum)," + ").concat(Math.floor(Math.random()*a.maxOp),"?"),"If you have ".concat(Math.floor(Math.random()*a.maxNum)," items and get ").concat(Math.floor(Math.random()*a.maxOp)," more, how many do you have?"),"".concat(Math.floor(Math.random()*a.maxNum)," + ").concat(Math.floor(Math.random()*a.maxOp)," = ?"),"Add: ".concat(Math.floor(Math.random()*a.maxNum/2)," + ").concat(Math.floor(Math.random()*a.maxNum/2)," + ").concat(Math.floor(Math.random()*a.maxNum/2))],subtraction:["What is ".concat(Math.floor(Math.random()*a.maxNum)," - ").concat(Math.floor(Math.random()*a.maxOp),"?"),"If you had ".concat(Math.floor(Math.random()*a.maxNum)," items and used ").concat(Math.floor(Math.random()*a.maxOp),", how many are left?"),"".concat(Math.floor(Math.random()*a.maxNum)," - ").concat(Math.floor(Math.random()*a.maxOp)," = ?"),"Subtract: ".concat(Math.floor(Math.random()*a.maxNum)," - ").concat(Math.floor(Math.random()*a.maxNum/2))],multiplication:["What is ".concat(Math.floor(15*Math.random())+2," \xd7 ").concat(Math.floor(15*Math.random())+2,"?"),"If each group has ".concat(Math.floor(12*Math.random())+2," items and there are ").concat(Math.floor(12*Math.random())+2," groups, how many items total?"),"".concat(Math.floor(12*Math.random())+1," \xd7 ").concat(Math.floor(12*Math.random())+1," = ?"),"Multiply: ".concat(Math.floor(20*Math.random())+1," \xd7 ").concat(Math.floor(20*Math.random())+1)],division:["What is ".concat(Math.floor(Math.random()*a.maxNum)," \xf7 ").concat(Math.floor(12*Math.random())+1,"?"),"If you split ".concat(Math.floor(Math.random()*a.maxNum)," equally among ").concat(Math.floor(12*Math.random())+1," groups, how many in each group?"),"".concat(Math.floor(Math.random()*a.maxNum)," \xf7 ").concat(Math.floor(12*Math.random())+1," = ?"),"Divide: ".concat(Math.floor(Math.random()*a.maxNum)," \xf7 ").concat(Math.floor(12*Math.random())+1)],fractions:["What is 1/4 + 1/4?","What is 1/3 of 30?","If you eat 1/2 of a pizza, how much is left?","What is 2/5 + 1/5?","If 1/4 of a number is 25, what is the number?","Simplify: 4/8","What is 3/4 - 1/4?","What is 1/2 + 1/3?","Simplify: 6/12","What is 2/3 of 18?","If 1/5 of a cake is 20g, what is the whole cake?","What is 3/5 + 1/5?","Simplify: 5/10","What is 1/2 of 50?"],decimals:["What is 2.5 + 1.3?","What is 4.2 - 1.8?","Multiply: 2.5 \xd7 4","What is 10.5 \xf7 2?","Add: 3.14 + 2.86","What is 5.6 - 2.3?","Multiply: 1.5 \xd7 2","What is 7.5 \xf7 3?","Add: 2.25 + 3.75","What is 6.4 - 1.2?","Multiply: 0.5 \xd7 8","What is 9.6 \xf7 2?","Add: 1.5 + 2.5 + 3.5","What is 8.1 - 3.2?"],algebra:["If 2x + 5 = 13, what is x?","Solve: 3x - 7 = 8","If y = 2x and x = 5, what is y?","Simplify: 4x + 2x","If 5x = 25, what is x?","Solve: x/2 = 10","What is x if x + 8 = 15?","Solve: 2x - 3 = 7","If 3x = 21, what is x?","Simplify: 3a + 2a + a","Solve: 4x + 2 = 18","If x - 5 = 10, what is x?","What is y if y = 3x and x = 4?","Solve: 2x + 4 = 12","If 6x = 30, what is x?"],geometry:["What is the area of a rectangle with length 8cm and width 5cm?","If a square has side 6cm, what is its perimeter?","What is the area of a triangle with base 10cm and height 6cm?","If a circle has radius 5cm, what is its circumference? (Use \u03c0 \u2248 3.14)","A rectangle has area 24cm\xb2. If its width is 4cm, what is its length?","If a square has perimeter 20cm, what is its side length?","What is the volume of a cube with side 3cm?","A circle has diameter 10cm. What is its radius?","What is the area of a square with side 7cm?","If a rectangle has length 12cm and area 60cm\xb2, what is its width?","A triangle has base 8cm and area 20cm\xb2. What is its height?","What is the perimeter of a rectangle 5cm \xd7 3cm?"],statistics:["If a die is rolled, what is the probability of getting a 3?","What is the mean of 2, 4, 6, 8?","If you flip a coin, what is the probability of getting heads?","What is the median of 3, 5, 7, 9, 11?","If there are 5 red balls and 3 blue balls in a bag, what is the probability of drawing a red ball?","What is the mode of 1, 2, 2, 3, 3, 3, 4?","If a die is rolled, what is the probability of getting an even number?","What is the mean of 10, 20, 30?","If you pick a card from a deck, what is the probability of getting a heart?","What is the range of 5, 8, 12, 3, 9?","If a die is rolled twice, what is the probability of getting two 6s?","What is the median of 2, 4, 6, 8, 10?"],calculus:["What is the derivative of x\xb2?","Find the limit as x approaches 2 of (x + 1)","What is the derivative of 3x\xb2 + 2x?","Find the integral of 2x","What is the derivative of 5x\xb3?","Find the derivative of x\xb2 + 3x","What is the limit as x approaches 1 of (2x + 3)?","Find the integral of x","What is the derivative of 4x\xb2 - 2x?","Find the derivative of sin(x)"],logic_patterns:["What comes next in the sequence: 2, 4, 6, 8, ___?","Find the pattern: 1, 1, 2, 3, 5, 8, ___?","What is the missing number: 5, 10, 15, ___, 25?","Identify the pattern: 1, 4, 9, 16, ___?","Find the pattern: 10, 20, 30, 40, ___?","What comes next: 3, 6, 9, 12, ___?","Continue the sequence: 2, 5, 10, 17, ___?","What is the next number: 1, 2, 4, 8, ___?","Find the pattern: 100, 90, 80, 70, ___?","What comes next: 1, 3, 5, 7, ___?","Identify the pattern: 2, 6, 12, 20, ___?","What is the missing number: 50, 40, 30, 20, ___?","Find the sequence: 5, 5, 10, 15, 25, ___?","What comes next: 16, 14, 12, 10, ___?","Continue: 1, 4, 7, 10, ___?","Identify the pattern: 2, 4, 8, 16, ___?","What is the next: 81, 64, 49, 36, ___?","Find the pattern: 11, 22, 33, 44, ___?","What comes next: A, B, C, D, ___?","Find the pattern: A, C, E, G, ___?","What is the missing letter: D, E, F, G, ___?","Identify the pattern: Z, X, V, T, ___?","What comes next: B, D, F, H, ___?","Find the sequence: A, B, B, C, C, C, ___?","What is the next letter: M, N, O, P, ___?","Identify the pattern: A, Z, B, Y, C, ___?","What comes next: F, E, D, C, ___?","Find the pattern: A, C, F, J, ___?","What comes next in the pattern: \u25b3, \u25ad, \u25b2, \u25a2, ___?","Find the visual pattern: \u25cf, \u25cf\u25cf, \u25cf\u25cf\u25cf, ___?","What comes next: 1A, 2B, 3C, 4D, ___?","Identify the pattern: A1, A2, B2, B3, C3, ___?","Find the sequence: 5a, 10b, 15c, 20d, ___?","If the pattern is multiply by 2: 1, 2, 4, 8, ___?","If the pattern is add 5 each time: 3, 8, 13, 18, ___?","If the pattern is subtract 2: 20, 18, 16, 14, ___?","If the pattern doubles then adds 1: 1, 3, 7, 15, ___?"]},s=n[e]||n.addition;return s[Math.floor(Math.random()*s.length)]};var m=a(765),u=a(162),h=a(579);function x(e){let{userId:t,userGrade:a,mode:s,selectedModules:r,onNext:i,onEndSession:o,onXPUpdate:c}=e;const[d,x]=(0,n.useState)(""),[p,g]=(0,n.useState)(""),[f,b]=(0,n.useState)(""),[y,v]=(0,n.useState)(null),[w,N]=(0,n.useState)(""),[j,_]=(0,n.useState)(null),[A,E]=(0,n.useState)(!0),[M,I]=(0,n.useState)(!1),[S,T]=(0,n.useState)({correct:0,total:0,difficulty:"Medium"}),[C,P]=(0,n.useState)(0),[R,F]=(0,n.useState)(0),[k,D]=(0,n.useState)([]),[W,q]=(0,n.useState)(!1),[O,G]=(0,n.useState)(!1),[U,B]=(0,n.useState)(!1),[L,Y]=(0,n.useState)(!1),Q=(0,n.useRef)(null),[H,z]=(0,n.useState)(0),[V,K]=(0,n.useState)(null),[J,X]=(0,n.useState)(0),[Z,$]=(0,n.useState)(!1),[ee,te]=(0,n.useState)(null),[ae,ne]=(0,n.useState)(!1),se=(0,n.useRef)(null),re=(0,n.useRef)(null);(0,n.useEffect)(()=>(ie(),()=>{se.current&&clearTimeout(se.current)}),[]),(0,n.useEffect)(()=>{if("test"===s&&!W)return Q.current=setInterval(()=>{F(e=>e+1)},1e3),()=>clearInterval(Q.current)},[s,W]);const ie=async()=>{E(!0),Y(!1);try{let e=[];"play"===s&&(re.current||(re.current=await(0,m.mT)(t)),e=re.current);const n=(()=>{const e={Addition:["addition"],Subtraction:["subtraction"],Multiplication:["multiplication"],Division:["division"],Fractions:["fractions"],"Logic & Patterns":["logic_patterns"],"Arithmetic Operations":["addition","subtraction","multiplication","division"],"Fractions & Decimals":["fractions","decimals"],"Variables & Equations":["algebra"],Geometry:["geometry"],Algebra:["algebra"],Arithmetic:["addition","subtraction","multiplication","division"],"Statistics & Probability":["statistics"],"Arithmetic & Number Theory":["addition","subtraction","multiplication","division"],"Fractions, Decimals & Percentages":["fractions","decimals"],"Pre-Algebra":["algebra"],"Advanced Reasoning":["logic_patterns"],"Functions & Graphing":["algebra"],"Geometry & Trigonometry":["geometry"],"Exponents & Roots":["addition"],"Functions & Analysis":["algebra","calculus"],"Calculus Basics":["calculus"],"Mathematical Reasoning":["logic_patterns"]};if(!r||0===r.length)return["addition","subtraction","multiplication","division"];const t=new Set;return r.forEach(a=>{(e[a]||["addition","subtraction","multiplication","division"]).forEach(e=>t.add(e))}),Array.from(t)})(),i="play"===s?oe(e,n):le(n);g(i);const o=await l(e,a,i,r),c=o.question;x(c);const d=null!==o.answer&&void 0!==o.answer?o.answer:ce(c,i);v(d)}catch(e){console.error("Error loading question:",e),Y(!0)}finally{E(!1)}},oe=(e,t)=>{if(0===t.length&&(t=["addition","subtraction","multiplication","division"]),0===e.length)return t[Math.floor(Math.random()*t.length)];const a={};e.forEach(e=>{const t=e.operation||"addition";a[t]||(a[t]={correct:0,total:0}),a[t].total++,e.correct&&a[t].correct++});const n=Object.entries(a).filter(e=>{let[a]=e;return t.includes(a)}).sort((e,t)=>{let[,a]=e,[,n]=t;return a.correct/a.total-n.correct/n.total}).map(e=>{let[t]=e;return t});return n.length>0&&Math.random()<.7?n[0]:t[Math.floor(Math.random()*t.length)]},le=e=>(0===e.length&&(e=["addition","subtraction","multiplication","division"]),e[Math.floor(Math.random()*e.length)]),ce=(e,t)=>{if("algebra"===t||"algebra_problem"===t){if(e.includes("2x + 5 = 13"))return 4;if(e.includes("3x - 7 = 8"))return 5;if(e.includes("y = 2x")&&e.includes("x = 5"))return 10;if(e.includes("4x + 2x"))return 0;if(e.includes("5x = 25"))return 5;if(e.includes("x/2 = 10"))return 20;if(e.includes("2x + 4 = 12"))return 4;if(e.includes("3x = 21"))return 7;if(e.includes("x + 8 = 15"))return 7;const t=/(\d*)x\s*([+-])\s*(\d+)\s*=\s*(\d+)/,a=e.match(t);if(a){const e=a[1]?parseInt(a[1]):1,t=a[2],n=parseInt(a[3]),s=parseInt(a[4]);if("+"===t)return(s-n)/e;if("-"===t)return(s+n)/e}const n=/(\d*)x\s*=\s*(\d+)/,s=e.match(n);if(s){const e=s[1]?parseInt(s[1]):1;return parseInt(s[2])/e}const r=e.match(/\d+/g);if(r&&r.length>=2)return parseInt(r[r.length-1])}if("geometry"===t||"geometry_problem"===t){if(e.includes("8")&&e.includes("5")&&e.includes("area")&&e.includes("rectangle"))return 40;if(e.includes("6")&&e.includes("perimeter")&&e.includes("square"))return 24;if(e.includes("10")&&e.includes("6")&&e.includes("triangle"))return 30;if(e.includes("5")&&e.includes("circumference"))return 31.4;if(e.includes("24")&&e.includes("4"))return 6;if(e.includes("side 3")&&e.includes("volume"))return 27;if(e.includes("diameter 10"))return 5;if(e.includes("side 7")&&e.includes("area")&&e.includes("square"))return 49;if((e.includes("area")||e.includes("Area"))&&e.includes("rectangle")){const t=e.match(/(\d+)\s*(?:cm|m)?\s*(?:\xd7|x|by)\s*(\d+)/);if(t)return parseInt(t[1])*parseInt(t[2])}if((e.includes("perimeter")||e.includes("Perimeter"))&&e.includes("rectangle")){const t=e.match(/(\d+)\s*(?:cm|m)?\s*(?:\xd7|x|by)\s*(\d+)/);if(t)return 2*(parseInt(t[1])+parseInt(t[2]))}const t=e.match(/\d+/g);if(t&&t.length>=2)return parseInt(t[0])*parseInt(t[1])}if("statistics"===t||"statistics_problem"===t){if(e.includes("die")&&e.includes("3"))return.17;if(e.includes("mean")&&e.includes("2")&&e.includes("4")&&e.includes("6")&&e.includes("8"))return 5;if(e.includes("coin")&&e.includes("heads"))return.5;if(e.includes("3")&&e.includes("5")&&e.includes("median"))return 7;if(e.includes("red")&&e.includes("5")&&e.includes("3"))return.63;if(e.includes("mean")||e.includes("Mean")){const t=e.match(/\d+/g);if(t&&t.length>=2){const e=t.reduce((e,t)=>parseInt(e)+parseInt(t),0);return Math.round(e/t.length*100)/100}}return null}if("calculus"===t||"calculus_problem"===t)return e.includes("x\xb2")?2:e.includes("3x\xb2")?6:e.includes("5x\xb3")?15:(e.includes("2"),1);const a={"\u2070":0,"\xb9":1,"\xb2":2,"\xb3":3,"\u2074":4,"\u2075":5,"\u2076":6,"\u2077":7,"\u2078":8,"\u2079":9},n=e.match(/\u221a(\d+)/);if(n){const e=parseInt(n[1]),t=Math.sqrt(e);return Number.isInteger(t)?t:Math.round(100*t)/100}const s=e.match(/\u221b(\d+)/);if(s){const e=parseInt(s[1]),t=Math.cbrt(e);return Number.isInteger(t)?t:Math.round(100*t)/100}const r=e.match(/(\d+)\s*\^\s*(\d+)/);if(r)return Math.pow(parseInt(r[1]),parseInt(r[2]));const i=e.match(/(\d+)([\u2070\xb9\xb2\xb3\u2074\u2075\u2076\u2077\u2078\u2079]+)/);if(i){const e=parseInt(i[1]),t=i[2];let n=0;for(const s of t)n=10*n+(a[s]||0);return Math.pow(e,n)}const o=e.match(/(\d+)\s*to the power (?:of\s*)?(\d+)/i);if(o)return Math.pow(parseInt(o[1]),parseInt(o[2]));const l=e.match(/square root (?:of\s*)?(\d+)/i);if(l){const e=parseInt(l[1]),t=Math.sqrt(e);return Number.isInteger(t)?t:Math.round(100*t)/100}const c=e.match(/cube root (?:of\s*)?(\d+)/i);if(c){const e=parseInt(c[1]),t=Math.cbrt(e);return Number.isInteger(t)?t:Math.round(100*t)/100}const d=e.match(/(\d+)([\u2070\xb9\xb2\xb3\u2074\u2075\u2076\u2077\u2078\u2079]+)\s*[\xd7x]\s*(\d+)([\u2070\xb9\xb2\xb3\u2074\u2075\u2076\u2077\u2078\u2079]+)/);if(d){const e=parseInt(d[1]),t=d[2],n=parseInt(d[3]),s=d[4];let r=0,i=0;for(const o of t)r=10*r+(a[o]||0);for(const o of s)i=10*i+(a[o]||0);return e===n?Math.pow(e,r+i):Math.pow(e,r)*Math.pow(n,i)}if("logic_patterns"===t||"logic_patterns_problem"===t){if(e.match(/[A-Za-z],\s*[A-Za-z],\s*[A-Za-z]/)){const t=e.match(/[A-Za-z]/g);if(t&&t.length>=2){const e=t[0].toUpperCase(),a=t[1].toUpperCase().charCodeAt(0)-e.charCodeAt(0);let n=t[t.length-1].toUpperCase().charCodeAt(0)+a;if(n<=90)return String.fromCharCode(n)}return"E"}if(e.includes("2, 4, 6, 8"))return 10;if(e.includes("1, 1, 2, 3, 5, 8"))return 13;if(e.includes("5, 5, 10, 15, 25"))return 40;if(e.includes("5, 10, 15, ___")||e.includes("5, 10, 15, _,"))return 20;if(e.includes("1, 4, 9, 16"))return 25;if(e.includes("10, 20, 30, 40"))return 50;if(e.includes("3, 6, 9, 12"))return 15;if(e.includes("1, 3, 5, 7"))return 9;if(e.includes("2, 4, 8, 16"))return 32;if(e.includes("1, 4, 7, 10"))return 13;const t=e.match(/(\d+(?:\s*,\s*\d+){2,})/),a=t?t[0].match(/\d+/g):e.match(/\d+/g);if(a&&a.length>=3){const e=a.map(e=>parseInt(e));let t=!0;for(let a=2;a<e.length;a++)if(e[a]!==e[a-1]+e[a-2]){t=!1;break}if(t&&e.length>=3)return e[e.length-1]+e[e.length-2];if(0!==e[0]){const t=e[1]/e[0];let a=1!==t;for(let n=2;n<e.length;n++)if(0===e[n-1]||e[n]/e[n-1]!==t){a=!1;break}if(a)return e[e.length-1]*t}if(e.length>=3){const t=[];for(let n=1;n<e.length;n++)t.push(e[n]-e[n-1]);const a=[];for(let e=1;e<t.length;e++)a.push(t[e]-t[e-1]);if(a.length>0&&a.every(e=>e===a[0])){const n=t[t.length-1]+a[0];return e[e.length-1]+n}}if(e.length>=2){const t=e[e.length-1];return t+(t-e[e.length-2])}}}const m=e.match(/(\d+(?:\.\d+)?)(?:\s*\+\s*(\d+(?:\.\d+)?))+/),u=e.match(/(\d+(?:\.\d+)?)(?:\s*-\s*(\d+(?:\.\d+)?))+/),h=e.match(/(\d+(?:\.\d+)?)(?:\s*[\xd7x]\s*(\d+(?:\.\d+)?))+/);if("addition"===t&&m){const e=m[0].match(/\d+(?:\.\d+)?/g);if(e&&e.length>2)return Math.round(100*e.reduce((e,t)=>e+parseFloat(t),0))/100}if("subtraction"===t&&u){const e=u[0].match(/\d+(?:\.\d+)?/g);if(e&&e.length>2)return Math.round(100*e.slice(1).reduce((e,t)=>e-parseFloat(t),parseFloat(e[0])))/100}if("multiplication"===t&&h){const e=h[0].match(/\d+(?:\.\d+)?/g);if(e&&e.length>2)return Math.round(100*e.reduce((e,t)=>e*parseFloat(t),1))/100}if("fractions"===t){const t=/(\d+)\s*\/\s*(\d+)\s*([+-])\s*(\d+)\s*\/\s*(\d+)/,a=e.match(t);if(a){const e=parseInt(a[1]),t=parseInt(a[2]),n=a[3],s=parseInt(a[4]),r=parseInt(a[5]);if("+"===n){return(e*r+s*t)/(t*r)}if("-"===n){return(e*r-s*t)/(t*r)}}const n=/(\d+)\s*\/\s*(\d+)\s*(?:of|\xd7)\s*(\d+)/,s=e.match(n);if(s){return parseInt(s[1])/parseInt(s[2])*parseInt(s[3])}const r=/(\d+)\s*\/\s*(\d+)\s*of\s*a\s*number\s*is\s*(\d+)/i,i=e.match(r);if(i){const e=parseInt(i[1]),t=parseInt(i[2]);return parseInt(i[3])*t/e}const o=/(\d+)\s*\/\s*(\d+)\s*of\s*(?:what|which)\s*number\s*(?:is|equals|=)\s*(\d+)/i,l=e.match(o);if(l){const e=parseInt(l[1]),t=parseInt(l[2]);return parseInt(l[3])*t/e}const c=e.match(/\d+/g);if(c&&c.length>=2)return parseInt(c[0])/parseInt(c[1])}const x={addition:/(\d+(?:\.\d+)?)\s*\+\s*(\d+(?:\.\d+)?)/,subtraction:/(\d+(?:\.\d+)?)\s*-\s*(\d+(?:\.\d+)?)/,multiplication:/(\d+(?:\.\d+)?)\s*[\xd7x]\s*(\d+(?:\.\d+)?)/,division:/(\d+(?:\.\d+)?)\s*[\xf7/]\s*(\d+(?:\.\d+)?)/,fractions:/(\d+)\s*\/\s*(\d+)\s*[+\xd7x\xf7/-]\s*(\d+)\s*\/\s*(\d+)/,decimals:/(\d+(?:\.\d+)?)\s*[+\xd7x\xf7/-]\s*(\d+(?:\.\d+)?)/}[t];if(x){const a=e.match(x);if(a){const n=parseFloat(a[1]),s=parseFloat(a[2]);switch(t){case"addition":return Math.round(100*(n+s))/100;case"subtraction":return Math.round(100*(n-s))/100;case"multiplication":return Math.round(n*s*100)/100;case"division":return Math.round(n/s*100)/100;case"decimals":return e.match(/\d\s*[\xd7x]\s*\d/)?Math.round(n*s*100)/100:e.match(/\d\s*[\xf7/]\s*\d/)?Math.round(n/s*100)/100:e.match(/\d\s*-\s*\d/)?Math.round(100*(n-s))/100:Math.round(100*(n+s))/100;default:return null}}}const p=e.match(/\d+(?:\.\d+)?/g);if(p&&p.length>=2){const a=p.map(e=>parseFloat(e));switch(t){case"addition":return Math.round(100*a.reduce((e,t)=>e+t,0))/100;case"subtraction":return Math.round(100*a.slice(1).reduce((e,t)=>e-t,a[0]))/100;case"multiplication":return Math.round(100*a.reduce((e,t)=>e*t,1))/100;case"division":return Math.round(a[0]/a[a.length-1]*100)/100;case"decimals":return e.match(/\d\s*[\xd7x]\s*\d/)?Math.round(100*a.reduce((e,t)=>e*t,1))/100:e.match(/\d\s*[\xf7/]\s*\d/)?Math.round(a[0]/a[a.length-1]*100)/100:e.match(/\d\s*-\s*\d/)?Math.round(100*a.slice(1).reduce((e,t)=>e-t,a[0]))/100:Math.round(100*a.reduce((e,t)=>e+t,0))/100;default:return null}}return null},de=()=>{if(se.current&&(clearTimeout(se.current),se.current=null),"test"===s&&S.total>=10)return clearInterval(Q.current),void q(!0);b(""),_(null),N(""),I(!1),G(!1),K(null),ie(),i&&i()},me=(e,t)=>{const n=function(e,t){const a=t>0?e/t:0,n=(e=>{const t={"KG-1":{veryEasy:0,easy:.25,medium:.4,hard:.6,veryHard:.75},"2-3":{veryEasy:.1,easy:.3,medium:.5,hard:.7,veryHard:.85},"4-5":{veryEasy:.2,easy:.4,medium:.6,hard:.75,veryHard:.85},"6-7":{veryEasy:.3,easy:.5,medium:.65,hard:.8,veryHard:.88},"7-8":{veryEasy:.4,easy:.55,medium:.7,hard:.82,veryHard:.9},"9+":{veryEasy:.5,easy:.65,medium:.75,hard:.85,veryHard:.92}};return t[e]||t["4-5"]})(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"4-5");let s,r;return a<n.veryEasy?(s="Very Easy",r=n.veryEasy):a<n.easy?(s="Easy",r=n.easy):a<n.medium?(s="Medium",r=n.medium):a<n.hard?(s="Hard",r=n.hard):(s="Very Hard",r=n.veryHard),{difficulty:s,accuracy:Math.round(100*a),threshold:Math.round(100*r)}}(e,t,a);return n.difficulty},ue=(e,t,a)=>({addition:"Tip: Add numbers step by step. Break large numbers into tens and ones.",subtraction:"Tip: Subtract by counting up from the smaller number, or break into parts.",multiplication:"Tip: Multiplication is repeated addition. You can also break numbers into parts: e.g. 12\xd75 = (10\xd75)+(2\xd75).",division:'Tip: Think "what number times the divisor gives the dividend?" Division is the reverse of multiplication.',fractions:'Tip: For fraction operations, find a common denominator first. "Of" means multiply: a/b of X = (a\xd7X)/b.',decimals:"Tip: Line up decimal points for +/\u2212. For \xd7, multiply as whole numbers then count decimal places.",algebra:"Tip: Isolate the variable by doing the same operation to both sides. Work backwards from the result.",geometry:"Tip: Rectangle area = l\xd7w, triangle = \xbd\xd7b\xd7h, circle = \u03c0\xd7r\xb2. Perimeter = sum of all sides.",statistics:"Tip: Mean = sum\xf7count. Median = middle value when sorted. Probability = favorable\xf7total outcomes.",calculus:"Tip: Power rule: d/dx(x\u207f) = n\xb7x\u207f\u207b\xb9. For limits, try direct substitution first.",logic_patterns:"Tip: Check differences between terms (arithmetic), ratios (geometric), or sums of previous terms (Fibonacci-like)."}[e]||"Tip: Review the question carefully and try breaking it into smaller steps."),he=e=>{const t=Math.floor(e/60),a=e%60;return"".concat(t,":").concat(a.toString().padStart(2,"0"))};if(U){const e=S.total>0?Math.round(S.correct/S.total*100):0,t=e>=80?"\ud83c\udf1f":e>=60?"\ud83d\udc4d":e>=40?"\ud83d\udcaa":"\ud83d\udcda";return(0,h.jsx)("div",{className:"min-h-[calc(100vh-120px)] flex items-center justify-center p-4",children:(0,h.jsxs)("div",{className:"max-w-lg w-full bg-white rounded-2xl p-6 shadow-xl animate-fade-in",children:[(0,h.jsxs)("div",{className:"text-center mb-6",children:[(0,h.jsxs)("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:[t," Session Complete!"]}),(0,h.jsx)("p",{className:"text-gray-500",children:"Great practice session \u2014 here's your recap"})]}),(0,h.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6",children:[(0,h.jsxs)("div",{className:"bg-violet-50 rounded-xl p-3 text-center",children:[(0,h.jsx)("p",{className:"text-2xl font-bold text-violet-600",children:S.total}),(0,h.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Questions"})]}),(0,h.jsxs)("div",{className:"bg-green-50 rounded-xl p-3 text-center",children:[(0,h.jsx)("p",{className:"text-2xl font-bold text-green-600",children:S.correct}),(0,h.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Correct"})]}),(0,h.jsxs)("div",{className:"bg-purple-50 rounded-xl p-3 text-center",children:[(0,h.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[e,"%"]}),(0,h.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Accuracy"})]}),(0,h.jsxs)("div",{className:"bg-amber-50 rounded-xl p-3 text-center",children:[(0,h.jsxs)("p",{className:"text-2xl font-bold text-amber-600",children:["+",J]}),(0,h.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"XP Earned"})]})]}),k.length>0&&(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsxs)("h3",{className:"font-bold text-gray-800 mb-3",children:["\u274c Questions to Review (",k.length,")"]}),(0,h.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:k.map((e,t)=>(0,h.jsxs)("div",{className:"bg-red-50 border-l-4 border-red-400 p-3 rounded-r-lg text-sm",children:[(0,h.jsx)("p",{className:"font-semibold text-gray-800 mb-1",children:e.question}),(0,h.jsxs)("p",{className:"text-red-600",children:["Your answer: ",e.yourAnswer]}),(0,h.jsxs)("p",{className:"text-green-600",children:["Correct answer: ",e.correctAnswer]})]},t))})]}),0===k.length&&S.total>0&&(0,h.jsx)("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 rounded-r-lg mb-6 text-center",children:(0,h.jsx)("p",{className:"text-lg font-bold text-green-700",children:"\ud83c\udf89 All correct! Outstanding!"})}),(0,h.jsx)("button",{onClick:o,className:"w-full bg-gradient-to-r from-violet-500 to-purple-600 text-white font-bold py-3 min-h-[44px] rounded-lg hover:shadow-lg transform hover:scale-105 transition",children:"\u2190 Back to Modules"})]})})}if(W){const e=S.total>0?Math.round(S.correct/S.total*100):0,t=e>=90?"A+":e>=80?"A":e>=70?"B":e>=60?"C":e>=50?"D":"F",a=e>=80?"text-green-600":e>=60?"text-yellow-600":"text-red-600";return(0,h.jsx)("div",{className:"min-h-[calc(100vh-120px)] flex items-center justify-center p-4",children:(0,h.jsxs)("div",{className:"max-w-lg w-full bg-white rounded-2xl p-6 shadow-xl animate-fade-in",children:[(0,h.jsxs)("div",{className:"text-center mb-6",children:[(0,h.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"\ud83d\udcdd Test Complete!"}),(0,h.jsx)("p",{className:"text-gray-500",children:"Here's how you did"})]}),(0,h.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-6",children:[(0,h.jsxs)("div",{className:"bg-violet-50 rounded-xl p-3 text-center",children:[(0,h.jsxs)("p",{className:"text-2xl font-bold text-violet-600",children:[S.correct,"/",S.total]}),(0,h.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Correct"})]}),(0,h.jsxs)("div",{className:"bg-purple-50 rounded-xl p-3 text-center",children:[(0,h.jsx)("p",{className:"text-2xl font-bold ".concat(a),children:t}),(0,h.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e,"%"]})]}),(0,h.jsxs)("div",{className:"bg-amber-50 rounded-xl p-3 text-center",children:[(0,h.jsx)("p",{className:"text-2xl font-bold text-amber-600",children:he(R)}),(0,h.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Time"})]}),(0,h.jsxs)("div",{className:"bg-emerald-50 rounded-xl p-3 text-center",children:[(0,h.jsxs)("p",{className:"text-2xl font-bold text-emerald-600",children:["+",J]}),(0,h.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"XP Earned"})]})]}),k.length>0&&(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsxs)("h3",{className:"font-bold text-gray-800 mb-3",children:["\u274c Questions to Review (",k.length,")"]}),(0,h.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:k.map((e,t)=>(0,h.jsxs)("div",{className:"bg-red-50 border-l-4 border-red-400 p-3 rounded-r-lg text-sm",children:[(0,h.jsx)("p",{className:"font-semibold text-gray-800 mb-1",children:e.question}),(0,h.jsxs)("p",{className:"text-red-600",children:["Your answer: ",e.yourAnswer]}),(0,h.jsxs)("p",{className:"text-green-600",children:["Correct answer: ",e.correctAnswer]})]},t))})]}),0===k.length&&(0,h.jsx)("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 rounded-r-lg mb-6 text-center",children:(0,h.jsx)("p",{className:"text-lg font-bold text-green-700",children:"\ud83c\udf89 Perfect Score! Amazing work!"})}),(0,h.jsx)("button",{onClick:o,className:"w-full bg-gradient-to-r from-violet-500 to-purple-600 text-white font-bold py-3 min-h-[44px] rounded-lg hover:shadow-lg transform hover:scale-105 transition",children:"\u2190 Back to Modules"})]})})}return A?(0,h.jsxs)("div",{className:"max-w-xl mx-auto bg-gradient-to-br from-violet-50 to-purple-50 rounded-xl p-6 shadow-lg",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,h.jsxs)("div",{className:"flex gap-2",children:[(0,h.jsx)("div",{className:"skeleton h-6 w-28 rounded-full"}),(0,h.jsx)("div",{className:"skeleton h-6 w-20 rounded-full"})]}),(0,h.jsx)("div",{className:"skeleton h-9 w-24 rounded-lg"})]}),(0,h.jsx)("div",{className:"skeleton h-5 w-48 mx-auto mb-3 rounded"}),(0,h.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-4 border-2 border-gray-200",children:[(0,h.jsx)("div",{className:"skeleton h-6 w-full mb-2 rounded"}),(0,h.jsx)("div",{className:"skeleton h-6 w-3/4 mx-auto rounded"})]}),(0,h.jsx)("div",{className:"skeleton h-12 w-full mb-4 rounded-lg"}),(0,h.jsx)("div",{className:"skeleton h-12 w-full rounded-lg"})]}):L?(0,h.jsxs)("div",{className:"max-w-xl mx-auto bg-gradient-to-br from-amber-50 to-orange-50 rounded-xl p-8 shadow-lg text-center",children:[(0,h.jsx)("div",{className:"text-5xl mb-4",children:"\ud83d\ude05"}),(0,h.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Oops! Couldn't load the question"}),(0,h.jsx)("p",{className:"text-gray-600 mb-6",children:"Don't worry \u2014 just try again or head back to modules."}),(0,h.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,h.jsx)("button",{onClick:ie,className:"px-6 py-3 min-h-[44px] bg-gradient-to-r from-violet-500 to-purple-600 text-white font-bold rounded-lg hover:shadow-lg transform hover:scale-105 transition",children:"\ud83d\udd04 Try Again"}),(0,h.jsx)("button",{onClick:o,className:"px-6 py-3 min-h-[44px] bg-gray-200 text-gray-700 font-bold rounded-lg hover:bg-gray-300 transition",children:"\u2190 Back to Modules"})]})]}):(0,h.jsxs)("div",{className:"max-w-xl mx-auto bg-gradient-to-br from-violet-50 to-purple-50 rounded-xl p-6 shadow-lg",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,h.jsxs)("div",{className:"text-sm font-semibold text-gray-600",children:["Operation: ",(0,h.jsx)("span",{className:"text-violet-600 capitalize",children:p})]}),(0,h.jsxs)("div",{className:"px-3 py-1 rounded-full text-white text-sm font-bold ".concat("Very Hard"===S.difficulty?"bg-red-600":"Hard"===S.difficulty?"bg-orange-600":"Medium"===S.difficulty?"bg-yellow-600":"Easy"===S.difficulty?"bg-green-600":"bg-green-500"),children:["\ud83d\udcca ",S.difficulty]}),H>=2&&(0,h.jsxs)("div",{className:"px-3 py-1 rounded-full bg-gradient-to-r from-orange-400 to-red-500 text-white text-sm font-bold animate-bounce-slow flex items-center gap-1",children:["\ud83d\udd25 ",H," streak"]})]}),(0,h.jsx)("button",{onClick:()=>{se.current&&clearTimeout(se.current);const e=S.total>0;e&&!window.confirm("End this session? Your progress will be saved.")||("play"===s&&e?B(!0):o())},className:"px-4 py-2 min-h-[44px] bg-red-500 text-white text-sm font-semibold rounded-lg hover:bg-red-600 transition",title:"End this practice/test session",children:"End Session"})]}),(0,h.jsx)("div",{className:"text-center mb-2 text-sm font-semibold text-gray-600",children:"test"===s?(0,h.jsxs)("div",{className:"flex justify-between items-center",children:[(0,h.jsxs)("span",{children:["Question ",Math.min(S.total+1,10),"/",10]}),(0,h.jsxs)("span",{children:["\u2705 ",S.correct,"/",S.total]}),(0,h.jsxs)("span",{children:["\u23f1\ufe0f ",he(R)]})]}):(0,h.jsxs)(h.Fragment,{children:["Questions: ",S.total," | Correct: ",S.correct," (",S.total>0?Math.round(S.correct/S.total*100):0,"%)"]})}),(0,h.jsx)("div",{className:"bg-white rounded-lg p-4 mb-4 border-2 border-violet-300 ".concat(!1===j?"animate-shake":""),children:(0,h.jsx)("h2",{className:"text-xl font-bold text-gray-800 text-center",children:d})}),(0,h.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!ae&&null===j){ne(!0);try{if(null===y)return N("\u274c Unable to extract answer from this question. Please try the next question."),void _(!1);let e=!1,n=f;if("logic_patterns"===p||"logic_patterns_problem"===p)(y&&"string"===typeof y||null!==y)&&(e=n.toString().trim().toUpperCase()===y.toString().toUpperCase());else{const t=(e=>{const t=(e||"").toString().trim();if(!t)return NaN;const a=t.match(/^(\d+)\s+(\d+)\s*\/\s*(\d+)$/);if(a){const e=parseInt(a[1]),t=parseInt(a[2]),n=parseInt(a[3]);return 0!==n?e+t/n:NaN}const n=t.match(/^(-?\d+)\s*\/\s*(\d+)$/);if(n){const e=parseInt(n[1]),t=parseInt(n[2]);return 0!==t?e/t:NaN}return parseFloat(t)})(f);if(n=t,isNaN(t))return N("\u274c Please enter a valid number (e.g. 42, 0.5, or 1/2)."),void _(!1);e=Math.abs(t-y)<.01||t===y}_(e);const r=e?H+1:0;if(z(r),e){const e=["\ud83c\udf89 Correct! Amazing!","\ud83c\udf1f Nailed it!","\ud83d\udd25 You're on fire!","\ud83d\udcaa Brilliant!","\u26a1 Super fast!","\ud83e\udde0 Big brain move!"],t=["\ud83d\udd25 Unstoppable streak!","\ud83d\udca5 On a roll!","\ud83d\ude80 Can't be stopped!"],a=r>=3?"".concat(t[r%t.length]," (").concat(r," in a row!)"):e[Math.floor(Math.random()*e.length)];N(a),G(!0),setTimeout(()=>G(!1),2e3)}else{const e=ue(p,d,y);N("\u274c Not quite.\n".concat(y,"\n").concat(e))}const i=S.total+1,o=e?S.correct+1:S.correct,l=me(o,i);T({correct:o,total:i,difficulty:l}),P(C+1),e||D(e=>[...e,{question:d,yourAnswer:n,correctAnswer:y,operation:p}]);try{const a=await(0,u.CT)(t,{correct:e,streak:e?r:0,difficulty:l});a.xpEarned>0&&(X(e=>e+a.xpEarned),K({xp:a.xpEarned,streak:r,leveledUp:a.leveledUp,newLevel:a.level}),setTimeout(()=>K(null),2200),a.leveledUp&&(te({level:a.level,title:(0,u.fS)(a.level)}),$(!0),setTimeout(()=>$(!1),3500))),c&&c(a)}catch(a){console.error("Error awarding XP:",a)}try{await(0,m.s2)(t,{question:d,operation:p,userAnswer:n,correctAnswer:y,correct:e})}catch(a){console.error("Error saving answer:",a)}e&&"play"===s&&(se.current=setTimeout(()=>{de()},1800))}finally{ne(!1)}}},className:"space-y-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Your Answer:"}),(0,h.jsx)("input",{type:"text",inputMode:"logic_patterns"===p||"logic_patterns_problem"===p?"text":"decimal",value:f,onChange:e=>b(e.target.value),placeholder:"logic_patterns"===p||"logic_patterns_problem"===p?"Enter letter (A, B, C, etc)":"Enter your answer (e.g. 42 or 0.5)",className:"w-full p-3 border-2 border-violet-400 rounded-lg text-lg font-semibold focus:outline-none focus:border-violet-600 focus:ring-2 focus:ring-violet-200 transition disabled:opacity-50 disabled:bg-gray-100",disabled:null!==j,autoFocus:!0})]}),null===j&&(0,h.jsx)("button",{type:"button",onClick:()=>I(!M),className:"text-sm text-violet-600 hover:text-violet-800 font-semibold underline",children:M?"\u2705 Hint Shown":"? Need a hint?"}),M&&null===j&&(0,h.jsxs)("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 p-3 rounded text-sm text-gray-700",children:["\ud83d\udca1 ",(e=>{const t={addition:["Break big numbers into tens and ones, then add each part separately.","Try adding the ones digits first, then the tens.","Line up the numbers by place value and add column by column."],subtraction:["Try counting up from the smaller number to the larger one.","Break the problem into smaller steps \u2014 subtract the ones first, then the tens.","If the top digit is smaller, you may need to borrow from the next column."],multiplication:["Multiplication is repeated addition. For example, 4 \xd7 3 = 4 + 4 + 4.","Break one number into parts: 12 \xd7 5 = (10 \xd7 5) + (2 \xd7 5).","Look for patterns in your times tables to help."],division:["Division is the opposite of multiplication. Think: what times the divisor gives the dividend?","Try estimating first \u2014 is the answer closer to 5 or 50?","Break the dividend into friendly parts that divide evenly."],fractions:["To add fractions, make sure the denominators (bottom numbers) are the same first.",'Remember: "of" means multiply. So 1/3 of 12 = (1/3) \xd7 12.',"To simplify a fraction, divide top and bottom by the same number."],decimals:["Line up the decimal points before adding or subtracting.","When multiplying decimals, count total decimal places in both numbers.","Think of decimals as money \u2014 0.5 is like 50 cents."],algebra:["To solve for x, do the same operation to both sides of the equation.","Work backwards: if 2x + 5 = 13, first subtract 5, then divide by 2.","Replace the variable with your answer to check if both sides are equal."],geometry:["Area of a rectangle = length \xd7 width. Perimeter = 2 \xd7 (length + width).","Area of a triangle = (base \xd7 height) \xf7 2.","For circles: circumference = \u03c0 \xd7 diameter, area = \u03c0 \xd7 radius\xb2."],statistics:["Mean = sum of all values \xf7 number of values.","Median is the middle value when numbers are sorted in order.","Probability = favorable outcomes \xf7 total possible outcomes."],calculus:["The derivative of x\u207f is n \xd7 x\u207f\u207b\xb9 (power rule).","A derivative tells you the rate of change \u2014 how fast something changes.","For limits, try plugging the value directly into the expression first."],logic_patterns:["Look at the differences between consecutive numbers \u2014 is there a pattern?","Check if each number is multiplied by the same value (geometric pattern).","Try checking if each number is the sum of the two before it (like Fibonacci)."]},a=t[e]||t.addition;return a[Math.floor(Math.random()*a.length)]})(p)]}),(0,h.jsx)("button",{type:"submit",disabled:null!==j||!f,className:"w-full bg-gradient-to-r from-emerald-400 to-teal-500 text-white font-bold py-3 min-h-[44px] rounded-lg disabled:opacity-50 hover:shadow-lg transform hover:scale-105 transition",children:"Submit Answer \u2713"})]}),O&&(0,h.jsxs)("div",{className:"fixed inset-0 pointer-events-none z-50 overflow-hidden",children:[(0,h.jsx)("div",{className:"absolute inset-0 bg-white animate-correct-flash"}),[...Array(H>=5?40:H>=3?30:20)].map((e,t)=>{const a=Math.round(200*(Math.random()-.5));return(0,h.jsx)("div",{className:"absolute animate-confetti ".concat(["text-lg","text-2xl","text-3xl"][t%3]),style:{left:"".concat(100*Math.random(),"%"),"--x-drift":"".concat(a,"px"),animationDelay:"".concat(.5*Math.random(),"s"),animationDuration:"".concat(1.5+Math.random(),"s")},children:["\u2b50","\ud83c\udf1f","\ud83c\udf89","\ud83c\udf8a","\ud83d\udcab","\u2728"][t%6]},t)})]}),V&&(0,h.jsx)("div",{className:"flex justify-center mt-3 animate-xp-popup",children:(0,h.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-amber-400 to-orange-500 text-white font-bold shadow-lg",children:[(0,h.jsx)("span",{className:"text-lg",children:"\u26a1"}),(0,h.jsxs)("span",{children:["+",V.xp," XP"]}),V.streak>=3&&(0,h.jsxs)("span",{className:"text-xs bg-white bg-opacity-30 rounded-full px-2 py-0.5",children:["\ud83d\udd25 ",V.streak,"x"]})]})}),Z&&ee&&(0,h.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none",children:(0,h.jsxs)("div",{className:"bg-white rounded-2xl p-8 shadow-2xl text-center animate-level-up border-4 border-amber-400 max-w-sm mx-4",children:[(0,h.jsx)("div",{className:"text-6xl mb-3",children:"\ud83c\udfc6"}),(0,h.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:"Level Up!"}),(0,h.jsxs)("p",{className:"text-4xl font-bold text-violet-600 mb-2",children:["Level ",ee.level]}),(0,h.jsx)("p",{className:"text-lg text-amber-600 font-semibold",children:ee.title})]})}),w&&(0,h.jsx)("div",{"aria-live":"assertive",role:"alert",className:"mt-4 p-4 rounded-lg font-bold animate-slide-in ".concat(j?"bg-green-100 text-green-700 border-2 border-green-400 text-center text-lg":"bg-red-50 text-red-700 border-2 border-red-400"),children:j?w:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("p",{className:"text-center text-base mb-2",children:w.split("\n")[0]}),(0,h.jsxs)("div",{className:"text-center py-2 px-4 bg-white rounded-lg border border-green-300 mb-2",children:[(0,h.jsx)("span",{className:"text-sm text-gray-500 block",children:"Correct answer:"}),(0,h.jsx)("span",{className:"text-2xl font-bold text-green-600",children:w.split("\n")[1]})]}),(0,h.jsx)("p",{className:"text-sm font-medium text-red-500 opacity-80 text-center",children:w.split("\n")[2]})]})}),!0===j&&"play"===s&&(0,h.jsx)("div",{className:"mt-2 text-center text-sm text-gray-400 font-medium animate-pulse",children:"Next question in a moment..."}),null!==j&&(0,h.jsx)("button",{onClick:de,className:"w-full mt-3 bg-gradient-to-r from-amber-400 to-orange-500 text-white font-bold py-3 min-h-[44px] rounded-lg hover:shadow-lg transform hover:scale-105 transition",children:j&&"play"===s?"Skip Ahead \u2192":"Next Question \u2192"})]})}var p=a(379),g=a(879),f=a(472);const b="challenges";const y=async(e,t,a,n,s)=>{const r=function(){const e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let t="";for(let a=0;a<6;a++)t+=e[Math.floor(32*Math.random())];return t}(),i="challenge_".concat(r,"_").concat(Date.now()),o={code:r,creatorId:e,creatorName:t,opponentId:null,opponentName:null,grade:a,modules:n,questions:await s(a,n,5),status:"waiting",creatorAnswers:[],opponentAnswers:[],createdAt:(0,f.O5)(),startedAt:null,completedAt:null};return await(0,f.BN)((0,f.H9)(g.db,b,i),o),(0,p.A)({id:i},o)};function v(e){if(null==e)return NaN;const t=String(e).trim();if(/^-?\d+\/\d+$/.test(t)){const[e,a]=t.split("/").map(Number);return 0!==a?e/a:NaN}return parseFloat(t)}const w={Addition:["addition"],Subtraction:["subtraction"],Multiplication:["multiplication"],Division:["division"],Fractions:["fractions"],"Logic & Patterns":["logic_patterns"],"Arithmetic Operations":["addition","subtraction","multiplication","division"],"Fractions & Decimals":["fractions","decimals"],"Variables & Equations":["algebra"],Geometry:["geometry"],Algebra:["algebra"],Arithmetic:["addition","subtraction","multiplication","division"],"Statistics & Probability":["statistics"],"Arithmetic & Number Theory":["addition","subtraction","multiplication","division"],"Fractions, Decimals & Percentages":["fractions","decimals"],"Pre-Algebra":["algebra"],"Advanced Reasoning":["logic_patterns"],"Functions & Graphing":["algebra"],"Geometry & Trigonometry":["geometry"],"Exponents & Roots":["addition"],"Functions & Analysis":["algebra","calculus"],"Calculus Basics":["calculus"],"Mathematical Reasoning":["logic_patterns"]};async function N(e,t,a){const n=new Set;t.forEach(e=>{(w[e]||["addition"]).forEach(e=>n.add(e))});const s=Array.from(n),r=[];for(let o=0;o<a;o++){const a=s[Math.floor(Math.random()*s.length)];try{const{question:n,answer:s}=await l([],e,a,t);r.push({question:n,answer:null!=s?String(s):"",operation:a})}catch(i){r.push({question:"What is ".concat(o+2," + ").concat(o+3,"?"),answer:String(o+5),operation:"addition"})}}return r}function j(e){let{userId:t,userName:a,userGrade:s,selectedModules:r,onBack:i}=e;const[o,l]=(0,n.useState)("lobby"),[c,d]=(0,n.useState)(null),[m,u]=(0,n.useState)(""),[x,w]=(0,n.useState)(""),[j,_]=(0,n.useState)(!1),[A,E]=(0,n.useState)(null),[M,I]=(0,n.useState)(0),[S,T]=(0,n.useState)(""),[C,P]=(0,n.useState)(null),[R,F]=(0,n.useState)([]),[k,D]=(0,n.useState)(0),[W,q]=(0,n.useState)(Date.now()),O=(0,n.useRef)(null),G=(0,n.useRef)(null),U=(0,n.useCallback)((e,t)=>{O.current&&O.current(),O.current=((e,t)=>{const a=(0,f.H9)(g.db,b,e);return(0,f.aQ)(a,e=>{e.exists()&&t((0,p.A)({id:e.id},e.data()))})})(e,e=>{d(e);D((e["creator"===t?"opponentAnswers":"creatorAnswers"]||[]).length),"creator"===t&&"active"===e.status&&e.opponentId&&(l("game"),q(Date.now())),"completed"===e.status&&l("results")})},[]);(0,n.useEffect)(()=>()=>{O.current&&O.current()},[]),(0,n.useEffect)(()=>{"game"===o&&G.current&&G.current.focus()},[o,M]);const B=async()=>{w(""),_(!0);try{const e=await y(t,a,s,r,N);d(e),E("creator"),l("waiting"),U(e.id,"creator")}catch(e){w(e.message)}finally{_(!1)}},L=async()=>{if(m.trim()){w(""),_(!0);try{const e=await(async(e,t,a)=>{const n=(0,f.P)((0,f.rJ)(g.db,b),(0,f._M)("code","==",e.toUpperCase()),(0,f._M)("status","==","waiting")),s=await(0,f.GG)(n);if(s.empty)throw new Error("Challenge not found or already started.");const r=s.docs[0],i=r.data();if(i.creatorId===t)throw new Error("You can't join your own challenge!");return await(0,f.mZ)((0,f.H9)(g.db,b,r.id),{opponentId:t,opponentName:a,status:"active",startedAt:(0,f.O5)()}),(0,p.A)((0,p.A)({id:r.id},i),{},{opponentId:t,opponentName:a,status:"active"})})(m.trim(),t,a);d(e),E("opponent"),l("game"),q(Date.now()),U(e.id,"opponent")}catch(e){w(e.message)}finally{_(!1)}}else w("Enter a challenge code")},Y=async e=>{if(e.preventDefault(),!S.trim()||!c||C)return;const t=c.questions[M],a=function(e,t){const a=String(e).trim().toLowerCase(),n=String(t).trim().toLowerCase();if(a===n)return!0;const s=v(a),r=v(n);return!isNaN(s)&&!isNaN(r)&&Math.abs(s-r)<.01}(S,t.answer),n=Date.now()-W,s={answer:S.trim(),correct:a,timeMs:n};P({correct:a,correctAnswer:t.answer}),F(e=>[...e,s]);try{await(async(e,t,a)=>{const n=(0,f.H9)(g.db,b,e),s=await(0,f.x7)(n);if(!s.exists())throw new Error("Challenge not found");const r=s.data(),i="creator"===t?"creatorAnswers":"opponentAnswers",o=[...r[i]||[],a],l={[i]:o},c=r["creator"===t?"opponentAnswers":"creatorAnswers"]||[];return o.length>=r.questions.length&&c.length>=r.questions.length&&(l.status="completed",l.completedAt=(0,f.O5)()),await(0,f.mZ)(n,l),l})(c.id,A,s)}catch(r){console.error("Failed to submit challenge answer:",r)}setTimeout(()=>{M+1<c.questions.length&&(I(e=>e+1),T(""),P(null),q(Date.now()))},1200)};if("lobby"===o)return(0,h.jsx)("div",{className:"min-h-[calc(100vh-120px)] flex items-center justify-center p-4",children:(0,h.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl p-8 shadow-xl animate-fade-in",children:[(0,h.jsxs)("div",{className:"text-center mb-6",children:[(0,h.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"\u2694\ufe0f Challenge Mode"}),(0,h.jsx)("p",{className:"text-gray-500 text-sm",children:"Challenge a friend to the same questions!"})]}),(0,h.jsx)("button",{onClick:B,disabled:j||!r||0===r.length,className:"w-full bg-gradient-to-r from-violet-500 to-purple-600 text-white font-bold py-4 rounded-xl mb-4 hover:shadow-lg transform hover:scale-105 transition disabled:opacity-50 text-lg",children:j?"\u23f3 Creating...":"\ud83c\udfae Create Challenge"}),(!r||0===r.length)&&(0,h.jsx)("p",{className:"text-xs text-gray-400 text-center -mt-2 mb-3",children:"Select modules first to create a challenge"}),(0,h.jsxs)("div",{className:"flex items-center gap-3 my-4",children:[(0,h.jsx)("div",{className:"flex-1 h-px bg-gray-200"}),(0,h.jsx)("span",{className:"text-gray-400 text-sm font-semibold",children:"OR"}),(0,h.jsx)("div",{className:"flex-1 h-px bg-gray-200"})]}),(0,h.jsxs)("div",{className:"space-y-3",children:[(0,h.jsx)("input",{type:"text",value:m,onChange:e=>u(e.target.value.toUpperCase()),placeholder:"Enter 6-digit code",maxLength:6,className:"w-full p-4 border-2 border-violet-300 rounded-xl text-center text-2xl font-mono tracking-widest focus:outline-none focus:border-violet-600 focus:ring-2 focus:ring-violet-200 uppercase"}),(0,h.jsx)("button",{onClick:L,disabled:j||m.length<6,className:"w-full bg-gradient-to-r from-amber-400 to-orange-500 text-white font-bold py-4 rounded-xl hover:shadow-lg transform hover:scale-105 transition disabled:opacity-50 text-lg",children:j?"\u23f3 Joining...":"\ud83e\udd1d Join Challenge"})]}),x&&(0,h.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm font-semibold text-center",children:x}),(0,h.jsx)("button",{onClick:i,className:"w-full mt-6 py-3 text-gray-500 font-semibold hover:text-gray-700 transition",children:"\u2190 Back to Modules"})]})});if("waiting"===o)return(0,h.jsx)("div",{className:"min-h-[calc(100vh-120px)] flex items-center justify-center p-4",children:(0,h.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl p-8 shadow-xl animate-fade-in text-center",children:[(0,h.jsx)("div",{className:"text-5xl mb-4 animate-bounce",children:"\u23f3"}),(0,h.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Waiting for Opponent"}),(0,h.jsx)("p",{className:"text-gray-500 mb-6",children:"Share this code with your friend:"}),(0,h.jsx)("div",{className:"bg-gradient-to-r from-violet-100 to-purple-100 rounded-2xl p-6 mb-6",children:(0,h.jsx)("p",{className:"text-4xl font-mono font-bold text-violet-700 tracking-[0.3em] select-all",children:null===c||void 0===c?void 0:c.code})}),(0,h.jsxs)("p",{className:"text-sm text-gray-400 mb-6",children:[5," questions \u2022 ",r.join(", ")]}),(0,h.jsxs)("div",{className:"flex items-center justify-center gap-2 text-violet-600 animate-pulse",children:[(0,h.jsx)("svg",{className:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,h.jsx)("span",{className:"font-semibold",children:"Listening for opponent..."})]}),(0,h.jsx)("button",{onClick:()=>{O.current&&O.current(),l("lobby")},className:"mt-8 py-3 px-6 text-gray-500 font-semibold hover:text-gray-700 transition",children:"\u2190 Cancel"})]})});if("game"===o&&c){const e=c.questions[M],t=M+1>=c.questions.length,a=R.length,n=c.questions.length;return(0,h.jsx)("div",{className:"max-w-xl mx-auto p-4",children:(0,h.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-xl animate-fade-in",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,h.jsxs)("div",{className:"text-sm font-semibold text-gray-600",children:["Question ",(0,h.jsxs)("span",{className:"text-violet-600",children:[M+1,"/",n]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-3 text-xs",children:[(0,h.jsxs)("span",{className:"px-2 py-1 rounded-full bg-violet-100 text-violet-700 font-bold",children:["You: ",R.filter(e=>e.correct).length,"/",a]}),(0,h.jsxs)("span",{className:"px-2 py-1 rounded-full bg-amber-100 text-amber-700 font-bold",children:["creator"===A?c.opponentName:c.creatorName,": ",k,"/",n]})]})]}),(0,h.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"flex justify-between text-xs font-semibold text-gray-500 mb-1",children:[(0,h.jsx)("span",{children:"You"}),(0,h.jsxs)("span",{children:[Math.round(a/n*100),"%"]})]}),(0,h.jsx)("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,h.jsx)("div",{className:"h-full bg-gradient-to-r from-violet-400 to-purple-600 rounded-full transition-all duration-500",style:{width:"".concat(a/n*100,"%")}})})]}),(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"flex justify-between text-xs font-semibold text-gray-500 mb-1",children:[(0,h.jsx)("span",{children:"Opponent"}),(0,h.jsxs)("span",{children:[Math.round(k/n*100),"%"]})]}),(0,h.jsx)("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,h.jsx)("div",{className:"h-full bg-gradient-to-r from-amber-400 to-orange-500 rounded-full transition-all duration-500",style:{width:"".concat(k/n*100,"%")}})})]})]}),e?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"bg-gradient-to-r from-violet-50 to-purple-50 rounded-xl p-5 mb-4 border-2 border-violet-200 ".concat(C&&!C.correct?"animate-shake":""),children:(0,h.jsx)("h3",{className:"text-xl font-bold text-gray-800 text-center",children:e.question})}),(0,h.jsxs)("form",{onSubmit:Y,className:"space-y-4",children:[(0,h.jsx)("input",{ref:G,type:"text",inputMode:"decimal",value:S,onChange:e=>T(e.target.value),placeholder:"Your answer...",disabled:!!C,className:"w-full p-4 border-2 border-violet-400 rounded-xl text-lg font-semibold text-center focus:outline-none focus:border-violet-600 focus:ring-2 focus:ring-violet-200 transition disabled:opacity-50 disabled:bg-gray-100",autoFocus:!0}),!C&&(0,h.jsx)("button",{type:"submit",disabled:!S.trim(),className:"w-full bg-gradient-to-r from-emerald-400 to-teal-500 text-white font-bold py-3 rounded-xl hover:shadow-lg transform hover:scale-105 transition disabled:opacity-50",children:"Submit \u2713"})]}),C&&(0,h.jsxs)("div",{"aria-live":"assertive",role:"alert",className:"mt-4 p-4 rounded-xl font-bold text-center ".concat(C.correct?"bg-green-100 text-green-700 border-2 border-green-400":"bg-red-50 text-red-700 border-2 border-red-400"),children:[C.correct?"\u2705 Correct!":"\u274c Wrong \u2014 answer: ".concat(C.correctAnswer),t&&R.length>=n&&(0,h.jsx)("p",{className:"text-sm mt-2 opacity-70",children:k<n?"Waiting for opponent to finish...":"Both finished!"})]})]}):(0,h.jsxs)("div",{className:"text-center py-8",children:[(0,h.jsx)("div",{className:"text-4xl animate-pulse mb-3",children:"\u23f3"}),(0,h.jsx)("p",{className:"text-gray-500 font-semibold",children:"You're done! Waiting for opponent to finish..."}),(0,h.jsxs)("p",{className:"text-sm text-gray-400 mt-2",children:["Opponent progress: ",k,"/",n]})]})]})})}if("results"===o&&c){const e=(()=>{if(!c)return null;const e=c.creatorAnswers||[],t=c.opponentAnswers||[],a=e.filter(e=>e.correct).length,n=t.filter(e=>e.correct).length,s=e.reduce((e,t)=>e+(t.timeMs||0),0),r=t.reduce((e,t)=>e+(t.timeMs||0),0);return{creatorName:c.creatorName,opponentName:c.opponentName,creatorScore:a,opponentScore:n,creatorTime:s,opponentTime:r,totalQuestions:c.questions.length,questions:c.questions,creatorAnswers:e,opponentAnswers:t}})();if(!e)return null;const t="creator"===A,a=t?e.creatorScore:e.opponentScore,n=t?e.opponentScore:e.creatorScore,s=t?e.creatorTime:e.opponentTime,r=t?e.opponentTime:e.creatorTime,o=t?e.creatorName:e.opponentName,m=t?e.opponentName:e.creatorName,u=t?e.creatorAnswers:e.opponentAnswers,x=t?e.opponentAnswers:e.creatorAnswers,p=a>n||a===n&&s<r,g=a===n&&Math.abs(s-r)<500;return(0,h.jsx)("div",{className:"min-h-[calc(100vh-120px)] flex items-center justify-center p-4",children:(0,h.jsxs)("div",{className:"max-w-lg w-full bg-white rounded-2xl p-6 shadow-xl animate-fade-in",children:[(0,h.jsxs)("div",{className:"text-center mb-6",children:[(0,h.jsx)("div",{className:"text-5xl mb-2",children:g?"\ud83e\udd1d":p?"\ud83c\udfc6":"\ud83d\udcaa"}),(0,h.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:g?"It's a Tie!":p?"You Win!":"".concat(m," Wins!")})]}),(0,h.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-6 text-center",children:[(0,h.jsxs)("div",{className:"rounded-xl p-4 ".concat(p?"bg-violet-100 border-2 border-violet-400":"bg-gray-50"),children:[(0,h.jsxs)("p",{className:"text-sm font-semibold text-gray-500 mb-1 truncate",children:[o," (You)"]}),(0,h.jsx)("p",{className:"text-3xl font-bold text-violet-600",children:a}),(0,h.jsxs)("p",{className:"text-xs text-gray-400",children:[(s/1e3).toFixed(1),"s"]})]}),(0,h.jsx)("div",{className:"flex items-center justify-center",children:(0,h.jsx)("span",{className:"text-3xl font-bold text-gray-300",children:"vs"})}),(0,h.jsxs)("div",{className:"rounded-xl p-4 ".concat(p||g?"bg-gray-50":"bg-amber-100 border-2 border-amber-400"),children:[(0,h.jsx)("p",{className:"text-sm font-semibold text-gray-500 mb-1 truncate",children:m}),(0,h.jsx)("p",{className:"text-3xl font-bold text-amber-600",children:n}),(0,h.jsxs)("p",{className:"text-xs text-gray-400",children:[(r/1e3).toFixed(1),"s"]})]})]}),(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[(0,h.jsxs)("div",{className:"bg-violet-50 rounded-lg p-3 text-center",children:[(0,h.jsx)("p",{className:"text-xs text-gray-500",children:"Your Accuracy"}),(0,h.jsxs)("p",{className:"text-xl font-bold text-violet-600",children:[e.totalQuestions>0?Math.round(a/e.totalQuestions*100):0,"%"]})]}),(0,h.jsxs)("div",{className:"bg-amber-50 rounded-lg p-3 text-center",children:[(0,h.jsx)("p",{className:"text-xs text-gray-500",children:"Their Accuracy"}),(0,h.jsxs)("p",{className:"text-xl font-bold text-amber-600",children:[e.totalQuestions>0?Math.round(n/e.totalQuestions*100):0,"%"]})]})]}),(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("h3",{className:"font-bold text-gray-700 mb-3 text-sm",children:"Question Breakdown"}),(0,h.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:e.questions.map((e,t)=>{var a,n,s,r;return(0,h.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg text-sm",children:[(0,h.jsxs)("span",{className:"text-gray-400 font-mono w-5",children:[t+1,"."]}),(0,h.jsx)("span",{className:"flex-1 truncate text-gray-700",children:e.question}),(0,h.jsx)("span",{className:"w-6 text-center ".concat(null!==(a=u[t])&&void 0!==a&&a.correct?"text-green-600":"text-red-500"),children:null!==(n=u[t])&&void 0!==n&&n.correct?"\u2713":"\u2717"}),(0,h.jsx)("span",{className:"w-6 text-center ".concat(null!==(s=x[t])&&void 0!==s&&s.correct?"text-green-600":"text-red-500"),children:null!==(r=x[t])&&void 0!==r&&r.correct?"\u2713":"\u2717"})]},t)})}),(0,h.jsxs)("div",{className:"flex justify-end gap-4 mt-1 text-xs text-gray-400",children:[(0,h.jsx)("span",{children:"You"}),(0,h.jsx)("span",{children:"Them"})]})]}),(0,h.jsxs)("div",{className:"space-y-3",children:[(0,h.jsx)("button",{onClick:()=>{O.current&&O.current(),d(null),F([]),I(0),T(""),P(null),D(0),l("lobby"),w("")},className:"w-full bg-gradient-to-r from-violet-500 to-purple-600 text-white font-bold py-3 rounded-xl hover:shadow-lg transform hover:scale-105 transition",children:"\u2694\ufe0f New Challenge"}),(0,h.jsx)("button",{onClick:i,className:"w-full py-3 text-gray-500 font-semibold hover:text-gray-700 transition",children:"\u2190 Back to Modules"})]})]})})}return null}const _=["KG-1","2-3","4-5","6-7","7-8","9+"],A={"KG-1":{name:"Kindergarten - 1st Grade",color:"from-pink-400 to-red-400",icon:"\ud83c\udf88"},"2-3":{name:"2nd - 3rd Grade",color:"from-orange-400 to-yellow-400",icon:"\ud83c\udf1f"},"4-5":{name:"4th - 5th Grade",color:"from-green-400 to-teal-400",icon:"\ud83c\udfaf"},"6-7":{name:"6th - 7th Grade",color:"from-blue-400 to-cyan-400",icon:"\ud83d\ude80"},"7-8":{name:"7th - 8th Grade",color:"from-purple-400 to-indigo-400",icon:"\u26a1"},"9+":{name:"9th Grade and Above",color:"from-indigo-500 to-purple-600",icon:"\ud83c\udfc6"}};function E(e){var t;let{userId:a,userGrade:s,userProfile:r,onXPUpdate:o}=e;const[l,c]=(0,n.useState)(null),[d,m]=(0,n.useState)((e=>{if("string"===typeof e&&A[e])return e;const t=parseInt(e);return t<=1?"KG-1":t<=3?"2-3":t<=5?"4-5":t<=7?"6-7":t<=8?"7-8":"9+"})(s)||"4-5"),[u,p]=(0,n.useState)([]);if("challenge"===l)return(0,h.jsx)(j,{userId:a,userName:(null===r||void 0===r?void 0:r.name)||"Player",userGrade:d,selectedModules:u,onBack:()=>c(null)});if(l)return(0,h.jsx)(x,{userId:a,userGrade:d,mode:l,selectedModules:u,onEndSession:()=>{c(null)},onXPUpdate:o});const g=(null===(t=i(d))||void 0===t?void 0:t.modules)||[],f=g.map(e=>e.name);return(0,h.jsx)("div",{className:"min-h-[calc(100vh-52px)] bg-violet-50 p-2 sm:p-4 flex flex-col",children:(0,h.jsxs)("div",{className:"max-w-7xl mx-auto w-full flex flex-col h-full",children:[(0,h.jsxs)("div",{className:"text-center mb-2 flex-shrink-0",children:[(0,h.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-800 mb-0.5",children:"\ud83d\udcda Choose Your Modules"}),(0,h.jsxs)("p",{className:"text-xs sm:text-sm lg:text-base text-gray-600",children:["Hi ",null===r||void 0===r?void 0:r.name,"! Select a grade & modules \ud83d\udc4b"]})]}),(0,h.jsxs)("div",{className:"flex flex-col flex-1 gap-2",children:[(0,h.jsxs)("div",{className:"bg-white rounded-xl p-2 shadow-lg flex-shrink-0",children:[(0,h.jsx)("h3",{className:"text-sm sm:text-base lg:text-lg font-bold text-gray-800 mb-2",children:"\ud83c\udf93 Select Your Grade"}),(0,h.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-3 lg:grid-cols-6 gap-1.5 sm:gap-2",children:_.map(e=>{var t;const a=A[e],n=e===d,s=((null===(t=i(e))||void 0===t?void 0:t.modules)||[]).length;return(0,h.jsxs)("button",{onClick:()=>{m(e),p([])},"aria-label":"Select ".concat(a.name),"aria-pressed":n,className:"p-2 rounded-lg border-2 text-left transition-all duration-200 flex flex-col ".concat(n?"bg-gradient-to-r ".concat(a.color," text-white border-2 border-white shadow-lg"):"bg-gray-50 border-gray-300 hover:border-gray-400 hover:shadow-md hover:-translate-y-0.5"),children:[(0,h.jsx)("div",{className:"text-2xl sm:text-3xl lg:text-4xl mb-1",children:a.icon}),(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:"font-bold text-xs sm:text-sm lg:text-base ".concat(n?"text-white":"text-gray-800"," leading-tight"),children:e}),(0,h.jsx)("div",{className:"text-xs leading-tight ".concat(n?"text-white opacity-90":"text-gray-600"),children:a.name}),(0,h.jsxs)("div",{className:"text-xs leading-tight mt-1 ".concat(n?"text-white opacity-80":"text-gray-500"),children:[s," \ud83d\udcda"]})]})]},e)})})]}),(0,h.jsxs)("div",{className:"bg-white rounded-xl p-2 shadow-lg flex flex-col flex-1 overflow-hidden",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-2 flex-shrink-0",children:[(0,h.jsxs)("h3",{className:"text-sm sm:text-base lg:text-lg font-bold text-gray-800",children:["\ud83d\udcda Modules for ",d]}),(0,h.jsxs)("div",{className:"flex gap-1",children:[(0,h.jsx)("button",{onClick:()=>{p(f)},className:"px-3 py-2 min-h-[44px] text-xs sm:text-sm bg-emerald-500 text-white font-semibold rounded-lg hover:bg-emerald-600 transition",children:"\u2705 All"}),(0,h.jsx)("button",{onClick:()=>{p([])},className:"px-3 py-2 min-h-[44px] text-xs sm:text-sm bg-red-500 text-white font-semibold rounded-lg hover:bg-red-600 transition",children:"\u274c Clear"})]})]}),(0,h.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-1.5 sm:gap-2 overflow-y-auto flex-1 mb-2 content-start max-h-[40vh] sm:max-h-[50vh]",children:g.map((e,t)=>{const a=u.includes(e.name),n=["from-pink-400 to-rose-400","from-orange-400 to-amber-400","from-green-400 to-emerald-400","from-blue-400 to-cyan-400","from-purple-400 to-violet-400","from-teal-400 to-green-400","from-indigo-400 to-blue-400","from-yellow-400 to-orange-400","from-rose-400 to-pink-400","from-cyan-400 to-teal-400"],s={Addition:"\u2795",Subtraction:"\u2796",Multiplication:"\u2716\ufe0f",Division:"\u2797",Fractions:"\ud83e\udd67","Logic & Patterns":"\ud83e\udde9","Arithmetic Operations":"\ud83d\udd22",Arithmetic:"\ud83d\udd22","Arithmetic & Number Theory":"\ud83d\udd22","Fractions & Decimals":"\ud83e\udd67","Fractions, Decimals & Percentages":"\ud83d\udcaf",Geometry:"\ud83d\udcd0","Geometry & Trigonometry":"\ud83d\udcd0","Variables & Equations":"\ud83d\udd24",Algebra:"\ud83d\udd24","Pre-Algebra":"\ud83d\udd24","Statistics & Probability":"\ud83d\udcca","Advanced Reasoning":"\ud83e\udde0","Mathematical Reasoning":"\ud83e\udde0","Functions & Graphing":"\ud83d\udcc8","Functions & Analysis":"\ud83d\udcc8","Exponents & Roots":"\u26a1","Calculus Basics":"\u222b"}[e.name]||"\ud83d\udcd8",r=n[t%n.length];return(0,h.jsxs)("button",{onClick:()=>{return t=e.name,void p(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},"aria-label":"".concat(a?"Deselect":"Select"," ").concat(e.name," module"),"aria-pressed":a,className:"p-2 rounded-lg border-2 text-left transition-all duration-200 flex flex-col ".concat(a?"bg-gradient-to-r ".concat(r," text-white border-white shadow-lg"):"bg-gray-50 border-gray-300 hover:border-gray-400 hover:shadow-md hover:-translate-y-0.5"),children:[(0,h.jsx)("div",{className:"text-xl sm:text-2xl mb-1",children:a?"\u2705":s}),(0,h.jsx)("div",{className:"font-bold text-xs sm:text-sm leading-tight ".concat(a?"text-white":"text-gray-800"),children:e.name}),(0,h.jsxs)("div",{className:"text-xs leading-tight mt-0.5 ".concat(a?"text-white opacity-80":"text-gray-500"),children:[e.topics.length," topics"]})]},e.name)})}),0===u.length&&(0,h.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-2 flex-shrink-0 text-center",children:(0,h.jsx)("p",{className:"text-sm text-blue-700 font-semibold",children:"\ud83d\udc46 Tap modules above to get started!"})}),(0,h.jsxs)("div",{className:"grid grid-cols-3 gap-2 flex-shrink-0",children:[(0,h.jsx)("button",{onClick:()=>u.length>0&&c("play"),disabled:0===u.length,className:"bg-gradient-to-r from-amber-400 to-orange-500 text-white font-bold py-3 min-h-[44px] rounded-lg hover:shadow-lg transform hover:scale-105 transition disabled:opacity-50 text-xs sm:text-sm",children:"\ud83c\udfaf Play"}),(0,h.jsx)("button",{onClick:()=>u.length>0&&c("test"),disabled:0===u.length,className:"bg-gradient-to-r from-violet-500 to-purple-600 text-white font-bold py-3 min-h-[44px] rounded-lg hover:shadow-lg transform hover:scale-105 transition disabled:opacity-50 text-xs sm:text-sm",children:"\ud83d\udcdd Test"}),(0,h.jsx)("button",{onClick:()=>c("challenge"),className:"bg-gradient-to-r from-rose-500 to-pink-600 text-white font-bold py-3 min-h-[44px] rounded-lg hover:shadow-lg transform hover:scale-105 transition text-xs sm:text-sm",children:"\u2694\ufe0f Challenge"})]})]})]})]})})}}}]);
//# sourceMappingURL=479.50cc6fac.chunk.js.map