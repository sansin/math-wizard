"use strict";(self.webpackChunkmath_wizard=self.webpackChunkmath_wizard||[]).push([[347],{347(e,s,t){t.r(s),t.d(s,{default:()=>i});var a=t(379),l=t(43),r=t(879),n=t(472),d=t(786),o=t(579);function i(e){let{userId:s,userProfile:t,onBack:i,onProfileUpdated:c}=e;const[m,u]=(0,l.useState)(!1),[x,g]=(0,l.useState)({name:(null===t||void 0===t?void 0:t.name)||"",age:(null===t||void 0===t?void 0:t.age)||"",grade:(null===t||void 0===t?void 0:t.grade)||""}),[b,h]=(0,l.useState)(""),[p,v]=(0,l.useState)(""),[f,j]=(0,l.useState)(""),[y,N]=(0,l.useState)(!1),w=(0,l.useRef)(null);(0,l.useEffect)(()=>()=>{w.current&&clearTimeout(w.current)},[]);return(0,o.jsx)("div",{className:"min-h-screen bg-violet-50 p-4 sm:p-6",children:(0,o.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,o.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-800",children:"\u2699\ufe0f Settings"}),(0,o.jsx)("button",{onClick:i,className:"px-6 py-2 min-h-[44px] bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition",children:"\u2190 Back"})]}),(0,o.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-6",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83d\udc64 My Profile"}),(0,o.jsx)("button",{onClick:()=>u(!m),className:"px-4 py-2 min-h-[44px] rounded-lg font-semibold transition ".concat(m?"bg-red-500 text-white hover:bg-red-600":"bg-violet-500 text-white hover:bg-violet-600"),children:m?"Cancel":"\u270f\ufe0f Edit"})]}),m?(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),N(!0),j("");try{if(await(0,n.mZ)((0,n.H9)(r.db,"users",s),{name:x.name,age:parseInt(x.age),grade:parseInt(x.grade),updatedAt:new Date}),b||p){if(b!==p)return j("\u274c Passwords do not match"),void N(!1);if(b.length<6)return j("\u274c Password must be at least 6 characters"),void N(!1);try{await(0,d.f3)(r.j.currentUser,b),h(""),v("")}catch(t){return"auth/requires-recent-login"===t.code?j("\u274c For security, please log out and log back in before changing your password."):j("\u274c Password error: ".concat(t.message)),void N(!1)}}j("\u2705 Profile updated successfully!"),u(!1),c&&await c(),w.current=setTimeout(()=>{i()},1500)}catch(a){j("\u274c Error: ".concat(a.message))}finally{N(!1)}},className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Name"}),(0,o.jsx)("input",{type:"text",value:x.name,onChange:e=>g((0,a.A)((0,a.A)({},x),{},{name:e.target.value})),maxLength:25,className:"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600",required:!0})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Age"}),(0,o.jsx)("input",{type:"number",value:x.age,onChange:e=>g((0,a.A)((0,a.A)({},x),{},{age:e.target.value})),className:"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600",min:"4",max:"18",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Grade"}),(0,o.jsx)("select",{value:x.grade,onChange:e=>g((0,a.A)((0,a.A)({},x),{},{grade:e.target.value})),className:"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600",required:!0,children:[1,2,3,4,5,6,7,8,9,10].map(e=>(0,o.jsxs)("option",{value:e,children:["Grade ",e]},e))})]})]}),!(null!==t&&void 0!==t&&t.isGuest)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"pt-4 border-t-2 border-gray-200",children:(0,o.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"\ud83d\udd10 Change Password (Optional)"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"New Password"}),(0,o.jsx)("input",{type:"password",value:b,onChange:e=>h(e.target.value),placeholder:"Leave blank to keep current password",className:"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Confirm Password"}),(0,o.jsx)("input",{type:"password",value:p,onChange:e=>v(e.target.value),placeholder:"Confirm new password",className:"w-full p-3 border-2 border-violet-300 rounded-lg focus:outline-none focus:border-violet-600"})]})]}),f&&(0,o.jsx)("div",{className:"p-3 rounded-lg text-sm font-semibold ".concat(f.includes("\u2705")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:f}),(0,o.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-violet-500 to-purple-600 text-white font-bold py-3 min-h-[44px] rounded-lg hover:shadow-lg transform hover:scale-105 transition disabled:opacity-50",children:y?"Saving...":"\ud83d\udcbe Save Changes"})]}):(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[(0,o.jsx)("span",{className:"font-semibold text-gray-700",children:"Name:"}),(0,o.jsx)("span",{className:"text-xl text-violet-600",children:x.name})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[(0,o.jsx)("span",{className:"font-semibold text-gray-700",children:"Age:"}),(0,o.jsxs)("span",{className:"text-xl text-violet-600",children:[x.age," years"]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[(0,o.jsx)("span",{className:"font-semibold text-gray-700",children:"Grade:"}),(0,o.jsxs)("span",{className:"text-xl text-violet-600",children:["Grade ",x.grade]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[(0,o.jsx)("span",{className:"font-semibold text-gray-700",children:"Email:"}),(0,o.jsx)("span",{className:"text-sm text-gray-600",children:null===t||void 0===t?void 0:t.email})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[(0,o.jsx)("span",{className:"font-semibold text-gray-700",children:"Account Type:"}),(0,o.jsx)("span",{className:"text-sm font-bold px-3 py-1 rounded-full bg-violet-200 text-violet-800",children:null!==t&&void 0!==t&&t.isGuest?"Guest":"Premium"})]})]})]}),(0,o.jsxs)("div",{className:"bg-violet-50 border-l-4 border-violet-500 rounded-lg p-6",children:[(0,o.jsx)("h3",{className:"font-bold text-violet-800 mb-3",children:"\ud83d\udca1 Settings Tips"}),(0,o.jsxs)("ul",{className:"text-sm text-violet-700 space-y-2",children:[(0,o.jsx)("li",{children:"\u2705 Update your age/grade to get better recommendations"}),(0,o.jsx)("li",{children:"\u2705 Change your name anytime"}),(0,o.jsx)("li",{children:"\u2705 Password changes are secure and encrypted"}),(0,o.jsx)("li",{children:"\u2705 Your progress is always saved to the cloud"})]})]})]})})}}}]);
//# sourceMappingURL=347.cecb34f6.chunk.js.map