"use strict";(self.webpackChunkmath_wizard=self.webpackChunkmath_wizard||[]).push([[59],{59(e,t,s){s.r(t),s.d(t,{default:()=>d});var a=s(43),l=s(170),r=(s(351),s(765)),i=s(162),o=s(579);function n(e){const t=Math.floor(e/3600),s=Math.floor(e%3600/60);return t>0?"".concat(t,"h ").concat(s,"m"):"".concat(s,"m")}function d(e){var t;let{userId:s,userProfile:d,onBack:c}=e;const[m,x]=(0,a.useState)(null),[h,u]=(0,a.useState)(null),[g,p]=(0,a.useState)(null),[b,j]=(0,a.useState)([]),[v,y]=(0,a.useState)(!0),f=(0,a.useCallback)(async()=>{y(!0);try{const[e,t,a]=await Promise.all([(0,r.hj)(s),(0,r.mT)(s),(0,i.g1)(s)]);x(e),u(a);const l=new Date,o=[];for(let s=6;s>=0;s--){const e=new Date(l);e.setDate(e.getDate()-s),o.push(e.toISOString().slice(0,10))}const n={};if(o.forEach(e=>{n[e]={correct:0,total:0}}),t&&t.length>0){t.forEach(e=>{var t;let s;if(null!==(t=e.timestamp)&&void 0!==t&&t.toDate)s=e.timestamp.toDate();else{if(!e.timestamp)return;s=new Date(e.timestamp)}const a=s.toISOString().slice(0,10);n[a]&&(n[a].total++,e.correct&&n[a].correct++)});const e=t.slice(-20).reverse().map(e=>{var t;let s;return s=null!==(t=e.timestamp)&&void 0!==t&&t.toDate?e.timestamp.toDate():e.timestamp?new Date(e.timestamp):new Date,{question:e.question||"Question",operation:e.operation||"general",correct:!!e.correct,date:s}});j(e)}p({labels:o.map(e=>new Date(e+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})),questions:o.map(e=>n[e].total),accuracy:o.map(e=>n[e].total>0?Math.round(n[e].correct/n[e].total*100):null)})}catch(e){console.error("Error loading parent dashboard:",e)}finally{y(!1)}},[s]);if((0,a.useEffect)(()=>{f()},[f]),v)return(0,o.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6",children:(0,o.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,o.jsx)("div",{className:"skeleton h-9 w-64 mx-auto mb-4 rounded"}),(0,o.jsx)("div",{className:"skeleton h-5 w-48 mx-auto mb-8 rounded"}),(0,o.jsx)("div",{className:"grid sm:grid-cols-3 gap-4 mb-8",children:[1,2,3].map(e=>(0,o.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,o.jsx)("div",{className:"skeleton h-5 w-24 mb-3 rounded"}),(0,o.jsx)("div",{className:"skeleton h-8 w-20 mb-2 rounded"}),(0,o.jsx)("div",{className:"skeleton h-3 w-full rounded"})]},e))}),(0,o.jsx)("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[1,2].map(e=>(0,o.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,o.jsx)("div",{className:"skeleton h-6 w-40 mb-4 rounded"}),(0,o.jsx)("div",{className:"skeleton h-56 w-full rounded"})]},e))})]})});const N=(0,i.C7)((null===h||void 0===h?void 0:h.totalXP)||0),w=45*((null===m||void 0===m?void 0:m.totalQuestions)||0),k=g?g.questions.reduce((e,t)=>e+t,0):0,A=45*k,C=(null===m||void 0===m||null===(t=m.weakAreas)||void 0===t?void 0:t.length)>0,D={labels:C?m.weakAreas.map(e=>e.name.charAt(0).toUpperCase()+e.name.slice(1)):["No data"],datasets:[{data:C?m.weakAreas.map(e=>e.total):[1],backgroundColor:C?["#7C3AED","#F59E0B","#10B981","#EF4444","#3B82F6","#EC4899","#8B5CF6","#14B8A6","#F97316","#6366F1"].slice(0,m.weakAreas.length):["#E5E7EB"],borderWidth:2,borderColor:"#fff"}]},S=g?{labels:g.labels,datasets:[{label:"Questions",data:g.questions,borderColor:"#7C3AED",backgroundColor:"rgba(124, 58, 237, 0.1)",tension:.4,fill:!0,pointRadius:5,pointBackgroundColor:"#7C3AED",yAxisID:"y"},{label:"Accuracy %",data:g.accuracy,borderColor:"#10B981",backgroundColor:"rgba(16, 185, 129, 0.08)",tension:.4,fill:!1,pointRadius:5,pointBackgroundColor:"#10B981",borderDash:[5,5],yAxisID:"y1",spanGaps:!0}]}:null,E=((null===m||void 0===m?void 0:m.weakAreas)||[]).filter(e=>e.accuracy>=70).sort((e,t)=>t.accuracy-e.accuracy),B=((null===m||void 0===m?void 0:m.weakAreas)||[]).filter(e=>e.accuracy<70).sort((e,t)=>e.accuracy-t.accuracy);return(0,o.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6",children:(0,o.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67 Parent Dashboard"}),(0,o.jsxs)("p",{className:"text-gray-500 text-sm mt-1",children:["Progress report for ",(0,o.jsx)("span",{className:"font-semibold text-violet-600",children:null===d||void 0===d?void 0:d.name})]})]}),(0,o.jsx)("button",{onClick:c,className:"px-5 py-2 min-h-[44px] bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition font-semibold",children:"\u2190 Back"})]}),(0,o.jsxs)("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,o.jsxs)("div",{className:"bg-white rounded-xl p-5 shadow-lg border-t-4 border-violet-500",children:[(0,o.jsx)("p",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Level"}),(0,o.jsxs)("p",{className:"text-2xl font-bold text-violet-600",children:["Lv. ",N]}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(0,i.fS)(N)}),(0,o.jsx)("div",{className:"w-full h-2 bg-gray-200 rounded-full mt-2 overflow-hidden",children:(0,o.jsx)("div",{className:"h-full bg-gradient-to-r from-violet-400 to-purple-600 rounded-full transition-all",style:{width:"".concat(Math.round(100*(0,i.KH)((null===h||void 0===h?void 0:h.totalXP)||0)),"%")}})}),(0,o.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[(null===h||void 0===h?void 0:h.totalXP)||0," XP total \u2022 ",(0,i.Nu)((null===h||void 0===h?void 0:h.totalXP)||0)," to next"]})]}),(0,o.jsxs)("div",{className:"bg-white rounded-xl p-5 shadow-lg border-t-4 border-amber-500",children:[(0,o.jsx)("p",{className:"text-sm font-semibold text-gray-500 mb-1",children:"This Week"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-amber-600",children:k}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"questions answered"}),(0,o.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["\u23f1\ufe0f ~",n(A)," estimated"]})]}),(0,o.jsxs)("div",{className:"bg-white rounded-xl p-5 shadow-lg border-t-4 border-emerald-500",children:[(0,o.jsx)("p",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Accuracy"}),(0,o.jsxs)("p",{className:"text-2xl font-bold text-emerald-600",children:[(null===m||void 0===m?void 0:m.accuracy)||0,"%"]}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"overall score"}),(0,o.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:[(null===m||void 0===m?void 0:m.totalQuestions)||0," total questions"]})]}),(0,o.jsxs)("div",{className:"bg-white rounded-xl p-5 shadow-lg border-t-4 border-blue-500",children:[(0,o.jsx)("p",{className:"text-sm font-semibold text-gray-500 mb-1",children:"Total Time"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:n(w)}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"estimated practice time"}),(0,o.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Grade ",null===d||void 0===d?void 0:d.grade," \u2022 Age ",null===d||void 0===d?void 0:d.age]})]})]}),(0,o.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[(0,o.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,o.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83d\udcc5 Weekly Activity"}),S?(0,o.jsx)("div",{className:"relative h-64",children:(0,o.jsx)(l.N1,{data:S,options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,labels:{font:{size:11},padding:10}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Questions"},ticks:{font:{size:10}}},y1:{beginAtZero:!0,max:100,position:"right",title:{display:!0,text:"Accuracy %"},ticks:{font:{size:10}},grid:{drawOnChartArea:!1}},x:{ticks:{font:{size:9},maxRotation:45}}}}})}):(0,o.jsx)("div",{className:"h-64 flex items-center justify-center text-gray-400",children:"No data yet"})]}),(0,o.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,o.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83c\udfaf Topic Distribution"}),(0,o.jsx)("div",{className:"relative h-64 flex items-center justify-center",children:(0,o.jsx)(l.nu,{data:D,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{font:{size:11},padding:8,boxWidth:12}}}}})})]})]}),(0,o.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[(0,o.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,o.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83d\udcaa Strengths"}),E.length>0?(0,o.jsx)("ul",{className:"space-y-2",children:E.map((e,t)=>(0,o.jsxs)("li",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[(0,o.jsx)("span",{className:"font-semibold text-green-700 capitalize",children:e.name}),(0,o.jsxs)("span",{className:"text-sm font-bold text-green-600 bg-green-200 px-3 py-1 rounded-full",children:[e.accuracy,"%"]})]},t))}):(0,o.jsx)("p",{className:"text-gray-400 text-sm text-center py-4",children:"Keep practicing to build strengths!"})]}),(0,o.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,o.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83d\udcc8 Areas for Improvement"}),B.length>0?(0,o.jsx)("ul",{className:"space-y-2",children:B.map((e,t)=>(0,o.jsxs)("li",{className:"flex items-center justify-between p-3 bg-amber-50 rounded-lg",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"font-semibold text-amber-700 capitalize block",children:e.name}),(0,o.jsxs)("span",{className:"text-xs text-gray-500",children:[e.total," questions attempted"]})]}),(0,o.jsxs)("span",{className:"text-sm font-bold px-3 py-1 rounded-full ".concat(e.accuracy<50?"text-red-600 bg-red-100":"text-amber-600 bg-amber-200"),children:[e.accuracy,"%"]})]},t))}):(0,o.jsx)("p",{className:"text-gray-400 text-sm text-center py-4",children:"Great job \u2014 all topics above 70%!"})]})]}),(0,o.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg mb-8",children:[(0,o.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83d\udd50 Recent Activity"}),b.length>0?(0,o.jsx)("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:b.map((e,t)=>(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg text-sm ".concat(e.correct?"bg-green-50":"bg-red-50"),children:[(0,o.jsxs)("div",{className:"flex-1 min-w-0 mr-3",children:[(0,o.jsx)("p",{className:"font-medium text-gray-800 truncate",children:e.question}),(0,o.jsxs)("p",{className:"text-xs text-gray-500 capitalize",children:[e.operation," \u2022 ",e.date.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})]})]}),(0,o.jsx)("span",{className:"flex-shrink-0 px-2 py-1 rounded-full text-xs font-bold ".concat(e.correct?"bg-green-200 text-green-700":"bg-red-200 text-red-700"),children:e.correct?"\u2713 Correct":"\u2717 Wrong"})]},t))}):(0,o.jsx)("p",{className:"text-gray-400 text-sm text-center py-4",children:"No activity yet \u2014 start practicing!"})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border-l-4 border-blue-500",children:[(0,o.jsx)("h3",{className:"font-bold text-blue-800 mb-3",children:"\ud83d\udca1 Tips for Parents"}),(0,o.jsxs)("ul",{className:"text-sm text-blue-700 space-y-2",children:[(0,o.jsx)("li",{children:"\ud83d\udcca Check this dashboard weekly to monitor learning progress"}),(0,o.jsx)("li",{children:"\ud83c\udfaf Encourage practice on topics with accuracy below 70%"}),(0,o.jsx)("li",{children:"\ud83d\udd25 Celebrate streaks and level-ups to keep motivation high"}),(0,o.jsx)("li",{children:"\u23f0 Aim for at least 10 questions per day for steady improvement"}),(0,o.jsx)("li",{children:"\ud83e\uddea Use Test mode periodically to track progress on specific topics"})]})]})]})})}}}]);
//# sourceMappingURL=59.75a044ee.chunk.js.map