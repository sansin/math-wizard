"use strict";(self.webpackChunkmath_wizard=self.webpackChunkmath_wizard||[]).push([[11],{11(e,s,a){a.r(s),a.d(s,{default:()=>o});var l=a(43),t=a(170),r=(a(351),a(765)),d=a(162),i=a(579);function c(e){let{userId:s}=e;const[a,c]=(0,l.useState)({totalQuestions:0,accuracy:0,streak:0,weakAreas:[],sessionData:[]}),[o,n]=(0,l.useState)({labels:[],data:[]}),[x,m]=(0,l.useState)({totalXP:0,level:1,dailyQuestions:0,dailyGoal:10}),[h,g]=(0,l.useState)(!0);(0,l.useEffect)(()=>{u()},[s]);const u=async()=>{g(!0);try{const[e,a,l]=await Promise.all([(0,r.hj)(s),(0,r.mT)(s),(0,d.g1)(s)]);if(c(e),m(l),a&&a.length>0){const e={};a.forEach(s=>{var a;let l;l=null!==(a=s.timestamp)&&void 0!==a&&a.toDate?s.timestamp.toDate():s.timestamp?new Date(s.timestamp):new Date;const t=l.toLocaleDateString("en-US",{month:"short",day:"numeric"});e[t]||(e[t]={correct:0,total:0,ts:l}),e[t].total++,s.correct&&e[t].correct++});const s=Object.entries(e).sort((e,s)=>{let[,a]=e,[,l]=s;return a.ts-l.ts}).slice(-7);n({labels:s.map(e=>{let[s]=e;return s}),data:s.map(e=>{let[,s]=e;return Math.round(s.correct/s.total*100)})})}}catch(e){console.error("Error loading analytics:",e)}finally{g(!1)}},b=o.labels.length>0,p=(0,l.useMemo)(()=>({labels:b?o.labels:["No data yet"],datasets:[{label:"Accuracy (%)",data:b?o.data:[0],borderColor:"#7C3AED",backgroundColor:"rgba(124, 58, 237, 0.1)",tension:.4,fill:!0,pointRadius:6,pointBackgroundColor:"#7C3AED",pointBorderColor:"#fff",pointBorderWidth:2}]}),[b,o]),j=(0,l.useMemo)(()=>({labels:a.weakAreas.map(e=>e.name.charAt(0).toUpperCase()+e.name.slice(1)),datasets:[{label:"Accuracy by Topic (%)",data:a.weakAreas.map(e=>e.accuracy),backgroundColor:["rgba(255, 99, 132, 0.7)","rgba(54, 162, 235, 0.7)","rgba(255, 206, 86, 0.7)","rgba(75, 192, 192, 0.7)","rgba(153, 102, 255, 0.7)"],borderColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF"],borderWidth:2}]}),[a.weakAreas]),N=(0,l.useMemo)(()=>({responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!0,labels:{font:{size:12,weight:"bold"},padding:15}}},scales:{y:{beginAtZero:!0,max:100,ticks:{font:{size:11}}},x:{ticks:{font:{size:11}}}}}),[]);return h?(0,i.jsx)("div",{className:"min-h-screen bg-violet-50 p-4 sm:p-6",children:(0,i.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("div",{className:"skeleton h-9 w-56 mx-auto mb-3 rounded"}),(0,i.jsx)("div",{className:"skeleton h-5 w-40 mx-auto rounded"})]}),(0,i.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4 mb-8",children:[(0,i.jsxs)("div",{className:"bg-white rounded-xl p-5 shadow-lg",children:[(0,i.jsx)("div",{className:"skeleton h-5 w-20 mb-2 rounded"}),(0,i.jsx)("div",{className:"skeleton h-7 w-32 mb-3 rounded"}),(0,i.jsx)("div",{className:"skeleton h-3 w-full rounded-full"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl p-5 shadow-lg",children:[(0,i.jsx)("div",{className:"skeleton h-5 w-24 mb-2 rounded"}),(0,i.jsx)("div",{className:"skeleton h-7 w-36 mb-3 rounded"}),(0,i.jsx)("div",{className:"skeleton h-3 w-full rounded-full"})]})]}),(0,i.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[1,2,3,4].map(e=>(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[(0,i.jsx)("div",{className:"skeleton h-4 w-24 mb-3 rounded"}),(0,i.jsx)("div",{className:"skeleton h-10 w-16 mb-2 rounded"}),(0,i.jsx)("div",{className:"skeleton h-3 w-20 rounded"})]},e))}),(0,i.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[(0,i.jsx)("div",{className:"skeleton h-6 w-36 mb-4 rounded"}),(0,i.jsx)("div",{className:"skeleton h-80 w-full rounded"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[(0,i.jsx)("div",{className:"skeleton h-6 w-36 mb-4 rounded"}),(0,i.jsx)("div",{className:"skeleton h-80 w-full rounded"})]})]})]})}):(0,i.jsx)("div",{className:"min-h-screen bg-violet-50 p-4 sm:p-6",children:(0,i.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-800 mb-2",children:"\ud83d\udcca Your Progress"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Keep learning and improving! \ud83d\ude80"})]}),(0,i.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4 mb-8",children:[(0,i.jsxs)("div",{className:"bg-white rounded-xl p-5 shadow-lg border-2 border-violet-200",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{className:"text-sm font-semibold text-gray-500",children:["Level ",(0,d.C7)(x.totalXP)]}),(0,i.jsx)("p",{className:"text-xl font-bold text-violet-600",children:(0,d.fS)((0,d.C7)(x.totalXP))})]}),(0,i.jsx)("div",{className:"text-3xl",children:(0,d.C7)(x.totalXP)>=8?"\ud83c\udfc6":(0,d.C7)(x.totalXP)>=5?"\u2b50":"\ud83c\udf31"})]}),(0,i.jsx)("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,i.jsx)("div",{className:"h-full bg-gradient-to-r from-violet-400 to-purple-600 rounded-full transition-all duration-700 relative",style:{width:"".concat(Math.round(100*(0,d.KH)(x.totalXP)),"%")},children:(0,i.jsx)("div",{className:"absolute inset-0 xp-bar-shimmer rounded-full"})})}),(0,i.jsxs)("div",{className:"flex justify-between mt-1 text-xs text-gray-500",children:[(0,i.jsxs)("span",{children:["\u26a1 ",x.totalXP," XP"]}),(0,i.jsx)("span",{children:(0,d.Nu)(x.totalXP)>0?"".concat((0,d.Nu)(x.totalXP)," XP to next level"):"Max level!"})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl p-5 shadow-lg border-2 border-amber-200",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-semibold text-gray-500",children:"Daily Goal"}),(0,i.jsxs)("p",{className:"text-xl font-bold text-amber-600",children:[Math.min(x.dailyQuestions,x.dailyGoal),"/",x.dailyGoal," questions"]})]}),(0,i.jsx)("div",{className:"text-3xl",children:x.dailyQuestions>=x.dailyGoal?"\ud83c\udfaf":"\ud83d\udccb"})]}),(0,i.jsx)("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,i.jsx)("div",{className:"h-full bg-gradient-to-r from-amber-400 to-orange-500 rounded-full transition-all duration-700",style:{width:"".concat(Math.min(100,Math.round(x.dailyQuestions/x.dailyGoal*100)),"%")}})}),(0,i.jsxs)("div",{className:"flex justify-between mt-1 text-xs text-gray-500",children:[(0,i.jsx)("span",{children:x.dailyQuestions>=x.dailyGoal?"\u2705 Goal complete!":"".concat(x.dailyGoal-x.dailyQuestions," more to go")}),(0,i.jsx)("span",{children:(new Date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg border-l-4 border-amber-400",children:[(0,i.jsx)("p",{className:"text-gray-600 text-sm font-semibold mb-2",children:"Total Questions"}),(0,i.jsx)("p",{className:"text-3xl sm:text-4xl font-bold text-amber-500",children:a.totalQuestions}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"questions answered"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg border-l-4 border-emerald-400",children:[(0,i.jsx)("p",{className:"text-gray-600 text-sm font-semibold mb-2",children:"Accuracy"}),(0,i.jsxs)("p",{className:"text-3xl sm:text-4xl font-bold text-emerald-500",children:[a.accuracy,"%"]}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"overall score"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg border-l-4 border-violet-400",children:[(0,i.jsx)("p",{className:"text-gray-600 text-sm font-semibold mb-2",children:"Current Streak \ud83d\udd25"}),(0,i.jsx)("p",{className:"text-3xl sm:text-4xl font-bold text-violet-500",children:a.streak}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"correct in a row"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg border-l-4 border-purple-400",children:[(0,i.jsx)("p",{className:"text-gray-600 text-sm font-semibold mb-2",children:"Topics"}),(0,i.jsx)("p",{className:"text-3xl sm:text-4xl font-bold text-purple-500",children:a.weakAreas.length}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"types practiced"})]})]}),(0,i.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[(0,i.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"\ud83d\udcc8 Accuracy Trend"}),(0,i.jsx)("div",{className:"relative h-80",children:(0,i.jsx)(t.N1,{data:p,options:N})})]}),a.weakAreas.length>0?(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[(0,i.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"\ud83d\udcca Accuracy by Topic"}),(0,i.jsx)("div",{className:"relative h-80",children:(0,i.jsx)(t.yP,{data:j,options:N})})]}):(0,i.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-lg flex flex-col items-center justify-center text-center",children:[(0,i.jsx)("div",{className:"text-5xl mb-3",children:"\ud83d\udcca"}),(0,i.jsx)("p",{className:"text-lg font-bold text-gray-700 mb-1",children:"No topic data yet!"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Answer some questions and your charts will appear here."})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[(0,i.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"\ud83d\udcaa Focus Areas"}),a.weakAreas.length>0?(0,i.jsx)("ul",{className:"space-y-3",children:a.weakAreas.map((e,s)=>{let a="bg-red-100",l="text-red-700",t="bg-red-500";return e.accuracy>=70?(a="bg-green-100",l="text-green-700",t="bg-green-500"):e.accuracy>=50&&(a="bg-yellow-100",l="text-yellow-700",t="bg-yellow-500"),(0,i.jsxs)("div",{className:"flex justify-between items-center p-4 ".concat(a," rounded-lg border-l-4 ").concat(e.accuracy>=70?"border-green-500":e.accuracy>=50?"border-yellow-500":"border-red-500"),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-semibold ".concat(l," block capitalize text-lg"),children:e.name}),(0,i.jsxs)("span",{className:"text-sm text-gray-600",children:[e.total," questions"]})]}),(0,i.jsxs)("span",{className:"px-4 py-2 rounded-full text-white text-lg font-bold ".concat(t),children:[e.accuracy,"%"]})]},s)})}):(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)("div",{className:"text-5xl mb-3",children:"\ud83e\uddd9"}),(0,i.jsx)("p",{className:"text-lg font-bold text-gray-700 mb-1",children:"No progress data yet!"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Start practicing and your focus areas will show up here."})]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-r from-violet-50 to-purple-50 rounded-lg p-6 mt-8",children:[(0,i.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"\ud83d\udca1 Tips for Success"}),(0,i.jsxs)("ul",{className:"grid md:grid-cols-2 gap-4 text-gray-700",children:[(0,i.jsxs)("li",{className:"flex items-start",children:[(0,i.jsx)("span",{className:"text-2xl mr-3",children:"\ud83c\udfaf"}),(0,i.jsx)("span",{children:"Focus on weak areas to improve faster"})]}),(0,i.jsxs)("li",{className:"flex items-start",children:[(0,i.jsx)("span",{className:"text-2xl mr-3",children:"\ud83d\udd25"}),(0,i.jsx)("span",{children:"Build streaks by answering correctly in a row"})]}),(0,i.jsxs)("li",{className:"flex items-start",children:[(0,i.jsx)("span",{className:"text-2xl mr-3",children:"\ud83d\udcda"}),(0,i.jsx)("span",{children:"Practice different operation types regularly"})]}),(0,i.jsxs)("li",{className:"flex items-start",children:[(0,i.jsx)("span",{className:"text-2xl mr-3",children:"\u23f0"}),(0,i.jsx)("span",{children:"Challenge yourself with timed tests"})]})]})]})]})})}const o=l.memo(c)}}]);
//# sourceMappingURL=11.8a4f2321.chunk.js.map